(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{10:function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return u}));var n=s(42),i=s(63),a=s(102);const r=n.ab.create({position:i.a.TOP}),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,s=arguments.length>2?arguments[2]:void 0;return r.show({intent:a.a.SUCCESS,message:e,timeout:t},s)},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,s=arguments.length>2?arguments[2]:void 0;return r.show({intent:a.a.WARNING,message:e,timeout:t},s)},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,s=arguments.length>2?arguments[2]:void 0;return r.show({intent:a.a.DANGER,message:e,timeout:t},s)},d=(e,t)=>r.show(e,t),u=e=>r.dismiss(e)},100:function(e,t,s){"use strict";s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return d})),s.d(t,"a",(function(){return u})),s.d(t,"h",(function(){return h})),s.d(t,"c",(function(){return p})),s.d(t,"e",(function(){return g})),s.d(t,"d",(function(){return m})),s.d(t,"b",(function(){return b}));var n=s(279),i=s.n(n),a=s(28),r=(s(106),s(33)),o=s(174);s(216),s(300);function c(e){let{context:t}=e;try{o.a.drawEnv(t)}catch(s){throw new Error("Env visualizer is not enabled")}}function l(){if(!window.Inspector)throw new Error("Inspector not loaded");window.Inspector.highlightClean()}function d(e){if(!window.Inspector)throw new Error("Inspector not loaded");window.Inspector.highlightLine(e)}function u(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Variant.DEFAULT;return i()(s,e,t)}function h(e){function t(){}t.prototype=e.runtime.environments[0].head;const s=new t,n=new Proxy(e.runtime.environments[0],{get:(e,t,n)=>"head"===t?s:e[t]}),i=new Proxy(e.runtime.environments,{get:(e,t,s)=>"0"===t?n:e[t]}),a=new Proxy(e.runtime,{get:(e,t,s)=>"environments"===t?i:e[t]});return new Proxy(e,{get(e,t,s){switch(t){case"chapter":return 4;case"runtime":return a;default:return e[t]}}})}function p(e,t){const s=e.runtime.environments[0].head,n=t.runtime.environments[0].head;return Object(r.difference)(Object(r.keys)(s),Object(r.keys)(n))}function g(e,t){return`const _____${t} = [${e.join(", ")}];`}function m(e,t){const s=`_____${t}`;return e.map(((e,t)=>"makeUndefinedErrorFunction"===e?"":`const ${e} = ${s}[${t}];`)).join("\n")}function b(e){return e.map((e=>"makeUndefinedErrorFunction"===e?"":`const ${e} = makeUndefinedErrorFunction('${e}');`)).join("\n")}},103:function(e,t,s){"use strict";let n;s.d(t,"a",(function(){return n})),function(e){e.new="new",e.deadline="deadline",e.autograded="autograded",e.graded="graded",e.submitted="submitted",e.unsubmitted="unsubmitted",e.new_message="new_message"}(n||(n={}))},106:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineTreeToString=t.stringDagToSingleLine=t.stringDagToLineTree=t.valueToStringDag=t.typeToString=t.stringify=void 0;const n=s(310),i=s(383);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{_next:0};function s(e){return a(e,t)}switch(e.kind){case"primitive":return e.name;case"variable":return e.constraint&&"none"!==e.constraint?e.constraint:(e.name in t||(t[e.name]="T"+t._next++),t[e.name]);case"list":return`List<${s(e.elementType)}>`;case"array":return`Array<${s(e.elementType)}>`;case"pair":const n=s(e.headType);return"list"===e.tailType.kind&&n===s(e.tailType.elementType)?`List<${n}>`:`[${s(e.headType)}, ${s(e.tailType)}]`;case"function":let i=e.parameterTypes.map(s).join(", ");return 1===e.parameterTypes.length&&"function"!==e.parameterTypes[0].kind||(i=`(${i})`),`${i} -> ${s(e.returnType)}`;default:return"Unable to infer type"}}function r(e){const t=new Map,s=new Map;function i(e,n,i,a){const o=s.get(e);if(void 0!==o)return[o,!1];t.set(e,t.size);const c=n.map(r);let l=i.length+a.length+2*Math.max(0,c.length-1),d=!1;for(let t=0;t<c.length;t++)null==c[t]&&(c[t]=r(void 0)),l+=c[t][0].length,d||(d=c[t][1]);t.delete(e);const u={type:"arraylike",elems:c.map((e=>e[0])),prefix:i,suffix:a,length:l};return d||s.set(e,u),[u,d]}function a(e){const t=e.split("\n");return 1===t.length?[{type:"terminal",str:t[0],length:t[0].length},!1]:[{type:"multiline",lines:t,length:1/0},!1]}function r(e){if(null===e)return[{type:"terminal",str:"null",length:4},!1];if(void 0===e)return[{type:"terminal",str:"undefined",length:9},!1];if(t.has(e))return[{type:"terminal",str:"...<circular>",length:13},!0];if("string"===typeof e){const t=JSON.stringify(e);return[{type:"terminal",str:t,length:t.length},!1]}return"object"!==typeof e?a(e.toString()):t.size>n.MAX_LIST_DISPLAY_LENGTH?[{type:"terminal",str:"...<truncated>",length:14},!1]:"function"===typeof e.toReplString?a(e.toReplString()):Array.isArray(e)?2===e.length?function(e){const n=s.get(e);if(void 0!==n)return[n,!1];t.set(e,t.size);const i=e,[a,o]=r(i[0]),[c,l]=r(i[1]),d=o||l;t.delete(e);const u={type:"pair",head:a,tail:c,length:a.length+c.length+4};return d||s.set(e,u),[u,d]}(e):i(e,e,"[","]"):function(e){return"string"===typeof e.replPrefix&&"string"===typeof e.replSuffix&&"function"===typeof e.replArrayContents}(e)?i(e,e.replArrayContents(),e.replPrefix,e.replSuffix):Object.getPrototypeOf(e)===Object.prototype?function(e){const n=s.get(e);if(void 0!==n)return[n,!1];t.set(e,t.size);const i=Object.entries(e),a=i.map((e=>r(e[1])));let o=2+2*Math.max(0,i.length-1)+2*i.length,c=!1;const l=[];for(let t=0;t<a.length;t++)o+=i[t][0].length,o+=a[t].length,c||(c=a[t][1]),l.push({type:"kvpair",key:i[t][0],value:a[t][0],length:a[t][0].length+i[t][0].length});t.delete(e);const d={type:"arraylike",elems:l,prefix:"{",suffix:"}",length:o};return c||s.set(e,d),[d,c]}(e):a(e.toString())}return r(e)[0]}function o(e,t,s){const n="["+" ".repeat(Math.max(0,t-1)),i=new Map;return function e(a){const r=i.get(a);if(void 0!==r)return r;let o;if("terminal"===a.type)o={type:"line",line:a};else if("multiline"===a.type)o={type:"block",prefixFirst:"",prefixRest:"",block:a.lines.map((e=>({type:"line",line:{type:"terminal",str:e,length:e.length}}))),suffixRest:"",suffixLast:""};else if("pair"===a.type){const t=e(a.head),i=e(a.tail);o=a.length-2>s||"line"!==t.type||"line"!==i.type?{type:"block",prefixFirst:n,prefixRest:"",block:[t,i],suffixRest:",",suffixLast:"]"}:{type:"line",line:a}}else if("arraylike"===a.type){const n=a.elems.map(e);o=a.length-a.prefix.length-a.suffix.length>s||n.some((e=>"line"!==e.type))?{type:"block",prefixFirst:a.prefix+" ".repeat(Math.max(0,t-a.prefix.length)),prefixRest:" ".repeat(Math.max(a.prefix.length,t)),block:n,suffixRest:",",suffixLast:a.suffix}:{type:"line",line:a}}else{if("kvpair"!==a.type)throw"up";{const t=e(a.value);o=a.length>s||"line"!==t.type?{type:"block",prefixFirst:"",prefixRest:"",block:[{type:"line",line:{type:"terminal",str:JSON.stringify(a.key),length:0}},t],suffixRest:":",suffixLast:""}:{type:"line",line:a}}}return i.set(a,o),o}(e)}function c(e){return function e(t,s){if("multiline"===t.type)throw"Tried to format multiline string as single line string";if("terminal"===t.type)s.push(t.str);else if("pair"===t.type)s.push("["),e(t.head,s),s.push(", "),e(t.tail,s),s.push("]");else if("kvpair"===t.type)s.push(JSON.stringify(t.key)),s.push(": "),e(t.value,s);else if("arraylike"===t.type){s.push(t.prefix),t.elems.length>0&&e(t.elems[0],s);for(let n=1;n<t.elems.length;n++)s.push(", "),e(t.elems[n],s);s.push(t.suffix)}return s}(e,[]).join("")}function l(e){let t="";const s=new Map,n=new Map;return function e(i,a){const r=n.get(i);if(void 0!==r){const e=r.get(a.length);if(void 0!==e)return void(t+=t.substring(e[0],e[1]))}const o=t.length;if("line"===i.type)s.has(i.line)||s.set(i.line,c(i.line)),t+=s.get(i.line);else if("block"===i.type){t+=i.prefixFirst;const s=a+" ".repeat(i.prefixFirst.length),n=a+i.prefixRest;e(i.block[0],s);for(let a=1;a<i.block.length;a++)t+=i.suffixRest,t+=n,e(i.block[a],n);t+=i.suffixLast}const l=t.length;if(void 0===r){const e=new Map;e.set(a.length,[o,l]),n.set(i,e)}else r.set(a.length,[o,l])}(e,"\n"),t}t.stringify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80;if(e=(0,i.forceIt)(e),"string"===typeof t)throw"stringify with arbitrary indent string not supported";let n=t;return t>10&&(n=10),l(o(r(e),n,s))},t.typeToString=function(e){return a(e)},t.valueToStringDag=r,t.stringDagToLineTree=o,t.stringDagToSingleLine=c,t.lineTreeToString=l},108:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return c}));const n="CHANGE_QUERY_STRING",i="GENERATE_LZ_STRING",a="SHORTEN_URL",r="UPDATE_SHORT_URL",o="PLAYGROUND_UPDATE_GITHUB_SAVE_INFO",c="PLAYGROUND_UPDATE_PERSISTENCE_FILE"},110:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(122),i=(s(1),s(12)),a=s(0);const r=e=>{let{handleReplOutputClear:t}=e;return Object(a.jsx)(i.a,{label:"Clear",icon:n.a.REMOVE,onClick:t})}},111:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(122),i=s(304),a=(s(1),s(12)),r=s(0);const o=e=>{let{handleReplEval:t,isRunning:s}=e;return s?null:Object(r.jsx)(i.a,{content:"...or press shift-enter in the REPL",children:Object(r.jsx)(a.a,{label:"Eval",icon:n.a.CODE,onClick:t})})}},112:function(e,t,s){"use strict";var n=s(1317),i=s(305),a=s(1),r=s.n(a),o=s(25),c=s(289),l=s(97),d=s(290),u=s(301),h=s(42),p=s(20),g=s.n(p),m=s(0);var b=e=>{const{tabs:t,isExpanded:s,expandSideBar:n,collapseSideBar:i}=e,[a,o]=r.a.useState(0);return 0===t.length?Object(m.jsx)("div",{className:"sidebar-container"}):Object(m.jsxs)("div",{className:"sidebar-container",children:[Object(m.jsx)("div",{className:"tab-container",children:t.map(((e,t)=>Object(m.jsxs)(h.e,{className:g()("tab",{selected:s&&a===t}),onClick:()=>{var e;a!==(e=t)?(o(e),n()):s?i():n()},children:[Object(m.jsx)(h.w,{className:"tab-icon",icon:e.iconName,size:14}),e.label]},t)))}),null!==a&&Object(m.jsx)(h.e,{className:"panel",children:t[a].body})]})},f=s(304),v=s(292);var y=s(189),x=s(24);var j=a.memo((e=>{let{selectedTabId:t,renderActiveTabPanelOnly:s,editorWidth:n,sideContentHeight:i,...a}=e;return Object(m.jsx)(y.a,{...a,renderFunction:(e,r)=>Object(m.jsx)("div",{className:"side-content",children:Object(m.jsx)(h.e,{children:Object(m.jsx)("div",{className:"side-content-tabs",children:Object(m.jsx)(h.V,{id:"side-content-tabs",onChange:r,renderActiveTabPanelOnly:s,selectedTabId:t,children:e.map((e=>((e,t,s,n)=>{const i=void 0===e.id||e.id===x.b.module?e.label:e.id;var a;const r={id:i,title:Object(m.jsx)(f.a,{content:e.label,children:Object(m.jsx)("div",{className:(a=e.id,a===x.b.module||a===x.b.htmlDisplay?"side-content-tooltip side-content-tab-alert":"side-content-tooltip"),id:Object(y.b)(i),children:Object(m.jsx)(h.w,{icon:e.iconName,iconSize:20})})}),disabled:e.disabled,className:"side-content-tab"};if(!e.body)return Object(m.jsx)(h.U,{...r},i);const o=t?{...e.body,props:{...e.body.props,workspaceLocation:t,editorWidth:s,sideContentHeight:n}}:e.body,c=Object(m.jsx)("div",{className:"side-content-text",children:o});return Object(m.jsx)(h.U,{...r,panel:c},i)})(e,a.workspaceLocation,n,i)))})})})})})}),v.a),O=s(35);const C={right:!0},S={bottom:!0},E={};t.a=e=>{const t=a.useRef(null),s=a.useRef(null),r=a.useRef(null),h=a.useRef(null),p=a.useRef(null),g=a.useRef(null),[f]=Object(O.a)(s),[v,y]=a.useState(200),[x,w]=a.useState(!1);n.a.onlyShowFocusOnTabs(),a.useEffect((()=>{e.sideContentIsResizeable&&null===p.current&&(p.current=g.current.clientHeight)}));const _=(e,s,n,i)=>{if(n.clientWidth<100){const e=t.current;if(null===e)throw Error("Reference to SideBar not found when resizing.");e.updateSize({width:40,height:"100%"}),w(!1)}else w(!0)},A=(e,t,s)=>{const n=s.clientWidth/f*100;n>95?h.current.updateSize({width:"100%",height:"100%"}):n<5&&h.current.updateSize({width:"0%",height:"100%"})},k=(e,t,s)=>{p.current=g.current.clientHeight>p.current?g.current.clientHeight:p.current;const n=s.clientHeight,i=s.parentNode.clientHeight;n+p.current+2>i?g.current.style.display="none":g.current.style.display="initial"},T=Object(m.jsx)(j,{...e.sideContentProps}),R=Object(m.jsxs)(i.a,{bounds:"parent",className:"resize-side-content",enable:S,onResize:k,onResizeStop:(t,s,n)=>e.handleSideContentHeightChange(n.clientHeight),children:[T,Object(m.jsx)("div",{className:"side-content-divider",ref:g})]});return Object(m.jsxs)("div",{className:"workspace",children:[e.hasUnsavedChanges?Object(m.jsx)(o.a,{message:"You have changes that may not be saved. Are you sure you want to leave?"}):null,Object(m.jsx)(c.a,{...e.controlBarProps}),Object(m.jsxs)("div",{className:"workspace-parent",children:[Object(m.jsx)(i.a,{...(()=>{const s=0!==e.sideBarProps.tabs.length,n=s?40:"auto";return{enable:s?C:E,minWidth:n,maxWidth:"50%",onResize:_,onResizeStop:(e,t,s,n)=>{const i=s.clientWidth;40!==i&&y(i)},ref:t,defaultSize:{width:n,height:"100%"}}})(),children:Object(m.jsx)(b,{...e.sideBarProps,isExpanded:x,expandSideBar:()=>{w(!0);const e=t.current;if(null===e)throw Error("Reference to SideBar not found when expanding.");e.updateSize({width:v,height:"100%"})},collapseSideBar:()=>{w(!1);const e=t.current;if(null===e)throw Error("Reference to SideBar not found when collapsing.");e.updateSize({width:40,height:"100%"})}})}),Object(m.jsxs)("div",{className:"row content-parent",ref:s,children:[Object(m.jsx)("div",{className:"editor-divider",ref:r}),Object(m.jsx)(i.a,{className:"resize-editor left-parent",enable:C,minWidth:0,onResize:A,ref:h,defaultSize:{width:"50%",height:"100%"},as:void 0,children:(e=>e.editorContainerProps?Object(m.jsx)(l.b,{...e.editorContainerProps}):Object(m.jsx)(d.a,{...e.mcqProps}))(e)}),Object(m.jsxs)("div",{className:"right-parent",children:[void 0===e.sideContentIsResizeable||e.sideContentIsResizeable?R:T,Object(m.jsx)(u.a,{...e.replProps})]})]})]})]})}},12:function(e,t,s){"use strict";var n=s(102),i=s(42),a=(s(1),s(0));const r={className:"",fullWidth:!1,iconOnRight:!1,intent:n.a.NONE,minimal:!0};t.a=e=>{let{label:t="",icon:s,onClick:n,options:o={},isDisabled:c=!1}=e;const l={...r,...o},d=s&&Object(a.jsx)(i.w,{icon:s,color:l.iconColor});return Object(a.jsx)(i.b,{disabled:c,fill:l.fullWidth,intent:l.intent,minimal:l.minimal,className:l.className,type:l.type,onClick:n,icon:!l.iconOnRight&&d,rightIcon:l.iconOnRight&&d,children:t})}},120:function(e,t,s){"use strict";s.r(t),s.d(t,"deleteSourcecastEntry",(function(){return a})),s.d(t,"recordInit",(function(){return r})),s.d(t,"recordInput",(function(){return o})),s.d(t,"resetInputs",(function(){return c})),s.d(t,"timerPause",(function(){return l})),s.d(t,"timerReset",(function(){return d})),s.d(t,"timerResume",(function(){return u})),s.d(t,"timerStart",(function(){return h})),s.d(t,"timerStop",(function(){return p}));var n=s(7),i=s(86);const a=(e,t)=>Object(n.action)(i.a,{id:e,workspaceLocation:t}),r=(e,t)=>Object(n.action)(i.b,{initData:e,workspaceLocation:t}),o=(e,t)=>Object(n.action)(i.c,{input:e,workspaceLocation:t}),c=(e,t)=>Object(n.action)(i.d,{inputs:e,workspaceLocation:t}),l=e=>Object(n.action)(i.e,{timeNow:Date.now(),workspaceLocation:e}),d=e=>Object(n.action)(i.f,{workspaceLocation:e}),u=(e,t)=>Object(n.action)(i.g,{timeBefore:e,timeNow:Date.now(),workspaceLocation:t}),h=e=>Object(n.action)(i.h,{timeNow:Date.now(),workspaceLocation:e}),p=e=>Object(n.action)(i.i,{timeNow:Date.now(),workspaceLocation:e})},126:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s(42),i=s(3),a=s(122),r=s(382),o=(s(1),s(22)),c=s(0);const l=e=>{let{itemsParentRef:t,renderItem:s}=e;const i=o.h.map(s);return Object(c.jsx)(n.A,{ulRef:t,children:i})},d=(e,t)=>{let{handleClick:s}=t;return Object(c.jsx)(n.B,{onClick:s,text:e.displayName},e.displayName)},u=r.a.ofType(),h=e=>{let{sourceChapter:t,sourceVariant:s,handleChapterSelect:r=(()=>{}),disabled:h=!1}=e;return Object(c.jsx)(u,{items:o.n,onItemSelect:r,itemRenderer:d,itemListRenderer:l,filterable:!1,disabled:h,children:Object(c.jsx)(n.b,{className:i.a.MINIMAL,text:Object(o.o)(t,s),rightIcon:h?null:a.a.DOUBLE_CARET_VERTICAL,disabled:h})})}},127:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="SAVE_CANVAS",i=":assessmentId(\\d+)?/:questionId(\\d+)?",a=":submissionId(\\d+)?/:questionId(\\d+)?",r="CREATE_COURSE",o="ADD_NEW_USERS_TO_COURSE"},128:function(e,t,s){"use strict";s.r(t),s.d(t,"generateLzString",(function(){return a})),s.d(t,"shortenURL",(function(){return r})),s.d(t,"updateShortURL",(function(){return o})),s.d(t,"changeQueryString",(function(){return c})),s.d(t,"playgroundUpdatePersistenceFile",(function(){return l})),s.d(t,"playgroundUpdateGitHubSaveInfo",(function(){return d}));var n=s(7),i=s(108);const a=()=>Object(n.action)(i.b),r=e=>Object(n.action)(i.e,e),o=e=>Object(n.action)(i.f,e),c=e=>Object(n.action)(i.a,e),l=e=>Object(n.action)(i.d,e),d=(e,t,s)=>Object(n.action)(i.c,{repoName:e,filePath:t,lastSaved:s})},1292:function(e,t){},1294:function(e,t){},13:function(e,t,s){"use strict";s.r(t),s.d(t,"browseReplHistoryDown",(function(){return c})),s.d(t,"browseReplHistoryUp",(function(){return l})),s.d(t,"changeExternalLibrary",(function(){return d})),s.d(t,"changeExecTime",(function(){return u})),s.d(t,"changeSideContentHeight",(function(){return h})),s.d(t,"changeStepLimit",(function(){return p})),s.d(t,"chapterSelect",(function(){return g})),s.d(t,"externalLibrarySelect",(function(){return m})),s.d(t,"toggleEditorAutorun",(function(){return b})),s.d(t,"beginClearContext",(function(){return f})),s.d(t,"clearReplInput",(function(){return v})),s.d(t,"clearReplOutput",(function(){return y})),s.d(t,"clearReplOutputLast",(function(){return x})),s.d(t,"endClearContext",(function(){return j})),s.d(t,"evalEditor",(function(){return O})),s.d(t,"evalRepl",(function(){return C})),s.d(t,"evalTestcase",(function(){return S})),s.d(t,"runAllTestcases",(function(){return E})),s.d(t,"updateActiveEditorTab",(function(){return w})),s.d(t,"updateEditorValue",(function(){return _})),s.d(t,"setEditorBreakpoint",(function(){return A})),s.d(t,"highlightEditorLine",(function(){return k})),s.d(t,"updateReplValue",(function(){return T})),s.d(t,"sendReplInputToOutput",(function(){return R})),s.d(t,"resetTestcase",(function(){return I})),s.d(t,"navigateToDeclaration",(function(){return L})),s.d(t,"moveCursor",(function(){return P})),s.d(t,"resetWorkspace",(function(){return N})),s.d(t,"updateWorkspace",(function(){return D})),s.d(t,"setIsEditorReadonly",(function(){return M})),s.d(t,"updateCurrentAssessmentId",(function(){return U})),s.d(t,"updateCurrentSubmissionId",(function(){return B})),s.d(t,"updateHasUnsavedChanges",(function(){return G})),s.d(t,"changeSublanguage",(function(){return F})),s.d(t,"updateSublanguage",(function(){return H})),s.d(t,"promptAutocomplete",(function(){return V})),s.d(t,"notifyProgramEvaluated",(function(){return W})),s.d(t,"toggleUsingSubst",(function(){return q})),s.d(t,"addHtmlConsoleError",(function(){return $}));var n=s(7),i=s(135),a=s(59),r=s(24),o=s(31);const c=e=>Object(n.action)(o.c,{workspaceLocation:e}),l=e=>Object(n.action)(o.d,{workspaceLocation:e}),d=(e,t)=>Object(n.action)(o.f,{newExternal:e,workspaceLocation:t}),u=(e,t)=>Object(n.action)(o.e,{execTime:e,workspaceLocation:t}),h=(e,t)=>Object(n.action)(o.g,{height:e,workspaceLocation:t}),p=(e,t)=>Object(n.action)(o.h,{stepLimit:e,workspaceLocation:t}),g=(e,t,s)=>Object(n.action)(o.j,{chapter:e,variant:t,workspaceLocation:s}),m=(e,t,s)=>Object(n.action)(o.v,{externalLibraryName:e,workspaceLocation:t,initialise:s||!1}),b=e=>Object(n.action)(o.A,{workspaceLocation:e}),f=(e,t,s)=>Object(n.action)(o.b,{library:t,workspaceLocation:e,shouldInitLibrary:s}),v=e=>Object(n.action)(o.k,{workspaceLocation:e}),y=e=>Object(n.action)(o.l,{workspaceLocation:e}),x=e=>Object(n.action)(o.m,{workspaceLocation:e}),j=(e,t)=>Object(n.action)(o.n,{library:e,workspaceLocation:t}),O=e=>Object(n.action)(o.o,{workspaceLocation:e}),C=e=>Object(n.action)(o.q,{workspaceLocation:e}),S=(e,t)=>Object(n.action)(o.s,{workspaceLocation:e,testcaseId:t}),E=e=>Object(n.action)(o.p,{workspaceLocation:e}),w=(e,t)=>Object(n.action)(o.C,{workspaceLocation:e,activeEditorTabOptions:t}),_=(e,t)=>Object(n.action)(o.G,{newEditorValue:e,workspaceLocation:t}),A=(e,t)=>Object(n.action)(o.F,{breakpoints:e,workspaceLocation:t}),k=(e,t)=>Object(n.action)(a.l,{highlightedLines:e,workspaceLocation:t}),T=(e,t)=>Object(n.action)(o.I,{newReplValue:e,workspaceLocation:t}),R=(e,t)=>Object(n.action)(o.z,{type:"code",workspaceLocation:t,value:e}),I=(e,t)=>Object(n.action)(o.x,{workspaceLocation:e,index:t}),L=(e,t)=>Object(n.action)(o.u,{workspaceLocation:e,cursorPosition:t}),P=(e,t)=>Object(n.action)(o.t,{workspaceLocation:e,cursorPosition:t}),N=(e,t)=>Object(n.action)(o.y,{workspaceLocation:e,workspaceOptions:t}),D=(e,t)=>Object(n.action)(o.K,{workspaceLocation:e,workspaceOptions:t}),M=(e,t)=>Object(n.action)(i.b,{workspaceLocation:e,isEditorReadonly:t}),U=(e,t)=>Object(n.action)(o.D,{assessmentId:e,questionId:t}),B=(e,t)=>Object(n.action)(o.E,{submissionId:e,questionId:t}),G=(e,t)=>Object(n.action)(o.H,{workspaceLocation:e,hasUnsavedChanges:t}),F=e=>Object(n.action)(o.i,{sublang:e}),H=e=>Object(n.action)(o.J,{sublang:e}),V=(e,t,s,i)=>Object(n.action)(o.w,{workspaceLocation:e,row:t,column:s,callback:i}),W=(e,t,s,i,a)=>Object(n.action)(r.a,{result:e,lastDebuggerResult:t,code:s,context:i,workspaceLocation:a}),q=(e,t)=>Object(n.action)(o.B,{usingSubst:e,workspaceLocation:t}),$=(e,t)=>Object(n.action)(o.a,{errorMsg:e,workspaceLocation:t})},1301:function(e,t,s){"use strict";s.r(t);s(560);var n=s(1316),i=s(1313),a=s(53),r=s(34),o=s(25),c=s(44),l=s(207),d=s(283),u=s(38),h=s(42),p=s(3),g=s(102),m=s(65),b=s.n(m),f=s(1),v=s.n(f),y=s(20),x=s.n(y),j=s(35),O=s(22),C=s(139),S=s(63),E=s(122),w=s(304),_=s(33),A=s.n(_),k=s(47),T=s(211),R=s(13),I=s(28),L=s(106),P=s(306);const N={},D=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_CADET_LOGGER;function M(e,t){var s;D&&(s={...t,questionId:N[e],sessionId:e},new Promise(((e,t)=>{G().then((n=>{const i=n.transaction([B],"readwrite");i.oncomplete=e,i.onerror=t,i.objectStore(B).add(s)}))})))}function U(e,t){const s=Object(P.a)();return N[s]=e,M(s,{...t,type:"init",time:Date.now()}),s}const B="logs",G=function(e){let t=null;return()=>t||(t=e(),t)}((()=>new Promise(((e,t)=>{const s=indexedDB.open("evtlogs",1);s.onsuccess=t=>{e(s.result)},s.onerror=e=>{console.error("Failed to get db",e),t(s.error)},s.onupgradeneeded=e=>{(null===e||void 0===e?void 0:e.target).result.createObjectStore(B,{keyPath:"id",autoIncrement:!0})}}))));var F=s(37),H=s(18),V=s(126),W=s(110),q=s(111),$=s(173),X=s(169),z=s(170),Y=s(212),K=s(147),Q=s(213),J=s(12),Z=s(97),ee=s(45),te=s(172),se=s(0);var ne=e=>{const{index:t,result:s}=e;return Object(se.jsx)("div",{className:x()("ResultCard","pass"===s.resultType?"correct":"wrong"),children:Object(se.jsxs)(h.e,{elevation:C.a.ONE,children:[Object(se.jsxs)("div",{className:"result-data",children:[Object(se.jsx)("div",{className:"result-idx",children:t+1}),Object(se.jsx)("div",{className:"result-status",children:s.resultType.toUpperCase()})]}),Object(se.jsx)(h.M,{className:"result-expected",children:s.expected}),Object(se.jsx)(h.M,{className:"result-actual",children:"error"===s.resultType?(n=s.errors,n.map((e=>{switch(e.errorType){case"timeout":return"[TIMEOUT] Submission exceeded time limit for this test case.";case"syntax":return`[SYNTAX] Line ${e.line}: ${e.errorExplanation}`;case"runtime":return`[RUNTIME] Line ${e.line}: ${e.errorExplanation}`;case"systemError":return`[SYSTEM] ${e.errorMessage}`;default:return`[UNKNOWN] Autograder error: type ${e.errorType}`}})).join("\n\n")):s.actual})]})});var n},ie=s(293);const ae=Object(se.jsxs)("div",{className:"autograder-help-tooltip",children:[Object(se.jsx)("p",{children:"Click on each testcase below to execute it with the program in the editor."}),Object(se.jsx)("p",{children:"To execute all testcases at once, evaluate the program in the editor with this tab active."}),Object(se.jsx)("p",{children:"A green or red background indicates a passed or failed testcase respectively."}),Object(se.jsx)("p",{children:"Private testcases (only visible to staff when grading) have a grey background."})]}),re=(e,t)=>Object(se.jsxs)("div",{className:e,children:[t,Object(se.jsx)(h.w,{icon:E.a.CARET_DOWN})]}),oe=Object(se.jsxs)("div",{className:"testcases-header",children:[re("header-fn","Testcase"),re("header-expected","Expected result"),re("header-actual","Actual result")]}),ce=Object(se.jsxs)("div",{className:"results-header",children:[Object(se.jsxs)("div",{className:"header-data",children:[re("header-sn","S/N"),re("header-status","Testcase status")]}),re("header-expected","Expected result"),re("header-actual","Actual result")]}),le=(e,t,s)=>Object(se.jsx)(J.a,{label:e,icon:t?E.a.CARET_DOWN:E.a.CARET_RIGHT,onClick:s,options:{className:"collapse-button",minimal:!0}});var de=e=>{const[t,s]=f.useState(!0),[n,i]=f.useState(!0),{testcases:a,autogradingResults:r,handleTestcaseEval:o,workspaceLocation:c}=e,l=f.useMemo((()=>a.length>0?Object(se.jsxs)("div",{className:"testcaseCards",children:[oe,a.map(((e,t)=>Object(se.jsx)(ie.a,{index:t,testcase:e,handleTestcaseEval:o,workspaceLocation:c},t)))]}):Object(se.jsx)("div",{className:"noResults",children:"There are no testcases provided for this question."})),[a,o,c]),d=f.useMemo((()=>r.length>0?Object(se.jsxs)("div",{children:[ce,r.map(((e,t)=>Object(se.jsx)(ne,{index:t,result:e},t)))]}):Object(se.jsx)("div",{className:"noResults",children:"There are no results to show."})),[r]),u=f.useCallback((()=>{s(!t)}),[t]),p=f.useCallback((()=>i(!n)),[n]);return Object(se.jsxs)("div",{className:"Autograder",children:[Object(se.jsxs)(h.b,{className:"collapse-button",icon:t?E.a.CARET_DOWN:E.a.CARET_RIGHT,minimal:!0,onClick:u,children:[Object(se.jsx)("span",{children:"Testcases"}),Object(se.jsx)(w.a,{content:ae,placement:h.L.LEFT,children:Object(se.jsx)(h.w,{icon:E.a.HELP})})]}),Object(se.jsx)(h.g,{isOpen:t,keepChildrenMounted:!0,children:l}),le("Autograder Results",n,p),Object(se.jsx)(h.g,{isOpen:n,keepChildrenMounted:!0,children:d})]})};var ue=e=>{const{handleContestEntryClick:t,contestEntry:s,rank:n}=e;return Object(se.jsx)("div",{className:x()("LeaderboardCard"),children:Object(se.jsxs)(h.e,{className:p.a.INTERACTIVE,elevation:C.a.ONE,onClick:()=>{var e;return t(s.submission_id,null!==(e=s.answer.code)&&void 0!==e?e:"")},children:[Object(se.jsx)(h.M,{className:"contestentry-entryid",children:s.student_name}),Object(se.jsx)(h.M,{className:"contestentry-rank",children:n}),Object(se.jsx)(h.M,{className:"contestentry-score",children:s.final_score})]})})};const he=(e,t)=>Object(se.jsxs)("div",{className:e,children:[t,Object(se.jsx)(h.w,{icon:E.a.CARET_DOWN})]}),pe=Object(se.jsxs)("div",{className:"leaderboard-header",children:[he("header-entryid","Student Name"),he("header-entryrank","Rank"),he("header-score","Score")]});var ge=e=>{const{orderedContestEntries:t,handleContestEntryClick:s}=e,[n,i]=Object(f.useState)(!0),a=Object(f.useMemo)((()=>Object(se.jsxs)("div",{children:[pe,t.length>0?t.map(((e,t)=>Object(se.jsx)(ue,{handleContestEntryClick:s,contestEntry:e,rank:t+1},e.submission_id))):Object(se.jsx)("div",{className:"noResults",children:"There are no eligible contest leaderboard entries found."})]})),[s,t]);return Object(se.jsxs)("div",{className:"ContestLeaderboard",children:[Object(se.jsxs)(h.b,{className:"collapse-button",icon:n?E.a.CARET_DOWN:E.a.CARET_RIGHT,minimal:!0,onClick:()=>i(!n),children:[Object(se.jsx)("span",{children:"Contest Leaderboard"}),Object(se.jsx)(w.a,{content:"View the top-rated contest entries!",children:Object(se.jsx)(h.w,{icon:E.a.HELP})})]}),Object(se.jsx)(h.g,{isOpen:n,keepChildrenMounted:!0,children:a})]})},me=s(10);var be=e=>{const{canSave:t,isValid:s,handleContestEntryClick:n,handleVotingSubmissionChange:i,contestEntry:a,entryNumber:r,minScore:o,maxScore:c}=e;return Object(se.jsx)("div",{className:x()("ContestEntryCard",{wrong:!s}),children:Object(se.jsxs)(h.e,{className:p.a.INTERACTIVE,elevation:C.a.ONE,onClick:()=>{var e;return n(a.submission_id,null!==(e=a.answer.code)&&void 0!==e?e:"")},children:[Object(se.jsx)(h.M,{className:"contestentry-entryid",children:r}),Object(se.jsx)(h.M,{className:"contestentry-rank",children:Object(se.jsx)(h.H,{disabled:!t,value:a.score,onValueChange:e=>i(a.submission_id,e),placeholder:`Enter score for entry ${r}`,min:o,max:c,allowNumericCharactersOnly:!0,fill:!0,minorStepSize:null})})]})})};const fe=(e,t)=>Object(se.jsxs)("div",{className:e,children:[t,Object(se.jsx)(h.w,{icon:E.a.CARET_DOWN})]}),ve=Object(se.jsxs)("div",{className:"contestentries-header",children:[fe("header-entryid","Entry Id"),fe("header-entryrank","Score")]});var ye=e=>{const{contestEntries:t,canSave:s,isValid:n,handleContestEntryClick:i,handleVotingSubmissionChange:a,maxScore:r,minScore:o}=e,[c,l]=Object(f.useState)(!0),d=Object(f.useMemo)((()=>Object(se.jsxs)("div",{children:[ve,t.length>0?t.map(((e,t)=>Object(se.jsx)(be,{isValid:n,canSave:s,entryNumber:t+1,handleContestEntryClick:i,handleVotingSubmissionChange:a,contestEntry:e,minScore:o,maxScore:r},e.submission_id))):Object(se.jsx)("div",{className:"noResults",children:"There are no eligible entries for voting found."})]})),[n,s,t,i,a,r,o]);return Object(se.jsxs)("div",{className:"ContestEntryVoting",children:[Object(se.jsxs)(h.b,{className:"collapse-button",icon:c?E.a.CARET_DOWN:E.a.CARET_RIGHT,minimal:!0,onClick:()=>l(!c),children:[Object(se.jsx)("span",{children:"Contest Voting"}),Object(se.jsx)(w.a,{content:Object(se.jsxs)("span",{children:["Score your favourite contest entries from ",o," (worst) to ",r," (best)!"]}),children:Object(se.jsx)(h.w,{icon:E.a.HELP})})]}),Object(se.jsx)(h.g,{isOpen:c,keepChildrenMounted:!0,children:d})]})};var xe=e=>{const{canSave:t,contestEntries:s,handleSave:n,handleContestEntryClick:i}=e,[a,r]=Object(f.useState)(!0),[o,c]=Object(f.useState)([]),l=11-s.length;Object(f.useEffect)((()=>{c(s)}),[s]);return Object(se.jsx)(ye,{isValid:a,canSave:t,handleContestEntryClick:i,handleVotingSubmissionChange:(e,t)=>{const s=o.map((s=>s.submission_id===e?{...s,score:t}:s));c(s);const i=new Set(s.map((e=>e.score))).size===s.length,a=(e=>e.reduce(((e,t)=>e&&void 0!==t.score&&null!==t.score),!0))(s);i&&a&&(e=>e.reduce(((e,t)=>{const s=t.score;return e&&s>=l&&s<=10}),!0))(s)?(n(s),r(!0)):i&&a?(Object(me.e)(`Vote rankings invalid. Please input scores between ${l} - 10.`),r(!1)):!i&&a?(Object(me.e)("Vote scores are not unique. Please input unique rankings."),r(!1)):r(!1)},contestEntries:o,minScore:l,maxScore:10})};class je extends f.Component{constructor(){super(...arguments),this.$container=null}shouldComponentUpdate(){return!1}componentDidMount(){window.ToneMatrix&&window.ToneMatrix.initialise_matrix(this.$container)}handleClear(){window.ToneMatrix.clear_matrix()}handleRandomise(){window.ToneMatrix.randomise_matrix()}render(){return Object(se.jsxs)("div",{className:"sa-tone-matrix",children:[Object(se.jsx)("div",{className:"row",children:Object(se.jsxs)("div",{className:x()("controls","col-xs-12",p.a.DARK,p.a.BUTTON_GROUP),children:[Object(se.jsx)(h.b,{id:"clear-matrix",onClick:this.handleClear,children:"Clear"}),Object(se.jsx)(h.b,{id:"randomise-matrix",onClick:this.handleRandomise,children:"Randomise"})]})}),Object(se.jsx)("div",{className:"row",children:Object(se.jsx)("div",{className:"col-xs-12",ref:e=>this.$container=e})})]})}}var Oe=je,Ce=s(24),Se=s(16),Ee=s(52),we=s(55),_e=s(112);const Ae=e=>{const t=b()(e),s=b()();return t.isBefore(s)},ke=e=>b()(e).format("Do MMMM, HH:mm");var Te=e=>Object(se.jsx)("div",{className:"GradingResult",children:Object(se.jsxs)("div",{className:"grading-result-table",children:[Object(se.jsx)(h.v,{children:Object(se.jsxs)("tbody",{children:[Object(se.jsxs)("tr",{children:[Object(se.jsx)("th",{children:"XP:"}),Object(se.jsx)("td",{children:Object(se.jsxs)(h.Y,{children:[e.xp," / ",e.maxXp]})})]}),Object(se.jsxs)("tr",{children:[Object(se.jsx)("th",{children:"Comments:"}),Object(se.jsx)("td",{children:!e.comments&&Object(se.jsx)(h.Y,{children:"None"})})]})]})}),e.comments&&Object(se.jsx)(h.v,{children:Object(se.jsx)("tbody",{children:Object(se.jsx)("tr",{children:Object(se.jsxs)("td",{children:[Object(se.jsx)(h.i,{}),Object(se.jsx)(ee.a,{content:e.comments,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0,openLinksInNewWindow:!0}),Object(se.jsx)(h.i,{})]})})})}),Object(se.jsx)("br",{}),Object(se.jsx)("div",{className:"grading-result-info",children:Object(se.jsxs)(h.Y,{children:["Graded by ",Object(se.jsx)("b",{children:e.graderName})," on ",ke(e.gradedAt)]})})]})});const Re="assessment";var Ie=e=>{var t,s,n,i,a;const[o,c]=f.useState(!1),[l,d]=f.useState(!1),[m,b]=f.useState(""),[v,y]=f.useState(void 0!==(null===(t=e.assessment)||void 0===t?void 0:t.questions[e.questionId].grader)?Ce.b.grading:Ce.b.questionOverview),{isMobileBreakpoint:C}=Object(j.e)(),S=Object(r.c)();f.useEffect((()=>{e.handleEditorValueChange("")}),[]),f.useEffect((()=>{if(S(Object(u.fetchAssessment)(e.assessmentId)),0===e.questionId&&e.notAttempted&&c(!0),!e.assessment)return;let t=e.questionId;e.questionId>=e.assessment.questions.length&&(t=e.assessment.questions.length-1);const s=e.assessment.questions[t];let n="";s.type===H.d.programming&&(n=s.answer?s.answer:s.solutionTemplate),e.handleEditorValueChange(n)}),[]),f.useEffect((()=>{T()})),f.useEffect((()=>{C||v!==Ce.b.mobileEditor&&v!==Ce.b.mobileEditorRun||y(Ce.b.questionOverview)}),[C,e,v]);const w=e=>{M(m,e)},A=f.useRef(v);A.current=v;const k=()=>{A.current===Ce.b.autograder?S(Object(R.runAllTestcases)(Re)):S(Object(R.evalEditor)(Re));const e={time:Date.now(),type:"keyboardCommand",data:F.a.run};w(e)},T=()=>{var t;if(void 0===e.assessment)return;const s=e.assessmentId,n=e.questionId;if(e.storedAssessmentId===s&&e.storedQuestionId===n)return;const i=e.assessment.questions[n];let a=[],r="",o="",c="",l=[];if(i.type===H.d.programming){const t=i;var d,u;if(a=t.autogradingResults,o=t.prepend,c=t.postpend,l=t.testcases,r=t.answer,r||(r=t.solutionTemplate),!m)b(U(`${e.assessment.number}/${e.questionId}`,{chapter:I.Chapter.CLANG,externalLibrary:(null===i||void 0===i||null===(d=i.library)||void 0===d||null===(u=d.external)||void 0===u?void 0:u.name)||"NONE",editorValue:r}))}if(i.type===H.d.voting){const e=i;o=e.prepend,c=e.postpend}e.handleEditorUpdateBreakpoints([]),S(Object(R.updateCurrentAssessmentId)(s,n)),S(Object(R.resetWorkspace)(Re,{autogradingResults:a,editorTabs:[{value:r,prependValue:o,postpendValue:c,highlightedLines:[],breakpoints:[]}],editorTestcases:l})),S(Object(R.changeExecTime)(null!==(t=i.library.execTimeMs)&&void 0!==t?t:O.l.assessment.execTime,Re)),S(Object(R.beginClearContext)(Re,i.library,!0)),e.handleUpdateHasUnsavedChanges(!1),r&&e.handleEditorValueChange(r)},P=(e,t)=>{var s,n,i,a,r,o,c;const l=void 0!==e.assessment.questions[t].grader,d=(t,s)=>{e.handleEditorValueChange(s)},u="voting"===(null===(s=e.assessment.questions[t])||void 0===s?void 0:s.type)?[{label:`Question ${t+1}`,iconName:E.a.NINJA,body:Object(se.jsx)(ee.a,{content:e.assessment.questions[t].content}),id:Ce.b.questionOverview},{label:"Contest Voting Briefing",iconName:E.a.BRIEFCASE,body:Object(se.jsx)(ee.a,{content:e.assessment.longSummary}),id:Ce.b.briefing},{label:"Contest Voting",iconName:E.a.NEW_LAYERS,body:Object(se.jsx)(xe,{canSave:e.canSave,handleSave:s=>{var n;return e.handleSave((null===(n=e.assessment)||void 0===n?void 0:n.questions[t]).id,s)},handleContestEntryClick:d,contestEntries:null!==(n=null===(i=e.assessment)||void 0===i||null===(a=i.questions[t])||void 0===a?void 0:a.contestEntries)&&void 0!==n?n:[]}),id:Ce.b.contestVoting},{label:"Contest Leaderboard",iconName:E.a.CROWN,body:Object(se.jsx)(ge,{handleContestEntryClick:d,orderedContestEntries:null!==(r=null===(o=e.assessment)||void 0===o||null===(c=o.questions[t])||void 0===c?void 0:c.contestLeaderboard)&&void 0!==r?r:[]}),id:Ce.b.contestLeaderboard}]:[{label:`Question ${t+1}`,iconName:E.a.NINJA,body:Object(se.jsx)(ee.a,{className:"sidecontent-overview",content:e.assessment.questions[t].content}),id:Ce.b.questionOverview},{label:"Briefing",iconName:E.a.BRIEFCASE,body:Object(se.jsx)(ee.a,{className:"sidecontent-overview",content:e.assessment.longSummary}),id:Ce.b.briefing},{label:"Autograder",iconName:E.a.AIRPLANE,body:Object(se.jsx)(de,{testcases:e.editorTestcases,autogradingResults:l||!e.assessmentConfiguration.isManuallyGraded?e.autogradingResults:[],handleTestcaseEval:e=>S(Object(R.evalTestcase)(Re,e)),workspaceLocation:"assessment"}),id:Ce.b.autograder}];l&&u.push({label:"Report Card",iconName:E.a.TICK,body:Object(se.jsx)(Te,{graderName:e.assessment.questions[t].grader.name,gradedAt:e.assessment.questions[t].gradedAt,xp:e.assessment.questions[t].xp,maxXp:e.assessment.questions[t].maxXp,comments:e.assessment.questions[t].comments}),id:Ce.b.grading});e.assessment.questions[t].library.external.symbols.includes("get_matrix")&&u.push({label:"Tone Matrix",iconName:E.a.GRID_VIEW,body:Object(se.jsx)(Oe,{}),id:Ce.b.toneMatrix});return{selectedTabId:v,tabs:{beforeDynamicTabs:u,afterDynamicTabs:[]},onChange:(e,t,s)=>{e!==t&&y(e)},workspaceLocation:"assessment"}},N=t=>{var s;const n=`/courses/${e.courseId}/${Object(we.a)(e.assessment.type)}`,i=n+`/${e.assessment.id.toString()}`,a=[t+1,e.assessment.questions.length],r=()=>{Ee.a.push(i+`/${(t+1).toString()}`),y(Ce.b.questionOverview)},o=()=>Ee.a.push(n),c=s=>()=>{const n=e.assessment.questions.filter((e=>null!==e.answer)).length-1;if(t<n)return s();const i=e.assessment.questions[t];if(i.type===H.d.mcq){if(null===i.answer)return Object(me.e)("Please select an option!",750);if(void 0===i.solution)return s();if(i.answer!==i.solution)return Object(me.e)("Your MCQ solution is incorrect!",750)}else if(i.type===H.d.programming){if(!e.editorTestcases.reduce(((e,t)=>e&&Object(L.stringify)(t.result)===t.answer),!0))return Object(me.e)("Your solution has not passed all testcases!",750)}return s()},l=Object(se.jsx)($.a,{onClickNext:e.assessment.questions[t].blocking?c(r):r,onClickReturn:e.assessment.questions[t].blocking?c(o):o,questionProgress:a},"next_question"),u=Object(se.jsx)(X.a,{onClick:()=>{Ee.a.push(i+`/${(t-1).toString()}`),y(Ce.b.questionOverview)},questionProgress:a},"previous_question"),h=Object(se.jsx)(z.a,{questionProgress:a},"question_view"),p=e.assessment.questions[t].type!==H.d.mcq?Object(se.jsx)(Y.a,{onClick:()=>{d(!0)}},"reset_template"):null,g=Object(se.jsx)(K.a,{handleEditorEval:k},"run"),m=e.canSave&&e.assessment.questions[t].type===H.d.programming?Object(se.jsx)(Q.a,{hasUnsavedChanges:e.hasUnsavedChanges,onClickSave:()=>e.handleSave(e.assessment.questions[t].id,e.editorTabs[0].value)},"save"):null,b=Object(se.jsx)(V.a,{handleChapterSelect:()=>{},sourceChapter:I.Chapter.CLANG,sourceVariant:null!==(s=e.assessment.questions[t].library.variant)&&void 0!==s?s:Se.b.defaultSourceVariant,disabled:!0},"chapter");return{editorButtons:C?[m,p]:[g,m,p,b],flowButtons:[u,h,l]}};if(void 0===e.assessment||0===e.assessment.questions.length)return Object(se.jsx)(h.G,{className:x()("WorkspaceParent",p.a.DARK),description:"Getting mission ready...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})});const D=Object(se.jsx)(h.h,{className:"assessment-briefing",isOpen:o,children:Object(se.jsxs)(h.e,{children:[Object(se.jsx)(ee.a,{content:e.assessment.longSummary}),Object(se.jsx)(h.b,{className:"assessment-briefing-button",onClick:()=>c(!1),text:"Continue"})]})}),B=()=>d(!1),G=Object(se.jsxs)(h.h,{className:"assessment-reset",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:l,onClose:B,title:"Confirmation: Reset editor?",children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)(ee.a,{content:"Are you sure you want to reset the template?"}),Object(se.jsx)(ee.a,{content:"*Note this will not affect the saved copy of your program, unless you save over it.*"})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(J.a,{label:"Cancel",onClick:B,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",onClick:()=>{B(),e.handleEditorValueChange(e.assessment.questions[ne].solutionTemplate),e.handleUpdateHasUnsavedChanges(!0)},options:{minimal:!1,intent:g.a.DANGER}})]})})]}),ne=e.questionId>=e.assessment.questions.length?e.assessment.questions.length-1:e.questionId,ie=e.assessment.questions[ne],ae=ie.type===H.d.programming||ie.type===H.d.voting?{editorVariant:"normal",editorTabs:e.editorTabs.map(Z.a),editorSessionId:"",sourceChapter:I.Chapter.CLANG,sourceVariant:null!==(s=ie.library.variant)&&void 0!==s?s:I.Variant.DEFAULT,externalLibraryName:ie.library.external.name||"NONE",handleDeclarationNavigate:e=>S(Object(R.navigateToDeclaration)(Re,e)),handleEditorEval:k,handleEditorValueChange:e.handleEditorValueChange,handleUpdateHasUnsavedChanges:e.handleUpdateHasUnsavedChanges,handleEditorUpdateBreakpoints:e.handleEditorUpdateBreakpoints,handlePromptAutocomplete:(e,t,s)=>S(Object(R.promptAutocomplete)(Re,e,t,s)),isEditorAutorun:!1,onChange:(t,s)=>{e.handleUpdateHasUnsavedChanges&&e.handleUpdateHasUnsavedChanges(!0),e.handleEditorValueChange(t);const n={time:Date.now(),type:"codeDelta",data:s};w(n)},onCursorChange:e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};w(t)},onSelectionChange:e=>{const t=e.getRange(),s=e.isBackwards();if(!Object(_.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:s}};w(e)}}}:void 0,re={mcq:ie,handleMCQSubmit:t=>e.handleSave(e.assessment.questions[ne].id,t)},oe={handleBrowseHistoryDown:()=>S(Object(R.browseReplHistoryDown)(Re)),handleBrowseHistoryUp:()=>S(Object(R.browseReplHistoryUp)(Re)),handleReplEval:e.handleReplEval,handleReplValueChange:e=>S(Object(R.updateReplValue)(e,Re)),output:e.output,replValue:e.replValue,sourceChapter:I.Chapter.CLANG,sourceVariant:null!==(n=ie.library.variant)&&void 0!==n?n:I.Variant.DEFAULT,externalLibrary:(null===ie||void 0===ie||null===(i=ie.library)||void 0===i||null===(a=i.external)||void 0===a?void 0:a.name)||"NONE",replButtons:(()=>{const t=Object(se.jsx)(W.a,{handleReplOutputClear:()=>S(Object(R.clearReplOutput)(Re))},"clear_repl");return[Object(se.jsx)(q.a,{handleReplEval:e.handleReplEval,isRunning:e.isRunning},"eval_repl"),t]})()},ce={tabs:[]},le={controlBarProps:N(ne),editorContainerProps:ae,handleSideContentHeightChange:e=>S(Object(R.changeSideContentHeight)(e,Re)),hasUnsavedChanges:e.hasUnsavedChanges,mcqProps:re,sideBarProps:ce,sideContentHeight:e.sideContentHeight,sideContentProps:P(e,ne),replProps:oe},ue={editorContainerProps:ae,hasUnsavedChanges:e.hasUnsavedChanges,mcqProps:re,replProps:oe,sideBarProps:ce,mobileSideContentProps:(t=>({mobileControlBarProps:{...N(t)},...P(e,t),onChange:(e,t,s)=>{e!==t&&(t===Ce.b.autograder&&e===Ce.b.mobileEditorRun||y(e))},selectedTabId:v,handleEditorEval:k}))(ne)};return Object(se.jsxs)("div",{className:x()("WorkspaceParent",p.a.DARK),children:[D,G,C?Object(se.jsx)(te.a,{...ue}):Object(se.jsx)(_e.a,{...le})]})};const Le="assessment";var Pe=Object(r.b)(((e,t)=>({courseId:e.session.courseId,assessment:e.session.assessments.get(t.assessmentId),autogradingResults:e.workspaces.assessment.autogradingResults,activeEditorTabIndex:e.workspaces.assessment.activeEditorTabIndex,editorTabs:e.workspaces.assessment.editorTabs,editorTestcases:e.workspaces.assessment.editorTestcases,hasUnsavedChanges:e.workspaces.assessment.hasUnsavedChanges,isRunning:e.workspaces.assessment.isRunning,isDebugging:e.workspaces.assessment.isDebugging,enableDebugging:e.workspaces.assessment.enableDebugging,output:e.workspaces.assessment.output,replValue:e.workspaces.assessment.replValue,sideContentHeight:e.workspaces.assessment.sideContentHeight,storedAssessmentId:e.workspaces.assessment.currentAssessment,storedQuestionId:e.workspaces.assessment.currentQuestion})),(e=>Object(c.b)({handleEditorValueChange:e=>Object(R.updateEditorValue)(e,Le),handleEditorUpdateBreakpoints:e=>Object(R.setEditorBreakpoint)(e,Le),handleReplEval:()=>Object(R.evalRepl)(Le),handleSave:u.submitAnswer,handleUpdateHasUnsavedChanges:e=>Object(R.updateHasUnsavedChanges)(Le,e)},e)))(Ie),Ne=s(93),De=s(380);function Me(e){return t=>t.filter((t=>!t.submission_id&&t.assessment_id===e))}function Ue(e){return t=>t.filter((t=>t.submission_id===e))}function Be(e){return t=>t.filter((t=>"Grading"===e?void 0!==t.submission_id:!t.submission_id&&e===t.assessment_type))}var Ge=s(103);const Fe=e=>{switch(e){case Ge.a.new:return"This assessment is new.";case Ge.a.deadline:return"This assessment is closing soon.";case Ge.a.autograded:return"This assessment has been autograded.";case Ge.a.submitted:return"This submission is new.";case Ge.a.unsubmitted:return"This assessment has been unsubmitted.";case Ge.a.graded:return"This assessment has been manually graded.";case Ge.a.new_message:return"There are new messages.";default:return"Unknown notification"}};var He=e=>{const t=e.notificationFilter?e.notificationFilter(e.notifications):e.notifications;if(!t.length)return null;const s=Object(se.jsx)(h.W,{intent:g.a.DANGER,round:!0,large:e.large,children:t.length});if(!e.disableHover){const n=t=>Object(se.jsx)(h.W,{className:"row badge-tag",minimal:!0,multiline:!0,onRemove:()=>{return e.handleAcknowledgeNotifications((s=t.id,e=>e.filter((e=>e.id===s))));var s},children:Fe(t.type)},`${t.id}`),i=Object(se.jsx)("div",{className:"col",children:t.map(n)});return Object(se.jsx)(De.a,{className:e.className,content:i,interactionKind:h.K.HOVER,placement:S.a.RIGHT,hoverOpenDelay:50,hoverCloseDelay:50,lazy:!0,children:s})}return s};var Ve=Object(r.b)((e=>({notifications:e.session.notifications})),(e=>Object(c.b)({handleAcknowledgeNotifications:u.acknowledgeNotifications},e)))(He);var We=()=>Object(se.jsx)("div",{className:x()("NoPage",p.a.DARK),children:Object(se.jsx)(h.G,{icon:E.a.ERROR,title:"Assessment Not Found",description:"Please check the top right dropdown menu to see if you are in the right course."})});const qe=e=>{let t,s,n;switch(e){case H.c.graded:t=E.a.TICK,s=g.a.SUCCESS,n="Fully graded";break;case H.c.grading:t=E.a.TIME,s=g.a.WARNING,n="Grading in progress";break;case H.c.none:t=E.a.CROSS,s=g.a.DANGER,n="Not graded yet";break;default:t=E.a.DISABLE,s=g.a.PRIMARY,n="Not applicable"}return Object(se.jsx)(w.a,{className:"listing-title-tooltip",content:n,placement:S.a.RIGHT,children:Object(se.jsx)(h.w,{icon:t,intent:s})})},$e=(e,t,s)=>Object(se.jsx)(J.a,{label:e,icon:t?E.a.CARET_DOWN:E.a.CARET_RIGHT,onClick:s,options:{minimal:!0,className:"collapse-button"}});var Xe=e=>{const t=Object(o.j)(),{isMobileBreakpoint:s}=Object(j.e)(),[n,i]=f.useState(null),[a,r]=f.useState(!1),[c,l]=f.useState(!0),[d,u]=f.useState(!0),m=()=>r(!a),b=()=>l(!c),v=()=>u(!d),y=()=>i(null),x=e=>Object(_.sortBy)(e,[e=>-e.id]),O=(e,t)=>Object(se.jsxs)(h.b,{disabled:e.status!==H.a.attempted,icon:E.a.CONFIRM,intent:e.status===H.a.attempted?g.a.DANGER:g.a.NONE,minimal:!0,onClick:()=>i(e),children:[Object(se.jsx)("span",{className:"custom-hidden-xxxs",children:"Finalize"}),Object(se.jsx)("span",{className:"custom-hidden-xxs",children:" Submission"})]}),S=t=>{let s,n,i="";switch(t.status){case H.a.not_attempted:s=E.a.PLAY,n="Attempt";break;case H.a.attempting:s=E.a.PLAY,n="Continue",i=" Attempt";break;case H.a.attempted:s=E.a.EDIT,n="Review",i=" Attempt";break;case H.a.submitted:s=E.a.EYE_OPEN,n="Review",i=" Submission";break;default:s=E.a.PLAY,n="Review"}return Object(se.jsx)(k.b,{to:`/courses/${e.courseId}/${Object(we.a)(t.type)}/${t.id.toString()}/${Se.b.defaultQuestionId}`,children:Object(se.jsxs)(h.b,{icon:s,minimal:!0,onClick:()=>e.handleAcknowledgeNotifications(Me(t.id)),children:[Object(se.jsx)("span",{className:"custom-hidden-xxxs",children:n}),Object(se.jsx)("span",{className:"custom-hidden-xxs",children:i})]})})},A=(t,n,i,a)=>{const r="graded"===t.gradingStatus||!e.assessmentConfiguration.isManuallyGraded,o=s?5:3;return Object(se.jsx)("div",{children:Object(se.jsxs)(h.e,{className:"row listing",elevation:C.a.ONE,children:[Object(se.jsxs)("div",{className:`col-xs-${String(o)} listing-picture`,children:[Object(se.jsx)(Ve,{className:"badge",notificationFilter:Me(t.id),large:!0}),Object(se.jsx)("img",{alt:"Assessment",className:`cover-image-${t.status}`,src:t.coverImage?t.coverImage:T.a})]}),Object(se.jsxs)("div",{className:`col-xs-${String(12-o)} listing-text`,children:[R(t,n,a),Object(se.jsx)("div",{className:"listing-xp",children:Object(se.jsx)(h.t,{children:r?`XP: ${t.xp} / ${t.maxXp}`:`Max XP: ${t.maxXp}`})}),Object(se.jsx)("div",{className:"listing-description",children:Object(se.jsx)(ee.a,{content:t.shortSummary})}),Object(se.jsxs)("div",{className:"listing-footer",children:[Object(se.jsxs)("div",{children:[Object(se.jsxs)(h.Y,{className:"listing-due-date",children:[Object(se.jsx)(h.w,{className:"listing-due-icon",iconSize:12,icon:E.a.CALENDAR}),`${Ae(t.openAt)?"Opened":"Opens"}: ${ke(t.openAt)}`]}),Ae(t.openAt)&&Object(se.jsxs)(h.Y,{className:"listing-due-date",children:[Object(se.jsx)(h.w,{className:"listing-due-icon",iconSize:12,icon:E.a.TIME}),`Due: ${ke(t.closeAt)}`]})]}),Object(se.jsx)("div",{className:"listing-button",children:i?S(t):null})]})]})]})},n)},R=(e,t,s)=>Object(se.jsxs)("div",{className:"listing-header",children:[Object(se.jsx)(h.Y,{ellipsize:!0,children:Object(se.jsxs)(h.r,{className:"listing-title",children:[e.title,e.private?Object(se.jsx)(w.a,{className:"listing-title-tooltip",content:"This assessment is password-protected.",children:Object(se.jsx)(h.w,{icon:"lock"})}):null,s?qe(e.gradingStatus):null]})}),Object(se.jsx)("div",{className:"listing-button",children:O(e)})]}),{assessmentOverviews:I,isStudent:L}=e,P=f.useMemo((()=>null===I||void 0===I?void 0:I.filter((t=>t.type===e.assessmentConfiguration.type))),[I,e.assessmentConfiguration.type]),N=Object(we.b)(t.assessmentId),D=Object(we.b)(t.questionId)||Se.b.defaultQuestionId;if(null!==N&&void 0!==P){const t=P.filter((e=>e.id===N))[0];if(!t)return Object(se.jsx)(We,{});const s={assessmentId:N,questionId:D,notAttempted:t.status===H.a.not_attempted,canSave:!e.isStudent||t.status!==H.a.submitted&&!Ae(t.closeAt),assessmentConfiguration:e.assessmentConfiguration};return Object(se.jsx)(Pe,{...s})}let M;if(void 0===P)M=Object(se.jsx)(h.G,{description:"Fetching assessment...",icon:Object(se.jsx)(h.R,{})});else if(0===P.length)M=Object(se.jsx)(h.G,{title:"There are no assessments.",icon:E.a.FLAME});else{const e=e=>!Ae(e.closeAt)&&!Ae(e.openAt),t=x(P.filter(e)).map(((e,t)=>A(e,t,!L,!1))),s=e=>!Ae(e.closeAt)&&Ae(e.openAt)&&e.status!==H.a.submitted,n=x(P.filter((e=>s(e)))).map(((e,t)=>A(e,t,!0,!1))),i=x(P.filter((t=>!s(t)&&!e(t)))).map(((e,t)=>A(e,t,!0,!0))),r=Object(se.jsxs)(se.Fragment,{children:[$e("Upcoming",d,v),Object(se.jsx)(h.g,{isOpen:d,children:t})]}),o=Object(se.jsxs)(se.Fragment,{children:[$e("Open",c,b),Object(se.jsx)(h.g,{isOpen:c,children:n})]}),l=Object(se.jsxs)(se.Fragment,{children:[$e("Closed",a,m),Object(se.jsx)(h.g,{isOpen:a,children:i})]});M=Object(se.jsxs)(se.Fragment,{children:[t.length>0?r:null,n.length>0?o:null,i.length>0?l:null]})}const U=n?Object(se.jsxs)("p",{children:["You are about to finalise your submission for the ",n.type.toLowerCase()," ",Object(se.jsxs)("i",{children:['"',n.title,'"']}),"."]}):Object(se.jsx)("p",{children:"You are about to finalise your submission."}),B=Object(se.jsxs)(se.Fragment,{children:[U,Object(se.jsxs)("p",{children:["Finalising your submission early grants you additional XP, but"," ",Object(se.jsx)("span",{className:"warning",children:"this action is irreversible."})]})]}),G=Object(se.jsxs)(h.h,{className:"betcha-dialog",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:null!==n,onClose:y,title:"Finalise submission?",children:[Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsx)(h.Y,{children:B})}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(J.a,{label:"Cancel",onClick:y,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Finalise",onClick:()=>{n&&(e.handleSubmitAssessment(n.id),y())},options:{minimal:!1,intent:g.a.DANGER}})]})})]});return Object(se.jsxs)("div",{className:"Assessment",children:[Object(se.jsx)(Ne.a,{display:M,loadContentDispatch:e.handleAssessmentOverviewFetch}),G]})};var ze=Object(r.b)(((e,t)=>({assessmentOverviews:e.session.assessmentOverviews,isStudent:!e.session.role||e.session.role===O.a.Student,courseId:e.session.courseId})),(e=>Object(c.b)({handleAcknowledgeNotifications:u.acknowledgeNotifications,handleAssessmentOverviewFetch:u.fetchAssessmentOverviews,handleSubmitAssessment:u.submitAssessment},e)))(Xe),Ye=s(127);var Ke=()=>Object(se.jsx)("div",{className:x()("NoPage",p.a.DARK),children:Object(se.jsx)(h.G,{icon:E.a.ERROR,title:"404 Not Found",description:"The requested resource could not be found"})}),Qe=s(171),Je=s(96),Ze=s(40);const et={coverImage:`${Ze.d}/default.png`,description:"",completionText:""},tt={uuid:"",title:"Achievement Title Here",xp:0,isVariableXp:!1,isTask:!1,position:0,prerequisiteUuids:[],goalUuids:[],cardBackground:`${Ze.c}/default.png`,view:et};var st=function(e){const{allowNewUuid:t,setNewUuid:s}=e,n=Object(f.useContext)(Ze.a);return Object(se.jsx)(h.b,{className:"command-button",disabled:!t,icon:E.a.NEW_OBJECT,onClick:()=>s(n.insertAchievement(tt)),text:"Create Achievement"})},nt=s(69);var it=function(e){const{deleteItem:t,item:s}=e;return Object(se.jsx)(w.a,{content:"Delete",children:Object(se.jsx)(h.b,{icon:E.a.TRASH,intent:"danger",onClick:async()=>{await Object(nt.b)({contents:`Are you sure you want to delete '${s}' ?`,negativeLabel:"No",positiveIntent:"danger",positiveLabel:"Yes, delete"})&&t()}})})};var at=function(e){const{discardChanges:t,saveChanges:s}=e;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Save Changes",children:Object(se.jsx)(h.b,{icon:E.a.FLOPPY_DISK,intent:"primary",onClick:()=>{s(),Object(me.d)("Saved changes locally")}})}),Object(se.jsx)(w.a,{content:"Discard Changes",children:Object(se.jsx)(h.b,{icon:E.a.CROSS,intent:"danger",onClick:()=>{t(),Object(me.e)("Discarded changes")}})})]})},rt=s(1314);var ot=function(e){const{changeGoalUuids:t,goalUuids:s}=e,n=Object(f.useContext)(Ze.a),i=n.getAllGoalUuids(),a=s.filter((e=>!n.isInvalidGoal(n.getGoal(e)))),r=rt.a.ofType(),o=new Set(a),c=new Set(Object(_.without)(i,...s)),l=e=>{void 0!==l&&(o.delete(e),c.add(e),t([...o]))};return Object(se.jsx)(r,{itemRenderer:(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e.text},e.uuid)},items:[...c].map((e=>n.getGoal(e))),noResults:Object(se.jsx)(h.B,{disabled:!0,text:"No available goal"}),onItemSelect:e=>{return s=e.uuid,o.add(s),c.delete(s),void t([...o]);var s},selectedItems:[...o].map((e=>n.getGoal(e))),tagInputProps:{onRemove:e=>l((e=>n.getUuidByText(e))(e.toString()))},tagRenderer:e=>e.text,itemPredicate:(e,t)=>t.text.toLowerCase().includes(e.toLowerCase()),resetOnSelect:!0})},ct=s(382);var lt=function(e){const{changePosition:t,position:s}=e,n=Object(f.useContext)(Ze.a).listTaskUuids().length+1,i=[...Array(n+1).keys()],a=ct.a.ofType();return Object(se.jsx)(a,{filterable:!1,itemRenderer:(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e},e)},items:i,onItemSelect:t,children:Object(se.jsx)(h.b,{text:s})})};var dt=function(e){const{changePrerequisiteUuids:t,uuid:s,prerequisiteUuids:n}=e,i=Object(f.useContext)(Ze.a),a=[],r=n.filter((e=>!i.isInvalidAchievement(i.getAchievement(e)))),o=rt.a.ofType(),c=new Set(r),l=new Set(Object(_.without)(a,...r));return Object(se.jsx)(o,{itemRenderer:(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e.title},e.uuid)},items:[...l].map((e=>i.getAchievement(e))),noResults:Object(se.jsx)(h.B,{disabled:!0,text:"No available achievement"}),onItemSelect:e=>{return s=e.uuid,c.add(s),l.delete(s),void t([...c]);var s},selectedItems:[...c].map((e=>i.getAchievement(e))),tagInputProps:{onRemove:e=>{var s;void 0!==(s=(e=>i.getUuidByTitle(e))(e.toString()))&&(c.delete(s),l.add(s),t([...c]))}},tagRenderer:e=>e.title,itemPredicate:(e,t)=>t.title.toLowerCase().includes(e.toLowerCase()),resetOnSelect:!0})};var ut=function(e){const{changeCardBackground:t,changeGoalUuids:s,changePosition:n,changePrerequisiteUuids:i,changeIsVariableXp:a,editableAchievement:r}=e,{uuid:o,cardBackground:c,goalUuids:l,position:d,prerequisiteUuids:u,isVariableXp:p}=r,[g,m]=Object(f.useState)(!1),b=()=>m(!g);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"More Settings",children:Object(se.jsx)(h.b,{icon:E.a.WRENCH,onClick:b})}),Object(se.jsx)(h.h,{title:"More Settings",icon:E.a.WRENCH,isOpen:g,onClose:b,children:Object(se.jsxs)("div",{style:{padding:"0 0.5em"},children:[Object(se.jsx)("h3",{children:"Card Background"}),Object(se.jsx)(h.l,{multiline:!0,onChange:t,placeholder:"Enter card background URL here",value:c}),Object(se.jsx)("h3",{children:"Position"}),Object(se.jsx)("p",{children:"Note: Select position 0 to hide achievement"}),Object(se.jsx)(lt,{changePosition:n,position:d}),Object(se.jsx)("h3",{children:"Prerequisites"}),Object(se.jsx)(dt,{changePrerequisiteUuids:i,uuid:o,prerequisiteUuids:u}),Object(se.jsx)("h3",{children:"Goals"}),Object(se.jsx)(ot,{changeGoalUuids:s,goalUuids:l}),Object(se.jsx)("h3",{children:"Variable XP"}),Object(se.jsx)(h.f,{label:"The rewarded XP will be equal to the sum of 'count' of goals",checked:p,onChange:a})]})})]})};var ht=function(e){const{uuid:t}=e;return Object(se.jsx)(se.Fragment,{children:Object(se.jsx)(w.a,{content:"Click to copy achievement UUID",children:Object(se.jsx)(h.b,{icon:E.a.CLIPBOARD,onClick:()=>{navigator.clipboard.writeText(t),Object(me.d)("UUID copied to clipboard")}})})})};let pt;!function(e){e.CHANGE_CARD_BACKGROUND="CHANGE_CARD_BACKGROUND",e.CHANGE_DEADLINE="CHANGE_DEADLINE",e.CHANGE_GOAL_UUIDS="CHANGE_GOAL_UUIDS",e.CHANGE_POSITION="CHANGE_POSITION",e.CHANGE_PREREQUISITE_UUIDS="CHANGE_PREREQUISITE_UUIDS",e.CHANGE_RELEASE="CHANGE_RELEASE",e.CHANGE_TITLE="CHANGE_TITLE",e.CHANGE_IS_VARIABLE_XP="CHANGE_VARIABLE_XP",e.CHANGE_VIEW="CHANGE_VIEW",e.CHANGE_XP="CHANGE_XP",e.DELETE_ACHIEVEMENT="DELETE_ACHIEVEMENT",e.DISCARD_CHANGES="DISCARD_CHANGES",e.SAVE_CHANGES="SAVE_CHANGES"}(pt||(pt={}));var gt=s(530),mt=s(75);var bt=function(e){const{type:t,date:s,changeDate:n}=e,[i,a]=Object(f.useState)(!1),r=()=>a(!i),o=void 0===s?`No ${t}`:`${Object(mt.d)(s)}`;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:o,children:Object(se.jsx)(h.b,{minimal:!0,onClick:r,outlined:!0,children:`${t}`})}),Object(se.jsxs)(h.h,{isCloseButtonShown:!1,isOpen:i,onClose:r,style:{background:"#fff",maxWidth:"max-content",padding:"0.25em",textAlign:"center"},title:`${t}`,children:[Object(se.jsx)(gt.a,{onChange:n,timePickerProps:{showArrowButtons:!0},value:s}),Object(se.jsx)(h.b,{onClick:()=>n(void 0),text:`Remove ${t}`})]})]})};var ft=function(e){const{changeView:t,view:s}=e,{coverImage:n,description:i,completionText:a}=s,[r,o]=Object(f.useState)(!1),c=()=>o(!r);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Edit View",children:Object(se.jsx)(h.b,{icon:E.a.WIDGET_HEADER,onClick:c})}),Object(se.jsx)(h.h,{title:"Edit View",icon:E.a.WIDGET_HEADER,isOpen:r,onClose:c,children:Object(se.jsxs)("div",{style:{padding:"0 0.5em"},children:[Object(se.jsx)("h3",{children:"Cover Image"}),Object(se.jsx)(h.l,{multiline:!0,onChange:e=>t({...s,coverImage:e}),placeholder:"Enter cover image URL here",value:n}),Object(se.jsx)("h3",{children:"Description"}),Object(se.jsx)(h.l,{multiline:!0,onChange:e=>t({...s,description:e}),placeholder:"Enter description here",value:i}),Object(se.jsx)("h3",{children:"Completion Text"}),Object(se.jsx)(h.l,{multiline:!0,onChange:e=>t({...s,completionText:e}),placeholder:"Enter completion text here",value:a})]})})]})};const vt=e=>({editableAchievement:e,isDirty:!1}),yt=(e,t)=>{switch(t.type){case pt.SAVE_CHANGES:return{...e,isDirty:!1};case pt.DISCARD_CHANGES:return vt(t.payload);case pt.DELETE_ACHIEVEMENT:return{...e,isDirty:!1};case pt.CHANGE_CARD_BACKGROUND:return{editableAchievement:{...e.editableAchievement,cardBackground:t.payload},isDirty:!0};case pt.CHANGE_DEADLINE:return{editableAchievement:{...e.editableAchievement,deadline:t.payload},isDirty:!0};case pt.CHANGE_GOAL_UUIDS:return{editableAchievement:{...e.editableAchievement,goalUuids:t.payload},isDirty:!0};case pt.CHANGE_POSITION:return{editableAchievement:{...e.editableAchievement,isTask:0!==t.payload,position:t.payload},isDirty:!0};case pt.CHANGE_PREREQUISITE_UUIDS:return{editableAchievement:{...e.editableAchievement,prerequisiteUuids:t.payload},isDirty:!0};case pt.CHANGE_RELEASE:return{editableAchievement:{...e.editableAchievement,release:t.payload},isDirty:!0};case pt.CHANGE_TITLE:return{editableAchievement:{...e.editableAchievement,title:t.payload},isDirty:!0};case pt.CHANGE_VIEW:return{editableAchievement:{...e.editableAchievement,view:t.payload},isDirty:!0};case pt.CHANGE_XP:return{editableAchievement:{...e.editableAchievement,xp:t.payload},isDirty:!0};case pt.CHANGE_IS_VARIABLE_XP:return{editableAchievement:{...e.editableAchievement,isVariableXp:!e.editableAchievement.isVariableXp},isDirty:!0};default:return e}};var xt=function(e){const{uuid:t,isNewAchievement:s,releaseUuid:n,removeCard:i,requestPublish:a}=e,r=Object(f.useContext)(Ze.a),o=r.getAchievement(t),c=Object(f.useMemo)((()=>Object(_.cloneDeep)(o)),[o]),[l,d]=Object(f.useReducer)(yt,c,vt),[u,p]=Object(f.useState)(s),{editableAchievement:g,isDirty:m}=l,{cardBackground:b,deadline:v,release:y,title:x,view:j,xp:O}=g;return Object(se.jsxs)("li",{className:"editable-card",style:{background:`url(${b}) center/cover`},children:[Object(se.jsx)("div",{className:"action-button",children:m?Object(se.jsx)(at,{discardChanges:()=>d({type:pt.DISCARD_CHANGES,payload:c}),saveChanges:()=>{d({type:pt.SAVE_CHANGES}),r.modifyAchievement(g),u&&(n(),p(!1)),a()}}):Object(se.jsx)(it,{deleteItem:()=>{d({type:pt.DELETE_ACHIEVEMENT}),r.removeAchievement(t),u&&(n(),p(!1)),i(t),a()},item:x})}),Object(se.jsxs)("div",{className:"content",children:[Object(se.jsx)("h3",{className:"title",children:Object(se.jsx)(h.l,{onChange:e=>d({type:pt.CHANGE_TITLE,payload:e}),placeholder:"Enter your title here",value:x})}),Object(se.jsx)("div",{className:"xp",children:Object(se.jsx)(w.a,{content:"XP",children:Object(se.jsx)(h.H,{value:O,min:0,allowNumericCharactersOnly:!0,leftIcon:E.a.TRENDING_UP,placeholder:"XP",onValueChange:e=>d({type:pt.CHANGE_XP,payload:e})})})}),Object(se.jsxs)("div",{className:"details",children:[Object(se.jsx)(bt,{changeDate:e=>d({type:pt.CHANGE_RELEASE,payload:e}),date:y,type:"Release"}),Object(se.jsx)(bt,{changeDate:e=>d({type:pt.CHANGE_DEADLINE,payload:e}),date:v,type:"Deadline"}),Object(se.jsx)(ht,{uuid:t})]})]}),Object(se.jsxs)("div",{className:"content-button",children:[Object(se.jsx)(ft,{changeView:e=>d({type:pt.CHANGE_VIEW,payload:e}),view:j}),Object(se.jsx)(ut,{changeCardBackground:e=>d({type:pt.CHANGE_CARD_BACKGROUND,payload:e}),changeGoalUuids:e=>{d({type:pt.CHANGE_GOAL_UUIDS,payload:e})},changePosition:e=>d({type:pt.CHANGE_POSITION,payload:e}),changePrerequisiteUuids:e=>d({type:pt.CHANGE_PREREQUISITE_UUIDS,payload:e}),changeIsVariableXp:()=>d({type:pt.CHANGE_IS_VARIABLE_XP}),editableAchievement:g})]})]})};let jt=[];var Ot=function(e){const{requestPublish:t}=e,s=Object(f.useContext)(Ze.a),[n,i]=Object(f.useState)(""),a=""===n,r=()=>i(""),o=e=>{let t=0;for(;jt[t].key!==e&&t<jt.length;)t++;jt.splice(t,1)},c=(e,s)=>Object(se.jsx)(xt,{uuid:e,isNewAchievement:s,releaseUuid:r,removeCard:o,requestPublish:t},e);return 0===jt.length&&(jt=s.listSortedAchievementUuids().map((e=>c(e,!1)))),Object(se.jsxs)("div",{className:"achievement-editor",children:[Object(se.jsx)("div",{className:"command",children:Object(se.jsx)(st,{allowNewUuid:a,setNewUuid:e=>{i(e),jt[jt.length]=jt[0],jt[0]=c(e,!0)}})}),Object(se.jsx)("ul",{className:"achievement-container",children:jt})]})},Ct=s(26);var St=function(e){const{filterState:t,icon:s,ownStatus:n}=e,[i,a]=t;return Object(se.jsxs)("div",{className:"filter",onClick:()=>a(n),style:{color:Object(Ze.h)(i,n)},children:[Object(se.jsx)(h.w,{icon:s,iconSize:30}),Object(se.jsx)("p",{children:n})]})},Et=s(294),wt=s(15);var _t=function(e){const{studentXp:t}=e;return Object(se.jsxs)("div",{className:"milestone",children:[Object(se.jsx)("h3",{children:"Your Total XP"}),Object(se.jsxs)("div",{className:"user-xp",children:[t," XP"]}),Object(se.jsx)("h3",{children:"CA Achievement Level"}),Object(se.jsxs)("div",{className:"details",children:[Object(se.jsxs)("div",{className:"level-badge",children:[Object(se.jsx)("span",{className:"level-icon"}),Object(se.jsx)("p",{children:Se.b.caFulfillmentLevel})]}),Object(se.jsx)("p",{className:"description",children:"Complete CS1101S CA Component"})]}),Object(se.jsxs)("div",{className:"details",children:[Object(se.jsxs)("div",{className:"level-badge",children:[Object(se.jsx)("span",{className:"level-icon"}),Object(se.jsxs)("p",{children:[Se.b.caFulfillmentLevel,"+"]})]}),Object(se.jsx)("p",{className:"description",children:"Counts towards CS1010R"})]}),Object(se.jsx)("div",{className:"footer",children:Object(se.jsxs)("p",{children:["Full CA level of ",Se.b.caFulfillmentLevel," is subjected to change."]})})]})};var At=function(e){const{studentXp:t}=e,[s,n]=Object(f.useState)(!1),i=Math.floor(t/Ze.j)+1,a=t%Ze.j,r=a/Ze.j;return Object(se.jsxs)("div",{className:"level",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Object(se.jsxs)("div",{className:"level-badge",children:[Object(se.jsx)("span",{className:"level-icon"}),Object(se.jsx)("p",{children:`Level ${i}`})]}),Object(se.jsxs)("span",{className:"level-progress",children:[Object(se.jsx)(h.N,{animate:!1,className:"progress-bar",stripes:!1,value:r}),Object(se.jsxs)("p",{children:[a," / ",Ze.j," XP"]})]}),0!==Se.b.caFulfillmentLevel&&s&&Object(se.jsx)(_t,{studentXp:t})]})};var kt=function(e){const{name:t,userState:s}=e,[n]=s,i=null===n||void 0===n?void 0:n.courseRegId,a=Object(j.f)((e=>e.session.courseRegId)),o=Object(r.c)();Object(f.useEffect)((()=>{o(i&&i!==a?{type:wt.p,payload:i}:{type:wt.o})}),[i,a,o]);const c=Object(j.f)((e=>e.session.xp));return Object(se.jsxs)("div",{className:"achievement-overview",children:[Object(se.jsx)(At,{studentXp:c}),Object(se.jsx)("h3",{children:t})]})};const Tt=new Date(0,0,2).getTime()-new Date(0,0,0).getTime();var Rt=function(e){const{deadline:t}=e,s=void 0!==t&&!Object(mt.a)(t)&&Object(mt.g)(t)<=Tt?Ze.b.RED:Ze.b.BLACK;return Object(se.jsxs)("div",{className:"deadline",children:[Object(se.jsx)(h.w,{color:s,icon:E.a.STOPWATCH}),Object(se.jsx)("p",{style:{color:s},children:Object(mt.e)(t)})]})};const It=(e,t)=>(t?"Total ":"")+e+" XP";var Lt=function(e){const{isBonus:t,xp:s}=e;return Object(se.jsx)("div",{className:"xp",children:0!==s&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.w,{icon:E.a.BANK_ACCOUNT}),Object(se.jsx)("p",{children:It(s,t)})]})})};var Pt=function(e){const{uuid:t,focusState:s,isDropdownOpen:n,shouldRender:i,toggleDropdown:a}=e,r=Object(f.useContext)(Ze.a),[o,c]=s,{cardBackground:l,title:d}=r.getAchievement(t),u=r.getDisplayDeadline(t),p=r.getDescendantXp(t),m=r.getProgressFrac(t),b=r.getStatus(t),v=void 0!==n&&0!==r.getImmediateChildren(t).size;return Object(se.jsxs)("div",{className:"achievement-card",onClick:()=>c(t),onClickCapture:a,style:{...Object(Ze.i)(t,o),opacity:i?"100%":"20%",background:`url(${l}) center/cover`},children:[Object(se.jsx)("div",{className:"dropdown-button",children:v&&Object(se.jsx)(h.w,{icon:n?E.a.CARET_DOWN:E.a.CARET_RIGHT})}),Object(se.jsxs)("div",{className:"content",children:[Object(se.jsxs)("div",{className:"heading",children:[Object(se.jsx)("h3",{children:d.toUpperCase()}),b===Ct.b.COMPLETED&&Object(se.jsx)(h.w,{icon:E.a.CONFIRM,intent:g.a.SUCCESS,style:{padding:"1em"}})]}),Object(se.jsxs)("div",{className:"details",children:[Object(se.jsx)(Rt,{deadline:u}),Object(se.jsx)(Lt,{isBonus:v,xp:p})]}),Object(se.jsx)(h.N,{animate:!1,className:"progress",intent:1===m?"success":"primary",stripes:!1,value:m})]})]})};var Nt=e=>{let{uuid:t,filterStatus:s,focusState:n}=e;const i=Object(f.useContext)(Ze.a),a=[...i.getImmediateChildren(t)],r=Object(Ze.f)(),[o,c]=Object(f.useState)(!1),l=e=>{const t=i.getStatus(e);switch(s){case Ct.f.ALL:return!0;case Ct.f.ACTIVE:return t===Ct.b.ACTIVE;case Ct.f.COMPLETED:return t===Ct.b.COMPLETED;default:return!1}};return Object(se.jsx)(se.Fragment,{children:(e=>(e=>!i.isPrerequisite(e)&&l(e))(e)||(e=>[...i.getImmediateChildren(e)].reduce(((e,t)=>e||l(t)),!1))(e))(t)&&Object(se.jsxs)("li",{className:"task",children:[Object(se.jsx)(Pt,{uuid:t,focusState:n,isDropdownOpen:o,shouldRender:l(t),toggleDropdown:()=>c(!o)}),Object(se.jsx)(h.g,{isOpen:o,keepChildrenMounted:!0,children:Object(se.jsx)("div",{className:"prerequisite-container",children:a.map((e=>Object(se.jsxs)("div",{className:"prerequisite",children:[Object(se.jsx)("div",{className:"dropdown-lines",style:{borderBottom:`1px solid ${r}`,borderLeft:`1px solid ${r}`}}),Object(se.jsx)(Pt,{uuid:e,focusState:n,shouldRender:l(e)})]},e)))})})]})})};var Dt=e=>{let{assessment:t,showToQuestion:s}=e;const n=Object(j.f)((e=>e.session.courseId)),i=Object(f.useMemo)((()=>e=>{if(!n)return void Object(me.e)("Course ID not found");const s=`/courses/${n}/${Object(we.a)(null===t||void 0===t?void 0:t.type)}`+`/${null===t||void 0===t?void 0:t.id.toString()}`;Ee.a.push(s+`/${e}`)}),[null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.type,n]);return Object(se.jsxs)("div",{children:[Object(se.jsx)("h1",{className:"assessment-feedback",children:"Feedback"}),Object(se.jsx)("div",{className:"feedback-list",children:t&&t.questions.map(((e,t)=>Object(se.jsxs)("div",{className:"assessment-comments",children:[Object(se.jsx)("span",{children:Object(se.jsx)("h2",{className:"question-header",children:"Q"+(t+1)})}),Object(se.jsxs)("div",{className:"box-comment",children:[Object(se.jsx)("p",{children:null===e.comments?"No Comments":e.comments}),Object(se.jsx)("p",{className:"xp",children:"XP: "+e.xp+"/"+e.maxXp})]}),s&&Object(se.jsx)("button",{className:"to-assessment-button",onClick:()=>i(t),children:"To Question"})]},t)))})]})};var Mt=function(e){const{awardedXp:t,completionText:s}=e,n=s?s.split("\n"):[""];return Object(se.jsxs)("div",{className:"completion",children:[t>0&&Object(se.jsx)("h1",{children:`AWARDED ${t}XP`}),n.map(((e,t)=>Object(se.jsxs)("p",{children:[e,Object(se.jsx)("br",{})]},t)))]})};var Ut=function(e){const{goals:t}=e;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h1",{className:"progress-header",children:"Progress"}),t.map((e=>(e=>{const{uuid:t,text:s,targetCount:n,count:i,completed:a}=e,r=Math.min(0===n?0:i/n,1);return Object(se.jsxs)("div",{className:"goal",children:[Object(se.jsxs)("div",{className:"goal-badge",children:[Object(se.jsx)("span",{className:"goal-icon"}),Object(se.jsxs)("p",{children:[i," / ",n]})]}),Object(se.jsxs)("div",{className:"goal-progress",children:[Object(se.jsx)("p",{children:s}),Object(se.jsx)(h.N,{animate:!1,className:"progress",intent:a?"success":void 0,stripes:!1,value:r})]})]},t)})(e)))]})};var Bt=function(e){var t;let{focusUuid:s,userState:n}=e;const i=Number.isNaN(+s)||0===+s?void 0:+s;let a;if(n){const[e]=n;a=null===e||void 0===e?void 0:e.courseRegId}const o=Object(j.f)((e=>e.session.courseRegId)),c=void 0!==a&&a!==o,l=Object(r.c)();Object(f.useEffect)((()=>{l({type:H.b}),i&&l(c?{type:wt.g,payload:{assessmentId:i,courseRegId:a}}:{type:wt.f,payload:i})}),[l,i,a,c]);const d=Object(f.useContext)(Ze.a),u=Object(j.f)((e=>e.session.assessments)).get(i),p=(null!==(t=Object(j.f)((e=>e.session.assessmentOverviews)))&&void 0!==t?t:[]).find((e=>e.id===i));if(""===s)return Object(se.jsxs)("div",{className:"no-view",children:[Object(se.jsx)(h.w,{icon:E.a.MOUNTAIN,iconSize:60}),Object(se.jsx)("h2",{children:"Select an achievement"})]});const g=d.getAchievement(s),{deadline:m,title:b,view:v}=g,{coverImage:y,completionText:x,description:O}=v,C=d.getAchievementXp(s),S=d.listGoals(s),w=d.getStatus(s),_=O?O.split("\n"):[""];return Object(se.jsxs)("div",{className:"view",style:{...Object(Ze.g)(),...Object(Ze.e)()},children:[Object(se.jsxs)("div",{className:"cover",style:{background:`rgba(0, 0, 0, 0.5) url(${y}) center/cover`,backgroundBlendMode:"darken"},children:[Object(se.jsx)("h1",{children:b.toUpperCase()}),m&&Object(se.jsx)("p",{children:`Deadline: ${Object(mt.d)(m)}`}),Object(se.jsx)("span",{className:"description",children:_.map(((e,t)=>Object(se.jsxs)("p",{children:[e,Object(se.jsx)("br",{})]},t)))})]}),w===Ct.b.COMPLETED&&u&&p&&p.isManuallyGraded&&Object(se.jsx)(Dt,{assessment:u,showToQuestion:!c}),S.length>0&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(Ut,{goals:S}),w===Ct.b.COMPLETED&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("hr",{}),Object(se.jsx)(Mt,{awardedXp:C,completionText:x})]})]})]})};function Gt(e){return"graded"===e.gradingStatus||!e.isManuallyGraded&&"submitted"===e.status}var Ft=function(e,t,s){const n=[...e].sort(((e,t)=>b()(e.closeAt).diff(b()(t.closeAt)))),i=e.length,a=t.map((e=>e.type)),r=a.map((e=>[]));n.forEach(((e,t)=>{if(!Object(mt.b)(new Date(e.openAt))||Object(mt.a)(new Date(e.closeAt))&&"submitted"!==e.status)return;const n=e.id.toString();s.hasAchievement(n)||(s.insertFakeGoalDefinition({uuid:n+"0",text:`Submitted ${e.title}`,achievementUuids:[n],meta:{type:Ct.l.ASSESSMENT,assessmentNumber:e.id,requiredCompletionFrac:0}},"submitted"===e.status),e.isManuallyGraded&&s.insertFakeGoalDefinition({uuid:n+"1",text:`Graded ${e.title}`,achievementUuids:[n],meta:{type:Ct.l.ASSESSMENT,assessmentNumber:e.id,requiredCompletionFrac:0}},"graded"===e.gradingStatus),s.insertFakeAchievement({uuid:n,title:e.title,xp:Gt(e)?e.xp:e.maxXp,isVariableXp:!1,deadline:new Date(e.closeAt),release:new Date(e.openAt),isTask:void 0!==e.isPublished&&e.isPublished,position:t-i-100,prerequisiteUuids:[],goalUuids:e.isManuallyGraded?[n+"0",n+"1"]:[n+"0"],cardBackground:`${Ze.c}/default.png`,view:{coverImage:e.coverImage,description:e.shortSummary,completionText:`XP: ${e.xp} / ${e.maxXp}`}}),Gt(e)&&a.forEach(((t,s)=>{t===e.type&&r[s].push(n)})))})),r.forEach(((e,t)=>{const n=a[t];e.length>0&&s.insertFakeAchievement({uuid:n,title:"Completed "+n,xp:0,isVariableXp:!1,deadline:void 0,release:void 0,isTask:!0,position:-1-t,prerequisiteUuids:e,goalUuids:[],cardBackground:`${Ze.c}/default.png`,view:{coverImage:`${Ze.d}/default.png`,description:"Your completed "+n+" are listed here!",completionText:""}})}))};const Ht=(e,t,s)=>e.map((e=>Object(se.jsx)(Nt,{uuid:e,filterStatus:t,focusState:s},e)));var Vt=function(e){const{getAchievements:t,getOwnGoals:s,getGoals:n,getUserAssessmentOverviews:i,getUsers:a,updateGoalProgress:r,fetchAssessmentOverviews:o,group:c,inferencer:l,name:d,role:u,assessmentConfigs:h,assessmentOverviews:p,achievementAssessmentOverviews:g,users:m}=e,b=Object(f.useState)(void 0),[v]=b;Object(f.useEffect)((()=>{v?n(v.courseRegId):s(),v?i(v.courseRegId):o(),t()}),[v,t,n,s,i,o]);const y=v?g:p;y&&h&&Ft(y,h,l);const x=Object(f.useState)(Ct.f.ALL),[j]=x,C=Object(f.useState)(""),[S,w]=C,_=Object(f.useState)(!1),[A]=_;return Object(f.useEffect)((()=>{w("")}),[v,w]),Object(se.jsx)(Ze.a.Provider,{value:l,children:Object(se.jsxs)("div",{className:"AchievementDashboard",children:[Object(se.jsx)(kt,{name:v?v.name||v.username:d||"User",userState:b}),u&&u!==O.a.Student&&Object(se.jsx)(Et.a,{userState:b,hiddenState:_,studio:c||"Staff",users:m,getUsers:a,updateGoalProgress:r}),Object(se.jsxs)("div",{className:"achievement-main",children:[Object(se.jsxs)("div",{className:"filter-container",children:[Object(se.jsx)(St,{filterState:x,icon:E.a.GLOBE,ownStatus:Ct.f.ALL}),Object(se.jsx)(St,{filterState:x,icon:E.a.LOCATE,ownStatus:Ct.f.ACTIVE}),Object(se.jsx)(St,{filterState:x,icon:E.a.ENDORSED,ownStatus:Ct.f.COMPLETED})]}),Object(se.jsx)("ul",{className:"task-container",children:Ht(u!==O.a.Student&&A?l.listAllSortedAchievementUuids():l.listSortedReleasedTaskUuids(),j,C)}),Object(se.jsx)("div",{className:"view-container",children:Object(se.jsx)(Bt,{focusUuid:S,userState:b})})]})]})})};var Wt=function(e){const{awaitPublish:t,publishChanges:s}=e,n=Object(f.useContext)(Ze.a),[i,a]=Object(f.useReducer)((e=>!e),!1),r=Object(f.useState)(""),[o]=r;return Object(se.jsxs)("div",{className:"achievement-preview",children:[Object(se.jsxs)("div",{className:"command",children:[Object(se.jsx)(h.b,{className:"command-button",icon:i&&E.a.ARROW_LEFT,rightIcon:!i&&E.a.ARROW_RIGHT,text:i?"Task":"View",onClick:a}),t&&Object(se.jsx)(h.b,{className:"command-button",icon:E.a.CLOUD_UPLOAD,intent:"primary",text:"Publish Changes",onClick:s})]}),i?Object(se.jsx)("div",{className:"preview-container",children:Object(se.jsx)(Bt,{focusUuid:o})}):Object(se.jsx)("ul",{className:"preview-container",children:Ht(n.listSortedTaskUuids(),Ct.f.ALL,r)})]})};let qt;!function(e){e.CHANGE_META="CHANGE_META",e.CHANGE_TEXT="CHANGE_TEXT",e.DELETE_GOAL="DELETE_GOAL",e.DISCARD_CHANGES="DISCARD_CHANGES",e.SAVE_CHANGES="SAVE_CHANGES"}(qt||(qt={}));const $t=e=>{switch(e){case Ct.l.ASSESSMENT:return{type:Ct.l.ASSESSMENT,assessmentNumber:0,requiredCompletionFrac:0};case Ct.l.BINARY:return{type:Ct.l.BINARY,condition:!1,targetCount:1};case Ct.l.MANUAL:return{type:Ct.l.MANUAL,targetCount:1};case Ct.l.EVENT:return{type:Ct.l.EVENT,eventNames:[Ct.e.RUN_CODE],targetCount:1,release:void 0,deadline:void 0,observeFrom:void 0,observeTo:void 0}}},Xt={uuid:"",text:"Goal Text Here",achievementUuids:[],meta:$t(Ct.l.MANUAL)};var zt=function(e){const{assessmentMeta:t,changeMeta:s}=e,{assessmentNumber:n,requiredCompletionFrac:i}=t;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Assessment Number",children:Object(se.jsx)(h.H,{allowNumericCharactersOnly:!0,onValueChange:e=>s({...t,assessmentNumber:e}),placeholder:"Enter assessment number here",value:n})}),Object(se.jsx)(w.a,{content:"Required Completion Percentage",children:Object(se.jsx)(h.H,{allowNumericCharactersOnly:!0,max:100,min:0,onValueChange:e=>{const n=e/100;s({...t,requiredCompletionFrac:n})},placeholder:"Enter required completion percentage here",rightElement:Object(se.jsx)("p",{children:"%"}),value:100*i})})]})};let Yt;function Kt(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return{type:"AND",operands:t}}function Qt(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return{type:"OR",operands:t}}!function(e){e.ACHIEVEMENT="achievement",e.ASSESSMENT_GRADING="assessment-grading",e.ASSESSMENT_SUBMISSION="assessment-submission"}(Yt||(Yt={}));const Jt=ct.a.ofType(),Zt=(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e},e)},es=e=>{if("object"===typeof e&&"type"in e){const{type:t,operands:s}=e,n=s.length,i=[];for(let e=0;e<n;e++)i.push(es(s[e])),e!==n-1&&i.push(t);return i.flat()}return[JSON.stringify(e)]};var ts=function(e){const{binaryMeta:t,changeMeta:s}=e,{condition:n,targetCount:i}=t,a=[],r=[],o=es(n);for(let l=0;l<o.length;l++)l%2===0?r[r.length]=o[l]:a[a.length]=o[l];const c=()=>{let e=JSON.parse(r[0]);for(let t=1;t<r.length;t++)e="AND"===a[t-1]?Kt(e,JSON.parse(r[t])):Qt(e,JSON.parse(r[t]));s({...t,condition:e})};return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Target Count",children:Object(se.jsx)(h.H,{allowNumericCharactersOnly:!0,leftIcon:E.a.BANK_ACCOUNT,min:0,onValueChange:e=>s({...t,targetCount:e}),placeholder:"Enter target count here",value:i})}),o.map(((e,t)=>Object(se.jsx)("div",{children:t%2===0?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Condition",children:Object(se.jsx)(h.l,{onChange:e=>((e,t)=>{r[t]=e,c()})(e,t/2),multiline:!0,placeholder:"Enter condition here",value:e})}),r.length>1&&Object(se.jsx)(w.a,{content:"Delete Condition",children:Object(se.jsx)(h.b,{intent:"danger",icon:"trash",onClick:()=>(e=>{for(let t=e;t<r.length-1;t++)r[t]=r[t+1],a[t]=a[t+1];r.length=r.length-1,a.length=a.length-1,c()})(t)})})]}):Object(se.jsx)(w.a,{content:"And/Or",children:Object(se.jsx)(Jt,{filterable:!1,itemRenderer:Zt,items:["AND","OR"],onItemSelect:e=>((e,t)=>{a[t]=e,c()})(e,(t-1)/2),children:Object(se.jsx)(h.b,{minimal:!0,outlined:!0,text:e})})})},t))),Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{minimal:!0,outlined:!0,text:"Add Condition",onClick:()=>{a.push("AND"),r.push('{"event":"", "restriction":""}'),c()}})]})};var ss=function(e){const{type:t,date:s,changeDate:n}=e,[i,a]=Object(f.useState)(!1),r=()=>a(!i),o=void 0===s?`No ${t}`:`${Object(mt.d)(s)}`;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:o,children:Object(se.jsx)(h.b,{minimal:!0,onClick:r,outlined:!0,children:`${t}`})}),Object(se.jsxs)(h.h,{isCloseButtonShown:!1,isOpen:i,onClose:r,style:{background:"#fff",maxWidth:"max-content",padding:"0.25em",textAlign:"center"},title:`${t}`,children:[Object(se.jsx)(gt.a,{onChange:n,timePickerProps:{showArrowButtons:!0},value:s}),Object(se.jsx)(h.b,{onClick:()=>n(void 0),text:`Remove ${t}`})]})]})},ns=s(533);var is=function(e){const{type:t,time:s,changeTime:n}=e,[i,a]=Object(f.useState)(!1),r=()=>a(!i),o=void 0===s?`No ${t}`:`${Object(mt.f)(s)}`;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:o,children:Object(se.jsx)(h.b,{minimal:!0,onClick:r,outlined:!0,children:`${t}`})}),Object(se.jsxs)(h.h,{isCloseButtonShown:!1,isOpen:i,onClose:r,style:{background:"#fff",maxWidth:"max-content",padding:"0.25em",textAlign:"center"},title:`${t}`,children:[Object(se.jsx)(ns.a,{onChange:n,showArrowButtons:!0,value:s}),Object(se.jsx)(h.b,{onClick:()=>n(void 0),text:`Remove ${t}`})]})]})};const as=ct.a.ofType(),rs=(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e},e)};var os=function(e){const{changeMeta:t,eventMeta:s}=e,{eventNames:n,targetCount:i,release:a,deadline:r,observeFrom:o,observeTo:c}=s,l=e=>i=>((e,i)=>{e===Ct.e.NONE?t({...s,eventNames:n.filter(((e,t)=>t!==i))}):(n[i]=e,t({...s,eventNames:n}))})(i,e);return Object(se.jsxs)(se.Fragment,{children:[n.map(((e,t)=>Object(se.jsx)(w.a,{content:"Change event type "+t,children:Object(se.jsx)(as,{filterable:!1,items:Object.values(Ct.e),itemRenderer:rs,onItemSelect:l(t),children:Object(se.jsx)(h.b,{outlined:!0,text:e})})},t))),Object(se.jsx)(w.a,{content:"Add Event",children:Object(se.jsx)(h.b,{outlined:!0,text:"Add Event",onClick:()=>{n[n.length]=Ct.e.RUN_CODE,t({...s,eventNames:n})}})}),Object(se.jsx)(w.a,{content:"Target Count",children:Object(se.jsx)(h.H,{allowNumericCharactersOnly:!0,leftIcon:E.a.LOCATE,min:0,onValueChange:e=>t({...s,targetCount:e}),placeholder:"Enter target count here",value:i})}),Object(se.jsx)("br",{}),Object(se.jsx)(ss,{type:"Release",date:a,changeDate:e=>{t({...s,release:e})}}),Object(se.jsx)(ss,{type:"Deadline",date:r,changeDate:e=>{t({...s,deadline:e})}}),Object(se.jsx)(is,{type:"Observe From",time:o,changeTime:e=>{t({...s,observeFrom:e})}}),Object(se.jsx)(is,{type:"Observe To",time:c,changeTime:e=>{t({...s,observeTo:e})}})]})};var cs=function(e){const{changeMeta:t,manualMeta:s}=e,{targetCount:n}=s;return Object(se.jsx)(w.a,{content:"Target Count",children:Object(se.jsx)(h.H,{allowNumericCharactersOnly:!0,leftIcon:E.a.BANK_ACCOUNT,min:0,onValueChange:e=>t({...s,targetCount:e}),placeholder:"Enter target count here",value:n})})};var ls=function(e){const{changeMeta:t,meta:s}=e,{type:n}=s,i=ct.a.ofType();return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(w.a,{content:"Change Goal Type",children:Object(se.jsx)(i,{filterable:!1,itemRenderer:(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e},e)},items:Object.values(Ct.l),onItemSelect:e=>t($t(e)),children:Object(se.jsx)(h.b,{minimal:!0,outlined:!0,text:n})})}),(e=>{switch(e){case Ct.l.ASSESSMENT:return Object(se.jsx)(zt,{assessmentMeta:s,changeMeta:t});case Ct.l.BINARY:return Object(se.jsx)(ts,{binaryMeta:s,changeMeta:t});case Ct.l.MANUAL:return Object(se.jsx)(cs,{changeMeta:t,manualMeta:s});case Ct.l.EVENT:return Object(se.jsx)(os,{eventMeta:s,changeMeta:t});default:return null}})(n)]})};const ds=e=>({editableGoal:e,isDirty:!1}),us=(e,t)=>{switch(t.type){case qt.SAVE_CHANGES:return{...e,isDirty:!1};case qt.DISCARD_CHANGES:return ds(t.payload);case qt.DELETE_GOAL:return{...e,isDirty:!1};case qt.CHANGE_META:return{editableGoal:{...e.editableGoal,meta:t.payload},isDirty:!0};case qt.CHANGE_TEXT:return{editableGoal:{...e.editableGoal,text:t.payload},isDirty:!0};default:return e}};var hs=function(e){const{uuid:t,isNewGoal:s,releaseUuid:n,removeCard:i,requestPublish:a}=e,r=Object(f.useContext)(Ze.a),o=r.getGoalDefinition(t),c=Object(f.useMemo)((()=>Object(_.cloneDeep)(o)),[o]),[l,d]=Object(f.useReducer)(us,c,ds),[u,p]=Object(f.useState)(s),{editableGoal:g,isDirty:m}=l,{meta:b,text:v}=g;return Object(se.jsxs)("li",{className:"editable-goal",id:t,children:[Object(se.jsx)("div",{className:"action-button",children:m?Object(se.jsx)(at,{discardChanges:()=>d({type:qt.DISCARD_CHANGES,payload:c}),saveChanges:()=>{d({type:qt.SAVE_CHANGES}),r.modifyGoalDefinition(g),u&&(n(),p(!1)),a()}}):Object(se.jsx)(it,{deleteItem:()=>{d({type:qt.DELETE_GOAL}),r.removeGoalDefinition(t),u&&(n(),p(!1)),i(t),a()},item:v})}),Object(se.jsx)("h3",{children:Object(se.jsx)(h.l,{onChange:e=>d({type:qt.CHANGE_TEXT,payload:e}),placeholder:"Enter goal text here",value:v})}),Object(se.jsx)("div",{className:"meta",children:Object(se.jsx)(ls,{changeMeta:e=>d({type:qt.CHANGE_META,payload:e}),meta:b})})]})};var ps=function(e){const{allowNewUuid:t,setNewUuid:s}=e,n=Object(f.useContext)(Ze.a);return Object(se.jsx)(h.b,{className:"command-button",disabled:!t,icon:E.a.NEW_OBJECT,onClick:()=>s(n.insertGoalDefinition(Xt)),text:"Create Goal"})};let gs=[];var ms=function(e){const{requestPublish:t}=e,s=Object(f.useContext)(Ze.a),[n,i]=Object(f.useState)(""),a=""===n,r=()=>i(""),o=e=>{let t=0;for(;gs[t].key!==e&&t<gs.length;)t++;gs.splice(t,1)},c=(e,s)=>Object(se.jsx)(hs,{uuid:e,isNewGoal:s,releaseUuid:r,requestPublish:t,removeCard:o},e);return 0===gs.length&&(gs=s.getAllGoalUuids().map((e=>c(e,!1)))),Object(se.jsxs)("div",{className:"goal-editor",children:[Object(se.jsx)("div",{className:"command",children:Object(se.jsx)(ps,{allowNewUuid:a,setNewUuid:e=>{i(e),gs[gs.length]=gs[0],gs[0]=c(e,!0)}})}),Object(se.jsx)("ul",{className:"goal-container",children:gs})]})};var bs=function(e){const{bulkUpdateAchievements:t,bulkUpdateGoals:s,getAchievements:n,getOwnGoals:i,removeAchievement:a,removeGoal:r,inferencer:c}=e;Object(f.useEffect)((()=>{n(),i()}),[n,i]);const[l,d]=Object(f.useState)(!1),u=()=>{d(!0),h()},[,h]=Object(f.useReducer)((e=>e+1),0);return Object(se.jsxs)(Ze.a.Provider,{value:c,children:[Object(se.jsx)(o.a,{message:"You have unpublished changes. Are you sure you want to leave?",when:l}),Object(se.jsxs)("div",{className:"AchievementControl",children:[Object(se.jsx)(Wt,{awaitPublish:l,publishChanges:()=>{s(c.getAllGoals()),t(c.getAllAchievements()),c.getGoalsToDelete().forEach(r),c.getAchievementsToDelete().forEach(a),c.resetToDelete(),d(!1)}}),Object(se.jsx)(Ot,{requestPublish:u}),Object(se.jsx)(ms,{requestPublish:u})]})]})};var fs=Object(r.b)((e=>({inferencer:new Qe.a(e.achievement.achievements,e.achievement.goals)})),(e=>Object(c.b)({bulkUpdateAchievements:Je.bulkUpdateAchievements,bulkUpdateGoals:Je.bulkUpdateGoals,getAchievements:Je.getAchievements,getOwnGoals:Je.getOwnGoals,removeAchievement:Je.removeAchievement,removeGoal:Je.removeGoal},e)))(bs);var vs=Object(r.b)((e=>({group:e.session.group,inferencer:new Qe.a(e.achievement.achievements,e.achievement.goals),name:e.session.name,role:e.session.role,assessmentOverviews:e.session.assessmentOverviews,achievementAssessmentOverviews:e.achievement.assessmentOverviews,users:e.achievement.users,assessmentConfigs:e.session.assessmentConfigurations})),(e=>Object(c.b)({fetchAssessmentOverviews:u.fetchAssessmentOverviews,getAchievements:Je.getAchievements,getGoals:Je.getGoals,getOwnGoals:Je.getOwnGoals,getUserAssessmentOverviews:Je.getUserAssessmentOverviews,getUsers:Je.getUsers,updateGoalProgress:Je.updateGoalProgress},e)))(Vt);var ys=function(e){const{role:t}=e,s=t===O.a.Admin||t===O.a.Staff?fs:Ke;return Object(se.jsxs)(o.e,{children:[Object(se.jsx)(o.c,{exact:!0,path:"/courses/:courseId/achievements",component:vs}),Object(se.jsx)(o.c,{path:"/courses/:courseId/achievements/control",component:s}),Object(se.jsx)(o.c,{component:Ke})]})};var xs=Object(r.b)((e=>({role:e.session.role})),(e=>Object(c.b)({},e)))(ys),js=s(95),Os=s(68),Cs=s(214);const Ss=e=>{const t=!e.isDebugging&&Object(se.jsx)(K.a,{handleEditorEval:e.handleEditorEval,color:e.isRunning?"#39FF14":void 0,className:e.isRunning?"WaitingCursor":void 0},"run"),s=e.isEditorAutorun&&Object(se.jsx)(J.a,{label:"Auto",icon:E.a.AUTOMATIC_UPDATES}),n=!e.pauseDisabled&&e.isRunning&&!e.isDebugging&&Object(se.jsx)(J.a,{label:"Pause",icon:E.a.STOP,onClick:e.handleDebuggerPause}),i=!e.isRunning&&e.isDebugging&&Object(se.jsx)(J.a,{label:"Resume",icon:E.a.CHEVRON_RIGHT,onClick:e.handleDebuggerResume}),a=t=>e.isDebugging&&Object(se.jsx)(J.a,{label:t,icon:E.a.STOP,onClick:e.handleDebuggerReset}),{isMobileBreakpoint:r}=Object(j.e)();return r?Object(se.jsxs)(se.Fragment,{children:[false,n,i,a("Stop")]}):Object(se.jsxs)(se.Fragment,{children:[!e.autorunDisabled&&Object(se.jsx)("div",{className:"Switch",children:Object(se.jsx)(h.T,{label:"",checked:e.isEditorAutorun,onChange:e.handleToggleEditorAutorun})}),s||t,n,i,a("Stop Debugger")]})};var Es=s(136),ws=s(216);const _s={PREVIOUS_STEP:"left",NEXT_STEP:"right"};class As extends f.Component{constructor(e){super(e),this.onPrevButtonClick=()=>{this.setState((e=>({currentStep:e.currentStep-1})))},this.onNextButtonClick=()=>{this.setState((e=>({currentStep:e.currentStep+1})))},this.state={steps:[],currentStep:0},ws.a.init((e=>{if(this.state.steps.length>0){const e=document.getElementById("data_visualizer-icon");null===e||void 0===e||e.classList.add("side-content-tab-alert")}this.setState({steps:e,currentStep:0})}))}render(){const e=()=>0===this.state.currentStep,t=()=>!this.state.steps||this.state.currentStep===this.state.steps.length-1,s={PREVIOUS_STEP:this.onPrevButtonClick,NEXT_STEP:this.onNextButtonClick};Object(Es.configure)({ignoreEventsCondition:s=>"ArrowLeft"===s.key&&e()||"ArrowRight"===s.key&&t(),ignoreRepeatedEventsWhenKeyHeldDown:!1,stopEventPropagationAfterIgnoring:!1});const n=this.state.steps[this.state.currentStep];return Object(se.jsx)(Es.GlobalHotKeys,{keyMap:_s,handlers:s,children:Object(se.jsxs)("div",{className:x()("sa-data-visualizer",p.a.DARK),children:[this.state.steps.length>1?Object(se.jsxs)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:[Object(se.jsx)(h.b,{style:{position:"absolute",left:0},large:!0,outlined:!0,icon:E.a.ARROW_LEFT,onClick:this.onPrevButtonClick,disabled:e(),children:"Previous"}),Object(se.jsxs)("h3",{className:"bp4-text-large",children:["Call ",this.state.currentStep+1,"/",this.state.steps.length]}),Object(se.jsx)(h.b,{style:{position:"absolute",right:0},large:!0,outlined:!0,icon:E.a.ARROW_RIGHT,onClick:this.onNextButtonClick,disabled:t(),children:"Next"})]}):null,this.state.steps.length>0?Object(se.jsx)("div",{style:{display:"flex",flexDirection:"row",overflowX:"auto"},children:null===n||void 0===n?void 0:n.map(((e,t)=>Object(se.jsxs)("div",{style:{margin:n.length>1?0:"0 auto"},children:[" ",Object(se.jsxs)(h.e,{style:{background:"#1a2530",padding:10},children:[n.length>1&&Object(se.jsxs)("h5",{className:"bp4-heading bp4-monospace-text",style:{marginTop:0,marginBottom:20,whiteSpace:"nowrap"},children:["Structure ",t+1]}),e]})]},t)))},n.length):Object(se.jsxs)("p",{id:"data-visualizer-default-text",className:p.a.RUNNING_TEXT,children:["The data visualizer helps you to visualize data structures.",this.state.steps,Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"It is activated by calling the function"," ",Object(se.jsxs)("code",{children:["draw_data(x",Object(se.jsx)("sub",{children:"1"}),", x",Object(se.jsx)("sub",{children:"2"}),", ... x",Object(se.jsx)("sub",{children:"n"}),")"]}),", where"," ",Object(se.jsxs)("code",{children:["x",Object(se.jsx)("sub",{children:"k"})]})," ","would be the"," ",Object(se.jsxs)("code",{children:["k",Object(se.jsx)("sup",{children:"th"})]})," ","data structure that you want to visualize and ",Object(se.jsx)("code",{children:"n"})," is the number of structures.",Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"The data visualizer uses box-and-pointer diagrams, as introduced in"," ",Object(se.jsx)("a",{href:Se.a.textbookChapter2_2,rel:"noopener noreferrer",target:"_blank",children:Object(se.jsx)("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 2, Section 2"})}),"."]})]})})}}var ks=As,Ts=s(174);class Rs extends f.Component{constructor(e){super(e),this.handleResize=Object(_.debounce)((()=>{const e=this.calculateWidth(this.props.editorWidth),t=this.calculateHeight(this.props.sideContentHeight);e===this.state.width&&t===this.state.height||(this.setState({height:t,width:e}),Ts.a.updateDimensions(e,t))}),300),this.state={visualization:null,width:this.calculateWidth(e.editorWidth),height:this.calculateHeight(e.sideContentHeight)},Ts.a.init((e=>this.setState({visualization:e})),this.state.width,this.state.height)}calculateWidth(e){let t;return t=void 0===e?window.innerWidth-50:Math.min(5e3,window.innerWidth*(100-parseFloat(e))/100-50),Math.min(t,5e3)}calculateHeight(e){let t;return t=window.innerWidth<Se.b.mobileBreakpoint||void 0===e?window.innerHeight-150:e-150,Math.min(t,5e3)}componentDidMount(){this.handleResize(),window.addEventListener("resize",this.handleResize),Ts.a.redraw()}componentWillUnmount(){this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){e.sideContentHeight===this.props.sideContentHeight&&e.editorWidth===this.props.editorWidth||this.handleResize()}render(){return Object(se.jsx)("div",{className:p.a.DARK,children:this.state.visualization||Object(se.jsxs)("p",{id:"env-visualizer-default-text",className:p.a.RUNNING_TEXT,children:["The environment model visualizer generates environment model diagrams following a notation introduced in"," ",Object(se.jsx)("a",{href:Se.a.textbookChapter3_2,rel:"noopener noreferrer",target:"_blank",children:Object(se.jsx)("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 3, Section 2"})}),".",Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"It is activated by setting breakpoints before you run the program. You can set a breakpoint by clicking on the gutter of the editor (where all the line numbers are, on the left). When the program runs into a breakpoint, the visualizer displays the state of the environments before the statement is evaluated, which starts in the line in which you set the breakpoint. Every breakpoint must be at the beginning of a statement."]})})}}var Is=Rs;class Ls extends f.PureComponent{constructor(e){super(e),this.audio=void 0,this.handleSeeked=()=>{this.stopPreviousPlaybackAndApplyFromStart(this.props.playbackData)},this.handleAudioLoaded=()=>{this.props.handleSetSourcecastDuration(this.audio.current.duration)},this.applyDeltas=e=>{this.props.handleSetCodeDeltasToApply(e)},this.stopPreviousPlaybackAndApplyFromStart=e=>{this.setState({currentDeltaRevision:this.state.currentDeltaRevision+1},(()=>this.applyPlaybackDataFromStart(e)))},this.applyPlaybackDataFromStart=async e=>{const t=e=>new Promise((t=>setTimeout(t,e))),s=this.state.currentDeltaRevision;let n=1e3*this.audio.current.currentTime;this.props.handleEditorValueChange(e.init.editorValue),this.props.handleExternalSelect(e.init.externalLibrary),this.props.handleChapterSelect(e.init.chapter);const i=e.inputs.filter((e=>e.time<=n&&"codeDelta"===e.type)).map((e=>e.data));this.applyDeltas(i);const a=e.inputs.filter((e=>e.time>n)),r=a.length;let o=0;for(;o<r&&this.state.currentDeltaRevision===s;)n=1e3*this.audio.current.currentTime,a[o].time<n?(this.props.handleSetInputToApply(a[o]),o++):await t(20)},this.handlePlayerPausing=()=>{this.audio.current.pause(),this.props.handleSetIsEditorReadonly(!1),this.props.handleSetSourcecastStatus(F.b.paused),this.stopCurrentPlayback()},this.handlePlayerPlaying=()=>{this.audio.current.play(),this.props.handleSetIsEditorReadonly(!0),this.props.handleSetSourcecastStatus(F.b.playing),this.stopPreviousPlaybackAndApplyFromStart(this.props.playbackData),this.props.setSelectedTab&&this.props.setSelectedTab(Ce.b.mobileEditor)},this.handlePlayerStopping=()=>{this.props.handleSetIsEditorReadonly(!1),this.props.handleSetSourcecastStatus(F.b.paused),this.props.handleSetCurrentPlayerTime(0),this.setState({currentPlayerProgress:0})},this.updatePlayerTime=e=>{const{currentTime:t}=e.target;this.props.handleSetCurrentPlayerTime(t),this.setState({currentPlayerProgress:t/this.props.duration}),this.props.playbackStatus===F.b.forcedPaused&&this.handlePlayerPausing()},this.handlePlayerProgressBarChange=e=>{if(this.audio.current){const t=this.props.duration*e;this.audio.current.currentTime=t,this.props.handleSetCurrentPlayerTime(t),this.setState({currentPlayerProgress:e})}},this.renderLabel=e=>{if(this.props.duration){const t=this.props.duration*e,s=Math.floor(t/60),n=Math.floor(t-60*s);return(s<10?"0"+s:s)+":"+(n<10?"0"+n:n)}return"00:00"},this.audio=f.createRef(),this.state={currentDeltaRevision:0,currentPlayerProgress:0,currentSourcecastItem:null,duration:0}}render(){const e=Object(se.jsx)(J.a,{label:"Play",icon:E.a.PLAY,onClick:this.handlePlayerPlaying,isDisabled:!this.props.duration}),t=Object(se.jsx)(J.a,{label:"Pause",icon:E.a.PAUSE,onClick:this.handlePlayerPausing});return Object(se.jsxs)("div",{className:"SourcecastControlBar",children:[Object(se.jsx)("audio",{src:this.props.audioUrl,ref:this.audio,onEnded:this.handlePlayerStopping,onLoadedMetadata:this.handleAudioLoaded,onSeeked:this.handleSeeked,onTimeUpdate:this.updatePlayerTime,preload:"metadata"}),Object(se.jsx)("br",{}),Object(se.jsxs)("div",{className:"PlayerControl",children:[Object(se.jsxs)(h.c,{className:"PlayerControlButton",children:[this.props.playbackStatus===F.b.paused&&e,this.props.playbackStatus===F.b.playing&&t]}),Object(se.jsx)("div",{className:"Slider",children:Object(se.jsx)(h.Q,{min:0,max:1,stepSize:1e-4,onChange:this.handlePlayerProgressBarChange,value:this.state.currentPlayerProgress,labelRenderer:this.renderLabel})})]})]})}stopCurrentPlayback(){this.setState({currentDeltaRevision:this.state.currentDeltaRevision+1})}}var Ps=Ls,Ns=(s(198),s(105));var Ds=e=>{const[t,s]=Object(f.useState)(!1),n=()=>s(!1);return Object(se.jsxs)("div",{children:[Object(se.jsx)(J.a,{icon:E.a.TRASH,onClick:()=>s(!0)}),Object(se.jsxs)(h.h,{icon:"info-sign",isOpen:t,onClose:n,title:"Delete Sourcecast",canOutsideClickClose:!0,children:[Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsx)("p",{children:"Are you sure to delete this sourcecast entry?"})}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Confirm Delete",icon:E.a.TRASH,onClick:()=>{const{data:t}=e;e.handleDeleteSourcecastEntry(t.id)}}),Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:n})]})})]})]})};class Ms extends f.Component{constructor(e){super(e),this.handleSelect=()=>{const{data:e}=this.props;this.props.handleSetSourcecastData(e.title,e.description,e.uid,e.url,JSON.parse(e.playbackData))}}render(){return Object(se.jsx)(w.a,{content:"Load Sourcecast Recording",children:Object(se.jsx)(J.a,{label:`${this.props.data.title}`,icon:E.a.PAPERCLIP,onClick:this.handleSelect})})}}var Us=Ms,Bs=s(183);class Gs extends f.Component{constructor(e){super(e),this.shareInputElem=void 0,this.shareInputElem=f.createRef(),this.selectShareInputText=this.selectShareInputText.bind(this);const t=`${window.location.protocol}//${window.location.host}/courses/${e.courseId}/sourcecast/${e.data.uid}`;this.state={shareURL:t}}render(){const e=Object(se.jsxs)("div",{children:[Object(se.jsx)("input",{defaultValue:this.state.shareURL,readOnly:!0,ref:this.shareInputElem}),Object(se.jsx)(w.a,{content:"Copy link to clipboard",children:Object(se.jsx)(Bs,{text:this.state.shareURL,children:Object(se.jsx)(J.a,{icon:E.a.DUPLICATE,onClick:this.selectShareInputText})})})]},this.state.shareURL);return Object(se.jsx)(De.a,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:Object(se.jsx)(w.a,{content:"Get shareable link",children:Object(se.jsx)(J.a,{icon:E.a.SHARE})})})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}var Fs=Gs;class Hs extends f.Component{constructor(e){super(e),this.defaultColumnDefs=void 0,this.gridApi=void 0,this.handleFilterChange=e=>{const t=e.target.value;this.setState({filterValue:t}),this.gridApi&&this.gridApi.setQuickFilter(t)},this.onGridReady=e=>{this.gridApi=e.api,this.gridApi.sizeColumnsToFit(),window.onresize=()=>this.gridApi.sizeColumnsToFit()},this.state={columnDefs:[{headerName:"Title",field:"title",cellRendererFramework:Us,cellRendererParams:{handleSetSourcecastData:this.props.handleSetSourcecastData},minWidth:200,suppressMovable:!0,suppressMenu:!0,cellStyle:{"text-align":"left"},hide:!this.props.handleSetSourcecastData},{headerName:"Title",field:"title",minWidth:100,suppressMovable:!0,suppressMenu:!0,hide:!!this.props.handleSetSourcecastData},{headerName:"Uploader",field:"uploader.name",minWidth:150,suppressMovable:!0,suppressMenu:!0,cellStyle:{"text-align":"center"}},{headerName:"Date",valueGetter:e=>{return t=e.data.inserted_at,b()(t).format("MMMM Do YYYY");var t},minWidth:150,suppressMovable:!0,suppressMenu:!0},{headerName:"Share",field:"uid",cellRendererFramework:Fs,cellRendererParams:{courseId:this.props.courseId},minWidth:80,suppressMovable:!0,suppressMenu:!0},{headerName:"Delete",field:"",cellRendererFramework:Ds,cellRendererParams:{handleDeleteSourcecastEntry:this.props.handleDeleteSourcecastEntry},minWidth:100,maxWidth:100,sortable:!1,suppressMovable:!0,suppressMenu:!0,cellStyle:{"text-align":"center"},hide:!this.props.handleDeleteSourcecastEntry},{headerName:"description",field:"description",hide:!0},{headerName:"inserted_at",field:"inserted_at",hide:!0},{headerName:"updated_at",field:"updated_at",hide:!0},{headerName:"audio",field:"audio",hide:!0},{headerName:"playbackData",field:"playbackData",hide:!0},{headerName:"url",field:"url",hide:!0}],filterValue:"",groupFilterEnabled:!1},this.defaultColumnDefs={filter:!0,resizable:!0,sortable:!0}}render(){const e=Object(se.jsx)(h.G,{className:"Sourcecast",description:"Fetching sourcecast index...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})}),t=Object(_.sortBy)(this.props.sourcecastIndex,[e=>-e.id]),s=Object(se.jsxs)("div",{className:"SourcecastContainer",children:[Object(se.jsx)("br",{}),Object(se.jsx)("div",{children:Object(se.jsx)(h.n,{label:"",labelFor:"text-input",children:Object(se.jsx)(h.y,{id:"searchBar",large:!1,leftIcon:"search",placeholder:"Search",value:this.state.filterValue,onChange:this.handleFilterChange})})}),Object(se.jsx)(h.i,{}),Object(se.jsx)("div",{className:"SourcecastTable",children:Object(se.jsx)("div",{className:"ag-grid-parent",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:this.state.columnDefs,defaultColDef:this.defaultColumnDefs,onGridReady:this.onGridReady,rowData:t,rowHeight:30,pagination:!1,paginationPageSize:50})})}),Object(se.jsx)("br",{})]});return Object(se.jsx)("div",{children:void 0===this.props.sourcecastIndex?e:s})}}var Vs=Hs;const Ws="sourcecast",qs="Welcome to Sourcecast!",$s={label:"Data Visualizer",iconName:E.a.EYE_OPEN,body:Object(se.jsx)(ks,{}),id:Ce.b.dataVisualizer},Xs={label:"Env Visualizer",iconName:E.a.GLOBE,body:Object(se.jsx)(Is,{}),id:Ce.b.envVisualizer};var zs=e=>{const{isMobileBreakpoint:t}=Object(j.e)(),s=Object(r.c)(),[n,i]=f.useState(Ce.b.introduction),a=f.useCallback((()=>{const t=e.match.params.sourcecastId;if(t&&t!==e.uid&&e.sourcecastIndex){const s=e.sourcecastIndex.find((e=>e.uid===t));s&&e.handleSetSourcecastData(s.title,s.description,s.uid,s.url,JSON.parse(s.playbackData))}}),[e]);f.useEffect((()=>{s(Object(Cs.fetchSourcecastIndex)(Ws))}),[]),f.useEffect((()=>{a();const{inputToApply:t}=e;if(t)switch(t.type){case"activeTabChange":i(t.data);break;case"chapterSelect":e.handleChapterSelect(t.data);break;case"externalLibrarySelect":e.handleExternalSelect(t.data);break;case"forcePause":e.handleSetSourcecastStatus(F.b.forcedPaused)}}),[a,e.inputToApply]),f.useEffect((()=>{t||n!==Ce.b.mobileEditor&&n!==Ce.b.mobileEditorRun||i(Ce.b.introduction)}),[t,e,n]);const o=Object(se.jsx)(Ss,{handleDebuggerPause:()=>s(Object(Os.beginDebuggerPause)(Ws)),handleDebuggerReset:()=>s(Object(Os.debuggerReset)(Ws)),handleDebuggerResume:()=>s(Object(Os.debuggerResume)(Ws)),handleEditorEval:e.handleEditorEval,handleInterruptEval:()=>s(Object(Os.beginInterruptExecution)(Ws)),handleToggleEditorAutorun:()=>s(Object(R.toggleEditorAutorun)(Ws)),isDebugging:e.isDebugging,isEditorAutorun:e.isEditorAutorun,isRunning:e.isRunning},"autorun"),c=Object(se.jsx)(V.a,{handleChapterSelect:(t,s)=>{let{chapter:n}=t;return e.handleChapterSelect(n)},sourceChapter:e.sourceChapter,sourceVariant:e.sourceVariant},"chapter"),l=Object(se.jsx)(W.a,{handleReplOutputClear:()=>s(Object(R.clearReplOutput)(Ws))},"clear_repl"),d=Object(se.jsx)(q.a,{handleReplEval:e.handleReplEval,isRunning:e.isRunning},"eval_repl"),u=[{label:"Sourcecast Table",iconName:E.a.HOME,body:Object(se.jsxs)("div",{children:[Object(se.jsx)("span",{className:"Multi-line",children:Object(se.jsx)(h.M,{children:e.title?"Title: "+e.title+"\nDescription: "+e.description:qs})}),Object(se.jsx)(Vs,{handleSetSourcecastData:e.handleSetSourcecastData,sourcecastIndex:e.sourcecastIndex,courseId:e.courseId})]}),id:Ce.b.introduction},$s,Xs],g=(e,t,s)=>{e!==t&&i(e)},m={editorVariant:"sourcecast",editorTabs:e.editorTabs.map(Z.a),codeDeltasToApply:e.codeDeltasToApply,isEditorReadonly:e.isEditorReadonly,editorSessionId:"",handleDeclarationNavigate:e=>s(Object(R.navigateToDeclaration)(Ws,e)),handleEditorEval:e.handleEditorEval,handleEditorValueChange:e.handleEditorValueChange,isEditorAutorun:e.isEditorAutorun,inputToApply:e.inputToApply,isPlaying:e.playbackStatus===F.b.playing,handleEditorUpdateBreakpoints:e=>s(Object(R.setEditorBreakpoint)(e,Ws))},b={output:e.output,replValue:e.replValue,handleBrowseHistoryDown:()=>s(Object(R.browseReplHistoryDown)(Ws)),handleBrowseHistoryUp:()=>s(Object(R.browseReplHistoryUp)(Ws)),handleReplEval:e.handleReplEval,handleReplValueChange:e=>s(Object(R.updateReplValue)(e,Ws)),sourceChapter:e.sourceChapter,sourceVariant:e.sourceVariant,externalLibrary:e.externalLibraryName,replButtons:[d,l]},v={tabs:[]},y={controlBarProps:{editorButtons:[o,c]},editorContainerProps:m,handleSideContentHeightChange:e=>s(Object(R.changeSideContentHeight)(e,Ws)),replProps:b,sideBarProps:v,sideContentHeight:e.sideContentHeight,sideContentProps:{selectedTabId:n,onChange:g,tabs:{beforeDynamicTabs:u,afterDynamicTabs:[]},workspaceLocation:"sourcecast",sideContentHeight:e.sideContentHeight}},O={editorContainerProps:m,replProps:b,sideBarProps:v,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[o,c]},selectedTabId:n,onChange:g,tabs:{beforeDynamicTabs:u,afterDynamicTabs:[]},workspaceLocation:"sourcecast"}},C={handleEditorValueChange:e.handleEditorValueChange,handlePromptAutocomplete:(e,t,n)=>s(Object(R.promptAutocomplete)(Ws,e,t,n)),handleSetCurrentPlayerTime:e=>s(Object(js.setCurrentPlayerTime)(e,Ws)),handleSetCodeDeltasToApply:e=>s(Object(js.setCodeDeltasToApply)(e,Ws)),handleSetIsEditorReadonly:e=>s(Object(R.setIsEditorReadonly)(Ws,e)),handleSetInputToApply:e=>s(Object(js.setInputToApply)(e,Ws)),handleSetSourcecastDuration:e=>s(Object(js.setSourcecastDuration)(e,Ws)),handleSetSourcecastStatus:e.handleSetSourcecastStatus,audioUrl:e.audioUrl,currentPlayerTime:e.currentPlayerTime,duration:e.playbackDuration,playbackData:e.playbackData,playbackStatus:e.playbackStatus,handleChapterSelect:e.handleChapterSelect,handleExternalSelect:e.handleExternalSelect,setSelectedTab:i};return Object(se.jsxs)("div",{className:x()("Sourcecast",p.a.DARK),children:[Object(se.jsx)(Ps,{...C}),t?Object(se.jsx)(te.a,{...O}):Object(se.jsx)(_e.a,{...y})]})};const Ys="sourcecast";var Ks=Object(o.l)(Object(r.b)((e=>({audioUrl:e.workspaces.sourcecast.audioUrl,currentPlayerTime:e.workspaces.sourcecast.currentPlayerTime,codeDeltasToApply:e.workspaces.sourcecast.codeDeltasToApply,title:e.workspaces.sourcecast.title,description:e.workspaces.sourcecast.description,activeEditorTabIndex:e.workspaces.sourcecast.activeEditorTabIndex,editorTabs:e.workspaces.sourcecast.editorTabs,externalLibraryName:e.workspaces.sourcecast.externalLibrary,isEditorAutorun:e.workspaces.sourcecast.isEditorAutorun,isEditorReadonly:e.workspaces.sourcecast.isEditorReadonly,inputToApply:e.workspaces.sourcecast.inputToApply,isRunning:e.workspaces.sourcecast.isRunning,isDebugging:e.workspaces.sourcecast.isDebugging,enableDebugging:e.workspaces.sourcecast.enableDebugging,output:e.workspaces.sourcecast.output,playbackDuration:e.workspaces.sourcecast.playbackDuration,playbackData:e.workspaces.sourcecast.playbackData,playbackStatus:e.workspaces.sourcecast.playbackStatus,replValue:e.workspaces.sourcecast.replValue,sideContentHeight:e.workspaces.sourcecast.sideContentHeight,sourcecastIndex:e.workspaces.sourcecast.sourcecastIndex,sourceChapter:I.Chapter.CLANG,sourceVariant:e.workspaces.sourcecast.context.variant,uid:e.workspaces.sourcecast.uid,courseId:e.session.courseId})),(e=>Object(c.b)({handleChapterSelect:e=>Object(R.chapterSelect)(e,I.Variant.DEFAULT,Ys),handleEditorEval:()=>Object(R.evalEditor)(Ys),handleEditorValueChange:e=>Object(R.updateEditorValue)(e,Ys),handleExternalSelect:e=>Object(R.externalLibrarySelect)(e,Ys),handleReplEval:()=>Object(R.evalRepl)(Ys),handleSetSourcecastData:(e,t,s,n,i)=>Object(js.setSourcecastData)(e,t,s,n,i,Ys),handleSetSourcecastStatus:e=>Object(js.setSourcecastStatus)(e,Ys)},e)))(zs)),Qs=(s(238),s(519));var Js=e=>{const[t,s]=v.a.useState([]),[n,i]=v.a.useState(""),a=v.a.useRef(),{CSVReader:r}=Object(Qs.a)(),o=Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:[{headerName:"Username",field:"username"},{headerName:"Role",field:"role"},{headerName:"Group",field:"group"}],defaultColDef:{filter:!0,resizable:!0,sortable:!0},onGridReady:e=>{a.current=e.api},onGridSizeChanged:()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.sizeColumnsToFit()},rowData:t,rowHeight:36,suppressCellSelection:!0,suppressMovableColumns:!0,pagination:!0})}),c=[...Se.b.authProviders.entries()].map((e=>{let[t,s]=e;return t})),[l,d]=v.a.useState(c[0]);return Object(se.jsxs)("div",{className:"add-users",children:[Object(se.jsx)(h.p,{children:"Add Users"}),o,Object(se.jsx)(h.r,{children:"Upload a CSV file to mass insert or update users in your course."}),Object(se.jsx)("div",{className:"upload-container",children:Object(se.jsxs)("div",{children:[Object(se.jsxs)("div",{className:"upload-settings",children:[Object(se.jsx)("div",{className:"file-input",children:Object(se.jsx)(r,{onUploadAccepted:e=>(e=>{const{data:n,errors:a}=e;if(a.length)return void i("Error detected while uploading the CSV file! Please recheck the file and try again.");const r=[...t];if(n.length+t.length>1e3)i("Please limit each upload to 1000 entries!");else{for(let e=0;e<n.length;e++){if(2!==n[e].length&&3!==n[e].length)return void i(Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("div",{children:["Invalid format (line ",e,")! Please ensure that the username and role is specified for each row entry!"]}),Object(se.jsx)("br",{}),Object(se.jsxs)("div",{children:["Format: ",Object(se.jsx)("i",{children:"username,role"})," ",Object(se.jsx)("b",{children:"OR"})," ",Object(se.jsx)("i",{children:"username,role,group"})]}),Object(se.jsx)("br",{}),Object(se.jsx)("div",{children:"(please hover over the question mark above for more details)"})]}));if(!Object.values(O.a).includes(n[e][1]))return void i(`Invalid role (line ${e})! Please ensure that the second column of each entry contains one of the following: 'admin, staff, student'`)}n.forEach((e=>{r.push({username:e[0],role:e[1],group:e[2]})})),Object(_.uniqBy)(r,(e=>e.username)).length===r.length?(s(r),i("")):i("There are duplicate usernames in the uploaded CSV(s)!")}})(e),config:{delimiter:",",skipEmptyLines:!0},children:e=>{let{getRootProps:t,acceptedFile:s,ProgressBar:n,getRemoveFileProps:i}=e;return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.m,{text:"Upload CSV",inputProps:t()}),Object(se.jsx)(De.a,{content:Object(se.jsxs)("div",{children:[Object(se.jsxs)("p",{children:[Object(se.jsx)("u",{children:"CSV Format"}),": \xa0",Object(se.jsx)("b",{children:Object(se.jsx)("i",{children:"username,role"})}),"\xa0\xa0OR\xa0\xa0",Object(se.jsx)("b",{children:Object(se.jsx)("i",{children:"username,role,group"})})]}),Object(se.jsxs)("p",{children:[Object(se.jsx)("b",{children:Object(se.jsx)("i",{children:"username"})}),": the username of the learner in the corresponding authentication provider"]}),Object(se.jsxs)("p",{children:[Object(se.jsx)("b",{children:Object(se.jsx)("i",{children:"role"})}),": the role of the learner in this course"," ",Object(se.jsx)("i",{children:"(admin | staff | student)"})]}),Object(se.jsxs)("p",{children:[Object(se.jsx)("b",{children:Object(se.jsx)("i",{children:"group (optional)"})}),": the group name that the learner belongs to in this course"]}),Object(se.jsx)("p",{children:Object(se.jsx)("i",{children:"(*Note that staff or admin will automatically be assigned as group leader and each group"})}),Object(se.jsx)("p",{children:Object(se.jsx)("i",{children:"can only have one leader. If there are duplicates the latest entry will take effect)"})}),Object(se.jsx)("p",{children:"\xa0"}),Object(se.jsx)("p",{children:Object(se.jsx)("u",{children:"Examples:"})}),Object(se.jsx)("p",{children:Object(se.jsx)("i",{children:"(Luminus): \xa0e1234567,student \xa0\u2022\xa0 e1234567,student,Group1"})}),Object(se.jsx)("p",{children:Object(se.jsx)("i",{children:"(Google): \xa0learner@gmail.com,staff \xa0\u2022\xa0 learner@gmail.com,staff,Group1"})}),Object(se.jsx)("p",{children:Object(se.jsx)("i",{children:"(GitHub): \xa0ghusername,admin \xa0\u2022\xa0 ghusername,admin,Group1"})})]}),interactionKind:"hover",position:S.a.TOP,popoverClassName:"file-input-popover",children:Object(se.jsx)(h.w,{icon:E.a.HELP,className:"file-input-icon"})})]})}})}),Object(se.jsx)(h.n,{className:"html-select",label:Object(se.jsxs)("div",{className:"html-select-label",children:[Object(se.jsx)("div",{children:"Authentication Provider"}),Object(se.jsx)(De.a,{content:"The authentication provider your learners will use to log in with",interactionKind:"hover-target",position:S.a.TOP,popoverClassName:"html-select-popover",children:Object(se.jsx)(h.w,{icon:E.a.HELP,className:"html-select-label-icon"})})]}),inline:!0,children:Object(se.jsx)(h.u,{options:c,value:l,onChange:e=>d(e.target.value)})})]}),n&&Object(se.jsx)(h.d,{intent:g.a.DANGER,title:"Invalid CSV file provided!",children:n})]})}),Object(se.jsx)(h.b,{className:"add-button",text:"Add Users",intent:0===t.length?g.a.NONE:g.a.WARNING,onClick:()=>{e.handleAddNewUsersToCourse(t,l),s([]),d(c[0])}})]})};var Zs=e=>{const{data:t}=e,s=t[e.field],n=v.a.useCallback((()=>{e.setStateHandler(e.rowIndex,!s)}),[e,s]);return Object(se.jsx)(h.T,{checked:s,onChange:n})};var en=e=>{const[t,s]=v.a.useState(!1),n=v.a.useCallback((()=>{e.deleteRowHandler(e.rowIndex),s(!1)}),[e]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.b,{icon:E.a.CROSS,onClick:()=>{s(!0)}}),Object(se.jsxs)(h.h,{icon:E.a.WARNING_SIGN,isOpen:t,onClose:()=>s(!1),title:"Warning",children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsxs)("p",{children:["Are you sure you want to ",Object(se.jsx)("b",{children:"delete"})," the assessment type ",Object(se.jsx)("i",{children:e.data.type}),"?"]}),Object(se.jsx)("p",{children:Object(se.jsx)("b",{children:"All related assessments, submissions and answers will be deleted as well upon clicking the main save button."})})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:()=>s(!1),options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Ok",icon:E.a.TICK,onClick:n,options:{minimal:!1,intent:g.a.WARNING}})]})})]})]})};var tn=e=>{const{data:t}=e,s=v.a.useCallback((t=>{e.setStateHandler(e.rowIndex,t)}),[e]);return Object(se.jsx)(h.H,{value:t[e.field],min:0,clampValueOnBlur:!0,onValueChange:s})};function sn(e,t){for(let s=0;s<e.length;s++)if(Object(_.isEqual)(e[s],t))return s;return-1}var nn=e=>{const{assessmentConfig:t,setAssessmentConfig:s,setAssessmentConfigsToDelete:n}=e,i=v.a.useRef(),a=[{headerName:"Assessment Type",field:"type",rowDrag:!0,editable:!0},{headerName:"Is Manually Graded",field:"isManuallyGraded",cellRendererFramework:Zs,cellRendererParams:{setStateHandler:(e,n)=>{var a,r;const o=[...t.current];o[e]={...o[e],isManuallyGraded:n},s(o),null===(a=i.current)||void 0===a||null===(r=a.getDisplayedRowAtIndex(e))||void 0===r||r.setDataValue("isManuallyGraded",n)},field:"isManuallyGraded"}},{headerName:"Display in Dashboard",field:"displayInDashboard",cellRendererFramework:Zs,cellRendererParams:{setStateHandler:(e,n)=>{var a,r;const o=[...t.current];o[e]={...o[e],displayInDashboard:n},s(o),null===(a=i.current)||void 0===a||null===(r=a.getDisplayedRowAtIndex(e))||void 0===r||r.setDataValue("displayInDashboard",n)},field:"displayInDashboard"}},{headerName:"Max Bonus XP",field:"earlySubmissionXp",cellRendererFramework:tn,cellRendererParams:{setStateHandler:(e,n)=>{var a,r;const o=[...t.current];o[e]={...o[e],earlySubmissionXp:n},s(o),null===(a=i.current)||void 0===a||null===(r=a.getDisplayedRowAtIndex(e))||void 0===r||r.setDataValue("earlySubmissionXp",n)},field:"earlySubmissionXp"}},{headerName:"Early Hours Before Decay",field:"hoursBeforeEarlyXpDecay",cellRendererFramework:tn,cellRendererParams:{setStateHandler:(e,n)=>{var a,r;const o=[...t.current];o[e]={...o[e],hoursBeforeEarlyXpDecay:n},s(o),null===(a=i.current)||void 0===a||null===(r=a.getDisplayedRowAtIndex(e))||void 0===r||r.setDataValue("hoursBeforeEarlyXpDecay",n)},field:"hoursBeforeEarlyXpDecay"}},{headerName:"Delete Row",field:"placeholderToPreventColumnRerender",cellRendererFramework:en,cellRendererParams:{deleteRowHandler:e=>{var a;if(t.current.length<=1)return void Object(me.e)("You must have at least 1 assessment type!");const r=[...t.current],o=r.splice(e,1);null===(a=i.current)||void 0===a||a.setRowData(r),s(r),n(o[0])}},maxWidth:120,resizable:!1}],r=v.a.useCallback((e=>{const s=e.node,n=e.overNode;if(s!==n){const e=s.data,i=null===n||void 0===n?void 0:n.data,a=sn(t.current,e),r=sn(t.current,i),o=[...t.current];!function(e,t,s){const n=e[t];e.splice(t,1),e.splice(s,0,n)}(o,a,r),t.current=o}}),[t]),o=s=>{var n;null===(n=i.current)||void 0===n||n.setRowData(t.current),e.setHasChangesAssessmentConfig(!0)},c=Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:a,defaultColDef:{filter:!1,resizable:!0,sortable:!1},onGridReady:e=>{i.current=e.api,e.api.sizeColumnsToFit()},onGridSizeChanged:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.sizeColumnsToFit()},rowData:e.assessmentConfig.current,rowHeight:36,rowDragManaged:!0,suppressCellSelection:!0,suppressMovableColumns:!0,suppressPaginationPanel:!0,onRowDragMove:r,onRowDragLeave:o,onRowDragEnd:o,onCellValueChanged:s=>{if("type"===s.colDef.field){const n=[...t.current];n[s.rowIndex]={...n[s.rowIndex],type:s.value},t.current=n,e.setHasChangesAssessmentConfig(!0)}}})});return Object(se.jsxs)("div",{className:"assessment-configuration",children:[Object(se.jsxs)("div",{className:"assessment-configuration-header-container",children:[Object(se.jsx)(h.p,{children:"Assessment Configuration"}),Object(se.jsx)(h.b,{text:"Add Row",onClick:()=>{var e;if(t.current.length>=8)return void Object(me.e)("You can have at most 8 assessment types!");const n=[...t.current];n.push({assessmentConfigId:-1,type:"untitled",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:0,earlySubmissionXp:0}),s(n),null===(e=i.current)||void 0===e||e.setRowData(n)},className:"add-row-button"})]}),c]})};let an;!function(e){e.WRITE="WRITE",e.PREVIEW="PREVIEW"}(an||(an={}));var rn=e=>{const{isMobileBreakpoint:t}=Object(j.e)(),[s,n]=f.useState(an.WRITE),{courseName:i,courseShortName:a,viewable:r,enableGame:o,enableAchievements:c,enableSourcecast:l,moduleHelpText:d}=e.courseConfiguration,u=Object(se.jsx)(h.Z,{id:"moduleHelpText",className:"input-textarea",fill:!0,value:d||"",onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,moduleHelpText:t.target.value})}),p=Object(se.jsx)("div",{className:"input-markdown",children:Object(se.jsx)(ee.a,{content:d||"",openLinksInNewWindow:!0})}),g=f.useCallback(((e,t,s)=>{e!==t&&n(e)}),[n]);return Object(se.jsxs)("div",{className:"course-configuration",children:[Object(se.jsx)(h.p,{children:i}),Object(se.jsx)(h.q,{children:a}),Object(se.jsxs)("div",{className:"inputs",children:[Object(se.jsxs)("div",{className:"text",children:[Object(se.jsx)(h.n,{helperText:"Please enter the course name that will be used for course selection.",inline:!0,label:"Course Name",labelFor:"courseName",children:Object(se.jsx)(h.y,{id:"courseName",defaultValue:i,onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,courseName:t.target.value})})}),Object(se.jsx)(h.n,{helperText:"Please enter the course short name. This will be displayed on the top left.",inline:!0,label:"Course Short Name",labelFor:"courseShortName",children:Object(se.jsx)(h.y,{id:"courseShortName",defaultValue:a,onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,courseShortName:t.target.value})})}),Object(se.jsxs)(h.n,{helperText:"Please enter the module help text that will be used in the course help dialog.",inline:!0,label:"Module Help Text",labelFor:"moduleHelpText",children:[Object(se.jsxs)(h.V,{selectedTabId:s,onChange:g,className:"module-help-text-tabs",children:[Object(se.jsx)(h.U,{id:an.WRITE,title:"Write"}),Object(se.jsx)(h.U,{id:an.PREVIEW,title:"Preview"})]}),s===an.WRITE&&u,s===an.PREVIEW&&p]})]}),!t&&Object(se.jsx)(h.i,{}),Object(se.jsxs)("div",{className:"booleans",children:[Object(se.jsx)(h.T,{checked:r,label:"Viewable",onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,viewable:t.target.checked})}),Object(se.jsx)(h.T,{checked:o,label:"Enable Game",onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,enableGame:t.target.checked})}),Object(se.jsx)(h.T,{checked:c,label:"Enable Achievements",onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,enableAchievements:t.target.checked})}),Object(se.jsx)(h.T,{checked:l,label:"Enable Sourcecast",onChange:t=>e.setCourseConfiguration({...e.courseConfiguration,enableSourcecast:t.target.checked})})]})]})]})};var on=e=>{const{data:t}=e,s=v.a.useCallback((s=>{e.handleUpdateUserRole(t.courseRegId,s.target.value)}),[t,e]),n=[{label:"Student",value:O.a.Student},{label:"Staff",value:O.a.Staff},{label:"Admin",value:O.a.Admin}];return Object(se.jsx)(De.a,{content:"You cannot downgrade yourself from an admin role!",interactionKind:"click",position:S.a.TOP,disabled:e.courseRegId!==t.courseRegId,children:Object(se.jsx)(h.u,{options:n,onChange:s,fill:!0,minimal:!0,style:{textAlign:"center"},value:t.role,disabled:e.courseRegId===t.courseRegId})})};var cn=e=>{const[t,s]=v.a.useState(!1),n=v.a.useCallback((()=>{e.handleDeleteUserFromCourse(e.data.courseRegId),s(!1)}),[e]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(De.a,{content:"You cannot delete an admin!",interactionKind:"click",position:S.a.TOP,disabled:e.data.role!==O.a.Admin,children:Object(se.jsx)(h.b,{text:"Delete User",icon:E.a.CROSS,onClick:()=>{e.data.role!==O.a.Admin?s(!0):Object(me.e)("You cannot delete an admin user!")},disabled:e.data.role===O.a.Admin})}),Object(se.jsxs)(h.h,{icon:E.a.WARNING_SIGN,isOpen:t,onClose:()=>s(!1),title:"Deleting User From Course",canOutsideClickClose:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsxs)("p",{children:["Are you sure you want to ",Object(se.jsx)("b",{children:"delete"})," the user"," ",Object(se.jsxs)("i",{children:[e.data.name," (",e.data.username,")"]}),"?"]}),Object(se.jsx)("p",{children:Object(se.jsx)("b",{children:"All their assessment answers will be deleted as well."})})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:()=>s(!1),options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",icon:E.a.TRASH,onClick:n,options:{minimal:!1,intent:g.a.DANGER}})]})})]})]})};var ln=e=>{var t;const s=v.a.useRef(),n=null===(t=e.userCourseRegistrations)||void 0===t?void 0:t.map((e=>e.name?e:{...e,name:"(user has yet to log in)"})),i=[{headerName:"Name",field:"name",sort:"asc"},{headerName:"Username",field:"username"},{headerName:"Group",field:"group"},{headerName:"Role",field:"role",cellRendererFramework:on,cellRendererParams:{courseRegId:e.courseRegId,handleUpdateUserRole:e.handleUpdateUserRole},width:110},{headerName:"Actions",field:"actions",cellRendererFramework:cn,cellRendererParams:{handleDeleteUserFromCourse:e.handleDeleteUserFromCourse},width:120,filter:!1,resizable:!1}],a=Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:i,defaultColDef:{filter:!0,resizable:!0,sortable:!0},onGridReady:e=>{s.current=e.api},onGridSizeChanged:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.sizeColumnsToFit()},rowData:n,rowHeight:36,suppressCellSelection:!0,suppressMovableColumns:!0,pagination:!0})});return Object(se.jsxs)("div",{className:"users-configuration",children:[Object(se.jsxs)("div",{className:"users-header-container",children:[Object(se.jsx)(h.p,{children:"Users"}),Object(se.jsx)(h.b,{text:"Export as CSV",className:"export-csv-button",onClick:()=>{s.current&&s.current.exportDataAsCsv({fileName:`SA Users (${(new Date).toISOString()}).csv`,columnKeys:["name","username","group","role"]})}})]}),a]})};var dn=e=>{const[t,s]=v.a.useState(!1),[n,i]=v.a.useState(!1),[a,r]=v.a.useState({courseName:"",courseShortName:"",viewable:!0,enableGame:!0,enableAchievements:!0,enableSourcecast:!0,moduleHelpText:""}),o=v.a.useRef(e.assessmentConfigurations),[c,l]=v.a.useState([]);v.a.useEffect((()=>{e.handleFetchCourseConfiguration(),e.handleFetchAssessmentConfigs(),e.handleFetchUserCourseRegistrations()}),[]),v.a.useEffect((()=>{r({courseName:e.courseName,courseShortName:e.courseShortName,viewable:e.viewable,enableGame:e.enableGame,enableAchievements:e.enableAchievements,enableSourcecast:e.enableSourcecast,moduleHelpText:e.moduleHelpText}),o.current=Object(_.cloneDeep)(e.assessmentConfigurations)}),[e]);const d={courseConfiguration:a,setCourseConfiguration:e=>{r(e),s(!0)}},u=v.a.useMemo((()=>({assessmentConfig:o,setAssessmentConfig:e=>{o.current=e,i(!0)},setAssessmentConfigsToDelete:e=>{if(-1!==e.assessmentConfigId){const t=[...c];t.push(e),l(t)}},setHasChangesAssessmentConfig:i})),[c]),p={courseRegId:e.courseRegId,userCourseRegistrations:e.userCourseRegistrations,handleUpdateUserRole:e.handleUpdateUserRole,handleDeleteUserFromCourse:e.handleDeleteUserFromCourse},m={handleAddNewUsersToCourse:e.handleAddNewUsersToCourse},b=Object(se.jsxs)("div",{className:"admin-panel",children:[Object(se.jsx)(h.o,{children:"Admin Panel"}),Object(se.jsxs)(h.V,{id:"admin-panel",renderActiveTabPanelOnly:!0,children:[Object(se.jsx)(h.U,{id:"configuration",title:"Configuration",panel:Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(rn,{...d}),Object(se.jsx)(h.i,{}),Object(se.jsx)(nn,{...u}),Object(se.jsx)(h.b,{text:"Save",style:{marginTop:"15px"},intent:t||n?g.a.WARNING:g.a.NONE,onClick:()=>{t&&(e.handleUpdateCourseConfig(a),s(!1)),c.length>0&&(c.forEach((t=>{e.handleDeleteAssessmentConfig(t)})),l([])),n&&(e.setAssessmentConfigurations([]),e.handleUpdateAssessmentConfigs(o.current),i(!1))}})]})}),Object(se.jsx)(h.U,{id:"users",title:"Users",panel:Object(se.jsx)(ln,{...p})}),Object(se.jsx)(h.U,{id:"add-users",title:"Add Users",panel:Object(se.jsx)(Js,{...m})})]})]});return Object(se.jsx)(Ne.a,{loadContentDispatch:()=>{},display:b,fullWidth:!1})};var un=Object(r.b)((e=>({courseRegId:e.session.courseRegId,courseName:e.session.courseName,courseShortName:e.session.courseShortName,viewable:e.session.viewable,enableGame:e.session.enableGame,enableAchievements:e.session.enableAchievements,enableSourcecast:e.session.enableSourcecast,moduleHelpText:e.session.moduleHelpText,assessmentConfigurations:e.session.assessmentConfigurations,userCourseRegistrations:e.session.userCourseRegistrations})),(e=>Object(c.b)({handleFetchCourseConfiguration:u.fetchCourseConfig,handleFetchAssessmentConfigs:u.fetchAssessmentConfigs,handleFetchUserCourseRegistrations:u.fetchAdminPanelCourseRegistrations,handleUpdateCourseConfig:u.updateCourseConfig,handleUpdateAssessmentConfigs:u.updateAssessmentConfigs,setAssessmentConfigurations:u.setAssessmentConfigurations,handleDeleteAssessmentConfig:u.deleteAssessmentConfig,handleUpdateUserRole:u.updateUserRole,handleDeleteUserFromCourse:u.deleteUserCourseRegistration,handleAddNewUsersToCourse:l.addNewUsersToCourse},e)))(dn),hn=s(295);const pn={filter:!0,resizable:!0,sortable:!0};var gn=e=>{let t;const s=e.gradingSummary.cols.map((e=>({headerName:Object(_.startCase)(e),field:e}))),n=Object(se.jsx)("div",{className:"Dashboard",children:Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:s,defaultColDef:pn,onGridReady:e=>{t=e.api},onGridSizeChanged:()=>{t&&t.sizeColumnsToFit()},rowData:e.gradingSummary.rows,rowHeight:30,suppressCellSelection:!0,suppressMovableColumns:!0})})});return Object(se.jsx)("div",{children:Object(se.jsx)(Ne.a,{display:n,loadContentDispatch:e.handleFetchGradingSummary})})};var mn=Object(r.b)((e=>({gradingSummary:e.dashboard.gradingSummary})),(e=>Object(c.b)({handleFetchGradingSummary:hn.fetchGroupGradingSummary},e)))(gn),bn=s(159);var fn={zektonFont:{key:"zekton",pngPath:"../../assets/zekton.png",fntPath:"../../assets/zekton.fnt"},zektonDarkFont:{key:"zektonDark",pngPath:"../../assets/zekton_dark.png",fntPath:"../../assets/zekton.fnt"},alienCowsFont:{key:"alienAndCows",pngPath:"../../assets/alien_and_cows.png",fntPath:"../../assets/alien_and_cows.fnt"},alienLeagueFont:{key:"alienLeague",pngPath:"../../assets/alien_league.png",fntPath:"../../assets/alien_league.fnt"},pixelFont:{key:"pixel",pngPath:"../../assets/pixel.png",fntPath:"../../assets/pixel.fnt"}};const vn={assetsFolder:Se.a.sourceAcademyAssets,fadeDuration:600,nullFunction:()=>{},nullInteractionId:"",nullSequenceNumber:-1,popUpDuration:1e3,defaultAssetPath:"/ui/wristDeviceButton.png",defaultFontStyle:{key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},defaultCursor:""},yn={x:1920,y:1080},xn={x:yn.x/2,y:yn.y/2},jn={navy:"#03092c",lightBlue:"#ece1fb",offWhite:"#bbc1c9",white:"#ffffff",darkGrey:"#333333",lightGrey:"#555555",blue:"#1133ff",darkBlue:"#0d2440",orange:"#ff9933",yellow:"#ffee33",red:"0#ff0000",maroon:"#142B2E",black:"#000000",purple:"#dd33dd",paleYellow:"#f6ffbd"},On=_.mapValues(jn,(e=>parseInt(e.slice(1),16)));let Cn;function Sn(e){let{direction:t=Cn.Row,numOfItems:s,maxXSpace:n=yn.x,maxYSpace:i=yn.y,numItemLimit:a=0,redistributeLast:r=!0}=e,o=a||s;const c=Math.ceil(s/o);return _.times(s,(e=>{const a=e%o,l=Math.floor(e/o);return r&&l===c-1&&(o=s%c||o),t===Cn.Row?[En(yn.x,n,a,o),En(yn.y,i,l,c)]:[En(yn.x,n,l,c),En(yn.y,i,a,o)]}))}function En(e,t,s,n){const i=t/n;return(e-t+i)/2+i*s}function wn(e){let{numOfItems:t,xSpacing:s=30,ySpacing:n=30}=e;const i=new Array;for(let a=0;a<t;a++)i.push([a*s,a*n]);return i}!function(e){e.Row="Row",e.Column="Column"}(Cn||(Cn={}));const _n={fontFamily:"Verdana",fontSize:"15px",fill:jn.lightBlue,align:"left",wordWrap:{width:290}};class An extends Phaser.GameObjects.Container{constructor(e,t,s,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300;super(e,t,s),this.renderTextHover(n,i)}renderTextHover(e,t){const s=parseInt(_n.fontSize.substring(0,_n.fontSize.length-2)),n=e.length*s*.75,i=Math.min(n,t),a=new Phaser.GameObjects.Text(this.scene,30,10,e,{..._n,wordWrap:{width:i-10}}),r=new Phaser.GameObjects.Rectangle(this.scene,20,0,i,a.getBounds().bottom+10,On.darkBlue).setOrigin(0,0).setAlpha(.8);this.add([r,a]),this.setDepth(1),this.setVisible(!1)}}var kn=An;const Tn=(e,t,s,n)=>{let{x:i,y:a,oriX:r,oriY:o}=s;return new Phaser.GameObjects.BitmapText(e,i,a,n.key,t,n.size,n.align).setOrigin(r,o)},Rn={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT},In={key:fn.alienLeagueFont.key,size:50,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},Ln={key:fn.zektonFont.key,size:18,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT},Pn={fontFamily:"Verdana",fontSize:"18px",fill:jn.lightBlue,align:"center",lineSpacing:10,wordWrap:{width:500}},Nn={id:"default-award",assetKey:vn.nullInteractionId,assetPath:vn.nullInteractionId,title:vn.nullInteractionId,description:"There is no asset associated with this award.",completed:!1},Dn=.3*-yn.x,Mn=.05*-yn.y,Un=Mn+275;var Bn={arrow:{x:.08*yn.x,y:.34*yn.y,xOffset:80,xScale:.4,yScale:.3},itemsPerPage:7,list:{yStart:.31*-yn.y,ySpace:100},listTextConfig:{x:.09*-yn.x,y:0,oriX:0,oriY:.55},noPreviewTextConfig:{x:Dn,y:-40,oriX:.5,oriY:.5},preview:{descText:{yOffset:320},rect:{dim:430,x:Dn,y:Mn,xOffset:30,yOffset:15},key:{x:Dn,y:Un,width:430,height:35},keyTagTextConfig:{x:Dn-205,y:Un,oriX:0,oriY:.5},keyTextConfig:{x:Dn-90,y:Un,oriX:0,oriY:.5},explanation:{x:Dn-150,y:Mn+200},titleTextConfig:{x:Dn+20,y:Mn-275,oriX:.5,oriY:.5}}};const Gn=e=>e.map((e=>Fn(e))),Fn=e=>{const t=zo.getInstance().getAwardsMapping().get(e);return t||{...Nn,title:e}};let Hn,Vn;!function(e){e.Image="Image",e.Sprite="Sprite"}(Hn||(Hn={})),function(e){e.Background="Background",e.Object="Object"}(Vn||(Vn={}));var Wn={spaceshipBg:{type:Hn.Image,key:"spaceship-bg",path:"/locations/spaceshipBackground.png"},saBanner:{type:Hn.Image,key:"sa-banner",path:"/ui/sourceAcadBannerOneLine.png"},shortButton:{type:Hn.Image,key:"short-button",path:"/ui/shortButton.png"},mediumButton:{type:Hn.Image,key:"med-button",path:"/ui/mediumButton.png"},longButton:{type:Hn.Image,key:"long-button",path:"/ui/longButton.png"},topButton:{type:Hn.Image,key:"top-button",path:"/ui/topButton.png"},speechBox:{type:Hn.Image,key:"speechBox",path:"/ui/speechbox.png"},speakerBox:{type:Hn.Image,key:"speakerBox",path:"/ui/speakerBox.png"},defaultLocationImg:{type:Hn.Image,key:"loc-default",path:"/ui/defaultLocation.jpg"},locationPreviewFrame:{type:Hn.Image,key:"loc-preview-frame",path:"/ui/locationPreviewFrame.png"},locationPreviewFill:{type:Hn.Image,key:"loc-preview-fill",path:"/ui/locationPreviewFill.png"},talkOptButton:{type:Hn.Image,key:"talk-opt-button",path:"/ui/talkOptButton.png"},talkOptCheck:{type:Hn.Image,key:"talk-opt-check",path:"/ui/talkOptCheck.png"},modeMenuBanner:{type:Hn.Image,key:"mode-banner",path:"/ui/modeMenuBanner.png"},popUpFrame:{type:Hn.Image,key:"pop-up-frame",path:"/ui/popUpFrame.png"},mediumBox:{type:Hn.Image,key:"medium-box",path:"/ui/mediumBox.png"},diamond:{type:Hn.Image,key:"diamond",path:"/ui/zircon.png"},arrow:{type:Hn.Image,key:"arrow",path:"/ui/arrow.png"},cookies:{type:Hn.Image,key:"cookies",path:"/images/cookies.png"},scrollFrame:{type:Hn.Image,key:"scroll-frame",path:"/ui/scrollFrame.png"},messageBar:{type:Hn.Image,key:"message-bar",path:"/ui/messageBg.png"},escapeMenuBackground:{type:Hn.Image,key:"escape-bg",path:"/ui/escapeMenu.png"},awardsMenu:{type:Hn.Image,key:"award-bg",path:"/ui/collectiblesBg.png"},awardsBanner:{type:Hn.Image,key:"award-banner",path:"/ui/awardsBanner.png"},awardsPageChosen:{type:Hn.Image,key:"award-pg-chosen",path:"/ui/collectiblesPageOptChosen.png"},awardsPage:{type:Hn.Image,key:"award-pg-opt",path:"/ui/collectiblesPageOpt.png"},awardsBackground:{type:Hn.Image,key:"award-hall-bg",path:"/ui/awardsHall.png"},gear:{type:Hn.Image,key:"gear",path:"/ui/settings.png"},journal:{type:Hn.Image,key:"journal",path:"/ui/journal.png"},chapterRepeatButton:{type:Hn.Image,key:"chapter-repeat",path:"/ui/chapterRepeat.png"},chapterContinueButton:{type:Hn.Image,key:"chapter-continue",path:"/ui/chapterContinue.png"},StarGold:{type:Hn.Image,key:"StarGold",path:"/ui/StarGold.png"},StarSilver:{type:Hn.Image,key:"StarSilver",path:"/ui/StarSilver.png"},StarBronze:{type:Hn.Image,key:"StarBronze",path:"/ui/StarBronze.png"},chapterSelectFrame:{type:Hn.Image,key:"chapter-select-frame",path:"/ui/chapterSelectionFrame.png"},chapterSelectBorder:{type:Hn.Image,key:"chapter-select-border",path:"/ui/chapterSelectionBorder.png"},chapterSelectArrow:{type:Hn.Image,key:"chapter-select-arrow",path:"/ui/chapSelectArrow.png"},mainMenuOptBanner:{type:Hn.Image,key:"menu-option",path:"/ui/menuOption.png"},settingBanner:{type:Hn.Image,key:"settings-bg",path:"/ui/settingsBg.png"},settingOption:{type:Hn.Image,key:"settings-opt",path:"/ui/settingsOption.png"},verifiedFrame:{type:Hn.Image,key:"verified-frame",path:"/ui/verifiedFrame.png"},sourceCrashedPod:{type:Hn.Image,key:"source-crashed-pod",path:"/locations/sourceCrashedPod.png"},squareKeyboardIcon:{type:Hn.Image,key:"keyboard-key-square",path:"/ui/keyboardKeyIcon.png"},medKeyboardIcon:{type:Hn.Image,key:"keyboard-key-medium",path:"/ui/TabIcon.png"}};const qn={volume:0,ease:"Power2"};let $n;!function(e){e[e.SFX=0]="SFX",e[e.BGM=1]="BGM"}($n||($n={}));var Xn={buttonHover:{key:"btn-hover",path:"/sfx/buttonHover.mp3",config:{volume:.1},soundType:$n.SFX},buttonClick:{key:"btn-click",path:"/sfx/buttonClick.mp3",config:{volume:.1},soundType:$n.SFX},radioButtonClick:{key:"radio-btn-click",path:"/sfx/radioButtonClick.mp3",config:{volume:.15},soundType:$n.SFX},dialogueAdvance:{key:"dialogue-advance",path:"/sfx/dialogueAdvance.mp3",config:{volume:.3},soundType:$n.SFX},popUpEnter:{key:"pop-up-enter",path:"/sfx/popUpEnter.mp3",config:{volume:.35},soundType:$n.SFX},popUpExit:{key:"pop-up-exit",path:"/sfx/popUpExit.mp3",config:{volume:.35},soundType:$n.SFX},menuEnter:{key:"menu-enter",path:"/sfx/menuEnter.mp3",config:{volume:.5},soundType:$n.SFX},menuExit:{key:"menu-exit",path:"/sfx/menuExit.mp3",config:{volume:.5},soundType:$n.SFX},modeEnter:{key:"mode-enter",path:"/sfx/modeEnter.mp3",config:{volume:.1},soundType:$n.SFX},notifEnter:{key:"notif-enter",path:"/sfx/notifEnter.mp3",config:{volume:.25},soundType:$n.SFX},notifExit:{key:"notif-exit",path:"/sfx/notifExit.mp3",config:{volume:.25},soundType:$n.SFX},radioStatic:{key:"radio-static",path:"/sfx/radioStatic.mp3",config:{volume:.1},soundType:$n.SFX},galacticHarmony:{key:"galactic-harmony",path:"/bgm/GalacticHarmony.mp3",config:{volume:.25,loop:!0},soundType:$n.BGM}};let zn;!function(e){e[e.Effects=0]="Effects",e[e.Background=1]="Background",e[e.Character=2]="Character",e[e.Speaker=3]="Speaker",e[e.PopUp=4]="PopUp",e[e.Dialogue=5]="Dialogue",e[e.SpeakerBox=6]="SpeakerBox",e[e.UI=7]="UI",e[e.Objects=8]="Objects",e[e.BBox=9]="BBox",e[e.Escape=10]="Escape",e[e.Selector=11]="Selector",e[e.Dashboard=12]="Dashboard",e[e.WorkerMessage=13]="WorkerMessage"}(zn||(zn={}));const Yn=[zn.Background,zn.Selector,zn.Objects,zn.BBox,zn.Character,zn.Speaker,zn.PopUp,zn.Dialogue,zn.SpeakerBox,zn.Effects,zn.Dashboard,zn.Escape,zn.UI,zn.WorkerMessage];var Kn=s(89);function Qn(e){return new Promise((t=>setTimeout(t,e)))}function Jn(e,t,s){return Math.min(Math.max(e,t),s)}function Zn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.startsWith("/")&&(e=e.substr(1)),vn.assetsFolder+(t?si()+e:e)}function ei(e,t){if(void 0===e)throw new Error(t||"Object not found");return e}const ti=()=>Kn.a.getState().session.courseId,si=()=>Kn.a.getState().session.assetsPrefix||"",ni=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn.fadeDuration;return{alpha:0,targets:e,duration:t,ease:"Power2"}},ii=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn.fadeDuration;return{alpha:1,targets:e,duration:t,ease:"Power2"}};function ai(e,t){let{fadeDuration:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&(e.add.tween(ni([t],s||vn.fadeDuration)),setTimeout((()=>t.destroy()),s||vn.fadeDuration))}function ri(e){return new Phaser.GameObjects.Rectangle(e,xn.x,xn.y,yn.x,yn.y,0)}function oi(e,t){let s=0;const n=setInterval((()=>{s%2!==0?(t.setAlpha(0),e.tweens.add(ii([t],250))):(t.setAlpha(1),e.tweens.add(ni([t],250))),s++}),500);return function(){s=0,clearInterval(n)}}const ci={y:0,duration:300,ease:"Power2"},li={y:-yn.y,duration:250,ease:"Power2"},di=(yn.x,{x:0,duration:500,ease:"Power2"}),ui={x:yn.x,duration:500,ease:"Power2"},hi={x:1900,y:100,oriX:1,oriY:.5},pi={key:fn.zektonDarkFont.key,size:24,align:Phaser.GameObjects.BitmapText.ALIGN_RIGHT},gi=(()=>{let e=Promise.resolve();return(t,s)=>{e=e.then((()=>async function(e,t){const s=new Phaser.GameObjects.Container(e,0,0),n=new Phaser.GameObjects.Sprite(e,yn.x,100,Wn.messageBar.key);n.setScale(-1.5,.8);const i=Tn(e,t,hi,pi);s.add([n,i]),e.getLayerManager().addToLayer(zn.Effects,s),s.setPosition(yn.x,0),s.setAlpha(0),zo.getInstance().getSoundManager().playSound(Xn.notifEnter.key),e.add.tween({targets:s,alpha:1,...di}),await Qn(di.duration+3e3),zo.getInstance().getSoundManager().playSound(Xn.notifExit.key),e.add.tween({targets:s,alpha:1,...ui}),await Qn(ui.duration),ai(e,s,{fadeDuration:vn.fadeDuration})}(t,s)))}})();const mi={prompt:{x:30,y:60,xPad:30,yPad:10},rect:{x:10,y:760,width:yn.x-20},text:{xPad:100,yPad:70},speakerTextConfig:{x:320,y:745,oriX:.5,oriY:.5}},bi={fontFamily:"Verdana",fontSize:"30px",fill:jn.lightBlue,align:"left",lineSpacing:10,wordWrap:{width:mi.rect.width-2*mi.text.xPad-2*mi.rect.x}},fi={key:fn.zektonFont.key,size:36,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var vi=mi;var yi=function(e,t){let{x:s=0,y:n=0,textStyle:i={},typeWriterInterval:a=1}=t;const r=new Phaser.GameObjects.Text(e,s,n,"",i);let o,c="",l=0;const d=()=>{o&&clearInterval(o)};return{container:r,changeLine:e=>{e&&(c=e,r.text="",l=0,d(),o=setInterval((()=>{r.text+=c[l++],l===c.length&&clearInterval(o)}),a))},clearTyping:d}};var xi=class{constructor(e){this.typewriter=void 0,this.dialogueBox=void 0,this.blinkingDiamond=void 0;const t=Ri.getInstance().getGameManager();var s;this.dialogueBox=(s=t,new Phaser.GameObjects.Image(s,xn.x,xn.y,Wn.speechBox.key).setAlpha(.9)).setInteractive({useHandCursor:!0,pixelPerfect:!0}),this.typewriter=function(e,t){return yi(e,{x:vi.rect.x+vi.text.xPad,y:vi.rect.y+vi.text.yPad,textStyle:t})}(t,e),this.blinkingDiamond=this.drawDiamond(t)}getDialogueContainer(){const e=Ri.getInstance().getGameManager(),t=new Phaser.GameObjects.Container(e,0,0);return t.add([this.dialogueBox,this.blinkingDiamond.container,this.typewriter.container]),t}drawDiamond(e){const t=new Phaser.GameObjects.Image(e,yn.x-vi.prompt.x-vi.prompt.xPad,yn.y-vi.prompt.y-vi.prompt.yPad,Wn.diamond.key).setDisplaySize(vi.prompt.x,vi.prompt.y);return{container:t,clearBlink:oi(e,t)}}getDialogueBox(){return this.dialogueBox}destroy(){const e=Ri.getInstance().getGameManager();this.typewriter.clearTyping(),this.blinkingDiamond.clearBlink(),this.getDialogueBox().off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),ai(e,this.getDialogueContainer())}changeText(e){this.typewriter.changeLine(e)}};const ji={key:fn.alienLeagueFont.key,size:100,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},Oi={x:xn.x,y:vi.rect.y+2*ji.size,oriX:.5,oriY:.9};function Ci(e,t){let{assetKey:s,message:n="",textConfig:i={x:0,y:0,oriX:0,oriY:0},bitMapTextStyle:a=vn.defaultFontStyle,onDown:r=vn.nullFunction,onUp:o=vn.nullFunction,onHover:c=vn.nullFunction,onOut:l=vn.nullFunction,onPointerMove:d=vn.nullFunction,onHoverEffect:u=!0,onClickSound:h=Xn.buttonClick.key,onHoverSound:p=Xn.buttonHover.key}=t;const g=new Phaser.GameObjects.Container(e,0,0),m=new Phaser.GameObjects.Sprite(e,0,0,s);m.setInteractive({pixelPerfect:!0,useHandCursor:!0}),m.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(()=>{zo.getInstance().getSoundManager().playSound(h),o()})),m.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,(()=>{zo.getInstance().getSoundManager().playSound(p),u&&g.setAlpha(1),c()})),m.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(()=>{u&&g.setAlpha(.9),l()})),m.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(()=>{r()})),m.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,((e,t,s)=>{d(e,t,s)}));const b=Tn(e,n,i,a);return g.add([m,b]),u&&g.setAlpha(.9),g}const Si={textPad:20,textConfig:{x:15,y:-15,oriX:.5,oriY:.5},y:100,width:450,yInterval:100},Ei={fontFamily:"Verdana",fontSize:"20px",fill:jn.offWhite,align:"right",lineSpacing:10,wordWrap:{width:Si.width-2*Si.textPad}},wi={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};async function _i(e,t,s){const n=new Phaser.GameObjects.Container(e,0,0),i=new Phaser.GameObjects.Text(e,yn.x-Si.textPad,Si.y,t,Ei).setOrigin(1,0),a=new Phaser.GameObjects.Rectangle(e,yn.x,Si.y-Si.textPad,Si.width,.5*i.getBounds().bottom+Si.textPad,On.darkBlue,.8).setOrigin(1,0),r=new Phaser.GameObjects.Rectangle(e,yn.x,Si.y-Si.textPad,Si.width,.5*a.getBounds().bottom+(s.length+.5)*Si.yInterval,On.lightBlue,.2).setOrigin(1,0);n.add([r,a,i]);const o=wn({numOfItems:s.length,xSpacing:0,ySpacing:Si.yInterval});Ri.getInstance().addToLayer(zn.UI,n);const c=new Promise((t=>{n.add(s.map(((s,i)=>Ci(e,{assetKey:Wn.mediumButton.key,message:s,textConfig:Si.textConfig,bitMapTextStyle:wi,onUp:()=>{n.destroy(),t(i)}}).setPosition(yn.x-Si.width/2,o[i][1]+a.getBounds().bottom+75))))}));n.setPosition(yn.x,0),zo.getInstance().getSoundManager().playSound(Xn.notifEnter.key),e.add.tween({targets:n,alpha:1,...di}),await Qn(di.duration);const l=await c;return zo.getInstance().getSoundManager().playSound(Xn.notifExit.key),e.add.tween({targets:n,alpha:1,...ui}),await Qn(ui.duration),ai(e,n,{fadeDuration:vn.fadeDuration}),l}let Ai,ki;!function(e){e.Move="Move",e.Explore="Explore",e.Talk="Talk",e.Menu="Menu",e.EscapeMenu="EscapeMenu",e.None="None",e.Sequence="Sequence",e.Dashboard="Dashboard"}(Ai||(Ai={})),function(e){e[e.EscapeMenu=Ai.EscapeMenu]="EscapeMenu",e[e.Dashboard=Ai.Dashboard]="Dashboard"}(ki||(ki={}));class Ti{constructor(){this.gameManager=void 0,this.getGameManager=()=>ei(this.gameManager),this.gameManager=void 0}static getInstance(){return Ti.instance||(Ti.instance=new Ti),Ti.instance}setGameManager(e){this.gameManager=e}getCurrLocId(){return this.getGameManager().currentLocationId}getLocationAtId(e){return this.getGameManager().getStateManager().getGameMap().getLocationAtId(e)}async changeLocationTo(e){await this.getGameManager().changeLocationTo(e)}getLocationModes(e){return this.getGameManager().getStateManager().getLocationModes(e)}addLocationMode(e,t){this.getGameManager().getStateManager().addLocationMode(e,t)}removeLocationMode(e,t){this.getGameManager().getStateManager().removeLocationMode(e,t)}hasTriggeredInteraction(e){return this.getGameManager().getStateManager().hasTriggeredInteraction(e)}triggerStateChangeAction(e){this.getGameManager().getStateManager().triggerStateChangeAction(e)}triggerInteraction(e){this.getGameManager().getStateManager().triggerInteraction(e)}watchGameItemType(e,t){this.getGameManager().getStateManager().watchGameItemType(e,t)}getGameMap(){return this.getGameManager().getStateManager().getGameMap()}getGameItemsInLocation(e,t){return this.getGameManager().getStateManager().getGameItemsInLocation(e,t)}addItem(e,t,s){this.getGameManager().getStateManager().addItem(e,t,s)}removeItem(e,t,s){return this.getGameManager().getStateManager().removeItem(e,t,s)}makeObjectGlow(e,t){this.getGameManager().getObjectManager().makeObjectGlow(e,t)}makeObjectBlink(e,t){this.getGameManager().getObjectManager().makeObjectBlink(e,t)}setObjProperty(e,t){this.getGameManager().getStateManager().setObjProperty(e,t)}renderObjectLayerContainer(e){this.getGameManager().getObjectManager().renderObjectsLayerContainer(e)}getAllActivatables(){return[...this.getGameManager().getObjectManager().getActivatables(),...this.getGameManager().getBBoxManager().getActivatables()]}setBBoxProperty(e,t){this.getGameManager().getStateManager().setBBoxProperty(e,t)}renderBBoxLayerContainer(e){this.getGameManager().getBBoxManager().renderBBoxLayerContainer(e)}areAllObjectivesComplete(){return this.getGameManager().getStateManager().areAllObjectivesComplete()}isObjectiveComplete(e){return this.getGameManager().getStateManager().isObjectiveComplete(e)}areObjectivesComplete(e){return this.getGameManager().getStateManager().areObjectivesComplete(e)}completeObjective(e){this.getGameManager().getStateManager().completeObjective(e)}isTaskComplete(e){return this.getGameManager().getStateManager().isTaskComplete(e)}areTasksComplete(e){return this.getGameManager().getStateManager().areTasksComplete(e)}completeTask(e){this.getGameManager().getStateManager().completeTask(e),gi(this.getGameManager(),"Task completed!")}showTask(e){this.getGameManager().getStateManager().showTask(e),gi(this.getGameManager(),"New task added")}getAllVisibleTaskData(){return this.getGameManager().getStateManager().getAllVisibleTaskData()}addCollectible(e){zo.getInstance().getUserStateManager().addCollectible(e)}async isInUserState(e,t){return zo.getInstance().getUserStateManager().isInUserState(e,t)}clearSeveralLayers(e){this.getGameManager().getLayerManager().clearSeveralLayers(e)}addToLayer(e,t){this.getGameManager().getLayerManager().addToLayer(e,t)}showLayer(e){this.getGameManager().getLayerManager().showLayer(e)}hideLayer(e){this.getGameManager().getLayerManager().hideLayer(e)}async fadeInLayer(e,t){await this.getGameManager().getLayerManager().fadeInLayer(e,t)}async fadeOutLayer(e,t){await this.getGameManager().getLayerManager().fadeOutLayer(e,t)}async bringUpUpdateNotif(e){await async function(e,t){const s=new xi({}),n=s.getDialogueContainer();e.getLayerManager().addToLayer(zn.Effects,n),e.getLayerManager().fadeInLayer(zn.Effects);const i=Tn(e,t,Oi,ji).setAlpha(0);n.add(i),zo.getInstance().getSoundManager().playSound(Xn.notifEnter.key),e.add.tween(ii([i],2*vn.fadeDuration)),await Qn(2*vn.fadeDuration);const a=new Promise((t=>{s.getDialogueBox().on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(()=>{zo.getInstance().getSoundManager().playSound(Xn.notifExit.key),ai(e,i,{fadeDuration:vn.fadeDuration/4}),s.destroy(),t()}))}));await a}(this.getGameManager(),e)}async processGameActions(e){await this.getGameManager().getPhaseManager().pushPhase(Ai.Sequence),await this.getGameManager().getActionManager().processGameActions(e),await this.getGameManager().getPhaseManager().popPhase()}async processGameActionsInSamePhase(e){await this.getGameManager().getActionManager().processGameActions(e)}async showDialogue(e){await this.getGameManager().getPhaseManager().pushPhase(Ai.Sequence),await this.getGameManager().getDialogueManager().showDialogue(e),await this.getGameManager().getPhaseManager().popPhase()}async showDialogueInSamePhase(e){await this.getGameManager().getDialogueManager().showDialogue(e)}storeDialogueLine(e,t){this.getGameManager().getDialogueStorageManager().storeLine(e,t)}getDialogueStorage(){return this.getGameManager().getDialogueStorageManager().getDialogueStorage()}async obtainCollectible(e){gi(this.getGameManager(),`Obtained ${Fn(e).title}`),zo.getInstance().getUserStateManager().addCollectible(e)}displayPopUp(e,t,s,n){this.getGameManager().getPopupManager().displayPopUp(e,t,s,n)}destroyAllPopUps(){this.getGameManager().getPopupManager().destroyAllPopUps()}async destroyPopUp(e){this.getGameManager().getPopupManager().destroyPopUp(e)}async saveGame(){await this.getGameManager().getSaveManager().saveGame()}async saveSettings(e){await this.getGameManager().getSaveManager().saveSettings(e)}getLoadedUserState(){return this.getGameManager().getSaveManager().getLoadedUserState()}getSoundManager(){return zo.getInstance().getSoundManager()}playSound(e){zo.getInstance().getSoundManager().playSound(e)}playBgMusic(e){zo.getInstance().getSoundManager().playBgMusic(e)}async stopAllSound(){zo.getInstance().getSoundManager().stopAllSound()}pauseCurrBgMusic(){zo.getInstance().getSoundManager().pauseCurrBgMusic()}continueCurrBgMusic(){zo.getInstance().getSoundManager().continueCurrBgMusic()}applySoundSettings(e){zo.getInstance().getSoundManager().applyUserSettings(e)}loadSounds(e){zo.getInstance().getSoundManager().loadSounds(e)}startAnimation(e,t,s){const n=this.getAssetByKey(this.getGameMap().getAssetKeyFromId(e));this.getGameManager().getAnimationManager().displayAnimation(n,t,s)}stopAnimation(e){const t=this.getAssetByKey(this.getGameMap().getAssetKeyFromId(e));this.getGameManager().getAnimationManager().stopAnimation(t)}setDefaultCursor(e){this.getGameManager().getInputManager().setDefaultCursor(e)}enableKeyboardInput(e){this.getGameManager().getInputManager().enableKeyboardInput(e)}enableMouseInput(e){this.getGameManager().getInputManager().enableMouseInput(e)}enableSprite(e,t){t?this.getGameManager().input.enable(e):this.getGameManager().input.disable(e)}async popPhase(){await this.getGameManager().getPhaseManager().popPhase()}async pushPhase(e){await this.getGameManager().getPhaseManager().pushPhase(e)}async swapPhase(e){await this.getGameManager().getPhaseManager().swapPhase(e)}isCurrentPhase(e){return this.getGameManager().getPhaseManager().isCurrentPhase(e)}renderBackgroundLayerContainer(e){this.getGameManager().getBackgroundManager().renderBackgroundLayerContainer(e)}async promptNavigateToAssessment(e){0===await _i(Ti.getInstance().getGameManager(),"Are you ready for the challenge?",["Yes","No"])&&(window.open(`/courses/${ti()}/missions/${e}/0`,"blank"),window.focus())}async updateAssessmentState(){await zo.getInstance().getUserStateManager().loadAssessments()}createCharacterSprite(e,t,s){return this.getGameManager().getCharacterManager().createCharacterSprite(e,t,s)}moveCharacter(e,t,s){this.getGameManager().getStateManager().moveCharacter(e,t,s)}updateCharacter(e,t){this.getGameManager().getStateManager().updateCharacter(e,t)}getDialogueById(e){return ei(this.getGameMap().getDialogueMap().get(e))}getCharacterById(e){return ei(this.getGameMap().getCharacterMap().get(e))}getActionById(e){return ei(this.getGameMap().getActionMap().get(e))}getObjectById(e){return ei(this.getGameMap().getObjectPropMap().get(e))}getBBoxById(e){return ei(this.getGameMap().getBBoxPropMap().get(e))}getAssetByKey(e){return this.getGameMap().getAssetByKey(e)}}Ti.instance=void 0;var Ri=Ti;let Ii,Li,Pi,Ni;!function(e){e.UserState="UserState",e.ChecklistState="ChecklistState",e.TasklistState="TasklistState"}(Ii||(Ii={})),function(e){e.collectibles="collectibles",e.assessments="assessments",e.achievements="achievements"}(Li||(Li={}));class Di{static async checkAllConditionsSatisfied(e){return(await Promise.all(e.map((async e=>await this.checkConditionSatisfied(e))))).every((e=>!0===e))}static async checkConditionSatisfied(e){const{state:t,conditionParams:s,boolean:n}=e;switch(t){case Ii.UserState:return await Ri.getInstance().isInUserState(s.userStateType,s.id)===n;case Ii.ChecklistState:return Ri.getInstance().isObjectiveComplete(s.id)===n;case Ii.TasklistState:return Ri.getInstance().isTaskComplete(s.id)===n;default:return!0}}}!function(e){e.MoveCharacter="MoveCharacter",e.UpdateCharacter="UpdateCharacter",e.ObtainCollectible="ObtainCollectible",e.CompleteObjective="CompleteObjective",e.CompleteTask="CompleteTask",e.ShowTask="ShowTask",e.PreviewLocation="PreviewLocation",e.AddItem="AddItem",e.RemoveItem="RemoveItem",e.ShowDialogue="ShowDialogue",e.ChangeBackground="ChangeBackground",e.StartAnimation="StartAnimation",e.StopAnimation="StopAnimation",e.RemoveLocationMode="RemoveLocationMode",e.AddLocationMode="AddLocationMode",e.AddPopup="AddPopup",e.MakeObjectBlink="MakeObjectBlink",e.MakeObjectGlow="MakeObjectGlow",e.PlayBGM="PlayBGM",e.PlaySFX="PlaySFX",e.ShowObjectLayer="ShowObjectLayer",e.NavigateToAssessment="NavigateToAssessment",e.UpdateAssessmentStatus="UpdateAssessmentStatus",e.Delay="Delay"}(Pi||(Pi={}));class Mi{static async executeGameAction(e,t){const s=Ri.getInstance();switch(e){case Pi.AddItem:return void s.addItem(t.gameItemType,t.locationId,t.id);case Pi.RemoveItem:return void s.removeItem(t.gameItemType,t.locationId,t.id);case Pi.AddLocationMode:return void s.addLocationMode(t.locationId,t.mode);case Pi.RemoveLocationMode:return void s.removeLocationMode(t.locationId,t.mode);case Pi.MoveCharacter:return void s.moveCharacter(t.id,t.locationId,t.position);case Pi.UpdateCharacter:return void s.updateCharacter(t.id,t.expression);case Pi.ChangeBackground:return void s.renderBackgroundLayerContainer(t.id);case Pi.StartAnimation:return void s.startAnimation(t.id,t.startFrame,t.frameRate);case Pi.StopAnimation:return void s.stopAnimation(t.id);case Pi.PreviewLocation:return s.renderBackgroundLayerContainer(t.id),s.renderObjectLayerContainer(t.id),void s.renderBBoxLayerContainer(t.id);case Pi.ObtainCollectible:return void s.obtainCollectible(t.id);case Pi.CompleteObjective:return void s.completeObjective(t.id);case Pi.CompleteTask:return void s.completeTask(t.id);case Pi.ShowTask:return void s.showTask(t.id);case Pi.ShowDialogue:return void(s.isCurrentPhase(Ai.Sequence)?await s.showDialogueInSamePhase(t.id):await s.showDialogue(t.id));case Pi.AddPopup:return void await s.displayPopUp(t.id,t.position,t.duration,t.size);case Pi.MakeObjectBlink:return void await s.makeObjectBlink(t.id,t.turnOn);case Pi.MakeObjectGlow:return void await s.makeObjectGlow(t.id,t.turnOn);case Pi.PlayBGM:return void zo.getInstance().getSoundManager().playBgMusic(t.id);case Pi.PlaySFX:return void await zo.getInstance().getSoundManager().playSound(t.id);case Pi.ShowObjectLayer:return void(t.show?s.showLayer(zn.Objects):s.hideLayer(zn.Objects));case Pi.NavigateToAssessment:return void await s.promptNavigateToAssessment(t.assessmentId);case Pi.UpdateAssessmentStatus:return void await s.updateAssessmentState();case Pi.Delay:return void await Qn(t.duration);default:return}}static isStateChangeAction(e){switch(e){case Pi.AddItem:case Pi.RemoveItem:case Pi.AddLocationMode:case Pi.RemoveLocationMode:case Pi.MoveCharacter:case Pi.UpdateCharacter:return!0;case Pi.NavigateToAssessment:case Pi.UpdateAssessmentStatus:case Pi.PreviewLocation:case Pi.ChangeBackground:case Pi.StartAnimation:case Pi.StopAnimation:case Pi.ObtainCollectible:case Pi.CompleteObjective:case Pi.CompleteTask:case Pi.ShowTask:case Pi.ShowDialogue:case Pi.AddPopup:case Pi.MakeObjectBlink:case Pi.MakeObjectGlow:case Pi.PlayBGM:case Pi.PlaySFX:case Pi.ShowObjectLayer:case Pi.Delay:return!1}}}class Ui{async fastForwardGameActions(e){if(e)for(const t of e){const{actionType:e,actionParams:s}=Ri.getInstance().getActionById(t);await Mi.executeGameAction(e,s)}}async processGameActions(e){if(e){for(const t of e)await this.processGameAction(t);await Ri.getInstance().saveGame()}}async processGameAction(e){const{actionType:t,actionParams:s,actionConditions:n,isRepeatable:i,interactionId:a}=Ri.getInstance().getActionById(e);await this.checkCanPlayAction(i,a,n)&&(await Mi.executeGameAction(t,s),Mi.isStateChangeAction(t)&&Ri.getInstance().triggerStateChangeAction(e),Ri.getInstance().triggerInteraction(e))}async checkCanPlayAction(e,t,s){return(e||!Ri.getInstance().hasTriggeredInteraction(t))&&await Di.checkAllConditionsSatisfied(s)}}!function(e){e.navigation="navigation",e.locations="locations",e.talkTopics="talkTopics",e.dialogues="dialogues",e.objects="objects",e.boundingBoxes="boundingBoxes",e.characters="characters",e.actions="actions",e.bgmKey="bgmKey",e.collectibles="collectibles"}(Ni||(Ni={}));class Bi{constructor(){this.game=Ri.getInstance().getGameManager(),this.animationInstanceMap=new Map,this.isSprite=e=>e.type===Hn.Sprite}createImage(e,t){var s,n,i,a;switch(e.type){case Hn.Sprite:return this.createAnimation(e,(null===(s=e.config)||void 0===s?void 0:s.start)||0,(null===(n=e.config)||void 0===n?void 0:n.frameRate)||20),this.getAnimation(e);case Hn.Image:return new Phaser.GameObjects.Image(this.game,(null===e||void 0===e||null===(i=e.config)||void 0===i?void 0:i.centreX)||0,(null===e||void 0===e||null===(a=e.config)||void 0===a?void 0:a.centreY)||0,t)}}displayAnimation(e,t,s){var n;const i=Ri.getInstance().getAssetByKey(e.path);switch(i&&i.config&&(i.config.start=t,i.config.frameRate=s),null===(n=i.config)||void 0===n?void 0:n.animType){case Vn.Object:const t=Ri.getInstance().getCurrLocId();Ri.getInstance().addItem(Ni.objects,t,e.key);break;case Vn.Background:Ri.getInstance().renderBackgroundLayerContainer(e.key)}}createAnimation(e,t,s){if(this.isSprite(e)){var n,i,a;this.removeAnimation(e);const r=new Phaser.GameObjects.Sprite(this.game,(null===(n=e.config)||void 0===n?void 0:n.centreX)||0,(null===(i=e.config)||void 0===i?void 0:i.centreY)||0,e.path),o={key:e.path,frames:this.game.anims.generateFrameNumbers(e.path,{start:t,end:(null===(a=e.config)||void 0===a?void 0:a.endFrame)||0,first:0}),frameRate:s,repeat:-1};this.game.anims.create(o),this.animationInstanceMap.set(e.key,r)}}startAnimation(e){if(this.isSprite(e)){const t=this.getAnimation(e);t.play(e.path,!1),this.game.add.existing(t)}}stopAnimation(e){const t=this.animationInstanceMap.get(e.key);this.isSprite(e)&&t&&t.anims&&t.anims.stop()}removeAnimation(e){const t=this.animationInstanceMap.get(e.key);t&&(this.game.anims.remove(e.path),t.destroy(),this.animationInstanceMap.delete(e.key))}getAnimation(e){return ei(this.animationInstanceMap.get(e.key),`Image: ${e.path} not found`)}}function Gi(e,t,s){const n=e.displayHeight/e.displayWidth;t?(e.displayWidth=t,e.displayHeight=s||t*n):(e.displayWidth=s/n,e.displayHeight=s)}function Fi(e,t,s){e.displayWidth>e.displayHeight?Gi(e,0,s):Gi(e,t)}function Hi(e,t,s){e.displayWidth>e.displayHeight?Gi(e,t):Gi(e,0,s)}var Vi=class{constructor(e,t){this.scene=void 0,this.awardsGetter=void 0,this.uiContainer=void 0,this.previewContainer=void 0,this.itemsContainer=void 0,this.activePageNumber=void 0,this.scene=e,this.awardsGetter=t,this.activePageNumber=0}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0);this.uiContainer=e;const t=Ci(this.scene,{assetKey:Wn.arrow.key,onUp:()=>this.nextPage(!1)}).setScale(Bn.arrow.yScale,Bn.arrow.yScale).setRotation(-90*Math.PI/180).setPosition(Bn.arrow.x-Bn.arrow.xOffset,Bn.arrow.y),s=Ci(this.scene,{assetKey:Wn.arrow.key,onUp:()=>this.nextPage(!0)}).setScale(Bn.arrow.xScale,Bn.arrow.yScale).setRotation(90*Math.PI/180).setPosition(Bn.arrow.x+Bn.arrow.xOffset,Bn.arrow.y);e.add([t,s]);const n=new Phaser.GameObjects.Sprite(this.scene,Bn.preview.rect.x,Bn.preview.rect.y,Wn.popUpFrame.key).setScale(1.2);return e.add(n),e.add(function(e){const t=new Phaser.GameObjects.Container(e,Bn.preview.rect.xOffset,Bn.preview.rect.yOffset),s=Bn.preview.key,n=new Phaser.GameObjects.Rectangle(e,s.x,s.y,s.width,s.height,On.lightBlue,.1),i=new Phaser.GameObjects.Rectangle(e,s.x-s.width*n.originX*.75,s.y,s.width/4,s.height,On.lightBlue,.2),a=Tn(e,"asset key",Bn.preview.keyTagTextConfig,Ln),r=new kn(e,Bn.preview.explanation.x,Bn.preview.explanation.y,"Asset key can be used to include the asset into your room by using 'create_award' function.");return i.setInteractive(),i.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,(()=>r.setVisible(!0))),i.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(()=>r.setVisible(!1))),t.add([n,i,a,r]),t}(this.scene)),this.setPage(),e}setPage(){this.uiContainer&&(this.itemsContainer&&this.itemsContainer.destroy(),this.itemsContainer=this.createItemsContainer(),this.uiContainer.add(this.itemsContainer),this.setPreview())}setPreview(e){if(this.uiContainer){if(this.previewContainer&&this.previewContainer.destroy(),!e)return;let t;if(this.previewContainer=new Phaser.GameObjects.Container(this.scene,Bn.preview.rect.xOffset,Bn.preview.rect.yOffset),e.assetKey===vn.nullInteractionId)t=Tn(this.scene,"No preview available",Bn.noPreviewTextConfig,Ln);else{const s=Bn.preview.rect;t=new Phaser.GameObjects.Sprite(this.scene,0,0,e.assetKey),Hi(t,s.dim,s.dim),t.setPosition(s.x,s.y)}const s=Tn(this.scene,e.title,Bn.preview.titleTextConfig,In),n=new Phaser.GameObjects.Text(this.scene,Bn.preview.rect.x,Bn.preview.rect.y+Bn.preview.descText.yOffset,e.description,Pn).setOrigin(.5,0),i=!1===e.completed?"":e.assetKey,a=Tn(this.scene,i,Bn.preview.keyTextConfig,Ln),r=new Phaser.GameObjects.Rectangle(this.scene,Bn.preview.rect.x,Bn.preview.rect.y,Bn.preview.rect.dim,Bn.preview.rect.dim,0).setAlpha(e.completed?0:.8);this.previewContainer.add([t,r,s,n,a]),this.uiContainer.add(this.previewContainer)}}nextPage(e){const t=this.activePageNumber,s=Jn(e?t+1:t-1,0,Number.MAX_SAFE_INTEGER);this.getItems(s).length>0&&(this.activePageNumber=s,this.setPage())}createItemsContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0),t=this.getItems(this.activePageNumber),s=wn({numOfItems:t.length,xSpacing:0,ySpacing:Bn.list.ySpace});return e.add(t.map(((e,t)=>this.createItemButton(e.title,s[t][0],s[t][1]+Bn.list.yStart,(()=>this.setPreview(e)),!1!==e.completed)))),e}createItemButton(e,t,s,n,i){const a=Ci(this.scene,{assetKey:Wn.awardsBanner.key,message:e,textConfig:Bn.listTextConfig,bitMapTextStyle:Rn,onUp:n,onHoverEffect:i}).setPosition(t,s);return i||a.setAlpha(.5),a}getItems(e){const t=this.awardsGetter(),s=Gn(t),n=e*Bn.itemsPerPage;return s.slice(n,n+Bn.itemsPerPage)}};class Wi{constructor(){this.currentBackground=void 0}renderBackgroundLayerContainer(e){const t=Ri.getInstance().getLocationAtId(e).assetKey;this.renderBackgroundImage(t)}renderBackgroundImage(e){Ri.getInstance().clearSeveralLayers([zn.Background]),this.currentBackground=Ri.getInstance().getAssetByKey(e);const t=Ri.getInstance().getGameManager().getAnimationManager();let s;this.currentBackground&&(s=t.createImage(this.currentBackground,e),t.startAnimation(this.currentBackground),Fi(s,yn.x,yn.y),Ri.getInstance().addToLayer(zn.Background,s),Ri.getInstance().fadeInLayer(zn.Background))}}var qi=class{constructor(){this.bboxes=void 0,this.bboxes=new Map,Ri.getInstance().watchGameItemType(Ni.boundingBoxes,this)}renderBBoxLayerContainer(e){Ri.getInstance().clearSeveralLayers([zn.BBox]);const t=Ri.getInstance().getGameItemsInLocation(Ni.boundingBoxes,e);this.bboxes.clear(),t.map((e=>this.handleAdd(e)))}createBBox(e){const t=Ri.getInstance().getGameManager(),{x:s,y:n,width:i,height:a,actionIds:r,interactionId:o}=e,c=new Phaser.GameObjects.Rectangle(t,s,n,i,a,0,0);return e.isInteractive&&c.setInteractive(),{sprite:c,clickArea:c,actionIds:r,interactionId:o}}handleAdd(e){const t=Ri.getInstance().getBBoxById(e),s=this.createBBox(t);return Ri.getInstance().addToLayer(zn.BBox,s.sprite),this.bboxes.set(e,s),!0}handleMutate(e){return this.handleDelete(e)&&this.handleAdd(e)}handleDelete(e){const t=this.bboxes.get(e);return!!t&&(this.bboxes.delete(e),t.sprite.destroy(),!0)}getActivatables(){return Array.from(this.bboxes.values())}};var $i={charWidth:600,charRect:{x:{Left:350,Middle:xn.x,Right:yn.x-350}}};class Xi{constructor(){this.characterSpriteMap=void 0,this.characterSpriteMap=new Map,Ri.getInstance().watchGameItemType(Ni.characters,this)}renderCharacterLayerContainer(e){const t=Ri.getInstance().getGameItemsInLocation(Ni.characters,e);this.characterSpriteMap.clear(),t.map((e=>this.handleAdd(e)))}createCharacterSprite(e,t,s){const n=Ri.getInstance().getCharacterById(e),{defaultPosition:i,defaultExpression:a,expressions:r,scale:o}=n,c=$i.charRect.x[s||i],l=r.get(t||a),d=new Phaser.GameObjects.Image(Ri.getInstance().getGameManager(),c,yn.y,l).setOrigin(.5,1);return Gi(d,$i.charWidth*o),d}handleAdd(e){const t=this.createCharacterSprite(e);return Ri.getInstance().addToLayer(zn.Character,t),this.characterSpriteMap.set(e,t),!0}handleMutate(e){return this.handleDelete(e)&&this.handleAdd(e)}handleDelete(e){const t=this.characterSpriteMap.get(e);return!!t&&(this.characterSpriteMap.delete(e),t.destroy(),!0)}}const zi={key:fn.alienLeagueFont.key,size:35,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT};var Yi={backButton:{y:.3*yn.y},page:{yStart:.3*-yn.y,ySpace:150},pageTextConfig:{x:.3*yn.x,y:0,oriX:.1,oriY:.5},pageArea:{x:-869,y:-412,width:.72*yn.x,height:.77*yn.y}};let Ki;!function(e){e.Log="Log",e.Tasks="Tasks",e.Collectibles="Collectibles",e.Achievements="Achievements"}(Ki||(Ki={}));var Qi=class{constructor(e,t,s){this.scene=void 0,this.pages=void 0,this.pageManagers=void 0,this.pageMask=void 0,this.uiContainer=void 0,this.pageChosenContainer=void 0,this.pageUIContainers=void 0,this.currPageIndex=void 0,this.getSoundManager=()=>zo.getInstance().getSoundManager(),this.scene=e,this.pages=t,this.pageManagers=s,this.pageMask=this.createPageMask(),this.pageUIContainers=new Array(t.length),this.currPageIndex=0,this.scene.getPhaseManager().addPhaseToMap(Ai.Dashboard,this)}createPageMask(){const e=new Phaser.GameObjects.Graphics(this.scene),{x:t,y:s,width:n,height:i}=Yi.pageArea;return e.fillRect(t,s,n,i),e.createGeometryMask()}setPage(e){if(this.uiContainer){this.pageChosenContainer&&this.pageChosenContainer.destroy();const t=this.pageUIContainers[this.currPageIndex];t&&t.setVisible(!1),this.currPageIndex=e;let s=this.pageUIContainers[this.currPageIndex];s?s.setVisible(!0):(s=this.pageManagers[this.currPageIndex].createUIContainer(),s.setMask(this.pageMask),this.pageUIContainers[this.currPageIndex]=s,this.uiContainer.add(s));const n=this.getPageOptPositions(),i=this.currPageIndex,a=new Phaser.GameObjects.Sprite(this.scene,n[i][0],n[i][1]+Yi.page.yStart,Wn.awardsPageChosen.key);this.pageChosenContainer=new Phaser.GameObjects.Container(this.scene,0,0,[a]),this.uiContainer.add(this.pageChosenContainer)}}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0),t=new Phaser.GameObjects.Rectangle(this.scene,0,0,yn.x,4*yn.y,0).setAlpha(.7).setInteractive(),s=new Phaser.GameObjects.Image(this.scene,0,0,Wn.awardsMenu.key);e.add([t,s]);const n=this.pages.map(((e,t)=>({text:e,callback:()=>this.setPage(t)}))),i=this.getPageOptPositions();e.add(n.map(((e,t)=>this.createPageOpt(e.text,i[t][0],i[t][1]+Yi.page.yStart,e.callback))));const a=this.createPageOpt("Back",0,Yi.backButton.y,(async()=>{this.scene.getPhaseManager().isCurrentPhase(Ai.Dashboard)&&await this.scene.getPhaseManager().popPhase()}));return e.add(a),e}getPageOptPositions(){return wn({numOfItems:Object.keys(Ki).length,xSpacing:0,ySpacing:Yi.page.ySpace})}createPageOpt(e,t,s,n){return Ci(this.scene,{assetKey:Wn.awardsPage.key,message:e,textConfig:Yi.pageTextConfig,bitMapTextStyle:zi,onUp:n}).setPosition(t,s)}async activateUI(){this.uiContainer=this.createUIContainer(),this.scene.getLayerManager().addToLayer(zn.Dashboard,this.uiContainer),this.getSoundManager().playSound(Xn.menuEnter.key),this.setPage(this.currPageIndex),this.uiContainer.setPosition(xn.x,-yn.y),this.pageMask.geometryMask.setPosition(xn.x,-yn.y),this.scene.tweens.add({targets:[this.uiContainer,this.pageMask.geometryMask],...ci,y:xn.y})}async deactivateUI(){this.uiContainer&&(this.pageUIContainers=new Array(this.pages.length),this.uiContainer.setPosition(this.uiContainer.x,this.uiContainer.y),this.getSoundManager().playSound(Xn.menuExit.key),this.scene.tweens.add({targets:[this.uiContainer,this.pageMask.geometryMask],...li}),await Qn(li.duration),ai(this.scene,this.uiContainer,{fadeDuration:50}))}};class Ji{constructor(e){this.currPart=void 0,this.currLineNum=void 0,this.dialogueContent=void 0,this.dialogueContent=e,this.currPart=e.keys().next().value,this.currLineNum=0}async generateNextLine(){const e=this.dialogueContent.get(this.currPart)[this.currLineNum];if(!e||!e.line)return{line:""};if(e.goto){let t=e.goto.part;if(await Di.checkAllConditionsSatisfied(e.goto.conditions)||(t=e.goto.altPart),t){if(!this.dialogueContent.get(t))return{line:""};this.currPart=t,this.currLineNum=0}else this.currLineNum++}else this.currLineNum++;return e}updateCurrPart(e){this.currPart=e,this.currLineNum=0}}let Zi,ea;!function(e){e.Left="Left",e.Middle="Middle",e.Right="Right"}(Zi||(Zi={})),function(e){e.Small="Small",e.Medium="Medium",e.Large="Large"}(ea||(ea={}));class ta{static splitToParagraph(e){const t=[];return e.forEach((e=>{if(e.startsWith("\t")||e.startsWith("    ")){const s=e.startsWith("\t")?e.slice(1):e.slice(4);if(0===t.length)return void console.error("Unexpected tabs");t[t.length-1][1].push(s)}else t.push([e.trim(),[]])})),t}static mapByHeader(e,t){const s=new Map;if(!t(e[0]))return s.set("0",e),s;let n="";return e.forEach((e=>{if(t(e))return n=e,void s.set(e,[]);s.get(n).push(e)})),s}static splitWithLimit(e,t,s){if(s>=0){const n=e.split(t),i=n.slice(0,s);return i.push(n.slice(s).join(t)),i.map((e=>e.trim()))}return ta.splitByChar(e,t)}static splitByChar(e,t){return e.split(t).map((e=>e.trim()))}static splitToLines(e){return e.split("\n").map((e=>e.trimRight())).filter((e=>""!==e))}static splitToLinesAndRemoveComments(e){return this.removeMultiLineComments(e.split("\n"),"/*","*/").map((e=>this.removeSingleLineComment(e,"//"))).map((e=>e.trimRight())).filter((e=>""!==e))}static removeSingleLineComment(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e.indexOf(t);return-1===n?e:s?e.slice(0,n):e.slice(n+t.length)}static removeMultiLineComments(e,t,s){const n=[];let i=!1;for(let a=0;a<e.length;a++){const r=e[a],o=[],c=this.findAllInstances(r,t),l=this.findAllInstances(r,s);let d=-1,u=0,h=0,p=i?[0]:[];for(;u<c.length||h<l.length;){const e=d;d=i?l[h++]+s.length:c[u++],d<=e?(console.error(`Comment mismatch: Line ${a+1},  Pos ${d+1}`),d=e):(p.push(d),i=!i),2===p.length&&(o.push([p[0],p[1]]),p=[])}1===p.length&&o.push([p[0],r.length]),n.push(this.removeCommentRegions(r,o))}return n}static removeCommentRegions(e,t){let s="",n=0;return t.forEach((t=>{s+=e.slice(n,t[0]),n=t[1]})),s+=e.slice(n,e.length),s}static findAllInstances(e,t){const s=[];let n=e.indexOf(t);for(;-1!==n;)s.push(n),n=e.indexOf(t,n+1);return s}static capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}static toCapitalizedWords(e){return(e.match(/[A-Za-z][a-z]*/g)||[]).map(ta.capitalize).join(" ")}static toIntString(e){return Math.floor(e).toString()}static isEmptyString(e){return e===vn.nullInteractionId}}class sa{constructor(){this.currentSpeakerId=void 0,this.getUsername=()=>zo.getInstance().getAccountInfo().name}changeSpeakerTo(e){void 0!==e&&(this.currentSpeakerId&&Ri.getInstance().clearSeveralLayers([zn.Speaker,zn.SpeakerBox]),this.showNewSpeaker(e))}showNewSpeaker(e){e&&(this.drawSpeakerSprite(e),this.drawSpeakerBox(e.speakerId))}drawSpeakerBox(e){if("narrator"===e)return;const t="you"===e?this.createSpeakerBox(this.getUsername(),Zi.Right):this.createSpeakerBox(Ri.getInstance().getCharacterById(e).name,Zi.Left);Ri.getInstance().addToLayer(zn.SpeakerBox,t)}drawSpeakerSprite(e){let{speakerId:t,speakerPosition:s,expression:n}=e;if(this.currentSpeakerId=t,"you"===t||"narrator"===t)return;const i=Ri.getInstance().createCharacterSprite(t,n,s);Ri.getInstance().addToLayer(zn.Speaker,i)}createSpeakerBox(e,t){const s=Ri.getInstance().getGameManager(),n=new Phaser.GameObjects.Container(s,0,0),i=new Phaser.GameObjects.Image(s,xn.x,xn.y,Wn.speakerBox.key).setAlpha(.8),a=Tn(s,"",vi.speakerTextConfig,fi);return t===Zi.Right&&(i.displayWidth*=-1,a.x=yn.x-a.x),n.add([i,a]),a.text=ta.capitalize(e),n}}class na{constructor(){this.speakerRenderer=void 0,this.dialogueRenderer=void 0,this.dialogueGenerator=void 0,this.getDialogueGenerator=()=>this.dialogueGenerator,this.getDialogueRenderer=()=>this.dialogueRenderer,this.getSpeakerRenderer=()=>this.speakerRenderer,this.getUsername=()=>zo.getInstance().getAccountInfo().name}async showDialogue(e){const t=Ri.getInstance().getDialogueById(e);this.dialogueRenderer=new xi(bi),this.dialogueGenerator=new Ji(t.content),this.speakerRenderer=new sa,Ri.getInstance().addToLayer(zn.Dialogue,this.dialogueRenderer.getDialogueContainer()),Ri.getInstance().fadeInLayer(zn.Dialogue),await new Promise((e=>this.playWholeDialogue(e))),this.getDialogueRenderer().destroy(),this.getSpeakerRenderer().changeSpeakerTo(null)}async playWholeDialogue(e){await this.showNextLine(e),this.getDialogueRenderer().getDialogueBox().on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(async()=>await this.showNextLine(e)))}async showNextLine(e){Ri.getInstance().playSound(Xn.dialogueAdvance.key);const{line:t,speakerDetail:s,actionIds:n,prompt:i}=await this.getDialogueGenerator().generateNextLine(),a=t.replace("{name}",this.getUsername());if(this.getDialogueRenderer().changeText(a),this.getSpeakerRenderer().changeSpeakerTo(s),Ri.getInstance().storeDialogueLine(a,s),Ri.getInstance().enableSprite(this.getDialogueRenderer().getDialogueBox(),!1),i){const e=await _i(Ri.getInstance().getGameManager(),i.promptTitle,i.choices.map((e=>e[0])));this.getDialogueGenerator().updateCurrPart(i.choices[e][1])}await Ri.getInstance().processGameActionsInSamePhase(n),Ri.getInstance().enableSprite(this.getDialogueRenderer().getDialogueBox(),!0),t||e()}}class ia{constructor(){this.dialogueStorage=void 0,this.getUsername=()=>zo.getInstance().getAccountInfo().name}storeLine(e,t){if(!t)return;this.dialogueStorage||(this.dialogueStorage=new Array);const s={speaker:this.getSpeakerName(t),line:e};this.dialogueStorage.push(s)}getSpeakerName(e){const t=null===e||void 0===e?void 0:e.speakerId;return t?"you"===t?this.getUsername():"narrator"===t?"Narrator":Ri.getInstance().getCharacterById(t).name:""}clearDialogueStorage(){this.dialogueStorage=new Array}getDialogueStorage(){return this.dialogueStorage?this.dialogueStorage.map((e=>`${e.speaker}:\n${e.line}`)):new Array}}const aa=xn.x-160,ra=xn.y,oa=aa+10,ca=ra+10;function la(e){let t,s,n;e.load.on("start",(()=>{n=e.add.existing(ri(e)),t=e.add.graphics(),s=e.add.graphics(),s.fillStyle(2236962,.8),s.fillRect(aa,ra,320,50)})),e.load.on("progress",(e=>{t.clear(),t.fillStyle(16777215,1),t.fillRect(oa,ca,300*e,30)})),e.load.on("complete",(function(){t.destroy(),s.destroy(),n.destroy()}))}class da extends Phaser.GameObjects.Container{constructor(e,t,s,n){let{choices:i,defaultChoiceIdx:a=0,maxXSpace:r=yn.x,radioChoiceConfig:o={circleDim:20,checkedDim:10,outlineThickness:5},choiceTextConfig:c={x:0,y:0,oriX:.5,oriY:.5},bitmapTextStyle:l=vn.defaultFontStyle}=t,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xn.radioButtonClick.key;super(e,s,n),this.buttonClickSoundKey=void 0,this.activeChoice=void 0,this.activeChoiceIdx=void 0,this.choices=void 0,this.buttonPositions=void 0,this.radioChoiceConfig=void 0,this.choiceTextConfig=void 0,this.bitmapTextStyle=void 0,this.activeChoiceIdx=a,this.choices=i,this.choiceTextConfig=c,this.bitmapTextStyle=l,this.radioChoiceConfig=o,this.buttonClickSoundKey=d;const u=this.getRadioButtons(i);this.buttonPositions=Sn({numOfItems:u.length,maxXSpace:r}),this.renderRadioButtons(u,this.buttonPositions,this.radioChoiceConfig),this.activate(a)}getRadioButtons(e){return e.map(((e,t)=>({text:e,callback:()=>this.activate(t)})))}renderRadioButtons(e,t,s){this.add(e.map(((e,n)=>this.createRadioButton(t[n][0],t[n][1],e.callback,s))))}createRadioButton(e,t,s,n){return new Phaser.GameObjects.Ellipse(this.scene,e,t,n.circleDim,n.circleDim,On.lightBlue).setStrokeStyle(n.outlineThickness,On.darkBlue).setInteractive({useHandCursor:!0}).addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(()=>{zo.getInstance().getSoundManager().playSound(this.buttonClickSoundKey),s()}))}activate(e){this.activeChoiceIdx=e,this.activeChoice&&this.activeChoice.destroy(),this.activeChoice=new Phaser.GameObjects.Container(this.scene,this.buttonPositions[e][0],this.buttonPositions[e][1]);const t=Tn(this.scene,this.choices[e],this.choiceTextConfig,this.bitmapTextStyle),s=new Phaser.GameObjects.Ellipse(this.scene,0,0,this.radioChoiceConfig.checkedDim,this.radioChoiceConfig.checkedDim,On.darkBlue);this.activeChoice.add([t,s]),this.add(this.activeChoice)}getValueIdx(){return this.activeChoiceIdx}getChoices(){return this.choices}getChosenChoice(){return this.activeChoiceIdx<this.choices.length?this.choices[this.activeChoiceIdx]:vn.nullInteractionId}}var ua=da;const ha={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},pa={key:fn.zektonFont.key,size:35,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},ga={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var ma={optHeaderTextConfig:{x:.25*yn.x,y:0,oriX:.5,oriY:.75},opt:{x:140,xSpace:.4*yn.x,ySpace:.7*yn.y},radioButtonsTextConfig:{x:0,y:-50,oriX:.5,oriY:.25},volContainerOpts:["0","0.25","0.5","1.0","1.5","2.0"]};const ba={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},fa={key:fn.zektonFont.key,size:20,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},va={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var ya={button:{y:.15*yn.y},escapeOptTextConfig:{x:0,y:0,oriX:.37,oriY:.75},settings:{yOffset:.1*-xn.y,ySpace:.3*yn.y},settingsTextConfig:{x:.38*yn.x,y:.1*-xn.y,oriX:0,oriY:.5},radioButtons:{xSpace:.2*yn.x},radioChoiceTextConfig:{x:0,y:-45,oriX:.5,oriY:.25},volOpt:{x:.05*yn.x}};var xa=class{constructor(e){this.bgmVolumeRadioButtons=void 0,this.sfxVolumeRadioButtons=void 0,this.scene=void 0,this.getSoundManager=()=>zo.getInstance().getSoundManager(),this.getSettingsSaveManager=()=>zo.getInstance().getSaveManager(),this.scene=e,this.scene.getPhaseManager().addPhaseToMap(Ai.EscapeMenu,this)}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0),t=new Phaser.GameObjects.Image(this.scene,xn.x,xn.y,Wn.escapeMenuBackground.key).setDisplaySize(yn.x,yn.y).setInteractive({pixelPerfect:!0});e.add(t);const s=this.getSettings(),n=Sn({direction:Cn.Column,numOfItems:s.length,maxYSpace:ya.settings.ySpace});e.add(s.map(((e,t)=>Tn(this.scene,e,{...ya.settingsTextConfig,y:n[t][1]+ya.settingsTextConfig.y},va))));const{bgmVolume:i,sfxVolume:a}=this.getSettingsSaveManager().getSettings(),r=ma.volContainerOpts.findIndex((e=>parseFloat(e)===a)),o=ma.volContainerOpts.findIndex((e=>parseFloat(e)===i));this.sfxVolumeRadioButtons=this.createSettingsRadioOptions(r,n[0][1]),this.bgmVolumeRadioButtons=this.createSettingsRadioOptions(o,n[1][1]),e.add([this.sfxVolumeRadioButtons,this.bgmVolumeRadioButtons]);const c=this.getOptButtons(),l=Sn({numOfItems:c.length});return e.add(c.map(((e,t)=>this.createEscapeOptButton(e.text,l[t][0],l[t][1]+ya.button.y,e.callback)))),e}getSettings(){return["SFX","BGM"]}createSettingsRadioOptions(e,t){return new ua(this.scene,{choices:ma.volContainerOpts,defaultChoiceIdx:e,maxXSpace:ya.radioButtons.xSpace,radioChoiceConfig:{circleDim:15,checkedDim:10,outlineThickness:3},choiceTextConfig:ya.radioChoiceTextConfig,bitmapTextStyle:fa},ya.volOpt.x,-xn.y+t+ya.settings.yOffset)}getOptButtons(){return[{text:"Main Menu",callback:()=>{this.cleanUp(),zo.getInstance().isGameType(Xo.Simulator)?this.scene.scene.start("StorySimulatorMenu"):this.scene.scene.start("MainMenu")}},{text:"Continue",callback:async()=>{this.scene.getPhaseManager().isCurrentPhase(Ai.EscapeMenu)&&await this.scene.getPhaseManager().popPhase()}},{text:"Apply Settings",callback:()=>this.applySettings()}]}createEscapeOptButton(e,t,s,n){return Ci(this.scene,{assetKey:Wn.mediumButton.key,message:e,textConfig:ya.escapeOptTextConfig,bitMapTextStyle:ba,onUp:n}).setPosition(t,s)}async applySettings(){const e=this.sfxVolumeRadioButtons?parseFloat(this.sfxVolumeRadioButtons.getChosenChoice()):1,t={bgmVolume:this.bgmVolumeRadioButtons?parseFloat(this.bgmVolumeRadioButtons.getChosenChoice()):1,sfxVolume:e};await this.getSettingsSaveManager().saveSettings(t),zo.getInstance().getSoundManager().applyUserSettings(t)}cleanUp(){this.scene.getInputManager().clearListeners(),this.scene.getLayerManager().clearAllLayers()}activateUI(){const e=this.createUIContainer();this.getSoundManager().playSound(Xn.menuEnter.key),this.scene.getLayerManager().addToLayer(zn.Escape,e)}deactivateUI(){this.getSoundManager().playSound(Xn.menuExit.key),this.scene.getLayerManager().clearSeveralLayers([zn.Escape])}};var ja=class{constructor(e){this.scene=void 0,this.keyboardListeners=void 0,this.eventListeners=void 0,this.keyboardListeners=[],this.eventListeners=[],this.scene=e}setDefaultCursor(e){this.scene.input.setDefaultCursor(e)}enableMouseInput(e){this.scene.input.mouse.enabled=e}enableKeyboardInput(e){this.scene.input.keyboard.enabled=e}registerKeyboardListener(e,t,s){const n=this.scene.input.keyboard.addKey(e).addListener(t,s);this.keyboardListeners.push(n)}registerEventListener(e,t){const s=this.scene.input.addListener(e,t);this.eventListeners.concat(s)}clearListeners(){this.keyboardListeners.forEach((e=>e.removeAllListeners())),this.eventListeners.forEach((e=>e.removeAllListeners()))}};var Oa=class{constructor(e){this.layers=void 0,this.layers=new Map(Yn.map((t=>[t,new Phaser.GameObjects.Container(e,0,0)]))),this.layers.forEach((t=>e.add.existing(t)))}getLayer(e){return this.layers.get(e)}hideLayer(e){const t=this.layers.get(e);t&&t.setVisible(!1)&&t.setAlpha(0)}showLayer(e){const t=this.layers.get(e);t&&t.setVisible(!0)&&t.setAlpha(1)}async fadeInLayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn.fadeDuration;const s=Ri.getInstance().getGameManager(),n=this.layers.get(e);n.setVisible(!0),n.setAlpha(0),s.tweens.add(ii([n],t)),await Qn(t)}async fadeOutLayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn.fadeDuration;const s=Ri.getInstance().getGameManager(),n=this.layers.get(e);n.setVisible(!0),n.setAlpha(1),s.tweens.add(ni([n],t)),await Qn(t)}addToLayer(e,t){const s=this.layers.get(e);s&&s.add(t)}clearSeveralLayers(e){e.forEach((e=>this.clearLayerContents(e)))}clearAllLayers(){this.layers.forEach(((e,t)=>this.clearLayerContents(t)))}clearLayerContents(e){const t=this.layers.get(e);if(t)for(;t.list.length;)t.list[0].destroy()}};const Ca={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT},Sa=.251*yn.x;var Ea={logTextConfig:{x:-.44*yn.x,y:-.378*yn.y,oriX:0,oriY:0},textMaxWidth:.68*yn.x,logHeight:.7632*yn.y,scrollbarTrack:{x:Sa,y:.005*yn.y,width:7,height:.73*yn.y,color:5592405},scrollbarThumb:{x:Sa,width:7,color:8947848},scrollSpeed:.5};var wa=class{constructor(e){this.scene=void 0,this.scene=e}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0),t=Ri.getInstance().getDialogueStorage();if(0===t.length)return e;const s=Tn(this.scene,t.join("\n\n"),Ea.logTextConfig,Ca).setMaxWidth(Ea.textMaxWidth),n=Ea.logTextConfig.y-Math.max(s.height-Ea.logHeight,0);s.y=n,e.add(s);const i=new Phaser.GameObjects.Rectangle(this.scene,Ea.scrollbarTrack.x,Ea.scrollbarTrack.y,Ea.scrollbarTrack.width,Ea.scrollbarTrack.height,Ea.scrollbarTrack.color),a=Math.max(Ea.logHeight/s.height*Ea.scrollbarTrack.height,4*Ea.scrollbarThumb.width),r=Ea.scrollbarTrack.y+Ea.scrollbarTrack.height/2-a/2,o=(Ea.scrollbarTrack.height-a)/(Ea.logTextConfig.y-n),c=new Phaser.GameObjects.Rectangle(this.scene,Ea.scrollbarThumb.x,r,Ea.scrollbarThumb.width,a,Ea.scrollbarThumb.color);e.add(i),e.add(c),s.height<=Ea.logHeight&&(i.setVisible(!1),c.setVisible(!1));const{x:l,y:d,width:u,height:h}=Yi.pageArea,p=new Phaser.GameObjects.Zone(this.scene,l+u/2,d+h/2,u,h);return p.setInteractive(),p.on("wheel",((e,t,i,a)=>{s.y=Jn(s.y-i*Ea.scrollSpeed,n,Ea.logTextConfig.y),c.y=r-(s.y-n)*o})),e.add(p),e}};class _a{constructor(e,t,s,n,i,a){this.scene=void 0,this.container=void 0,this.imageGlow=void 0,this.clickArea=void 0,this.glowClearer=void 0,this.blinkClearer=void 0,this.scene=e,this.container=new Phaser.GameObjects.Container(e,t,s),this.imageGlow=new Phaser.GameObjects.Image(e,0,0,n).setAlpha(0).setBlendMode(Phaser.BlendModes.ADD),this.clickArea=new Phaser.GameObjects.Image(e,0,0,n).setAlpha(.01).setInteractive({pixelPerfect:!0});const r=Ri.getInstance().getGameMap().getMapAssets().get(n),o=Ri.getInstance().getGameManager().getAnimationManager();if(r){const e=o.createImage(r,n);switch(null===r||void 0===r?void 0:r.type){case Hn.Sprite:this.clickArea.setAlpha(0),o.startAnimation(r);break;case Hn.Image:i&&(Gi(e,i,a),Gi(this.imageGlow,i,a),Gi(this.clickArea,i,a))}this.container.add([e,this.imageGlow,this.clickArea])}}startGlow(){this.glowClearer&&this.glowClearer(),this.glowClearer=oi(this.scene,this.imageGlow),this.imageGlow.setAlpha(1)}clearGlow(){this.glowClearer&&this.glowClearer(),this.imageGlow.setAlpha(0)}startBlink(){this.blinkClearer=oi(this.scene,this.getContainer())}clearBlink(){this.getContainer().setAlpha(1),this.blinkClearer&&this.blinkClearer()}getContainer(){return this.container}getClickArea(){return this.clickArea}}var Aa=class{constructor(){this.objects=void 0,this.objects=new Map,Ri.getInstance().watchGameItemType(Ni.objects,this)}renderObjectsLayerContainer(e){Ri.getInstance().clearSeveralLayers([zn.Objects]);const t=Ri.getInstance().getGameItemsInLocation(Ni.objects,e);this.objects.clear(),t.map((e=>this.handleAdd(e)))}makeObjectGlow(e,t){const s=this.objects.get(e);s&&(t?s.sprite.startGlow():s.sprite.clearGlow())}makeObjectBlink(e,t){const s=this.objects.get(e);s&&(t?s.sprite.startBlink():s.sprite.clearBlink())}createObject(e){const t=Ri.getInstance().getGameManager(),{assetKey:s,x:n,y:i,width:a,height:r,actionIds:o,interactionId:c}=e,l=new _a(t,n,i,s,a,r);return{sprite:l,clickArea:l.getClickArea(),actionIds:o,interactionId:c}}handleAdd(e){const t=Ri.getInstance().getObjectById(e),s=this.createObject(t);return Ri.getInstance().addToLayer(zn.Objects,s.sprite.getContainer()),this.objects.set(e,s),!0}handleMutate(e){return this.handleDelete(e)&&this.handleAdd(e)}handleDelete(e){const t=this.objects.get(e);return!!t&&(this.objects.delete(e),t.sprite.getContainer().destroy(),!0)}getActivatables(){return Array.from(this.objects.values())}};class ka{constructor(e,t){this.phaseMap=void 0,this.phaseStack=void 0,this.inputManager=void 0,this.interruptCheckCallback=void 0,this.interruptTransitionCallback=void 0,this.transitionCallback=void 0,this.phaseStack=[Ai.None],this.phaseMap=e,this.interruptCheckCallback=()=>!1,this.interruptTransitionCallback=async()=>vn.nullFunction(),this.transitionCallback=vn.nullFunction,this.inputManager=t}addPhaseToMap(e,t){this.phaseMap.set(e,t)}setInterruptCheckCallback(e){this.interruptCheckCallback=e}setInterruptCallback(e){this.interruptTransitionCallback=e}setCallback(e){this.transitionCallback=e}async popPhase(){const e=this.phaseStack.pop();await this.executePhaseTransition(e,this.getCurrentPhase())}async pushPhase(e){const t=this.getCurrentPhase();e!==t&&(this.phaseStack.push(e),await this.executePhaseTransition(t,e))}async swapPhase(e){const t=this.getCurrentPhase();e!==t&&(this.phaseStack.pop(),this.phaseStack.push(e),await this.executePhaseTransition(t,e))}async executePhaseTransition(e,t){if(this.inputManager.enableKeyboardInput(!1),this.inputManager.enableMouseInput(!1),await this.phaseMap.get(e).deactivateUI(),this.interruptCheckCallback(e,t))return this.inputManager.enableMouseInput(!0),this.inputManager.enableKeyboardInput(!0),void await this.interruptTransitionCallback(e,t);this.transitionCallback(e,t),await this.phaseMap.get(t).activateUI(),this.inputManager.enableMouseInput(!0),this.inputManager.enableKeyboardInput(!0)}isCurrentPhase(e){return this.getCurrentPhase()===e}isCurrentPhaseTerminal(){return Object.values(ki).includes(this.getCurrentPhase())}getCurrentPhase(){return this.phaseStack.length||(this.phaseStack=[Ai.None]),this.phaseStack[this.phaseStack.length-1]}}var Ta={image:{xOffset:20,yOffset:20},rect:{x:{Left:400,Middle:xn.x,Right:yn.x-400},y:{Small:325,Medium:350,Large:420},scale:{Small:.7,Medium:1,Large:1.5},width:280,height:280},tweenDuration:300};var Ra=class{constructor(){this.currPopUp=void 0,this.currPopUp=new Map}async displayPopUp(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn.popUpDuration,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ea.Medium;this.destroyPopUp(t);const i=Ri.getInstance().getGameManager(),a=new Phaser.GameObjects.Container(i,0,0),r=new Phaser.GameObjects.Image(i,Ta.rect.x[t],Ta.rect.y[n],Wn.popUpFrame.key).setScale(Ta.rect.scale[n]),o=this.getAssetKey(e);if(!o)return;const c=new Phaser.GameObjects.Image(i,Ta.rect.x[t]+Ta.image.xOffset,Ta.rect.y[n]+Ta.image.yOffset,o);Hi(c,Ta.rect.width*Ta.rect.scale[n],Ta.rect.height*Ta.rect.scale[n]),a.add([r,c]),this.currPopUp.set(t,a),Ri.getInstance().addToLayer(zn.PopUp,a),Ri.getInstance().playSound(Xn.popUpEnter.key),a.setActive(!0),a.setVisible(!0),a.setScale(1,0),i.tweens.add(function(e){return{scaleY:1,targets:e,duration:arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,ease:"Power1"}}([a],Ta.tweenDuration)),await Qn(Ta.tweenDuration),setTimeout((()=>this.destroyPopUp(t)),s)}destroyAllPopUps(){this.currPopUp.forEach(((e,t,s)=>{this.destroyPopUp(t)}))}async destroyPopUp(e){const t=this.currPopUp.get(e);t&&(Ri.getInstance().getGameManager().tweens.add(function(e){return{scaleY:0,targets:e,duration:arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,ease:"Power1"}}([t],Ta.tweenDuration)),await Qn(Ta.tweenDuration),t.setVisible(!1),t.setActive(!1),t.destroy(),this.currPopUp.delete(e),Ri.getInstance().playSound(Xn.popUpExit.key))}getAssetKey(e){const t=Ri.getInstance().getGameMap().getObjectPropMap().get(e);if(t)return t.assetKey}};const Ia=()=>({lastCheckpointPlayed:0,currentLocation:void 0,currentPhase:Ai.Menu,chapterNewlyCompleted:!1,incompleteTasks:[],completedTasks:[],completedObjectives:[],triggeredInteractions:[],triggeredStateChangeActions:[]});function La(e){return Array.from(e).filter((e=>{let[t,s]=e;return s})).map((e=>{let[t]=e;return t}))}var Pa=class{constructor(e){this.subscribers=void 0,this.gameMap=void 0,this.checkpointObjective=void 0,this.checkpointTask=void 0,this.chapterNewlyCompleted=void 0,this.updatedLocations=void 0,this.triggeredInteractions=void 0,this.triggeredStateChangeActions=void 0,this.getGameMap=()=>this.gameMap,this.getCharacterAtId=e=>ei(this.gameMap.getCharacterMap().get(e)),this.getSaveManager=()=>zo.getInstance().getSaveManager(),this.getChapterNewlyCompleted=()=>this.chapterNewlyCompleted,this.subscribers=new Map,this.gameMap=e.map,this.checkpointObjective=e.objectives,this.checkpointTask=e.tasks,this.chapterNewlyCompleted=!1,this.updatedLocations=new Set(this.gameMap.getLocationIds()),this.triggeredInteractions=new Map,this.triggeredStateChangeActions=[],this.loadStatesFromSaveManager()}loadStatesFromSaveManager(){this.triggeredStateChangeActions=this.getSaveManager().getTriggeredStateChangeActions(),this.getSaveManager().getTriggeredInteractions().forEach((e=>this.triggerInteraction(e))),this.getSaveManager().getCompletedObjectives().forEach((e=>this.checkpointObjective.setObjective(e,!0))),this.getSaveManager().getCompletedTasks().forEach((e=>{this.checkpointTask.setTask(e,!0),this.checkpointTask.showTask(e)})),this.getSaveManager().getIncompleteTasks().forEach((e=>{this.checkpointTask.setTask(e,!1),this.checkpointTask.showTask(e)})),this.chapterNewlyCompleted=this.getSaveManager().getChapterNewlyCompleted()}watchGameItemType(e,t){this.subscribers.set(e,t)}getSubscriberForItemType(e){return this.subscribers.get(e)}triggerInteraction(e){this.triggeredInteractions.set(e,!0)}triggerStateChangeAction(e){this.triggeredStateChangeActions.push(e)}hasTriggeredInteraction(e){return this.triggeredInteractions.get(e)}addLocationNotif(e){this.updatedLocations.add(e)}removeLocationNotif(e){this.updatedLocations.delete(e)}hasLocationNotif(e){return this.updatedLocations.has(e)}isCurrentLocation(e){return e===Ri.getInstance().getCurrLocId()}getLocationModes(e){return Array.from(this.gameMap.getLocationAtId(e).modes)||[]}addLocationMode(e,t){this.gameMap.getLocationAtId(e).modes.add(t),!this.isCurrentLocation(e)&&this.addLocationNotif(e)}removeLocationMode(e,t){this.gameMap.getLocationAtId(e).modes.delete(t),!this.isCurrentLocation(e)&&this.addLocationNotif(e)}getGameItemsInLocation(e,t){return Array.from(this.gameMap.getLocationAtId(t)[e])||[]}addItem(e,t,s){var n,i;null===(n=this.gameMap.getLocationAtId(t)[e])||void 0===n||n.add(s),this.isCurrentLocation(t)?null===(i=this.getSubscriberForItemType(e))||void 0===i||i.handleAdd(s):this.addLocationNotif(t)}removeItem(e,t,s){var n,i;null===(n=this.gameMap.getLocationAtId(t)[e])||void 0===n||n.delete(s),this.isCurrentLocation(t)?null===(i=this.getSubscriberForItemType(e))||void 0===i||i.handleDelete(s):this.addLocationNotif(t)}setObjProperty(e,t){this.gameMap.setItemInMap(Ni.objects,e,t),this.gameMap.getLocations().forEach(((t,s)=>{var n;t.objects.has(e)&&(this.isCurrentLocation(s)?null===(n=this.getSubscriberForItemType(Ni.objects))||void 0===n||n.handleMutate(e):this.addLocationNotif(s))}))}setBBoxProperty(e,t){this.gameMap.setItemInMap(Ni.boundingBoxes,e,t),this.gameMap.getLocations().forEach(((t,s)=>{var n;t.boundingBoxes.has(e)&&(this.isCurrentLocation(s)?null===(n=this.getSubscriberForItemType(Ni.boundingBoxes))||void 0===n||n.handleMutate(e):this.addLocationNotif(s))}))}moveCharacter(e,t,s){this.getCharacterAtId(e).defaultPosition=s,this.gameMap.getLocations().forEach(((t,s)=>{t.characters.has(e)&&this.removeItem(Ni.characters,s,e)})),this.addItem(Ni.characters,t,e)}updateCharacter(e,t){this.getCharacterAtId(e).defaultExpression=t,this.gameMap.getLocations().forEach(((t,s)=>{var n;t.characters.has(e)&&(this.isCurrentLocation(s)?null===(n=this.getSubscriberForItemType(Ni.characters))||void 0===n||n.handleMutate(e):this.addLocationNotif(s))}))}areAllObjectivesComplete(){return this.checkpointObjective.isAllComplete()}isObjectiveComplete(e){return this.checkpointObjective.getObjectiveState(e)}areObjectivesComplete(e){let t=!0;return e.forEach((e=>t=t&&this.isObjectiveComplete(e))),t}completeObjective(e){this.checkpointObjective.setObjective(e,!0)}isTaskComplete(e){return this.checkpointTask.getTaskState(e)}areTasksComplete(e){let t=!0;return e.forEach((e=>t=t&&this.isTaskComplete(e))),t}completeTask(e){this.checkpointTask.setTask(e,!0)}showTask(e){this.checkpointTask.showTask(e)}getAllVisibleTaskData(){return this.checkpointTask.getAllVisibleTaskData()}getCompletedObjectives(){return La(this.checkpointObjective.getObjectives())}getCompletedTasks(){return La(this.checkpointTask.getAllTasks())}getIncompleteTasks(){return this.checkpointTask.getAllIncompleteTasks()}getTriggeredInteractions(){return La(this.triggeredInteractions)}getTriggeredStateChangeActions(){return this.triggeredStateChangeActions}};const Na={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT},Da=.251*yn.x;var Ma={taskTextConfig:{x:-.42*yn.x,y:-.378*yn.y,oriX:0,oriY:0},textMaxWidth:.66*yn.x,checkMark:{x:-.202*yn.x,y:-.369*yn.y,imageUrl:Wn.talkOptCheck.key},logHeight:.7632*yn.y,scrollbarTrack:{x:Da,y:.005*yn.y,width:7,height:.73*yn.y,color:5592405},scrollbarThumb:{x:Da,width:7,color:8947848},scrollSpeed:.5};var Ua=class{constructor(e){this.scene=void 0,this.scene=e}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0),t=Ri.getInstance().getAllVisibleTaskData(),s=new Phaser.GameObjects.Container(this.scene,0,0);let n=0;if(0===t.length){const e=Tn(this.scene,"No tasks available.",Ma.taskTextConfig,Na).setMaxWidth(Ma.textMaxWidth);s.add(e),n=e.height}else for(let m=0;m<t.length;m++){const e=t[m][0];if(t[m][1]){const e=new Phaser.GameObjects.Image(this.scene,Ma.checkMark.x,Ma.checkMark.y+n,Ma.checkMark.imageUrl);s.add(e)}const i=Tn(this.scene,e.title,{...Ma.taskTextConfig,y:Ma.taskTextConfig.y+n},Na).setMaxWidth(Ma.textMaxWidth),a=Tn(this.scene,"_",{...Ma.taskTextConfig,y:Ma.taskTextConfig.y+n},Na);a.setScale(i.width/a.width,1),s.add(i),s.add(a),n+=i.height;const r=Tn(this.scene,e.description+(m<t.length-1?"\n ":""),{...Ma.taskTextConfig,y:Ma.taskTextConfig.y+n},Na).setMaxWidth(Ma.textMaxWidth);s.add(r),n+=r.height}const i=-Math.max(n-Ma.logHeight,0);s.y=i,e.add(s);const a=new Phaser.GameObjects.Rectangle(this.scene,Ma.scrollbarTrack.x,Ma.scrollbarTrack.y,Ma.scrollbarTrack.width,Ma.scrollbarTrack.height,Ma.scrollbarTrack.color),r=Math.max(Ma.logHeight/n*Ma.scrollbarTrack.height,4*Ma.scrollbarThumb.width),o=Ma.scrollbarTrack.y+Ma.scrollbarTrack.height/2-r/2,c=(Ma.scrollbarTrack.height-r)/-i,l=new Phaser.GameObjects.Rectangle(this.scene,Ma.scrollbarThumb.x,o,Ma.scrollbarThumb.width,r,Ma.scrollbarThumb.color);e.add(a),e.add(l),n<=Ma.logHeight&&(a.setVisible(!1),l.setVisible(!1));const{x:d,y:u,width:h,height:p}=Yi.pageArea,g=new Phaser.GameObjects.Zone(this.scene,d+h/2,u+p/2,h,p);return g.setInteractive(),g.on("wheel",((e,t,n,a)=>{s.y=Jn(s.y-n*Ma.scrollSpeed,i,0),l.y=o-(s.y-i)*c})),e.add(g),e}};const Ba=[{assetKey:Wn.gear.key,onUp:e=>async()=>{const t=e.getPhaseManager();t.isCurrentPhase(Ai.EscapeMenu)?await t.popPhase():t.isCurrentPhaseTerminal()?await t.swapPhase(Ai.EscapeMenu):await t.pushPhase(Ai.EscapeMenu)}},{assetKey:Wn.journal.key,onUp:e=>async()=>{const t=e.getPhaseManager();t.isCurrentPhase(Ai.Dashboard)?await t.popPhase():t.isCurrentPhaseTerminal()?await t.swapPhase(Ai.Dashboard):await t.pushPhase(Ai.Dashboard)}}];var Ga={firstButton:{x:yn.x-37,y:37},xOffset:64,buttonConfigs:Ba};var Fa=class{constructor(e){this.uiContainer=void 0,this.scene=void 0,this.scene=e}createUIContainer(){const e=new Phaser.GameObjects.Container(this.scene,0,0);return e.add(Ga.buttonConfigs.map(((e,t)=>this.createToolbarButton(Ga.firstButton.x-Ga.xOffset*t,Ga.firstButton.y,e)))),e}createToolbarButton(e,t,s){return Ci(this.scene,{assetKey:s.assetKey,onUp:s.onUp(this.scene)}).setPosition(e,t)}async renderToolbarContainer(){this.uiContainer=this.createUIContainer(),this.scene.getLayerManager().addToLayer(zn.UI,this.uiContainer)}};const Ha=.975*-xn.y,Va={key:fn.zektonDarkFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};class Wa extends Phaser.GameObjects.Container{constructor(e,t){super(e,0,0),this.renderBackButton(t)}renderBackButton(e){const t=Ci(this.scene,{assetKey:Wn.topButton.key,message:"Back",textConfig:{x:0,y:Ha,oriX:.5,oriY:.25},bitMapTextStyle:Va,onUp:e}).setPosition(xn.x,xn.y);this.add(t)}}var qa=Wa;var $a={normal:`url(${Zn("/ui/magnifying.png",!1)}), pointer`,hover:`url(${Zn("/ui/magnifying_trigg.png",!1)}), pointer`,checked:`url(${Zn("/ui/magnifying_check.png",!1)}), pointer`};var Xa=class{constructor(){this.uiContainer=void 0}createUIContainer(){const e=Ri.getInstance().getGameManager(),t=new Phaser.GameObjects.Container(e,0,0),s=new qa(e,(async()=>await Ri.getInstance().swapPhase(Ai.Menu)));return t.add(s),t}async activateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer=this.createUIContainer(),Ri.getInstance().addToLayer(zn.UI,this.uiContainer),this.uiContainer.setPosition(this.uiContainer.x,-yn.y),this.enableInteractions(),e.tweens.add({targets:this.uiContainer,...ci}),Ri.getInstance().setDefaultCursor($a.normal),Ri.getInstance().playSound(Xn.modeEnter.key)}async deactivateUI(){const e=Ri.getInstance().getGameManager();Ri.getInstance().setDefaultCursor(vn.defaultCursor),this.disableInteractions(),this.uiContainer&&(this.uiContainer.setPosition(this.uiContainer.x,0),e.tweens.add({targets:this.uiContainer,...li}),await Qn(500),ai(e,this.uiContainer))}enableInteractions(){Ri.getInstance().getAllActivatables().forEach((e=>{e.actionIds&&e.actionIds.length&&(e.clickArea.on("pointerout",(()=>this.explorePointerOut())),e.clickArea.on("pointerover",(()=>this.explorePointerOver(e.interactionId))),e.clickArea.on("pointerup",(async()=>{this.explorePointerUp(e.interactionId),await Ri.getInstance().processGameActions(e.actionIds)})))}))}disableInteractions(){Ri.getInstance().getAllActivatables().forEach((e=>{e.clickArea.off("pointerout"),e.clickArea.off("pointerover"),e.clickArea.off("pointerup")}))}explorePointerOver(e){Ri.getInstance().hasTriggeredInteraction(e)?Ri.getInstance().setDefaultCursor($a.checked):Ri.getInstance().setDefaultCursor($a.hover)}explorePointerOut(){Ri.getInstance().setDefaultCursor($a.normal)}explorePointerUp(e){Ri.getInstance().setDefaultCursor(vn.defaultCursor),Ri.getInstance().triggerInteraction(e),Ri.getInstance().setDefaultCursor($a.normal)}};let za;!function(e){e.Move="Move",e.Explore="Explore",e.Talk="Talk",e.Menu="Menu"}(za||(za={}));const Ya={Move:Ai.Move,Explore:Ai.Explore,Talk:Ai.Talk,Menu:Ai.Menu},Ka={key:fn.zektonFont.key,size:45,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var Qa={button:{yOffset:.3*yn.y},entryTweenProps:{y:0,duration:500,ease:"Power2"},exitTweenProps:{y:.4*yn.y,duration:300,ease:"Power2"}};var Ja=class{constructor(){this.uiContainer=void 0}getLatestLocationModes(){const e=Ri.getInstance().getCurrLocId();let t=Ri.getInstance().getLocationModes(e);return 0===Ri.getInstance().getGameItemsInLocation(Ni.talkTopics,e).length&&(t=t.filter((e=>e!==za.Talk))),t}createUIContainer(){const e=Ri.getInstance().getGameManager(),t=new Phaser.GameObjects.Container(e,0,0),s=new Phaser.GameObjects.Image(e,xn.x,xn.y,Wn.modeMenuBanner.key);t.add(s);const n=this.getLatestLocationModes(),i=this.getModeButtons(n),a=Sn({numOfItems:i.length});return t.add(i.map(((e,t)=>this.createModeButton(e.text,a[t][0],a[t][1]+Qa.button.yOffset,e.callback)))),t}getModeButtons(e){return e.sort().map((e=>({text:e,callback:async()=>await Ri.getInstance().swapPhase(Ya[e])})))}createModeButton(e,t,s,n){return Ci(Ri.getInstance().getGameManager(),{assetKey:Wn.shortButton.key,message:e,textConfig:{x:0,y:0,oriX:.5,oriY:.25},bitMapTextStyle:Ka,onUp:n}).setPosition(t,s)}async activateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer=this.createUIContainer(),Ri.getInstance().addToLayer(zn.UI,this.uiContainer),this.uiContainer.setPosition(this.uiContainer.x,yn.y),e.tweens.add({targets:this.uiContainer,...Qa.entryTweenProps}),await Qn(500),Ri.getInstance().playSound(Xn.modeEnter.key)}async deactivateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer&&(this.uiContainer.setPosition(this.uiContainer.x,0),e.tweens.add({targets:this.uiContainer,...Qa.exitTweenProps}),await Qn(500),ai(e,this.uiContainer))}};const Za={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var er={button:{xOffSet:.25*yn.x,ySpace:.8*yn.y},preview:{rect:{x:.3125*yn.x,y:.515*yn.y,width:.473*yn.x,height:.56*yn.y},frame:{x:.3*yn.x}}};var tr=class{constructor(){this.uiContainer=void 0}setPreview(e,t){e.setTexture(t).setDisplaySize(er.preview.rect.width,er.preview.rect.height).setPosition(er.preview.rect.x,er.preview.rect.y)}getLatestNavigations(){return Ri.getInstance().getGameItemsInLocation(Ni.navigation,Ri.getInstance().getCurrLocId())}createUIContainer(){const e=Ri.getInstance().getGameManager(),t=new Phaser.GameObjects.Container(e,0,0),s=new Phaser.GameObjects.Sprite(e,er.preview.frame.x,xn.y,Wn.locationPreviewFrame.key),n=new Phaser.GameObjects.Sprite(e,xn.x,xn.y,Wn.locationPreviewFill.key);t.add([s,n]);const i=this.getLatestNavigations(),a=this.getMoveButtons(i,n),r=Sn({numOfItems:a.length,numItemLimit:1,maxYSpace:er.button.ySpace});t.add(a.map(((e,t)=>this.createMoveButton(e.text,r[t][0]+er.button.xOffSet,r[t][1],e.callback,e.onHover,e.onOut))));const o=new qa(e,(async()=>await Ri.getInstance().swapPhase(Ai.Menu)));return t.add(o),this.setPreview(n,Wn.defaultLocationImg.key),t}getMoveButtons(e,t){const s=e=>this.setPreview(t,e),n=()=>this.setPreview(t,Wn.defaultLocationImg.key);return e.map((e=>{const t=Ri.getInstance().getLocationAtId(e);return{text:t.name,callback:async()=>{await Ri.getInstance().swapPhase(Ai.Sequence),await Ri.getInstance().changeLocationTo(e)},onHover:()=>s(t.previewKey||t.assetKey),onOut:()=>n()}}))}createMoveButton(e,t,s,n,i,a){return Ci(Ri.getInstance().getGameManager(),{assetKey:Wn.longButton.key,message:e,textConfig:{x:0,y:0,oriX:.4,oriY:.15},bitMapTextStyle:Za,onUp:n,onHover:i,onOut:a}).setPosition(t,s)}async activateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer=this.createUIContainer(),Ri.getInstance().addToLayer(zn.UI,this.uiContainer),this.uiContainer.setPosition(this.uiContainer.x,-yn.y),e.tweens.add({targets:this.uiContainer,...ci}),Ri.getInstance().playSound(Xn.modeEnter.key)}async deactivateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer&&(this.uiContainer.setPosition(this.uiContainer.x,0),e.tweens.add({targets:this.uiContainer,...li}),await Qn(500),ai(e,this.uiContainer))}};var sr=class{activateUI(){}deactivateUI(){}};const nr={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var ir={button:{ySpace:.7*yn.y}};var ar=class{constructor(){this.uiContainer=void 0}getLatestTalkTopics(){return Ri.getInstance().getGameItemsInLocation(Ni.talkTopics,Ri.getInstance().getCurrLocId())}createUIContainer(){const e=Ri.getInstance().getGameManager(),t=new Phaser.GameObjects.Container(e,0,0),s=this.getLatestTalkTopics(),n=this.getTalkTopicButtons(s),i=Sn({direction:Cn.Column,numOfItems:n.length,maxYSpace:ir.button.ySpace});t.add(n.map(((e,t)=>this.createTalkTopicButton(e.text,i[t][0],i[t][1],e.callback)))),n.forEach(((s,n)=>{const a=new Phaser.GameObjects.Sprite(e,i[n][0],i[n][1],Wn.talkOptCheck.key);!!s.interactionId&&Ri.getInstance().hasTriggeredInteraction(s.interactionId)&&t.add(a)}));const a=new qa(e,(async()=>await Ri.getInstance().swapPhase(Ai.Menu)));return t.add(a),t}getTalkTopicButtons(e){return e.map((e=>({text:ei(Ri.getInstance().getDialogueById(e)).title,callback:async()=>{Ri.getInstance().triggerInteraction(e),await Ri.getInstance().showDialogue(e)},interactionId:e})))}createTalkTopicButton(e,t,s,n){return Ci(Ri.getInstance().getGameManager(),{assetKey:Wn.talkOptButton.key,message:e,textConfig:{x:0,y:0,oriX:.5,oriY:.2},bitMapTextStyle:nr,onUp:n}).setPosition(t,s)}async activateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer=this.createUIContainer(),Ri.getInstance().addToLayer(zn.UI,this.uiContainer),this.uiContainer.setPosition(this.uiContainer.x,-yn.y),e.tweens.add({targets:this.uiContainer,...ci}),Ri.getInstance().playSound(Xn.modeEnter.key)}async deactivateUI(){const e=Ri.getInstance().getGameManager();this.uiContainer&&(this.uiContainer.setPosition(this.uiContainer.x,0),e.tweens.add({targets:this.uiContainer,...li}),await Qn(500),ai(e,this.uiContainer))}};class rr extends Phaser.Scene{constructor(){super("GameManager"),this.currentLocationId=void 0,this.hasTransitioned=void 0,this.stateManager=void 0,this.layerManager=void 0,this.objectManager=void 0,this.characterManager=void 0,this.dialogueManager=void 0,this.actionManager=void 0,this.boundingBoxManager=void 0,this.popUpManager=void 0,this.phaseManager=void 0,this.backgroundManager=void 0,this.animationManager=void 0,this.inputManager=void 0,this.escapeManager=void 0,this.collectibleManager=void 0,this.achievementManager=void 0,this.logManager=void 0,this.dialogueStorageManager=void 0,this.toolbarManager=void 0,this.taskLogManager=void 0,this.dashboardManager=void 0,this.getSaveManager=()=>zo.getInstance().getSaveManager(),this.getStateManager=()=>ei(this.stateManager),this.getObjectManager=()=>ei(this.objectManager),this.getDialogueManager=()=>ei(this.dialogueManager),this.getCharacterManager=()=>ei(this.characterManager),this.getBBoxManager=()=>ei(this.boundingBoxManager),this.getActionManager=()=>ei(this.actionManager),this.getInputManager=()=>ei(this.inputManager),this.getLayerManager=()=>ei(this.layerManager),this.getPhaseManager=()=>ei(this.phaseManager),this.getBackgroundManager=()=>ei(this.backgroundManager),this.getAnimationManager=()=>ei(this.animationManager),this.getPopupManager=()=>ei(this.popUpManager),this.getEscapeManager=()=>ei(this.escapeManager),this.getCollectibleManager=()=>ei(this.collectibleManager),this.getAchievementManager=()=>ei(this.achievementManager),this.getLogManager=()=>ei(this.logManager),this.getDialogueStorageManager=()=>ei(this.dialogueStorageManager),this.getToolbarManager=()=>ei(this.toolbarManager),this.getTaskLogManager=()=>ei(this.taskLogManager),this.getDashboardManager=()=>ei(this.dashboardManager),this.currentLocationId=vn.nullInteractionId,this.hasTransitioned=!1}init(e){let{gameCheckpoint:t,continueGame:s,chapterNum:n,checkpointNum:i}=e;Ri.getInstance().setGameManager(this),zo.getInstance().setCurrentSceneRef(this),this.getSaveManager().registerGameInfo(n,i,s),this.currentLocationId=this.getSaveManager().getLoadedLocation()||t.startingLoc,this.hasTransitioned=!1,this.stateManager=new Pa(t),this.layerManager=new Oa(this),this.inputManager=new ja(this),this.phaseManager=new ka(new Map([[Ai.Menu,new Ja],[Ai.Move,new tr],[Ai.Explore,new Xa],[Ai.Talk,new ar],[Ai.Sequence,new sr],[Ai.None,new sr]]),this.inputManager),this.characterManager=new Xi,this.objectManager=new Aa,this.dialogueManager=new na,this.actionManager=new Ui,this.boundingBoxManager=new qi,this.backgroundManager=new Wi,this.animationManager=new Bi,this.popUpManager=new Ra,this.escapeManager=new xa(this),this.collectibleManager=new Vi(this,zo.getInstance().getUserStateManager().getCollectibles),this.achievementManager=new Vi(this,zo.getInstance().getUserStateManager().getAchievements),this.logManager=new wa(this),this.dialogueStorageManager=new ia,this.toolbarManager=new Fa(this),this.taskLogManager=new Ua(this),this.dashboardManager=new Qi(this,[Ki.Log,Ki.Tasks,Ki.Collectibles,Ki.Achievements],[this.logManager,this.taskLogManager,this.collectibleManager,this.achievementManager])}preload(){la(this),this.getPhaseManager().setInterruptCheckCallback(((e,t)=>this.transitionChecker(e,t))),this.getPhaseManager().setInterruptCallback((async(e,t)=>await this.checkpointTransition())),this.getPhaseManager().setCallback((async(e,t)=>await this.handleCharacterLayer(e,t))),this.preloadLocationsAssets(),this.bindKeyboardTriggers()}preloadLocationsAssets(){const e=this.getStateManager().getGameMap();Ri.getInstance().loadSounds(e.getSoundAssets()),e.getMapAssets().forEach(((e,t)=>{this.loadImage(e,t)}))}loadImage(e,t){switch(e.type){case Hn.Image:this.load.image(t,Zn(e.path,!0));break;case Hn.Sprite:this.load.spritesheet(t,Zn(e.path,!0),e.config)}}async create(){Ri.getInstance().hideLayer(zn.Character),await this.changeLocationTo(this.currentLocationId,!0),await Ri.getInstance().saveGame()}async renderLocation(e,t){const s=Ri.getInstance().getLocationAtId(e);this.getToolbarManager().renderToolbarContainer(),await Ri.getInstance().playBgMusic(s.bgmKey),this.getBackgroundManager().renderBackgroundLayerContainer(e),this.getObjectManager().renderObjectsLayerContainer(e),this.getBBoxManager().renderBBoxLayerContainer(e),this.getCharacterManager().renderCharacterLayerContainer(e),await this.getPhaseManager().swapPhase(Ai.Sequence),t&&(await this.getActionManager().fastForwardGameActions(this.getStateManager().getTriggeredStateChangeActions()),await this.getActionManager().processGameActions(this.getStateManager().getGameMap().getGameStartActions())),await this.getActionManager().processGameActions(s.actionIds),this.getStateManager().hasLocationNotif(e)&&(await Ri.getInstance().bringUpUpdateNotif(s.name),this.getStateManager().removeLocationNotif(e)),this.getPhaseManager().isCurrentPhase(Ai.Sequence)&&await this.getPhaseManager().swapPhase(Ai.Menu)}async changeLocationTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentLocationId=e,await(async(e,t,s,n)=>{const i=ri(e);e.getLayerManager().addToLayer(zn.Effects,i),i.setAlpha(0),e.tweens.add(ii([i],t)),await Qn(t),await n(),await Qn(s),i.setAlpha(1),e.tweens.add(ni([i],t)),await Qn(t),i.destroy()})(this,300,500,(async()=>{await this.getLayerManager().clearAllLayers(),await this.renderLocation(e,t)})),this.getStateManager().triggerInteraction(e)}bindKeyboardTriggers(){this.getInputManager().registerKeyboardListener(Phaser.Input.Keyboard.KeyCodes.ESC,"up",(async()=>{this.getPhaseManager().isCurrentPhaseTerminal()?await this.getPhaseManager().popPhase():await this.getPhaseManager().pushPhase(Ai.EscapeMenu)})),this.getInputManager().registerKeyboardListener(Phaser.Input.Keyboard.KeyCodes.TAB,"up",(async()=>{this.getPhaseManager().isCurrentPhase(Ai.Dashboard)?await this.getPhaseManager().popPhase():this.getPhaseManager().isCurrentPhaseTerminal()?await this.getPhaseManager().swapPhase(Ai.Dashboard):await this.getPhaseManager().pushPhase(Ai.Dashboard)}))}cleanUp(){this.getInputManager().clearListeners(),this.getLayerManager().clearAllLayers(),this.getDialogueStorageManager().clearDialogueStorage()}transitionChecker(e,t){return!this.hasTransitioned&&t!==Ai.Sequence&&Ri.getInstance().areAllObjectivesComplete()&&!this.getStateManager().getChapterNewlyCompleted()}async checkpointTransition(){this.hasTransitioned=!0,await this.getActionManager().processGameActions(this.getStateManager().getGameMap().getCheckpointCompleteActions()),this.getInputManager().setDefaultCursor(vn.defaultCursor),this.getInputManager().enableMouseInput(!0),this.getInputManager().enableKeyboardInput(!0),this.tweens.add(ii([ri(this).setAlpha(0)],vn.fadeDuration)),await Qn(vn.fadeDuration),this.cleanUp(),this.scene.start("CheckpointTransition")}async handleCharacterLayer(e,t){e===Ai.Menu&&Ri.getInstance().fadeOutLayer(zn.Character),t===Ai.Menu&&Ri.getInstance().fadeInLayer(zn.Character)}}var or=rr;class cr{constructor(){this.fullSaveState=void 0,this.chapterNum=void 0,this.checkpointNum=void 0,this.getTriggeredStateChangeActions=()=>this.getGameSaveState().triggeredStateChangeActions,this.getTriggeredInteractions=()=>this.getGameSaveState().triggeredInteractions,this.getCompletedObjectives=()=>this.getGameSaveState().completedObjectives,this.getCompletedTasks=()=>this.getGameSaveState().completedTasks,this.getIncompleteTasks=()=>this.getGameSaveState().incompleteTasks,this.getLoadedPhase=()=>this.getGameSaveState().currentPhase,this.getChapterNewlyCompleted=()=>this.getGameSaveState().chapterNewlyCompleted,this.getChapterNum=()=>ei(this.chapterNum),this.getCheckpointNum=()=>ei(this.checkpointNum),this.getFullSaveState=()=>this.fullSaveState,this.fullSaveState={gameSaveStates:{},userSaveState:{collectibles:[],settings:{bgmVolume:1,sfxVolume:1},recentlyPlayedCheckpoint:[-1,-1],largestCompletedChapter:-1}}}async loadLastSaveState(){this.fullSaveState=await async function(){var e;const t={method:"GET",headers:Qo(zo.getInstance().getAccountInfo().accessToken)},s=await fetch(`${Se.b.backendUrl}/v2/user`,t),n=await s.text(),i=null===(e=JSON.parse(n).courseRegistration)||void 0===e?void 0:e.gameStates;return A.a.isEmpty(i)?{gameSaveStates:{},userSaveState:{collectibles:[],settings:{bgmVolume:1,sfxVolume:1},recentlyPlayedCheckpoint:[-1,-1],largestCompletedChapter:-1}}:i}()}registerGameInfo(e,t,s){this.chapterNum=e,this.checkpointNum=t,s||(this.fullSaveState.gameSaveStates[e]=Ia())}async saveGame(){zo.getInstance().getCurrentSceneRef()instanceof or&&(this.fullSaveState=function(e,t,s){const n=Ri.getInstance().getGameManager(),i=n.getStateManager(),a=n.getPhaseManager();return{gameSaveStates:{...e.gameSaveStates,[t]:{lastCheckpointPlayed:s,currentLocation:n.currentLocationId,currentPhase:a.getCurrentPhase(),chapterNewlyCompleted:i.getChapterNewlyCompleted(),incompleteTasks:i.getIncompleteTasks(),completedTasks:i.getCompletedTasks(),completedObjectives:i.getCompletedObjectives(),triggeredInteractions:i.getTriggeredInteractions(),triggeredStateChangeActions:i.getTriggeredStateChangeActions()}},userSaveState:{settings:e.userSaveState.settings,recentlyPlayedCheckpoint:[t,s],collectibles:zo.getInstance().getUserStateManager().getCollectibles(),largestCompletedChapter:e.userSaveState.largestCompletedChapter}}}(this.fullSaveState,this.getChapterNum(),this.getCheckpointNum()),await Ko(this.fullSaveState))}async saveChapterComplete(e){this.fullSaveState.gameSaveStates[e].chapterNewlyCompleted=!0,e>this.getLargestCompletedChapterNum()&&(this.fullSaveState.userSaveState.largestCompletedChapter=e),await Ko(this.fullSaveState)}async saveSettings(e){this.fullSaveState.userSaveState.settings=e,await Ko(this.fullSaveState)}getSettings(){return this.fullSaveState.userSaveState.settings}getLoadedUserState(){return this.fullSaveState.userSaveState}getLargestCompletedChapterNum(){return this.fullSaveState.userSaveState.largestCompletedChapter}getGameSaveState(){return this.fullSaveState.gameSaveStates[this.getChapterNum()]||Ia()}getLoadedLocation(){return this.getGameSaveState().currentLocation}getChapterSaveState(e){return this.fullSaveState.gameSaveStates[e]||Ia()}}const lr={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};const dr=["Clang. Thud. One hit to the wall, one hit to my flesh.","","They told me I was to be the pillar of this","spaceship - who knew they meant it literally?","- A. Halim"],ur=["I blink synchronously with the screen;","I breathe as the machine steams on and off.","","Behind this closed space, my very blood fuels","these engines - hoping for you to find me.","- T. S. Chong"],hr=80,pr=5e3;function gr(e,t,s,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50;const r=new Phaser.GameObjects.Rectangle(e,s,n,i,a,0,0),o="A"===t?dr:ur;r.setInteractive({useHandCursor:!0}),r.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(()=>mr(e,o))),e.getLayerManager().addToLayer(zn.UI,r)}async function mr(e,t){const s=ri(e).setInteractive().setAlpha(0),n=wn({numOfItems:t.length,xSpacing:0,ySpacing:hr}),i={x:xn.x,y:0,oriX:.5,oriY:.5},a=xn.y-t.length*hr*.5;e.getLayerManager().addToLayer(zn.WorkerMessage,s),e.add.tween(ii([s],vn.fadeDuration)),zo.getInstance().getSoundManager().playSound(Xn.radioStatic.key),await Qn(vn.fadeDuration),t.forEach(((t,s)=>{const r=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0,oriX:.5,oriY:.5},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lr,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:3;const o=[];for(let c=0;c<i;c++){const i={x:s.x+a*Math.random(),y:s.y+r*Math.random(),oriX:s.oriX,oriY:s.oriY},c=Tn(e,t,i,n);c.setAlpha(.4).setBlendMode(Phaser.BlendModes.SCREEN),o.push(c)}return o.forEach((t=>{e.tweens.add({targets:t,x:t.x+a*Math.random(),y:t.y+r*Math.random(),alpha:.5,duration:20,yoyo:!0,loop:-1,loopDelay:1e3*Math.random()})})),o}(e,t,{...i,y:n[s][1]+a});r.forEach((t=>e.getLayerManager().addToLayer(zn.WorkerMessage,t))),setTimeout((()=>r.forEach((e=>e.destroy()))),pr)})),await Qn(pr),ai(e,s)}const br={scrollSpeed:20,tileDim:2048,maxAwardsPerCol:2,arrow:{xOffset:875},award:{xSpace:300,yStart:300,ySpace:xn.y-50,dim:200},awardInfo:{width:300},banner:{xOffset:.28*-yn.x},bannerTextConfig:{x:30,y:0,oriX:0,oriY:.5}},fr={key:fn.alienLeagueFont.key,size:35,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT},vr={fontFamily:"Verdana",fontSize:"30px",fill:jn.lightBlue,align:"center",wordWrap:{width:br.award.dim-20}},yr={fontFamily:"Verdana",fontSize:"20px",fill:jn.lightBlue,align:"left",wordWrap:{width:br.awardInfo.width-20}},xr={fontFamily:"Verdana",fontSize:"15px",fill:jn.offWhite,align:"left",wordWrap:{width:br.awardInfo.width-20}},jr={fontFamily:"Verdana",fontSize:"15px",fill:jn.lightBlue,align:"left",wordWrap:{width:br.awardInfo.width-20}};class Or extends Phaser.Scene{constructor(){super("AwardsHall"),this.layerManager=void 0,this.inputManager=void 0,this.backgroundTile=void 0,this.awardsContainer=void 0,this.isScrollLeft=void 0,this.isScrollRight=void 0,this.scrollLim=void 0,this.awardXSpace=void 0,this.getUserStateManager=()=>zo.getInstance().getUserStateManager(),this.getInputManager=()=>ei(this.inputManager),this.getLayerManager=()=>ei(this.layerManager),zo.getInstance().setCurrentSceneRef(this),this.isScrollLeft=!1,this.isScrollRight=!1,this.scrollLim=0,this.awardXSpace=0}init(){this.layerManager=new Oa(this),this.inputManager=new ja(this)}preload(){la(this)}async create(){const e=this.getUserStateManager().getAchievements().length,t=this.getUserStateManager().getCollectibles().length;this.awardXSpace=Math.ceil(Math.max(e,t)/br.maxAwardsPerCol)*br.award.xSpace,this.scrollLim=this.awardXSpace<yn.x?0:this.awardXSpace-yn.x,this.renderBackground(),this.renderAwards(),gr(this,"A",.95*yn.x,.99*yn.y)}update(){if(!this.backgroundTile||!this.awardsContainer)return;let e=this.awardsContainer.x;this.isScrollRight?e-=br.scrollSpeed:this.isScrollLeft&&(e+=br.scrollSpeed),e=Jn(e,-this.scrollLim,0),this.backgroundTile.tilePositionX=-e,this.awardsContainer.x=e}renderBackground(){this.backgroundTile&&this.backgroundTile.destroy(),this.backgroundTile=new Phaser.GameObjects.TileSprite(this,0,0,br.tileDim,br.tileDim,Wn.awardsBackground.key).setOrigin(0,.25),this.getLayerManager().addToLayer(zn.Background,this.backgroundTile);const e=["Achievements","Collectibles"],t=Sn({direction:Cn.Column,numOfItems:e.length});e.forEach(((e,s)=>{const n=this.createBanner(e,t[s][1]);this.getLayerManager().addToLayer(zn.UI,n)}));const s=Ci(this,{assetKey:Wn.chapterSelectArrow.key,onDown:()=>this.isScrollLeft=!0,onUp:()=>this.isScrollLeft=!1,onOut:()=>this.isScrollLeft=!1}).setPosition(xn.x-br.arrow.xOffset,xn.y),n=Ci(this,{assetKey:Wn.chapterSelectArrow.key,onDown:()=>this.isScrollRight=!0,onUp:()=>this.isScrollRight=!1,onOut:()=>this.isScrollRight=!1}).setPosition(xn.x+br.arrow.xOffset,xn.y).setScale(-1,1),i=new qa(this,(()=>{this.cleanUp(),this.scene.start("MainMenu")}));this.getLayerManager().addToLayer(zn.UI,s),this.getLayerManager().addToLayer(zn.UI,n),this.getLayerManager().addToLayer(zn.UI,i)}renderAwards(){this.awardsContainer&&this.awardsContainer.destroy(),this.awardsContainer=new Phaser.GameObjects.Container(this,0,0);const e=this.getAwards(this.getUserStateManager().getAchievements()),t=Sn({direction:Cn.Column,numOfItems:e.length,numItemLimit:br.maxAwardsPerCol,redistributeLast:!1,maxXSpace:this.awardXSpace,maxYSpace:br.award.ySpace});this.awardsContainer.add(e.map(((e,s)=>this.createAward(e,t[s][0],t[s][1]+br.award.yStart-xn.y))));const s=this.getAwards(this.getUserStateManager().getCollectibles()),n=Sn({direction:Cn.Column,numOfItems:s.length,numItemLimit:br.maxAwardsPerCol,redistributeLast:!1,maxXSpace:this.awardXSpace,maxYSpace:br.award.ySpace});this.awardsContainer.add(s.map(((e,t)=>this.createAward(e,n[t][0],n[t][1]+br.award.yStart)))),this.getLayerManager().addToLayer(zn.Objects,this.awardsContainer)}getAwards(e){return Gn(e)}createAward(e,t,s){const n=new Phaser.GameObjects.Container(this,t,s);let i;if(e.assetKey===vn.nullInteractionId){i=new Phaser.GameObjects.Rectangle(this,0,0,br.award.dim,br.award.dim,On.darkBlue,.8),i.setInteractive();const t=new Phaser.GameObjects.Text(this,0,0,e.title,vr).setOrigin(.5,.5);n.add([i,t])}else i=new Phaser.GameObjects.Sprite(this,0,0,e.assetKey).setOrigin(.5),Hi(i,br.award.dim,br.award.dim),i.setInteractive({pixelPerfect:!0,useHandCursor:!0}),n.add(i);const a=new Phaser.GameObjects.Rectangle(this,0,0,br.award.dim,br.award.dim,0).setAlpha(e.completed?0:.8);n.add(a);const r=((e,t)=>{const s=new Phaser.GameObjects.Container(e,0,0),n=new Phaser.GameObjects.Text(e,20,20,t.title,yr),i=new Phaser.GameObjects.Text(e,20,n.getBounds().bottom+20,t.assetKey,xr),a=new Phaser.GameObjects.Text(e,20,i.getBounds().bottom+20,t.description,jr),r=new Phaser.GameObjects.Rectangle(e,0,0,br.awardInfo.width,a.getBounds().bottom+20,On.darkBlue).setOrigin(0,0).setAlpha(.8),o=new Phaser.GameObjects.Sprite(e,br.awardInfo.width/2,0,Wn.scrollFrame.key),c=new Phaser.GameObjects.Sprite(e,br.awardInfo.width/2,r.getBounds().bottom,Wn.scrollFrame.key);return s.add([r,n,a,o,c]),t.completed&&s.add(i),s.setVisible(!1),s})(this,e);return i.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,(()=>r.setVisible(!0))),i.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(()=>r.setVisible(!1))),i.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,(e=>{r.x=e.x+10,r.y=e.y-10})),this.getLayerManager().addToLayer(zn.UI,r),n}cleanUp(){this.getInputManager().clearListeners(),this.getLayerManager().clearAllLayers()}createBanner(e,t){const s=new Phaser.GameObjects.Container(this,0,t),n=new Phaser.GameObjects.Sprite(this,br.banner.xOffset,0,Wn.awardsPage.key),i=Tn(this,e,br.bannerTextConfig,fr);return s.add([n,i]),s}}var Cr=Or;const Sr={keyTextConfig:{x:xn.x-100,y:0,oriX:.5,oriY:.5},keyDescTextConfig:{x:xn.x+100,y:0,oriX:.5,oriY:.5},key:{yStart:.9*xn.y,yInterval:150},icon:{x:xn.x-100}},Er={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},wr={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};class _r extends Phaser.Scene{constructor(){super("Bindings"),this.layerManager=void 0,this.inputManager=void 0,this.getInputManager=()=>ei(this.inputManager),this.getLayerManager=()=>ei(this.layerManager)}init(){this.layerManager=new Oa(this),this.inputManager=new ja(this)}create(){this.renderBackground(),this.renderBindings()}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.spaceshipBg.key),t=new Phaser.GameObjects.Rectangle(this,xn.x,xn.y,yn.x,yn.y,0).setAlpha(.3);this.getLayerManager().addToLayer(zn.Background,e),this.getLayerManager().addToLayer(zn.Background,t)}renderBindings(){const e=new Phaser.GameObjects.Container(this,0,0),t=this.getBindings(),s=wn({numOfItems:t.length,xSpacing:0,ySpacing:Sr.key.yInterval});e.add(t.map(((e,t)=>this.createBinding(e.key,e.text,s[t][0],s[t][1]+Sr.key.yStart))));const n=new qa(this,(()=>{this.getLayerManager().clearAllLayers(),this.scene.start("MainMenu")}));this.getLayerManager().addToLayer(zn.UI,e),this.getLayerManager().addToLayer(zn.UI,n)}getBindings(){return[{key:"Esc",text:"Escape Menu"},{key:"Tab",text:"Dashboard"}]}createBinding(e,t,s,n){const i=new Phaser.GameObjects.Container(this,s,n),a=new Phaser.GameObjects.Sprite(this,Sr.icon.x,0,Wn.squareKeyboardIcon.key);if("Tab"===e)a.setTexture(Wn.medKeyboardIcon.key);const r=Tn(this,e,Sr.keyTextConfig,Er),o=Tn(this,t,Sr.keyDescTextConfig,wr);return i.add([a,r,o]),i}}var Ar=_r;const kr=(e,t,s)=>new Promise((n=>{"__MISSING"!==e.textures.get(t).key?n(t):(e.load.image(t,s),e.load.once(`filecomplete-image-${t}`,n),e.load.once("loaderror",n),e.load.start())})),Tr=(e,t,s)=>new Promise((n=>{e.cache.text.exists(t)?n(t):(e.load.text(t,s),e.load.once(`filecomplete-text-${t}`,n),e.load.start())})),Rr={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},Ir={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},Lr={key:fn.zektonFont.key,size:25,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var Pr={arrow:{xOffset:875},buttons:{scale:.65},resetButton:{xOffset:135,yOffset:85},playButton:{xOffset:55,yOffset:85},frame:{xOffset:12,yOffset:-4},scrollSpeed:100,indexTextConfig:{x:0,y:-110,oriX:.5,oriY:.5},titleTextConfig:{x:0,y:-50,oriX:.5,oriY:.5},pageNumberTextConfig:{x:xn.x,y:yn.y-30,oriX:.5,oriY:.5},imageRect:{width:400,height:280},imageScale:{x:.8,y:.4},chapComplete:{y:10,height:30,text:"Chapter Completed"},grid:{chapPerRow:3,chapPerCol:3,chapPerPage:9,chapGapX:50,chapGapY:50}};const Nr=e=>Zn(`/stories/${e}`,!0),Dr={defaultCheckpoint:{key:"default-chap",path:Nr("defaultCheckpoint.txt")},awardsMapping:{key:"awards-mapping",path:Nr("awardsMapping.txt")},roomPreviewMapping:{key:"room-prev-mapping",path:Nr("roomPreviewMapping.txt")}},Mr={defaultCheckpoint:{key:"mock-default-chap",path:"../../assets/mockDefaultCheckpoint.txt"},awardsMapping:{key:"mock-awards-mapping",path:"../../assets/mockAwardsMapping.txt"},roomPreviewMapping:{key:"mock-room-prev-mapping",path:"../../assets/mockRoomPreviewMapping.txt"}};var Ur=Dr;var Br=class{constructor(){this.soundAssets=void 0,this.mapAssets=void 0,this.locations=void 0,this.dialogues=void 0,this.objects=void 0,this.boundingBoxes=void 0,this.characters=void 0,this.actions=void 0,this.gameStartActions=void 0,this.checkpointCompleteActions=void 0,this.getLocationAtId=e=>ei(this.locations.get(e),`Location ${e} was not found!`),this.getAssetByKey=e=>ei(this.mapAssets.get(e),`Asset ${e} not found!`),this.soundAssets=[],this.mapAssets=new Map,this.locations=new Map,this.dialogues=new Map,this.objects=new Map,this.boundingBoxes=new Map,this.characters=new Map,this.actions=new Map,this.gameStartActions=[],this.checkpointCompleteActions=[]}addSoundAsset(e){this.soundAssets.push(e)}addMapAsset(e,t){this.mapAssets.set(e,t)}getMapAssets(){return this.mapAssets}addLocation(e,t){this.locations.set(e,t)}setModesAt(e,t){this.getLocationAtId(e).modes=new Set(t)}setNavigationFrom(e,t){this.getLocationAtId(e).navigation=new Set(t)}getNavigationFrom(e){return this.getLocationAtId(e).navigation}setGameStartActions(e){this.gameStartActions=e}setCheckpointCompleteActions(e){this.checkpointCompleteActions=e}getGameStartActions(){return this.gameStartActions}getCheckpointCompleteActions(){return this.checkpointCompleteActions}getLocations(){return this.locations}getObjectPropMap(){return this.objects}getBBoxPropMap(){return this.boundingBoxes}getDialogueMap(){return this.dialogues}getCharacterMap(){return this.characters}getActionMap(){return this.actions}getSoundAssets(){return this.soundAssets}setItemInMap(e,t,s){this[e].set(t,s)}addItemToLocation(e,t,s){this.getLocationAtId(e)[t].add(s)}setBGMusicAt(e,t){this.getLocationAtId(e).bgmKey=t}getLocationIds(){return Array.from(this.locations.keys())}getAssetKeyFromId(e){var t,s;return ei((null===(t=this.objects.get(e))||void 0===t?void 0:t.assetKey)||(null===(s=this.locations.get(e))||void 0===s?void 0:s.assetKey),`Id ${e} not found!`)}};var Gr=class{constructor(){this.objective=void 0,this.totalNumOfObjectives=void 0,this.numOfCompletedObjectives=void 0,this.objective=new Map,this.totalNumOfObjectives=0,this.numOfCompletedObjectives=0}setObjective(e,t){const s=this.objective.get(e);this.objective.set(e,t),void 0!==s&&s!==t&&this.numOfCompletedObjectives++}addObjective(e){this.objective.set(e,!1),this.totalNumOfObjectives++}addObjectives(e){e.forEach((e=>this.addObjective(e)))}isAllComplete(){return this.numOfCompletedObjectives>=this.totalNumOfObjectives}getObjectiveState(e){const t=this.objective.get(e);if(void 0===t)throw new Error(`Cannot find objective with the given task id "${e}"`);return t}getObjectives(){return this.objective}setObjectives(e){this.objective=e}};var Fr=class{constructor(){this.tasks=void 0,this.taskDetails=void 0,this.tasks=new Map,this.taskDetails=new Map}setTask(e,t){this.tasks.set(e,t)}showTask(e){const t=this.taskDetails.get(e);if(void 0!==t){const s={...t,visible:!0};this.taskDetails.set(e,s)}}addTask(e){const t=e.taskId;this.tasks.set(t,!1),this.taskDetails.set(t,e)}addTasks(e){e.forEach((e=>this.addTask(e)))}getTaskState(e){const t=this.tasks.get(e);if(void 0===t)throw new Error(`Cannot find task with the given task id "${e}"`);return t}getTaskDetail(e){const t=this.taskDetails.get(e);if(void 0===t)throw new Error(`Cannot find task with the given task id "${e}"`);return t}getAllTasks(){return this.tasks}getAllIncompleteTasks(){const e=new Array;for(const s of this.tasks.keys()){var t;!this.tasks.get(s)&&null!==(t=this.taskDetails.get(s))&&void 0!==t&&t.visible&&e.push(s)}return e}getAllVisibleTaskData(){const e=new Array;for(const t of this.tasks.keys()){const s=this.getTaskState(t),n=this.getTaskDetail(t);void 0!==s&&void 0!==n&&n.visible&&e.push([n,s])}return e}};const Hr={small:ea.Small,medium:ea.Medium,large:ea.Large},Vr={left:Zi.Left,middle:Zi.Middle,right:Zi.Right},Wr={talk:za.Talk,explore:za.Explore,move:za.Move,menu:za.Menu},qr={navigation:Ni.navigation,talkTopics:Ni.talkTopics,objects:Ni.objects,boundingBoxes:Ni.boundingBoxes,characters:Ni.characters,actions:Ni.actions,bgmKey:Ni.bgmKey,collectibles:Ni.collectibles},$r={move_character:Pi.MoveCharacter,update_character:Pi.UpdateCharacter,obtain_collectible:Pi.ObtainCollectible,complete_objective:Pi.CompleteObjective,complete_task:Pi.CompleteTask,show_task:Pi.ShowTask,add_item:Pi.AddItem,remove_item:Pi.RemoveItem,change_background:Pi.ChangeBackground,start_animation:Pi.StartAnimation,stop_animation:Pi.StopAnimation,show_dialogue:Pi.ShowDialogue,add_mode:Pi.AddLocationMode,remove_mode:Pi.RemoveLocationMode,add_popup:Pi.AddPopup,make_object_glow:Pi.MakeObjectGlow,make_object_blink:Pi.MakeObjectBlink,play_bgm:Pi.PlayBGM,play_sfx:Pi.PlaySFX,preview_location:Pi.PreviewLocation,show_object_layer:Pi.ShowObjectLayer,navigate_to_assessment:Pi.NavigateToAssessment,update_assessment_status:Pi.UpdateAssessmentStatus,delay:Pi.Delay},Xr={checklist:Ii.ChecklistState,tasklist:Ii.TasklistState,userstate:Ii.UserState},zr={assessments:Li.assessments,achievements:Li.achievements,collectibles:Li.collectibles};class Yr{static stringToSize(e){return Hr[e]||ea.Medium}static stringToPosition(e){return Vr[e]||Zi.Middle}static stringToGameMode(e){return ei(Wr[e],`Invalid location mode, ${e}`)}static stringToActionType(e){return ei($r[e],`Invalid action type, ${e}`)}static stringToGameStateStorage(e){return ei(Xr[e],`Invalid condition type, ${e}`)}static stringToGameItemType(e){return ei(qr[e],`Invalid entity type, ${e}`)}static stringToBoolean(e){return"false"!==e}static stringToUserStateType(e){return ei(zr[e],`Invalid user state type ${e}`)}}let Kr;!function(e){e.locations="locations",e.objectives="objectives",e.tasks="tasks",e.bgms="bgms",e.sfxs="sfxs"}(Kr||(Kr={}));class Qr{constructor(){this.gameItemAsserts=void 0,this.gameEntityAsserts=void 0,this.gameAnimAsserts=void 0,this.gameAnimMaps=[ho.checkpoint.map.getLocations(),ho.checkpoint.map[Ni.objects]],this.allItemIds=void 0,this.gameItemAsserts=new Map,this.gameEntityAsserts=new Map,this.gameAnimAsserts=[],this.allItemIds=new Set}registerId(e){if(this.allItemIds.has(e))throw new Error(`Duplicate item id ${e}`);this.allItemIds.add(e)}verifyAssertions(){this.verifyGameItemAssert(),this.verifyGameEntityAsserts(),this.verifyGameAnimAsserts()}assertItemType(e,t,s){e===Ni.talkTopics?e=Ni.dialogues:e===Ni.navigation&&(e=Ni.locations),this.gameItemAsserts.get(e)||this.gameItemAsserts.set(e,[]),this.gameItemAsserts.get(e).push({itemId:t,actionType:s})}verifyGameItemAssert(){this.gameItemAsserts.forEach(((e,t)=>{e.forEach((e=>{const{itemId:s,actionType:n}=e;if(!ho.checkpoint.map[t].has(s))throw n&&this.actionAssertionError(s,t,n),new Error(`Cannot find id "${s}" under ${t} entity type`)}))}))}assertItemTypes(e,t,s){t.forEach((t=>this.assertItemType(e,t,s)))}assertEntityType(e,t,s){this.gameEntityAsserts.get(e)||this.gameEntityAsserts.set(e,[]),this.gameEntityAsserts.get(e).push({itemId:t,actionType:s})}verifyGameEntityAsserts(){this.gameEntityAsserts.forEach(((e,t)=>{e.forEach((e=>{const{itemId:s,actionType:n}=e;switch(t){case Kr.locations:ho.checkpoint.map.getLocationAtId(s);break;case Kr.objectives:if(void 0===ho.checkpoint.objectives.getObjectives().get(s))throw n&&this.actionAssertionError(s,t,n),new Error(`Cannot find objective id "${s}"`);break;case Kr.tasks:if(void 0===ho.checkpoint.tasks.getAllTasks().get(s))throw n&&this.actionAssertionError(s,t,n),new Error(`Cannot find task id "${s}"`);break;case Kr.bgms:const e=ho.checkpoint.map.getSoundAssets().filter((e=>e.soundType===$n.BGM&&e.key===s)).length;if(0===e)throw new Error(`Cannot find bgm key "${s}"`);if(e>1)throw new Error(`More than 1 bgm key "${s}"`);break;case Kr.sfxs:const i=ho.checkpoint.map.getSoundAssets().filter((e=>e.soundType===$n.SFX&&e.key===s)).length;if(0===i)throw new Error(`Cannot find sfx key "${s}"`);if(i>1)throw new Error(`More than 1 sfx key "${s}"`)}}))}))}assertAnimType(e,t){this.gameAnimAsserts.push({itemId:e,actionType:t})}verifyGameAnimAsserts(){this.gameAnimAsserts.forEach((e=>{const{itemId:t,actionType:s}=e;let n=!1;this.gameAnimMaps.forEach((e=>{e.get(t)&&(n=!0)})),n||this.actionAssertionError(t,"locationId or itemId",s)}))}actionAssertionError(e,t,s){throw new Error(`Expected type of "${t}" as argument for "${s}", obtained "${e}" which is either undefined or the wrong id.`)}}class Jr{static parse(e){const t="!"===e[0];t&&(e=e.slice(1));const[s,...n]=ta.splitByChar(e,".");switch(Yr.stringToGameStateStorage(s)){case Ii.ChecklistState:return ho.validator.assertEntityType(Kr.objectives,n[0]),{state:Ii.ChecklistState,conditionParams:{id:n[0]},boolean:!t};case Ii.TasklistState:return ho.validator.assertEntityType(Kr.tasks,n[0]),{state:Ii.TasklistState,conditionParams:{id:n[0]},boolean:!t};case Ii.UserState:return{state:Ii.UserState,conditionParams:{userStateType:Yr.stringToUserStateType(n[0]),id:n[1]},boolean:!t};default:throw new Error("Parsing error: Invalid condition param")}}}class Zr{static parseActions(e){return e.map((e=>this.parseAction(e)))}static parseAction(e){const[t,s]=ta.splitByChar(e,"if"),n=this.parseActionContent(t);return s&&(n.actionConditions=ta.splitByChar(s,"AND").map((e=>Jr.parse(e)))),ho.checkpoint.map.setItemInMap(Ni.actions,n.interactionId,n),n.interactionId}static parseActionContent(e){const[t,s]=ta.splitByChar(e,"(");let n=!1,i=t;"*"===t[t.length-1]&&(n=!0,i=i.slice(0,-1));const a=Yr.stringToActionType(i),r=ta.splitByChar(s.slice(0,-1),","),o={};switch(a){case Pi.ObtainCollectible:o.id=r[0];break;case Pi.CompleteObjective:o.id=r[0],ho.validator.assertEntityType(Kr.objectives,r[0],i);break;case Pi.CompleteTask:case Pi.ShowTask:o.id=r[0],ho.validator.assertEntityType(Kr.tasks,r[0],i);break;case Pi.PreviewLocation:case Pi.ChangeBackground:o.id=r[0],ho.validator.assertEntityType(Kr.locations,r[0],i);break;case Pi.StartAnimation:o.id=r[0],o.startFrame=+r[1],o.frameRate=+r[2],o.assetCategory=r[3],ho.validator.assertAnimType(r[0],i);break;case Pi.StopAnimation:o.id=r[0],ho.validator.assertAnimType(r[0],i);break;case Pi.ShowDialogue:o.id=r[0],ho.validator.assertItemType(Ni.dialogues,r[0],i);break;case Pi.AddItem:case Pi.RemoveItem:const e=Yr.stringToGameItemType(r[0]);o.gameItemType=e,o.locationId=r[1],ho.validator.assertEntityType(Kr.locations,r[1],i),o.id=r[2],ho.validator.assertItemType(e,r[2],i);break;case Pi.AddLocationMode:case Pi.RemoveLocationMode:ho.validator.assertEntityType(Kr.locations,r[0],i),o.locationId=r[0],o.mode=Yr.stringToGameMode(r[1]);break;case Pi.AddPopup:ho.validator.assertItemType(Ni.objects,r[0],i),o.id=r[0],o.position=Yr.stringToPosition(r[1]),r[2]&&(o.duration=1e3*parseInt(r[2])),r[3]&&(o.size=Yr.stringToSize(r[3]));break;case Pi.MakeObjectBlink:case Pi.MakeObjectGlow:ho.validator.assertItemType(Ni.objects,r[0],i),o.id=r[0],o.turnOn=Yr.stringToBoolean(r[1]);break;case Pi.PlayBGM:o.id=r[0],ho.validator.assertEntityType(Kr.bgms,r[0],i);break;case Pi.PlaySFX:o.id=r[0],ho.validator.assertEntityType(Kr.sfxs,r[0],i);break;case Pi.ShowObjectLayer:o.show=Yr.stringToBoolean(r[0]);break;case Pi.UpdateCharacter:ho.validator.assertItemType(Ni.characters,r[0],i),o.id=r[0],o.expression=r[1];break;case Pi.MoveCharacter:ho.validator.assertItemType(Ni.characters,r[0],i),ho.validator.assertEntityType(Kr.locations,r[1],i),o.id=r[0],o.locationId=r[1],o.position=Yr.stringToPosition(r[2]);break;case Pi.NavigateToAssessment:o.assessmentId=r[0];break;case Pi.Delay:o.duration=1e3*parseInt(r[0])}return{actionType:a,actionParams:o,actionConditions:[],interactionId:ho.generateActionId(),isInteractive:!1,isRepeatable:n}}}class eo{static parsePrompt(e,t){return{promptTitle:e.split("prompt:")[1].trim(),choices:t.map(this.splitChoice)}}static splitChoice(e){const t=ta.splitWithLimit(e,"->",1);return[t[0].trim(),t[1].split(" ")[1].trim()]}}class to{static parse(e,t){t.forEach((t=>this.parseCharacterDetails(e,t)))}static characterAssetKey(e,t){return e+"-"+t}static characterAssetPath(e,t){return`/avatars/${e}/${e}.${t}.png`}static parseCharacterDetails(e,t){const s="+"===t[0];s&&(t=t.slice(1));const[n,i,a,r,o]=ta.splitByChar(t,",");ho.validator.registerId(n);const c=new Map,l={id:n,name:i,expressions:c,defaultExpression:a,defaultPosition:Yr.stringToPosition(r),scale:o?parseFloat(o):1};c.set(a,this.characterAssetKey(n,a)),ho.checkpoint.map.addMapAsset(this.characterAssetKey(n,a),{type:Hn.Image,path:this.characterAssetPath(n,a),key:n}),ho.checkpoint.map.setItemInMap(Ni.characters,n,l),s&&ho.checkpoint.map.addItemToLocation(e,Ni.characters,n)}}class so{static parse(e){const[t,s,n]=ta.splitByChar(e.slice(1),","),i=Yr.stringToPosition(n);return this.addCharacterExprToMap(t,s),{speakerId:t,expression:s,speakerPosition:i}}static addCharacterExprToMap(e,t){if("you"===e||"narrator"===e)return;const s=ho.checkpoint.map.getCharacterMap().get(e);if(!s)throw new Error(`Character "${e}" not in map`);const n=t||s.defaultExpression;s.expressions.set(t,to.characterAssetKey(e,t||n)),ho.checkpoint.map.addMapAsset(to.characterAssetKey(e,n),{path:to.characterAssetPath(e,n),type:Hn.Image,key:e})}}const no=e=>new RegExp(/^[0-9]+$/).test(e),io=e=>new RegExp(/^goto [0-9]+.*$/).test(e),ao=e=>e&&("\t"===e[0]||"    "===e.slice(0,4)),ro=e=>e&&"@"===e[0],oo=e=>e.trim().startsWith("prompt:"),co=e=>new RegExp(/-> +goto/).test(e);class lo{static parse(e,t,s){t.forEach(((t,n)=>{const[i,a,r]=ta.splitByChar(t,",");ho.validator.registerId(i),ho.checkpoint.map.addSoundAsset({key:i,path:a,config:{volume:parseFloat(r),loop:s===$n.BGM},soundType:s}),s===$n.BGM&&0===n&&ho.checkpoint.map.setBGMusicAt(e,i)}))}}class uo{static generateActionId(){return uo.actionIdNum++,`action#${uo.actionIdNum}`}static init(){uo.actionIdNum=0,uo.checkpoint={map:new Br,startingLoc:"",objectives:new Gr,tasks:new Fr},uo.validator=new Qr}static parse(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||uo.init();const t=ta.splitToLinesAndRemoveComments(e);ta.splitToParagraph(t).forEach((e=>{let[t,s]=e;0===s.length&&t.includes(":")?uo.parseCheckpointConfig(t):uo.parseCheckpointParagraphs(t,s)||class{static parse(e,t){const s=ho.checkpoint.map.getLocationAtId(e);ta.splitToParagraph(t).forEach((e=>{let[t,n]=e;0===n.length&&t.includes(":")?this.parseLocationConfig(s,t):this.parseLocationParagraphs(s,t,n)}))}static parseLocationConfig(e,t){const[s,n]=ta.splitByChar(t,":"),i=ta.splitByChar(n,",");switch(s){case"modes":i.forEach((t=>{const s=Yr.stringToGameMode(t);e.modes.add(s)}));break;case"nav":i.forEach((t=>{ho.validator.assertEntityType(Kr.locations,t),e.navigation.add(t)}));break;case"talkTopics":const t=i;ho.validator.assertItemTypes(Ni.dialogues,t),e.talkTopics=new Set(t);break;case"preview":const[n]=i;if(n){const t="/preview"+n;ho.checkpoint.map.addMapAsset(t,{type:Hn.Image,key:e.id+"Preview",path:n}),e.previewKey=t}break;default:throw new Error(`Invalid config key "${s}" specified under location "${e.id}"`)}}static parseLocationParagraphs(e,t,s){switch(t){case"objects":(class{static parse(e,t){ta.splitToParagraph(t).forEach((t=>{let[s,n]=t;const i=this.parseObjectConfig(e,s);n.length&&(i.isInteractive=!0,i.actionIds=Zr.parseActions(n))}))}static objectAssetKey(e){return e}static objectPath(e){return e}static parseObjectConfig(e,t){const s="+"===t[0];s&&(t=t.slice(1));const[n,i,a,r,o,c,l,d]=ta.splitByChar(t,",");ho.validator.registerId(n);const u={assetKey:this.objectAssetKey(i),x:parseInt(a),y:parseInt(r),width:parseInt(o)||void 0,height:parseInt(c)||void 0,isInteractive:!1,interactionId:n};return ho.checkpoint.map.addMapAsset(this.objectAssetKey(i),{type:Hn[l]||Hn.Image,key:n,path:this.objectPath(i),config:{frameHeight:parseInt(c)||-1,frameWidth:parseInt(o)||-1,centreX:0,centreY:0,endFrame:parseInt(d)-1||0,animType:Vn.Object}}),ho.checkpoint.map.setItemInMap(Ni.objects,n,u),s&&ho.checkpoint.map.addItemToLocation(e,Ni.objects,n),u}}).parse(e.id,s);break;case"boundingBoxes":(class{static parse(e,t){ta.splitToParagraph(t).forEach((t=>{let[s,n]=t;const i=this.parseBBoxConfig(e,s);n.length&&(i.isInteractive=!0,i.actionIds=Zr.parseActions(n))}))}static parseBBoxConfig(e,t){const s="+"===t[0];s&&(t=t.slice(1));const[n,i,a,r,o]=ta.splitByChar(t,","),c={x:parseInt(i),y:parseInt(a),width:parseInt(r),height:parseInt(o),isInteractive:!1,interactionId:n};return ho.validator.registerId(n),ho.checkpoint.map.setItemInMap(Ni.boundingBoxes,n,c),s&&ho.checkpoint.map.addItemToLocation(e,Ni.boundingBoxes,n),c}}).parse(e.id,s);break;case"characters":to.parse(e.id,s);break;case"bgm":lo.parse(e.id,s,$n.BGM);break;case"sfx":lo.parse(e.id,s,$n.SFX);break;case"actions":e.actionIds=Zr.parseActions(s);break;default:throw new Error(`Invalid location paragraph header "${t}"`)}}}.parse(t,s)})),uo.validator.verifyAssertions()}static parseCheckpointConfig(e){const[t,s]=ta.splitByChar(e,":");if("startingLoc"!==t)throw new Error(`Invalid checkpoint config key, "${e}"`);uo.validator.assertEntityType(Kr.locations,s),uo.checkpoint.startingLoc=s}static parseCheckpointParagraphs(e,t){switch(e){case"objectives":uo.checkpoint.objectives.addObjectives(t);break;case"tasks":(class{static parse(e){const t=[];e.forEach((e=>{const[s,n,i]=ta.splitWithLimit(e,",",2),a={taskId:s,title:n,description:i,visible:!1};t.push(a)})),ho.checkpoint.tasks.addTasks(t)}}).parse(t);break;case"locations":(class{static parse(e){e.forEach((e=>{const[t,s,n,i,a]=ta.splitByChar(e,",");ho.validator.registerId(t),ho.checkpoint.map.addLocation(t,{id:"",name:"",assetKey:"",previewKey:null,modes:new Set([]),navigation:new Set([]),talkTopics:new Set([]),objects:new Set([]),boundingBoxes:new Set([]),bgmKey:"",characters:new Set([]),id:t,name:n,assetKey:this.locationAssetKey(s)}),ho.checkpoint.map.addMapAsset(this.locationAssetKey(s),{type:Hn[i]||Hn.Image,key:t,path:this.locationPath(s),config:{frameWidth:yn.x,frameHeight:yn.y,centreX:xn.x,centreY:xn.y,endFrame:parseInt(a)-1||0,animType:Vn.Background}})}))}static locationAssetKey(e){return e}static locationPath(e){return e}}).parse(t);break;case"gameStartActions":uo.checkpoint.map.setGameStartActions(Zr.parseActions(t));break;case"checkpointCompleteActions":uo.checkpoint.map.setCheckpointCompleteActions(Zr.parseActions(t));break;case"dialogues":(class{static parse(e){ta.splitToParagraph(e).forEach((e=>{let[t,s]=e;0!==s.length?this.parseDialogue(t,s):console.error("No dialogue found for dialogueId")}))}static parseDialogue(e,t){const[s,n]=ta.splitWithLimit(e,",",1);ho.validator.registerId(s);const i={title:n,content:this.parseDialogueContent(t)};i.title||(i.title=ta.toCapitalizedWords(s)),ho.checkpoint.map.setItemInMap(Ni.dialogues,s,i)}static parseDialogueContent(e){return function(e,t){const s=new Map;return e.forEach(((e,n)=>{const i=t(e,n);s.set(n,i)})),s}(ta.mapByHeader(e,no),this.createDialogueLines)}static createDialogueLines(e){const t=[];let s=0;for(;s!==e.length;){const n=e[s];switch(!0){case io(n):const[i,a]=ta.splitByChar(n,"if"),[r,o]=a?ta.splitByChar(a,"else"):[null,null],c=r?ta.splitByChar(r,"AND").map((e=>Jr.parse(e))):[];t[t.length-1].goto={conditions:c,part:i.split(" ")[1],altPart:o};break;case oo(n):const l=n,d=[];for(;e[s+1]&&co(e[s+1]);)s++,d.push(e[s].trim());const u=eo.parsePrompt(l,d);t[t.length-1].prompt=u;break;case ao(n):const h=t[t.length-1];!h.actionIds&&(h.actionIds=[]),h.actionIds.push(Zr.parseAction(n));break;case ro(n):s++;const p=e[s];if(!p)throw new Error("Parsing error: Cannot change speaker without next line");t.push({line:p}),t[t.length-1].speakerDetail=so.parse(n);break;default:t.push({line:n}),t[t.length-1].speakerDetail=so.parse("@narrator")}s++}return t}}).parse(t);break;default:return!1}return!0}}uo.checkpoint=void 0,uo.actionIdNum=void 0,uo.validator=void 0;var ho=uo;async function po(e,t,s){const n=zo.getInstance().getIsUsingMock()?Mr:Ur,i=zo.getInstance().getCurrentSceneRef(),a=zo.getInstance().getGameChapters()[t].filenames[s];if(!a)return;await Tr(i,a,a),await Tr(i,n.defaultCheckpoint.key,n.defaultCheckpoint.path);const r=i.cache.text.get(a),o=i.cache.text.get(n.defaultCheckpoint.key);ho.parse(o),ho.parse(r,!0);const c=ho.checkpoint;i.scene.start("GameManager",{gameCheckpoint:c,continueGame:e,chapterNum:t,checkpointNum:s})}async function go(){const e=zo.getInstance().getCurrentSceneRef(),t=zo.getInstance().getSSChapterSimFilenames();if(!t.length)return void e.scene.start("StorySimulatorMenu");const s=t.pop();await Tr(e,s,Nr(s)),await Tr(e,Ur.defaultCheckpoint.key,Ur.defaultCheckpoint.path);const n=e.cache.text.get(s),i=e.cache.text.get(Ur.defaultCheckpoint.key);ho.parse(i),ho.parse(n,!0);const a=ho.checkpoint;return e.scene.start("GameManager",{gameCheckpoint:a,chapterNum:-1,checkpointNum:-1}),!0}function mo(e,t,s){let{title:n,imageUrl:i}=t;const[a,r]=function(e){const t=Math.floor(e/Pr.grid.chapPerPage);e%=Pr.grid.chapPerPage;const s=Math.floor(e/Pr.grid.chapPerRow),n=e%Pr.grid.chapPerRow,i=(Pr.grid.chapPerRow-1)/2,a=(Pr.grid.chapPerCol-1)/2;let r=t*yn.x+xn.x;r+=(n-i)*(Pr.imageRect.width+Pr.grid.chapGapX);let o=xn.y;return o+=(s-a)*(Pr.imageRect.height+Pr.grid.chapGapY),[r,o]}(s),o=new Phaser.GameObjects.Container(e,a,r),c=s<=zo.getInstance().getSaveManager().getLargestCompletedChapterNum(),l=new Phaser.GameObjects.Image(e,0,0,i).setDisplaySize(Pr.imageRect.width,Pr.imageRect.height),d=new Phaser.GameObjects.Sprite(e,Pr.frame.xOffset,Pr.frame.yOffset,Wn.chapterSelectFrame.key).setScale(.99*Pr.imageScale.x,.99*Pr.imageScale.y),u=new Phaser.GameObjects.Rectangle(e,0,Pr.chapComplete.y,Pr.imageRect.width,Pr.chapComplete.height,0).setOrigin(.5).setAlpha(.7).setInteractive().setVisible(c),h=Tn(e,Pr.chapComplete.text,{x:0,y:Pr.chapComplete.y,oriX:.5,oriY:.5},Rr).setVisible(c),p=new kn(e,Pr.resetButton.xOffset+8,Pr.resetButton.yOffset-20,"Reset progress"),g=new kn(e,Pr.playButton.xOffset+8,Pr.playButton.yOffset-20,"Play/Continue"),m=Ci(e,{assetKey:Wn.chapterRepeatButton.key,onUp:async()=>await po(!1,s,0),onHover:()=>p.setVisible(!0),onOut:()=>p.setVisible(!1)}).setPosition(Pr.resetButton.xOffset,Pr.resetButton.yOffset).setScale(Pr.buttons.scale),b=zo.getInstance().getSaveManager().getChapterSaveState(s).lastCheckpointPlayed,f=Ci(e,{assetKey:Wn.chapterContinueButton.key,onUp:async()=>await po(!0,s,b),onHover:()=>g.setVisible(!0),onOut:()=>g.setVisible(!1)}).setPosition(Pr.playButton.xOffset,Pr.playButton.yOffset).setScale(Pr.buttons.scale),v=Tn(e,`Chapter ${s}`,Pr.indexTextConfig,Rr),y=Tn(e,n,Pr.titleTextConfig,Ir),x=s<=zo.getInstance().getSaveManager().getLargestCompletedChapterNum()+1,j=new Phaser.GameObjects.Rectangle(e,0,0,Pr.imageRect.width,Pr.imageRect.height,0).setOrigin(.5).setAlpha(x?0:.8).setInteractive();return o.add([l,d,u,h,m,f,p,g,v,y,j]),o}class bo extends Phaser.Scene{constructor(){super("ChapterSelect"),this.layerManager=void 0,this.chaptersContainer=void 0,this.backButtonContainer=void 0,this.pageNumberText=void 0,this.targetPage=void 0,this.getGameChapters=()=>zo.getInstance().getGameChapters(),this.getLayerManager=()=>ei(this.layerManager),this.chaptersContainer=void 0,this.backButtonContainer=void 0,this.pageNumberText=void 0,this.targetPage=0}preload(){la(this)}async create(){zo.getInstance().setCurrentSceneRef(this),this.layerManager=new Oa(this),await this.preloadChapterAssets(),this.renderBackground(),this.renderChapters()}update(){if(!this.chaptersContainer)return;const e=-this.targetPage*yn.x;if(this.chaptersContainer.x>e){const t=this.chaptersContainer.x-Pr.scrollSpeed;this.chaptersContainer.x=Math.max(t,e)}else if(e>this.chaptersContainer.x){const t=this.chaptersContainer.x+Pr.scrollSpeed;this.chaptersContainer.x=Math.min(t,e)}}cleanUp(){this.getLayerManager().clearAllLayers()}async preloadChapterAssets(){await Promise.all(this.getGameChapters().map((async e=>await kr(this,e.imageUrl,Zn(e.imageUrl,!0)))))}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.spaceshipBg.key),t=new Phaser.GameObjects.Rectangle(this,xn.x,xn.y,yn.x,yn.y,0).setAlpha(.3);this.getLayerManager().addToLayer(zn.Background,e),this.getLayerManager().addToLayer(zn.Background,t)}renderChapters(){this.backButtonContainer=new qa(this,(()=>{this.cleanUp(),this.scene.start("MainMenu")})),this.chaptersContainer=this.createChaptersContainer(),this.pageNumberText=Tn(this,`1 / ${this.numPages()}`,Pr.pageNumberTextConfig,Lr);const e=Math.min(zo.getInstance().getSaveManager().getLargestCompletedChapterNum()+1,this.getGameChapters().length-1);this.targetPage=Math.floor(e/Pr.grid.chapPerPage),this.targetPage<0&&(this.targetPage=0),this.pageNumberText.setText(`${this.targetPage+1} / ${this.numPages()}`);const t=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.chapterSelectBorder.key),s=Ci(this,{assetKey:Wn.chapterSelectArrow.key,onUp:()=>this.scrollPrevPage()}).setPosition(xn.x-Pr.arrow.xOffset,xn.y),n=Ci(this,{assetKey:Wn.chapterSelectArrow.key,onUp:()=>this.scrollNextPage()}).setPosition(xn.x+Pr.arrow.xOffset,xn.y).setScale(-1,1);this.getLayerManager().addToLayer(zn.UI,this.chaptersContainer),this.getLayerManager().addToLayer(zn.UI,this.backButtonContainer),this.getLayerManager().addToLayer(zn.UI,this.pageNumberText),this.getLayerManager().addToLayer(zn.UI,t),this.getLayerManager().addToLayer(zn.UI,s),this.getLayerManager().addToLayer(zn.UI,n)}createChaptersContainer(){const e=new Phaser.GameObjects.Container(this,0,0);return e.add(this.getGameChapters().map(((e,t)=>mo(this,e,t)))).sort("depth").reverse(),e}numPages(){const e=Math.ceil(this.getGameChapters().length/Pr.grid.chapPerPage);return Math.max(e,1)}scrollPrevPage(){var e;this.targetPage=Math.max(this.targetPage-1,0),null===(e=this.pageNumberText)||void 0===e||e.setText(`${this.targetPage+1} / ${this.numPages()}`)}scrollNextPage(){var e;const t=this.numPages();this.targetPage=Math.min(this.targetPage+1,t-1),null===(e=this.pageNumberText)||void 0===e||e.setText(`${this.targetPage+1} / ${t}`)}}var fo=bo;const vo={key:fn.alienCowsFont.key,size:80,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},yo=1500;var xo={text:{chapter:"Chapter completed.",checkpoint:"Checkpoint reached."},transitionTextConfig:{x:xn.x,y:xn.y,oriX:.5,oriY:.5},tweenDuration:yo,entryTween:{alpha:1,duration:yo,ease:"Power2"},exitTween:{alpha:0,duration:yo,ease:"Power2"}};class jo extends Phaser.Scene{constructor(){super("CheckpointTransition")}preload(){zo.getInstance().setCurrentSceneRef(this)}async create(){if(zo.getInstance().isGameType(Xo.Simulator))return await this.showTransitionText(xo.text.checkpoint),void await go();const e=zo.getInstance().getSaveManager().getFullSaveState(),t=zo.getInstance().getGameChapters(),[s,n]=e.userSaveState.recentlyPlayedCheckpoint;return this.isLastCheckpoint(t,s,n)?(await zo.getInstance().getSaveManager().saveChapterComplete(s),await this.showTransitionText(xo.text.chapter),this.isLastChapter(t,s)?void this.scene.start("ChapterSelect"):void await po(!0,s+1,0)):(await this.showTransitionText(xo.text.checkpoint),void await po(!1,s,n+1))}async showTransitionText(e){const t=Tn(this,e,xo.transitionTextConfig,vo).setAlpha(0);this.add.existing(t),this.tweens.add({targets:t,...xo.entryTween}),await Qn(2*xo.tweenDuration),this.tweens.add({targets:t,...xo.exitTween}),await Qn(xo.tweenDuration)}isLastCheckpoint(e,t,s){return s>=e[t].filenames.length-1}isLastChapter(e,t){return t>=e.length-1}}var Oo=jo;const Co={key:fn.zektonFont.key,size:30,align:Phaser.GameObjects.BitmapText.ALIGN_RIGHT};var So={text:{chapterSelect:"Play Chapter",studentRoom:"Go to My Room",awards:"Awards Hall",settings:"Settings",bindings:"Key Bindings"},button:{ySpace:.5*yn.y},buttonTextConfig:{x:600,y:0,oriX:1,oriY:.1},banner:{xHide:300},onFocusTween:{x:xn.x+200,duration:200,ease:"Power2"},outFocusTween:{x:xn.x+300,duration:200,ease:"Power2"},saBanner:{x:.3*yn.x,y:.9*yn.y}};class Eo extends Phaser.Scene{constructor(){super("MainMenu"),this.layerManager=void 0,this.getLayerManager=()=>ei(this.layerManager)}async create(){zo.getInstance().setCurrentSceneRef(this),this.layerManager=new Oa(this),this.renderBackground(),this.renderOptionButtons(),gr(this,"T",1.12*xn.x,1.1*xn.y),zo.getInstance().getSoundManager().playBgMusic(Xn.galacticHarmony.key)}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.spaceshipBg.key).setDisplaySize(yn.x,yn.y),t=ri(this).setAlpha(.15),s=new Phaser.GameObjects.Image(this,So.saBanner.x,So.saBanner.y,Wn.saBanner.key).setAlpha(.7);this.getLayerManager().addToLayer(zn.Background,e),this.getLayerManager().addToLayer(zn.Background,t),this.getLayerManager().addToLayer(zn.Background,s)}renderOptionButtons(){const e=new Phaser.GameObjects.Container(this,0,0),t=this.getOptionButtons(),s=Sn({direction:Cn.Column,numOfItems:t.length,maxYSpace:So.button.ySpace});e.add(t.map(((e,t)=>this.createOptionButton(e.text,s[t][0]+So.banner.xHide,s[t][1],e.callback)))),this.getLayerManager().addToLayer(zn.UI,e)}createOptionButton(e,t,s,n){const i=e=>{this.tweens.add({targets:e,...So.onFocusTween})},a=e=>{this.tweens.add({targets:e,...So.outFocusTween})},r=Ci(this,{assetKey:Wn.mainMenuOptBanner.key,message:e,textConfig:So.buttonTextConfig,bitMapTextStyle:Co,onUp:n,onHover:()=>i(r),onOut:()=>a(r),onHoverEffect:!1}).setPosition(t,s);return r}getOptionButtons(){return[{text:So.text.chapterSelect,callback:()=>{this.getLayerManager().clearAllLayers(),this.scene.start("ChapterSelect")}},{text:So.text.awards,callback:()=>{this.getLayerManager().clearAllLayers(),this.scene.start("AwardsHall")}},{text:So.text.studentRoom,callback:()=>{this.getLayerManager().clearAllLayers(),this.scene.start("RoomPreview")}},{text:So.text.settings,callback:()=>{this.getLayerManager().clearAllLayers(),this.scene.start("Settings")}},{text:So.text.bindings,callback:()=>{this.getLayerManager().clearAllLayers(),this.scene.start("Bindings")}}]}}var wo=Eo,_o=s(88),Ao=s(100);const ko='\nimport { prepend_remote_url, get_screen_width, get_screen_height, load_image, create_image, create_text, create_rect, add, set_display_size, set_alpha, set_origin } from \'game\';\n\nfunction preload() {\n    load_image("galaxy", prepend_remote_url("/locations/galaxy/normal.png"));\n}\n\nfunction create() {\n    const width = get_screen_width();\n    const height = get_screen_height();\n    const centre_x = width / 2;\n    const centre_y = height / 2;\n\n    const image = create_image(centre_x, centre_y, "galaxy");\n    const image_resized = set_display_size(image, width, height);\n\n    const black_tint = create_rect(centre_x, centre_y, width, height, 0x000011);\n    const black_tint_alpha = set_alpha(black_tint, 0.5);\n\n    const text = create_text(centre_x, centre_y, "Unable to fetch mission!");\n    const text_repos = set_origin(text, 0.5, 0.5);\n\n    add(image_resized);\n    add(black_tint_alpha);\n    add(text_repos);\n}\n\nfunction update() {}\n',To={key:fn.pixelFont.key,size:20,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER},Ro={assessmentNumber:"MYROOM",verifiedText:"VERIFIED",tag:{width:128,height:50},hoverTagTextConfig:{x:64,y:0,oriX:.5,oriY:.55},refreshButton:{x:.95*yn.x,y:.92*yn.y}};var Io=s(30);async function Lo(){const e=await async function(){const e=(await Object(Io.k)(zo.getInstance().getAccountInfo())||[]).find((e=>e.number===Ro.assessmentNumber));return e?e.id:null}();if(!e)return Po(null);return Po(await Object(Io.i)(e,zo.getInstance().getAccountInfo()))}function Po(e){if(e){const t=e.questions[0],s=t.answer;return s||t.solutionTemplate}return ko}class No extends Phaser.Scene{constructor(){super("RoomPreview"),this.layerManager=void 0,this.inputManager=void 0,this.phaseManager=void 0,this.escapeManager=void 0,this.collectibleManager=void 0,this.achievementManager=void 0,this.toolbarManager=void 0,this.dashboardManager=void 0,this.studentCode=void 0,this.preloadImageMap=void 0,this.preloadSoundMap=void 0,this.preloadSpritesheetMap=void 0,this.verifCont=void 0,this.context=void 0,this.getVerifCont=()=>ei(this.verifCont),this.getUserStateManager=()=>zo.getInstance().getUserStateManager(),this.getInputManager=()=>ei(this.inputManager),this.getLayerManager=()=>ei(this.layerManager),this.getPhaseManager=()=>ei(this.phaseManager),this.getEscapeManager=()=>ei(this.escapeManager),this.getCollectibleManager=()=>ei(this.collectibleManager),this.getAchievementManager=()=>ei(this.achievementManager),this.getToolbarManager=()=>ei(this.toolbarManager),this.getDashboardManager=()=>ei(this.dashboardManager),this.preloadImageMap=new Map,this.preloadSoundMap=new Map,this.preloadSpritesheetMap=new Map,this.studentCode=ko}init(){zo.getInstance().setCurrentSceneRef(this),this.studentCode=zo.getInstance().getRoomCode(),this.createContext()}preload(){la(this),this.verifCont=(e=>{const t=new Phaser.GameObjects.Container(e,0,0),s=new Phaser.GameObjects.Rectangle(e,0,0,Ro.tag.width,Ro.tag.height,On.darkBlue).setOrigin(0,.5).setAlpha(.8),n=new Phaser.GameObjects.Sprite(e,0,0,Wn.verifiedFrame.key).setOrigin(0,.5),i=new Phaser.GameObjects.Rectangle(e,0,.5*-s.height,s.width,.05*s.height,On.offWhite).setOrigin(0,0),a=Tn(e,Ro.verifiedText,Ro.hoverTagTextConfig,To).setBlendMode(Phaser.BlendModes.DIFFERENCE);return e.tweens.add({targets:i,alpha:.2,y:.35*s.height,duration:2e3,ease:"Power0",yoyo:!0,loop:-1}),t.add([s,a,i,n]),t.setVisible(!1),t})(this)}async create(){await this.eval(this.studentCode),this.renderDefaultBackground(),await this.eval("preload();"),await Promise.all(Array.from(this.preloadImageMap).map((async e=>{let[t,s]=e;await kr(this,t,s)}))),await Promise.all(Array.from(this.preloadSoundMap).map((async e=>{let[t,s]=e;var n,i,a;await(n=this,i=t,a=s,new Promise((e=>{null!==n.sound.get(i)?e(i):(n.load.audio(i,a).on("filecomplete",e),n.load.start())})))}))),await Promise.all(Array.from(this.preloadSpritesheetMap).map((async e=>{let[t,[s,n]]=e;await((e,t,s,n)=>new Promise((i=>{"__MISSING"!==e.textures.get(t).key?i(t):(e.load.spritesheet(t,s,n),e.load.once(`filecomplete-spritesheet-${t}`,i),e.load.once("loaderror",i),e.load.start())})))(this,t,s,n)})));const e=new kn(this,Ro.refreshButton.x-200,Ro.refreshButton.y-30,"Refresh Room"),t=Ci(this,{assetKey:Wn.chapterRepeatButton.key,onUp:async()=>{await zo.getInstance().loadRoomCode(),this.studentCode=zo.getInstance().getRoomCode(),this.getLayerManager().clearAllLayers(),this.sound.stopAll(),this.scene.restart()},onHover:()=>e.setVisible(!0),onOut:()=>e.setVisible(!1)}).setPosition(Ro.refreshButton.x,Ro.refreshButton.y);await this.eval("create();"),zo.getInstance().getSoundManager().playBgMusic(vn.nullInteractionId),this.initialiseManagers(),this.bindKeyboardTriggers(),this.getLayerManager().addToLayer(zn.UI,this.getVerifCont()),this.getLayerManager().addToLayer(zn.UI,t),this.getLayerManager().addToLayer(zn.UI,e),this.getToolbarManager().renderToolbarContainer()}update(){this.eval("update();")}createContext(){this.context=Object(Ao.a)([],"playground",I.Variant.DEFAULT),this.context.moduleContexts.game={tabs:null,state:{scene:this,preloadImageMap:this.preloadImageMap,preloadSoundMap:this.preloadSoundMap,preloadSpritesheetMap:this.preloadSpritesheetMap,remotePath:e=>Zn(e,!0),screenSize:yn,createAward:(e,t,s)=>this.createAward(e,t,s)}}}async eval(e){await Object(_o.runInContext)(e,this.context)}bindKeyboardTriggers(){this.getInputManager().registerKeyboardListener(Phaser.Input.Keyboard.KeyCodes.ESC,"up",(async()=>{this.getPhaseManager().isCurrentPhaseTerminal()?await this.getPhaseManager().popPhase():await this.getPhaseManager().pushPhase(Ai.EscapeMenu)})),this.getInputManager().registerKeyboardListener(Phaser.Input.Keyboard.KeyCodes.TAB,"up",(async()=>{this.getPhaseManager().isCurrentPhase(Ai.Dashboard)?await this.getPhaseManager().popPhase():this.getPhaseManager().isCurrentPhaseTerminal()?await this.getPhaseManager().swapPhase(Ai.Dashboard):await this.getPhaseManager().pushPhase(Ai.Dashboard)}))}cleanUp(){this.getInputManager().clearListeners(),this.getLayerManager().clearAllLayers()}createAward(e,t,s){const n=this.getUserStateManager().getAchievements(),i=this.getUserStateManager().getCollectibles(),a=new Phaser.GameObjects.Sprite(this,e,t,Wn.cookies.key);if(!n.includes(s)&&!i.includes(s))return a;const r=Fn(s);if(!r.completed)return a;const o=new Phaser.GameObjects.Sprite(this,e,t,r.assetKey);return this.attachVerificationTag(o)}attachVerificationTag(e){const t=this.getVerifCont();return e.setInteractive({pixelPerfect:!0,useHandCursor:!0}),e.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,(()=>t.setVisible(!0))),e.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(()=>t.setVisible(!1))),e.addListener(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,(e=>{t.x=e.x+10,t.y=e.y-10})),e}renderDefaultBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,this.getDefaultBackgroundKey());Fi(e,yn.x,yn.y),this.add.existing(e)}getDefaultBackgroundKey(){const e=this.getUserStateManager().getAssessments().reverse(),t=zo.getInstance().getRoomPreviewMapping();for(let s=0;s<e.length;s++)if(t.has(e[s]))return e[s];return Wn.sourceCrashedPod.key}initialiseManagers(){this.layerManager=new Oa(this),this.inputManager=new ja(this),this.phaseManager=new ka(new Map([[Ai.None,new sr]]),this.inputManager),this.escapeManager=new xa(this),this.collectibleManager=new Vi(this,zo.getInstance().getUserStateManager().getCollectibles),this.achievementManager=new Vi(this,zo.getInstance().getUserStateManager().getAchievements),this.toolbarManager=new Fa(this),this.dashboardManager=new Qi(this,[Ki.Collectibles,Ki.Achievements],[this.collectibleManager,this.achievementManager])}}class Do extends Phaser.Scene{constructor(){super("Settings"),this.bgmVolumeRadioButtons=void 0,this.sfxVolumeRadioButtons=void 0,this.layerManager=void 0,this.getSaveManager=()=>zo.getInstance().getSaveManager(),this.getLayerManager=()=>ei(this.layerManager)}async create(){zo.getInstance().setCurrentSceneRef(this),this.layerManager=new Oa(this),this.renderBackground(),this.renderOptions()}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.spaceshipBg.key),t=new Phaser.GameObjects.Image(this,xn.x,xn.y,Wn.settingBanner.key);this.getLayerManager().addToLayer(zn.Background,e),this.getLayerManager().addToLayer(zn.Background,t)}renderOptions(){const e=new Phaser.GameObjects.Container(this,0,0),t=this.getSettingsHeader(),s=Sn({direction:Cn.Column,numOfItems:t.length,maxYSpace:ma.opt.ySpace});e.add(t.map(((e,t)=>this.createOptionHeader(e,s[t][1]))));const{bgmVolume:n,sfxVolume:i}=this.getSaveManager().getSettings(),a=ma.volContainerOpts.findIndex((e=>parseFloat(e)===i)),r=ma.volContainerOpts.findIndex((e=>parseFloat(e)===n));this.sfxVolumeRadioButtons=this.createOptRadioOptions(a,s[0][1]),this.bgmVolumeRadioButtons=this.createOptRadioOptions(r,s[1][1]);const o=Ci(this,{assetKey:Wn.mediumButton.key,message:"Apply Settings",textConfig:{x:0,y:0,oriX:.33,oriY:.85},bitMapTextStyle:ga,onUp:()=>this.applySettings()}).setPosition(xn.x,.925*yn.y),c=new qa(this,(()=>{this.getLayerManager().clearAllLayers(),this.scene.start("MainMenu")}));this.getLayerManager().addToLayer(zn.UI,e),this.getLayerManager().addToLayer(zn.UI,this.sfxVolumeRadioButtons),this.getLayerManager().addToLayer(zn.UI,this.bgmVolumeRadioButtons),this.getLayerManager().addToLayer(zn.UI,o),this.getLayerManager().addToLayer(zn.UI,c)}getSettingsHeader(){return["SFX","BGM"]}createOptionHeader(e,t){const s=new Phaser.GameObjects.Container(this,0,t),n=new Phaser.GameObjects.Image(this,xn.x,0,Wn.settingOption.key),i=Tn(this,e,ma.optHeaderTextConfig,pa);return s.add([n,i]),s}createOptRadioOptions(e,t){return new ua(this,{choices:ma.volContainerOpts,defaultChoiceIdx:e,maxXSpace:ma.opt.xSpace,choiceTextConfig:ma.radioButtonsTextConfig,bitmapTextStyle:ha},ma.opt.x,-xn.y+t)}async applySettings(){const e=this.sfxVolumeRadioButtons?parseFloat(this.sfxVolumeRadioButtons.getChosenChoice()):1,t=this.bgmVolumeRadioButtons?parseFloat(this.bgmVolumeRadioButtons.getChosenChoice()):1;await this.getSaveManager().saveSettings({bgmVolume:t,sfxVolume:e}),zo.getInstance().getSoundManager().applyUserSettings(this.getSaveManager().getSettings())}}var Mo=Do;var Uo=class{constructor(){this.soundAssetMap=void 0,this.bgmVol=void 0,this.sfxVol=void 0,this.currBgMusicKey=void 0,this.currBgMusic=void 0,this.getBaseSoundManager=()=>this.getCurrentScene().sound,this.getCurrentScene=()=>ei(zo.getInstance().getCurrentSceneRef()),this.soundAssetMap=new Map,this.bgmVol=1,this.sfxVol=1,this.currBgMusicKey=vn.nullInteractionId}applyUserSettings(e){if(this.bgmVol=void 0!==e.bgmVolume?e.bgmVolume:1,this.sfxVol=void 0!==e.sfxVolume?e.sfxVolume:1,this.currBgMusic&&this.currBgMusic.isPlaying){const e=ei(this.getSoundAsset(this.currBgMusicKey)),t=void 0!==e.config.volume?e.config.volume:1;this.currBgMusic.setVolume(t*this.bgmVol)}}addSoundAsset(e){this.soundAssetMap.set(e.key,e)}getSoundAsset(e){return this.soundAssetMap.get(e)}loadSounds(e){e.forEach((e=>{this.addSoundAsset(e),this.loadSound(e.key,Zn(e.path,!0))}))}loadSoundAssetMap(e){Object.values(e).forEach((e=>{this.addSoundAsset(e),this.loadSound(e.key,Zn(e.path,!1))}))}loadSound(e,t){this.getCurrentScene().load.audio(e,t)}playSound(e){const t=this.getSoundAsset(e);if(t){const e=void 0!==t.config.volume?t.config.volume:1;this.getBaseSoundManager().play(t.key,{...t.config,volume:e*this.sfxVol})}}playBgMusic(e,t){if(!zo.getInstance().isMounted)return;if(this.currBgMusicKey===e)return;if(e===vn.nullInteractionId&&this.currBgMusic)return this.fadeOutAndDestroyMusic(this.currBgMusic,t),this.currBgMusic=void 0,void(this.currBgMusicKey=e);this.currBgMusic&&this.fadeOutAndDestroyMusic(this.currBgMusic);const s=ei(this.getSoundAsset(e)),n=void 0!==s.config.volume?s.config.volume:1;this.currBgMusic=this.getBaseSoundManager().add(s.key,{...s.config,volume:n*this.bgmVol}),this.currBgMusicKey=s.key,this.currBgMusic.play()}fadeOutAndDestroyMusic(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.getCurrentScene().tweens.add({targets:e,...qn,duration:t}),setTimeout((()=>e.destroy()),2*t)}stopAllSound(){this.getBaseSoundManager().stopAll()}pauseCurrBgMusic(){this.getCurrentScene()&&this.currBgMusic&&this.currBgMusic.isPlaying&&this.currBgMusic.pause()}continueCurrBgMusic(){this.getCurrentScene()&&this.currBgMusic&&this.currBgMusic.isPaused&&this.currBgMusic.play()}};var Bo=[{title:"Spaceship Emergency",imageUrl:"/locations/planet-y-orbit/crashing.png",filenames:["../../assets/mockChapter0.txt","../../assets/mockChapter0.1.txt"]},{title:"Alien Attack",imageUrl:"/locations/telebay/emergency.png",filenames:["../../assets/mockChapter1.txt"]},{title:"Jedi Master",imageUrl:"/locations/classroom/normal.png",filenames:["../../assets/mockChapter2.txt"]}];class Go{static parse(e){Go.awardsMapping=new Map;const t=ta.splitToLines(e);return ta.splitToParagraph(t).forEach((e=>{let[,t]=e;Go.parseAwardParagraphs(t)})),this.awardsMapping}static parseAwardParagraphs(e){ta.splitToParagraph(e).forEach((e=>{let[t,s]=e;const[n,i,a,r]=ta.splitWithLimit(s[0],",",3);Go.awardsMapping.set(t,{id:t,assetKey:n,assetPath:Zn(i,!0),title:a,description:r,completed:!0})}))}}Go.awardsMapping=void 0;var Fo=Go;class Ho{static parse(e){Ho.backgroundMapping=new Map;const t=ta.splitToLines(e);return ta.splitToParagraph(t).forEach((e=>{let[t,s]=e;Ho.backgroundMapping.set(t,Zn(s[0],!0))})),Ho.backgroundMapping}}Ho.backgroundMapping=void 0;var Vo=Ho;class Wo extends Phaser.Scene{constructor(){super("Entry")}async preload(){zo.getInstance().setCurrentSceneRef(this),this.preloadAssets(),la(this),await zo.getInstance().loadGameChapters(),await zo.getInstance().loadRoomCode(),await zo.getInstance().getSaveManager().loadLastSaveState()}async create(){await this.preloadAwards(),await zo.getInstance().getUserStateManager().loadUserState(),await this.preloadRoomPreviewBackgrounds(),this.applyLoadedSettings(),this.scene.start("MainMenu")}applyLoadedSettings(){const e=zo.getInstance().getSaveManager().getSettings();zo.getInstance().getSoundManager().applyUserSettings(e)}async preloadAwards(){const e=this.cache.text.get(Ur.awardsMapping.key)||"",t=Fo.parse(e);zo.getInstance().setAwardsMapping(t),await Promise.all(Array.from(t.values()).map((async e=>await kr(this,e.assetKey,e.assetPath))))}async preloadRoomPreviewBackgrounds(){const e=this.cache.text.get(Ur.roomPreviewMapping.key)||"",t=Vo.parse(e);zo.getInstance().setRoomPreviewMapping(t),await Promise.all(Array.from(t.entries()).map((async e=>{let[t,s]=e;return await kr(this,t,s)})))}preloadAssets(){zo.getInstance().getSoundManager().loadSoundAssetMap(Xn),Object.values(Wn).forEach((e=>this.load.image(e.key,Zn(e.path,!1)))),Object.values(fn).forEach((e=>this.load.bitmapFont(e.key,e.pngPath,e.fntPath))),Object.values(Ur).forEach((e=>this.load.text(e.key,e.path)))}}var qo=Wo;class $o{constructor(){this.collectibles=void 0,this.achievements=void 0,this.assessments=void 0,this.getCollectibles=()=>Array.from(this.collectibles),this.getAchievements=()=>Array.from(this.achievements),this.getAssessments=()=>Array.from(this.assessments),this.collectibles=new Set([]),this.achievements=new Set([]),this.assessments=new Set([])}async loadUserState(){zo.getInstance().isGameType(Xo.Simulator)||(await this.loadAchievements(),await this.loadAssessments(),this.collectibles=new Set(zo.getInstance().getSaveManager().getLoadedUserState().collectibles))}addCollectible(e){this.collectibles.add(e)}async loadAssessments(){const e=await Object(Io.k)(zo.getInstance().getAccountInfo());this.assessments=new Set((e||[]).filter((e=>"submitted"===e.status)).sort(((e,t)=>e.closeAt<=t.closeAt?-1:1)).map((e=>e.id.toString())))}async isInUserState(e,t){if(zo.getInstance().isGameType(Xo.Game))return this[e].has(t);return 0===await _i(Ri.getInstance().getGameManager(),`${ta.capitalize(e)} ${t}?`,["Yes","No"])}async loadAchievements(){const e=zo.getInstance().getAwardsMapping(),t=zo.getInstance().getAchievements(),s=zo.getInstance().getGoals(),n=new Map;s.forEach((e=>n.set(e.uuid,e))),t.forEach((t=>{const s=t.uuid.toString(),i=t.goalUuids.reduce(((e,t)=>{var s;return e&&!(null===(s=n.get(t))||void 0===s||!s.completed)}),!0),a=e.get(s);if(a){const e={...a,completed:i};zo.getInstance().addAwardMapping(e.assetKey,e),this.achievements.add(e.assetKey)}}))}}let Xo;!function(e){e.Simulator="Simulator",e.Game="Game"}(Xo||(Xo={}));class zo extends bn.Game{constructor(e,t){super(e),this.global=void 0,this.isMounted=void 0,this.getAwardsMapping=()=>ei(this.global.awardsMapping),this.getAccountInfo=()=>ei(this.global.accountInfo),this.getAchievements=()=>ei(this.global.achievements),this.getSoundManager=()=>ei(this.global.soundManager),this.getGoals=()=>ei(this.global.goals),this.getRoomPreviewMapping=()=>ei(this.global.roomPreviewMapping),this.getUserStateManager=()=>ei(this.global.userStateManager),this.getSaveManager=()=>ei(this.global.saveManager),this.getCurrentSceneRef=()=>ei(this.global.currentSceneRef),this.isGameType=e=>this.global.gameType===e,this.getSSChapterSimFilenames=()=>this.global.ssChapterSimFilenames,this.getIsUsingMock=()=>this.global.isUsingMock,this.getRoomCode=()=>this.global.roomCode,this.getGameChapters=()=>this.global.isUsingMock?Bo:this.global.gameChapters,zo.instance=this,this.isMounted=!0,this.global={awardsMapping:new Map,accountInfo:void 0,achievements:void 0,currentSceneRef:void 0,gameChapters:[],gameType:t,goals:void 0,isUsingMock:!1,roomCode:"",roomPreviewMapping:new Map,saveManager:new cr,setStorySimState:vn.nullFunction,soundManager:new Uo,ssChapterSimFilenames:[],userStateManager:new $o}}stopAllSounds(){this.sound.stopAll()}setAccountInfo(e){this.global.accountInfo=e}setAchievements(e){this.global.achievements=e}setAwardsMapping(e){this.global.awardsMapping=e}addAwardMapping(e,t){this.global.awardsMapping.set(e,t)}setGoals(e){this.global.goals=e}setStorySimStateSetter(e){this.setStorySimState=e}setRoomPreviewMapping(e){this.global.roomPreviewMapping=e}async loadGameChapters(){this.global.gameChapters=await async function(){const e=Kn.a.getState().session.courseId,t=await Object(Io.U)(`courses/${e}/stories`,"GET",{accessToken:zo.getInstance().getAccountInfo().accessToken,refreshToken:zo.getInstance().getAccountInfo().refreshToken,shouldAutoLogout:!1,shouldRefresh:!0});if(!t)return[];const s=200===t.status?await t.json():[],n=A.a.sortBy(s,(e=>new Date(e.openAt)));return n.forEach((e=>e.filenames=e.filenames.map(Nr))),n}()}async loadRoomCode(){this.global.roomCode=await Lo()}setStorySimState(e){this.global.setStorySimState(e)}setCurrentSceneRef(e){this.global.currentSceneRef=e}toggleUsingMock(e){this.global.isUsingMock=void 0===e?!this.global.isUsingMock:e}setChapterSimStack(e){this.global.ssChapterSimFilenames=e.reverse()}}zo.instance=void 0,zo.getInstance=()=>ei(zo.instance);const Yo={debug:!0,type:bn.CANVAS,width:yn.x,height:yn.y,physics:{default:"arcade"},scale:{mode:bn.Scale.FIT,parent:"game-display"},fps:{target:24},scene:[qo,wo,Mo,fo,or,Oo,Cr,No,Ar]};async function Ko(e){if("student"!==zo.getInstance().getAccountInfo().role)return;const t={method:"PUT",headers:Qo(zo.getInstance().getAccountInfo().accessToken),body:JSON.stringify({gameStates:e})},s=await fetch(`${Se.b.backendUrl}/v2/courses/${ti()}/user/game_states`,t);return s&&s.ok?s:void 0}function Qo(e){const t=new Headers;return t.append("Accept","application/json"),t.append("Authorization",`Bearer ${e}`),t.append("Content-Type","application/json"),t}var Jo=function(){const e=Object(j.f)((e=>e.session)),t=Object(r.c)(),s=Object(j.f)((e=>e.achievement.achievements)),n=Object(j.f)((e=>e.achievement.goals)),[i,a]=f.useState(!1),[o,c]=f.useState(!1);return f.useEffect((()=>{t(Object(Je.getAchievements)()),t(Object(Je.getOwnGoals)())}),[t]),f.useEffect((()=>{const e=new zo(Yo,Xo.Game);return()=>{e.isMounted=!1,e.stopAllSounds(),e.destroy(!0)}}),[]),f.useEffect((()=>{zo.getInstance().setAccountInfo({accessToken:e.accessToken,refreshToken:e.refreshToken,role:e.role,name:e.name}),zo.getInstance().setAchievements(s),zo.getInstance().setGoals(n)}),[e,s,n]),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("div",{id:"game-display"}),i&&Object(se.jsxs)("div",{className:"Horizontal",children:[Object(se.jsx)("button",{onClick:async()=>{await Ko({}),alert("Game cleared! Please refresh")},children:"Clear data"}),Object(se.jsx)("button",{onClick:()=>{c(!o),zo.getInstance().toggleUsingMock()},children:o?"Use Game Chapters":"Use Mock Chapters"})]})]})},Zo=s(386);function ec(e){return t=>Object(se.jsx)(h.a,{onClick:s=>{try{e.onClick&&e.onClick(s)}catch(n){throw s.preventDefault(),n}s.defaultPrevented||0!==s.button||e.target&&"_self"!==e.target||s.metaKey||s.altKey||s.ctrlKey||s.shiftKey||(s.preventDefault(),t.navigate())},href:t.href,...e})}function tc(e){let{to:t,replace:s,...n}=e;return Object(se.jsx)(k.a,{to:t,replace:s,component:ec(n)})}var sc=e=>{const t=e.courseRegId&&e.courseRegId===e.data.studentId,s=t||"submitted"===e.data.submissionStatus,n="submitted"===e.data.submissionStatus&&e.courseRegId&&(e.courseRegId===e.data.groupLeaderId||t||e.role===O.a.Admin);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(tc,{to:`/courses/${e.courseId}/grading/${e.data.submissionId}`,icon:"annotation",minimal:!0,title:"Grade"}),Object(se.jsx)(h.b,{icon:"refresh",minimal:!0,onClick:async()=>{await Object(nt.b)({contents:Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("p",{children:"Reautograde this submission?"}),Object(se.jsx)("p",{children:"Note: all manual adjustments will be reset to 0."})]}),positiveIntent:"danger",positiveLabel:"Reautograde"})&&e.handleReautogradeSubmission(e.data.submissionId)},disabled:!s,title:"Reautograde"}),Object(se.jsx)(h.b,{icon:"arrow-left",minimal:!0,onClick:async()=>{await Object(nt.b)({contents:"Are you sure you want to unsubmit?",positiveIntent:"danger",positiveLabel:"Unsubmit"})&&e.handleUnsubmitSubmission(e.data.submissionId)},disabled:!n,title:"Unsubmit"})]})};var nc=e=>{let t,s,n;switch(e.data.gradingStatus){case H.c.graded:t=E.a.TICK,s=`Fully graded: ${e.data.gradedCount} of\n          ${e.data.questionCount}`,n=g.a.SUCCESS;break;case H.c.grading:t=E.a.TIME,s=`Partially graded: ${e.data.gradedCount} of\n          ${e.data.questionCount}`,n=g.a.WARNING;break;case H.c.none:t=E.a.CROSS,s=`Not graded: ${e.data.gradedCount} of\n          ${e.data.questionCount}`,n=g.a.DANGER;break;default:t=E.a.DISABLE,s="Not applicable",n=g.a.PRIMARY}return Object(se.jsx)("div",{children:Object(se.jsx)(w.a,{content:s,placement:S.a.LEFT,hoverOpenDelay:10,lazy:!0,children:Object(se.jsx)(h.w,{icon:t,intent:n})})})},ic=s(373),ac=s.n(ic);const rc="grading-editor-button",oc={header:[E.a.HEADER,"Header Styles"],bold:[E.a.BOLD,"Bold"],italic:[E.a.ITALIC,"Italic"],strikethrough:[E.a.STRIKETHROUGH,"Strikethrough"],link:[E.a.LINK,"Link"],quote:[E.a.CITATION,"Quote"],code:[E.a.CODE,"Monospaced"],image:[E.a.MEDIA,"Image"],"unordered-list":[E.a.UNGROUP_OBJECTS,"Bullets"],"ordered-list":[E.a.NUMBERED_LIST,"Numbering"],"checked-list":[E.a.SQUARE,"Checkboxes"]},cc=e=>{switch(e){case"header":case"bold":case"italic":case"strikethrough":case"link":case"quote":case"code":case"image":case"unordered-list":case"ordered-list":case"checked-list":const[t,s]=oc[e];return{iconName:t,title:s};default:return{iconName:E.a.HELP}}};var lc=e=>{const[t,s]=Object(f.useState)(e.xpAdjustment.toString()),[n,i]=Object(f.useState)(e.comments),[a,r]=Object(f.useState)("write"),[c,l]=Object(f.useState)(!1);Object(f.useEffect)((()=>{d()}),[e.submissionId,e.questionId]);const d=()=>{s(e.xpAdjustment.toString()),i(e.comments),r("write"),l(!1)};const u=s=>()=>{const i=Object(we.b)(t||void 0)||void 0,a=e.initialXp+(i||0);a<0||a>e.maxXp?Object(me.e)(`XP ${a.toString()} is out of bounds. Maximum xp is ${e.maxXp.toString()}.`):s(e.submissionId,e.questionId,i,n)},p=()=>{const s=Object(we.b)(t||void 0);return e.xpAdjustment!==s||e.comments!==n},m=p(),b={intent:m?g.a.WARNING:g.a.NONE,minimal:!m,className:rc},v={intent:m?g.a.DANGER:g.a.NONE,minimal:!m,className:rc},y={intent:m?g.a.SUCCESS:g.a.NONE,minimal:!m,className:rc},x=e.initialXp+(Object(we.b)(t||void 0)||0),j=`${e.initialXp>0?"-":""}${e.initialXp} to ${e.maxXp-e.initialXp}`;return Object(se.jsxs)("div",{className:"GradingEditor",children:[!c&&m?Object(se.jsx)(o.a,{message:"You have unsaved changes. Are you sure you want to leave?"}):null,Object(se.jsx)("div",{className:"grading-editor-header",children:Object(se.jsxs)(h.q,{children:["Currently Grading: ",e.studentName]})}),null!==e.solution?Object(se.jsx)("div",{className:"grading-editor-marking-scheme",children:Object(se.jsxs)(h.M,{children:[e.solution.toString()," "]})}):null,Object(se.jsx)("div",{className:"grading-editor-container",children:Object(se.jsxs)("div",{className:"grading-editor-xp",children:[Object(se.jsxs)("div",{className:"autograder-xp",children:[Object(se.jsx)("div",{children:"Autograder XP:"}),Object(se.jsxs)("div",{children:[`${e.initialXp} / ${e.maxXp}`," ",Object(se.jsx)(h.b,{icon:"refresh",small:!0,minimal:!0,onClick:async()=>{await Object(nt.b)({contents:Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("p",{children:"Reautograde this answer?"}),Object(se.jsx)("p",{children:"Note: manual adjustments will be reset to 0."})]}),positiveLabel:"Reautograde",positiveIntent:"danger"})&&e.handleReautogradeAnswer(e.submissionId,e.questionId)}})]})]}),Object(se.jsxs)("div",{className:"xp-adjustment",children:[Object(se.jsx)("div",{children:"XP adjustment:"}),Object(se.jsx)("div",{children:Object(se.jsx)(h.H,{className:"adjustment-input",onValueChange:(e,t)=>{s(t)},value:t||"",buttonPosition:S.a.RIGHT,fill:!0,placeholder:j,intent:x<0||x>e.maxXp?g.a.DANGER:g.a.NONE,min:0-e.initialXp,max:e.maxXp>e.initialXp?e.maxXp-e.initialXp:void 0,stepSize:50,minorStepSize:25,majorStepSize:100})})]}),Object(se.jsxs)("div",{className:"final-xp",children:[Object(se.jsx)("div",{children:"Final XP:"}),Object(se.jsx)("div",{children:`${x} / ${e.maxXp}`})]})]})}),Object(se.jsx)("div",{className:"react-mde-parent",children:Object(se.jsx)(ac.a,{value:n,onChange:i,selectedTab:a,onTabChange:e=>r(e),generateMarkdownPreview:e=>Promise.resolve(Object(se.jsx)(ee.a,{content:e,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0,openLinksInNewWindow:!0})),minEditorHeight:200,maxEditorHeight:1e3,minPreviewHeight:240,getIcon:function(e){const t=cc(e);return Object(se.jsx)(h.w,{icon:t.iconName,htmlTitle:t.title})}})}),"write"===a&&Object(se.jsxs)("div",{className:"grading-editor-draft-buttons",children:[Object(se.jsx)("div",{className:"grading-editor-save-button",children:Object(se.jsx)(J.a,{label:"Save Changes",icon:E.a.FLOPPY_DISK,onClick:u(e.handleGradingSave),options:b})}),Object(se.jsx)("div",{className:"grading-editor-discard-button",children:Object(se.jsx)(J.a,{label:"Discard Changes",icon:E.a.TRASH,onClick:()=>{p()&&!window.confirm("This will reset the editor. Are you sure?")||(s(e.xpAdjustment.toString()),i(e.comments),Object(me.d)("Discarded!",1e3))},options:v})})]}),Object(se.jsx)("div",{className:"grading-editor-save-continue-button",children:Object(se.jsx)(J.a,{label:"Save and Continue",icon:E.a.UPDATED,onClick:u(((t,s,n,i)=>{l(!0),e.handleGradingSaveAndContinue(t,s,n,i)})),options:y})}),e.graderName&&e.gradedAt&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.i,{}),Object(se.jsxs)("div",{className:"grading-editor-last-graded-details",children:["Last edited by ",Object(se.jsx)("b",{children:e.graderName})," on ",ke(e.gradedAt)]})]})]})};var dc=Object(r.b)(null,(e=>Object(c.b)({handleGradingSave:u.submitGrading,handleGradingSaveAndContinue:u.submitGradingAndContinue,handleReautogradeAnswer:u.reautogradeAnswer},e)))(lc);class uc extends f.Component{constructor(e){super(e),this.sideContentProps=(e,t)=>{var s;const n=[{label:`Grading: Question ${t+1}`,iconName:E.a.TICK,body:Object(se.jsx)(dc,{solution:e.grading[t].question.solution,questionId:e.grading[t].question.id,submissionId:e.submissionId,initialXp:e.grading[t].grade.xp,xpAdjustment:e.grading[t].grade.xpAdjustment,maxXp:e.grading[t].question.maxXp,studentName:e.grading[t].student.name,comments:null!==(s=e.grading[t].grade.comments)&&void 0!==s?s:"",graderName:e.grading[t].grade.grader?e.grading[t].grade.grader.name:void 0,gradedAt:e.grading[t].grade.grader?e.grading[t].grade.gradedAt:void 0}),id:Ce.b.grading},{label:`Question ${t+1}`,iconName:E.a.NINJA,body:Object(se.jsx)(ee.a,{content:e.grading[t].question.content}),id:Ce.b.questionOverview},{label:"Autograder",iconName:E.a.AIRPLANE,body:Object(se.jsx)(de,{testcases:e.editorTestcases,autogradingResults:e.autogradingResults,handleTestcaseEval:this.props.handleTestcaseEval,workspaceLocation:"grading"}),id:Ce.b.autograder}];e.grading[t].question.library.external.symbols.includes("get_matrix")&&n.push({label:"Tone Matrix",iconName:E.a.GRID_VIEW,body:Object(se.jsx)(Oe,{}),id:Ce.b.toneMatrix});return{onChange:(e,t,s)=>{e!==t&&this.setState({selectedTab:e})},tabs:{beforeDynamicTabs:n,afterDynamicTabs:[]},workspaceLocation:"grading"}},this.controlBarProps=e=>{const t=`/courses/${this.props.courseId}/grading`,s=t+`/${this.props.submissionId}`,n=[e+1,this.props.grading.length],i=Object(se.jsx)($.a,{onClickNext:()=>Ee.a.push(s+`/${(e+1).toString()}`),onClickReturn:()=>Ee.a.push(t),questionProgress:n},"next_question"),a=Object(se.jsx)(X.a,{onClick:()=>Ee.a.push(s+`/${(e-1).toString()}`),questionProgress:n},"previous_question"),r=Object(se.jsx)(z.a,{questionProgress:n},"question_view");return{editorButtons:[Object(se.jsx)(K.a,{handleEditorEval:this.handleEval},"run")],flowButtons:[a,r,i]}},this.state={selectedTab:Ce.b.grading},this.handleEval=this.handleEval.bind(this)}componentDidMount(){if(this.props.handleGradingFetch(this.props.submissionId),!this.props.grading)return;let e=this.props.questionId;this.props.questionId>=this.props.grading.length&&(e=this.props.grading.length-1);const t=this.props.grading[e].question;let s="";t.type===H.d.programming&&(s=t.answer?t.answer:t.solutionTemplate||""),this.props.handleEditorValueChange(s)}componentDidUpdate(){if(void 0===this.props.grading)return;const e=this.props.questionId;void 0===this.props.grading[e]?Ee.a.push(`/courses/${this.props.courseId}/grading`):this.checkWorkspaceReset(this.props)}render(){var e,t,s,n,i,a,r,o;if(void 0===this.props.grading)return Object(se.jsx)(h.G,{className:x()("WorkspaceParent",p.a.DARK),description:"Getting assessment ready...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})});const c=this.props.questionId>=this.props.grading.length?this.props.grading.length-1:this.props.questionId,l=this.props.grading[c].question,d={controlBarProps:this.controlBarProps(c),editorContainerProps:l.type===H.d.programming||l.type===H.d.voting?{editorVariant:"normal",editorTabs:this.props.editorTabs.map(Z.a),editorSessionId:"",handleDeclarationNavigate:this.props.handleDeclarationNavigate,handleEditorEval:this.handleEval,handleEditorValueChange:this.props.handleEditorValueChange,handleEditorUpdateBreakpoints:this.props.handleEditorUpdateBreakpoints,handlePromptAutocomplete:this.props.handlePromptAutocomplete,isEditorAutorun:!1,sourceChapter:I.Chapter.CLANG,sourceVariant:null!==(e=null===l||void 0===l||null===(t=l.library)||void 0===t?void 0:t.variant)&&void 0!==e?e:I.Variant.DEFAULT,externalLibraryName:(null===l||void 0===l||null===(s=l.library)||void 0===s||null===(n=s.external)||void 0===n?void 0:n.name)||"NONE"}:void 0,handleSideContentHeightChange:this.props.handleSideContentHeightChange,mcqProps:{mcq:l,handleMCQSubmit:e=>{}},sideBarProps:{tabs:[]},sideContentHeight:this.props.sideContentHeight,sideContentProps:this.sideContentProps(this.props,c),replProps:{handleBrowseHistoryDown:this.props.handleBrowseHistoryDown,handleBrowseHistoryUp:this.props.handleBrowseHistoryUp,handleReplEval:this.props.handleReplEval,handleReplValueChange:this.props.handleReplValueChange,output:this.props.output,replValue:this.props.replValue,sourceChapter:I.Chapter.CLANG,sourceVariant:null!==(i=null===l||void 0===l||null===(a=l.library)||void 0===a?void 0:a.variant)&&void 0!==i?i:I.Variant.DEFAULT,externalLibrary:(null===l||void 0===l||null===(r=l.library)||void 0===r||null===(o=r.external)||void 0===o?void 0:o.name)||"NONE",replButtons:this.replButtons()}};return Object(se.jsx)("div",{className:x()("WorkspaceParent",p.a.DARK),children:Object(se.jsx)(_e.a,{...d})})}checkWorkspaceReset(e){var t;const s=e.submissionId,n=e.questionId;if(e.storedSubmissionId===s&&e.storedQuestionId===n)return;const i=e.grading[n].question;let a=[],r="",o="",c="",l=[];if(i.type===H.d.programming){const e=i;a=e.autogradingResults,o=e.prepend,c=e.postpend,l=e.testcases,r=e.answer,r||(r=e.solutionTemplate)}e.handleEditorUpdateBreakpoints([]),e.handleUpdateCurrentSubmissionId(s,n),e.handleResetWorkspace({autogradingResults:a,editorTabs:[{value:r,prependValue:o,postpendValue:c,highlightedLines:[],breakpoints:[]}],editorTestcases:l}),e.handleChangeExecTime(null!==(t=i.library.execTimeMs)&&void 0!==t?t:O.l.grading.execTime),e.handleClearContext(i.library,!0),e.handleUpdateHasUnsavedChanges(!1),r&&e.handleEditorValueChange(r)}replButtons(){const e=Object(se.jsx)(W.a,{handleReplOutputClear:this.props.handleReplOutputClear},"clear_repl");return[Object(se.jsx)(q.a,{handleReplEval:this.props.handleReplEval,isRunning:this.props.isRunning},"eval_repl"),e]}handleEval(){this.props.handleEditorEval(),this.state.selectedTab===Ce.b.autograder&&this.props.handleRunAllTestcases()}}var hc=uc;const pc="grading";var gc=Object(r.b)(((e,t)=>({autogradingResults:e.workspaces.grading.autogradingResults,activeEditorTabIndex:e.workspaces.grading.activeEditorTabIndex,editorTabs:e.workspaces.grading.editorTabs,editorTestcases:e.workspaces.grading.editorTestcases,grading:e.session.gradings.get(t.submissionId),hasUnsavedChanges:e.workspaces.grading.hasUnsavedChanges,isRunning:e.workspaces.grading.isRunning,isDebugging:e.workspaces.grading.isDebugging,enableDebugging:e.workspaces.grading.enableDebugging,output:e.workspaces.grading.output,replValue:e.workspaces.grading.replValue,sideContentHeight:e.workspaces.grading.sideContentHeight,storedSubmissionId:e.workspaces.grading.currentSubmission,storedQuestionId:e.workspaces.grading.currentQuestion,courseId:e.session.courseId})),(e=>Object(c.b)({handleBrowseHistoryDown:()=>Object(R.browseReplHistoryDown)(pc),handleBrowseHistoryUp:()=>Object(R.browseReplHistoryUp)(pc),handleClearContext:(e,t)=>Object(R.beginClearContext)(pc,e,t),handleDeclarationNavigate:e=>Object(R.navigateToDeclaration)(pc,e),handleEditorEval:()=>Object(R.evalEditor)(pc),handleEditorValueChange:e=>Object(R.updateEditorValue)(e,pc),handleEditorUpdateBreakpoints:e=>Object(R.setEditorBreakpoint)(e,pc),handleGradingFetch:u.fetchGrading,handleInterruptEval:()=>Object(Os.beginInterruptExecution)(pc),handleReplEval:()=>Object(R.evalRepl)(pc),handleReplOutputClear:()=>Object(R.clearReplOutput)(pc),handleReplValueChange:e=>Object(R.updateReplValue)(e,pc),handleSendReplInputToOutput:e=>Object(R.sendReplInputToOutput)(e,pc),handleResetWorkspace:e=>Object(R.resetWorkspace)(pc,e),handleChangeExecTime:e=>Object(R.changeExecTime)(e,pc),handleSideContentHeightChange:e=>Object(R.changeSideContentHeight)(e,pc),handleTestcaseEval:e=>Object(R.evalTestcase)(pc,e),handleRunAllTestcases:()=>Object(R.runAllTestcases)(pc),handleUpdateCurrentSubmissionId:R.updateCurrentSubmissionId,handleUpdateHasUnsavedChanges:e=>Object(R.updateHasUnsavedChanges)(pc,e),handleDebuggerPause:()=>Object(Os.beginDebuggerPause)(pc),handleDebuggerResume:()=>Object(Os.debuggerResume)(pc),handleDebuggerReset:()=>Object(Os.debuggerReset)(pc),handlePromptAutocomplete:(e,t,s)=>Object(R.promptAutocomplete)(pc,e,t,s)},e)))(hc);var mc=e=>{if(e.data.maxXp||e.data.xpBonus){const t=`Initial XP: ${e.data.initialXp}\n        (${e.data.xpBonus>0?`+${e.data.xpBonus} bonus `:""}\n        ${e.data.xpAdjustment>=0?"+":""}${e.data.xpAdjustment} adj.)`;return Object(se.jsx)("div",{children:Object(se.jsx)(w.a,{content:t,placement:S.a.LEFT,hoverOpenDelay:10,lazy:!0,children:`${e.data.currentXp+e.data.xpBonus} / ${e.data.maxXp}`})})}return Object(se.jsx)("div",{children:"No Exp"})};class bc extends f.Component{constructor(e){super(e),this.columnDefs=void 0,this.defaultColumnDefs=void 0,this.gridApi=void 0,this.GradingStatus=e=>Object(se.jsx)(nc,{data:e.data}),this.NotificationBadgeCell=e=>Object(se.jsx)(Ve,{notificationFilter:Ue(e.data.submissionId)}),this.GradingExp=e=>Object(se.jsx)(mc,{data:e.data}),this.resizeGrid=()=>{this.gridApi&&this.gridApi.sizeColumnsToFit()},this.updatePaginationState=()=>{if(this.gridApi){const e=this.gridApi.paginationGetTotalPages(),t=0===e?0:this.gridApi.paginationGetCurrentPage()+1;this.setState({currPage:t,maxPages:e,rowCountString:this.formatRowCountString(25,t,e,this.gridApi.paginationGetRowCount()),isBackDisabled:0===e||1===t,isForwardDisabled:0===e||t===e})}},this.formatRowCountString=(e,t,s,n)=>0===s?"(none)":t!==s?`(#${e*t-24} - #${e*t})`:`(#${e*t-24} - #${n})`,this.handleFilterKeypress=e=>{"Enter"===e.key&&this.applyFilter(e.currentTarget.value)},this.handleApplyFilter=e=>{this.applyFilter(e.target.value)},this.handleGroupsFilter=()=>{this.gridApi&&(this.setState({groupFilterEnabled:!this.state.groupFilterEnabled}),this.props.handleFetchGradingOverviews(this.state.groupFilterEnabled))},this.applyFilter=e=>{var t;null===(t=this.gridApi)||void 0===t||t.setQuickFilter(e)},this.onGridReady=e=>{this.gridApi=e.api,this.gridApi.sizeColumnsToFit(),this.updatePaginationState()},this.exportCSV=()=>{this.gridApi&&this.gridApi.exportDataAsCsv({fileName:`SA submissions (${(new Date).toISOString()}).csv`,columnKeys:["assessmentName","assessmentCategory","studentName","groupName","submissionStatus","gradingStatus","questionCount","gradedCount","initialGrade","gradeAdjustment","currentGrade","maxGrade","initialXp","xpAdjustment","currentXp","maxXp","xpBonus"]})},this.changePaginationView=e=>()=>{if(this.gridApi)switch(e){case"first":return this.gridApi.paginationGoToFirstPage();case"prev":return this.gridApi.paginationGoToPreviousPage();case"next":return this.gridApi.paginationGoToNextPage();case"last":return this.gridApi.paginationGoToLastPage()}},this.sortSubmissionsByNotifications=()=>this.props.gradingOverviews?this.props.gradingOverviews.map((e=>({...e,notifications:Ue(e.submissionId)(this.props.notifications)}))).sort(((e,t)=>t.notifications.length-e.notifications.length)):[],this.columnDefs=[{headerName:"",field:"notifications",cellRendererFramework:this.NotificationBadgeCell,width:30,filter:!1,resizable:!1,sortable:!1,suppressSizeToFit:!0},{headerName:"Assessment Name",field:"assessmentName"},{headerName:"Category",field:"assessmentType",maxWidth:100},{headerName:"Student Name",field:"studentName"},{headerName:"Group",field:"groupName",maxWidth:100},{headerName:"Status",field:"submissionStatus",maxWidth:100,valueFormatter:e=>{const t=e.value;return t.charAt(0).toUpperCase()+t.slice(1)},cellStyle:e=>"submitted"===e.data.submissionStatus?{backgroundColor:Zo.Colors.GREEN5}:{backgroundColor:Zo.Colors.RED5}},{headerName:"Grading",field:"gradingStatus",cellRendererFramework:this.GradingStatus,maxWidth:110},{headerName:"XP",field:"",cellRendererFramework:this.GradingExp,maxWidth:100,comparator:(e,t,s,n,i)=>s&&n?s.data.currentXp-n.data.currentXp:e-t},{headerName:"Actions",colId:"Actions",width:120,field:"",cellRendererFramework:sc,cellRendererParams:{courseId:this.props.courseId,courseRegId:this.props.courseRegId,handleUnsubmitSubmission:this.props.handleUnsubmitSubmission,handleReautogradeSubmission:this.props.handleReautogradeSubmission,role:this.props.role},filter:!1,resizable:!1,sortable:!1,suppressSizeToFit:!0,cellStyle:{padding:0}},{headerName:"Question Count",field:"questionCount",hide:!0},{headerName:"Questions Graded",field:"gradedCount",hide:!0},{headerName:"Initial Grade",field:"initialGrade",hide:!0},{headerName:"Grade Adjustment",field:"gradeAdjustment",hide:!0},{headerName:"Initial XP",field:"initialXp",hide:!0},{headerName:"XP Adjustment",field:"xpAdjustment",hide:!0},{headerName:"Current Grade",field:"currentGrade",hide:!0},{headerName:"Max Grade",field:"maxGrade",hide:!0},{headerName:"Current XP (excl. bonus)",field:"currentXp",hide:!0},{headerName:"Max XP",field:"maxXp",hide:!0},{headerName:"Bonus XP",field:"xpBonus",hide:!0}],this.defaultColumnDefs={filter:!0,resizable:!0,sortable:!0},this.state={groupFilterEnabled:!1,currPage:1,maxPages:1,rowCountString:"(none)",isBackDisabled:!0,isForwardDisabled:!0}}render(){const e=Object(we.b)(this.props.match.params.submissionId),t=Object(we.b)(this.props.match.params.questionId)||0;if(null!==e){const s={submissionId:e,questionId:t};return Object(se.jsx)(gc,{...s})}const s=Object(se.jsx)(h.G,{className:"Grading",description:"Fetching submissions...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})}),n=this.sortSubmissionsByNotifications().map((e=>e.studentName?e:{...e,studentName:"(user has yet to log in)"})),i=Object(se.jsxs)("div",{className:"grading-controls",children:[Object(se.jsx)(h.n,{label:"Filter:",labelFor:"text-input",inline:!0,children:Object(se.jsx)(h.y,{id:"filterBar",large:!1,leftIcon:"filter",placeholder:"Enter any text (e.g. mission)",onKeyPress:this.handleFilterKeypress,onBlur:this.handleApplyFilter})}),Object(se.jsxs)("div",{className:"GridControls ag-grid-controls",children:[Object(se.jsx)("div",{className:"left-controls",children:Object(se.jsx)(h.b,{active:this.state.groupFilterEnabled,icon:E.a.GIT_REPO,intent:this.state.groupFilterEnabled?g.a.PRIMARY:g.a.NONE,onClick:this.handleGroupsFilter,children:Object(se.jsx)("span",{className:"hidden-xs",children:"Show all groups"})})}),Object(se.jsxs)("div",{className:"centre-controls",children:[Object(se.jsx)(h.b,{icon:E.a.CHEVRON_BACKWARD,onClick:this.changePaginationView("first"),minimal:!0,disabled:this.state.isBackDisabled}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_LEFT,onClick:this.changePaginationView("prev"),minimal:!0,disabled:this.state.isBackDisabled}),Object(se.jsxs)(h.b,{className:"pagination-details hidden-xs",disabled:!0,minimal:!0,children:[Object(se.jsx)("div",{children:`Page ${this.state.currPage} of ${this.state.maxPages}`}),Object(se.jsx)("div",{children:this.state.rowCountString})]}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_RIGHT,onClick:this.changePaginationView("next"),minimal:!0,disabled:this.state.isForwardDisabled}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_FORWARD,onClick:this.changePaginationView("last"),minimal:!0,disabled:this.state.isForwardDisabled})]}),Object(se.jsx)("div",{className:"right-controls",children:Object(se.jsx)(h.b,{icon:E.a.EXPORT,onClick:this.exportCSV,children:Object(se.jsx)("span",{className:"hidden-xs",children:"Export to CSV"})})})]})]}),a=Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:this.columnDefs,defaultColDef:this.defaultColumnDefs,onGridReady:this.onGridReady,onGridSizeChanged:this.resizeGrid,onPaginationChanged:this.updatePaginationState,rowData:n,rowHeight:30,pagination:!0,paginationPageSize:25,suppressCellSelection:!0,suppressMovableColumns:!0,suppressPaginationPanel:!0})}),r=Object(se.jsxs)("div",{className:"Grading",children:[i,Object(se.jsx)(h.i,{}),a]});return Object(se.jsx)("div",{children:Object(se.jsx)(Ne.a,{loadContentDispatch:this.props.handleFetchGradingOverviews,display:void 0===this.props.gradingOverviews?s:r,fullWidth:!1})})}componentDidUpdate(e,t){this.gridApi&&this.props.notifications.length!==e.notifications.length&&this.gridApi.setRowData(this.sortSubmissionsByNotifications())}}var fc=bc;var vc=Object(r.b)((e=>({gradingOverviews:e.session.gradingOverviews,courseRegId:e.session.courseRegId,notifications:e.session.notifications,role:e.session.role,courseId:e.session.courseId})),(e=>Object(c.b)({handleAcknowledgeNotifications:u.acknowledgeNotifications,handleFetchGradingOverviews:u.fetchGradingOverviews,handleUnsubmitSubmission:u.unsubmitSubmission,handleReautogradeSubmission:u.reautogradeSubmission},e)))(fc),yc=s(188);var xc=e=>{const{handleUpdateSublanguage:t}=e,{sourceChapter:s,sourceVariant:n}=e,[i,a]=f.useState(O.n[0]),[r,o]=f.useState(!1),c=f.useCallback((e=>{o(!0),a(e)}),[o,a]),l=f.useCallback((()=>{o(!1)}),[o]),d=f.useCallback((()=>{o(!1),t(i)}),[i,o,t]),u=f.useCallback(((e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{onClick:s,text:e.displayName},e.displayName)}),[]),m=f.useCallback((e=>{let{itemsParentRef:t,renderItem:s}=e;const n=O.h.map(s),i=O.p.map(s);return Object(se.jsxs)(h.A,{ulRef:t,children:[n,Object(se.jsx)(h.B,{text:"Variants",icon:"cog",children:i},"variant-menu")]})}),[]),b=ct.a.ofType(),v=Object(se.jsxs)(h.h,{canEscapeKeyClose:!0,canOutsideClickClose:!0,className:"change-default-lang-dialog",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:r,onClose:l,title:"Updating default Source sublanguage",children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:["Are you sure you want to update the ",Object(se.jsx)("b",{children:"default Playground Source sublanguage"})," from"," ",Object(O.o)(s,n)," to ",Object(se.jsx)("b",{children:i.displayName}),"?"]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",onClick:l,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",onClick:d,options:{minimal:!1,intent:g.a.DANGER}})]})})]});return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(b,{items:O.n,onItemSelect:c,itemRenderer:u,itemListRenderer:m,filterable:!1,children:Object(se.jsxs)(h.b,{rightIcon:E.a.DOUBLE_CARET_VERTICAL,children:[Object(se.jsx)("span",{className:"hidden-xs hidden-sm",children:"Default sublanguage: "}),Object(se.jsx)("span",{children:Object(O.o)(s,n)})]})}),v]})};var jc=Object(r.b)((e=>({sourceChapter:e.session.sourceChapter||Se.b.defaultSourceChapter,sourceVariant:e.session.sourceVariant||Se.b.defaultSourceVariant})),(e=>Object(c.b)({handleUpdateSublanguage:R.changeSublanguage},e)))(xc);var Oc=e=>{const[t,s]=f.useState(!1),n=f.useCallback((()=>s(!0)),[]),i=f.useCallback((()=>s(!1)),[]),{handleDeleteAssessment:a,data:r}=e,o=f.useCallback((()=>{const{id:e}=r;a(e),i()}),[r,i,a]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(J.a,{icon:E.a.TRASH,onClick:n}),Object(se.jsxs)(h.h,{icon:E.a.WARNING_SIGN,isOpen:t,onClose:i,title:"Deleting assessment",canOutsideClickClose:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsxs)("p",{children:["Are you sure you want to ",Object(se.jsx)("b",{children:"delete"})," the assessment ",Object(se.jsx)("i",{children:r.title}),"?"]}),Object(se.jsx)("p",{children:Object(se.jsx)("b",{children:"All submissions and their answers will be deleted as well."})})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:i,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",icon:E.a.TRASH,onClick:o,options:{minimal:!1,intent:g.a.DANGER}})]})})]})]})},Cc=s(529);var Sc=e=>{const[t,s]=f.useState(void 0),[n,i]=f.useState(!1),[a,r]=f.useState(!1),[o,c]=f.useState(-1);f.useEffect((()=>{e.assessmentConfigurations&&-1===o&&c(e.assessmentConfigurations[0].assessmentConfigId)}),[e.assessmentConfigurations,o]);const{handleUploadAssessment:l}=e,d=f.useMemo((()=>{var t;return null===(t=e.assessmentConfigurations)||void 0===t?void 0:t.map((e=>({value:e.assessmentConfigId,label:e.type})))}),[e.assessmentConfigurations]),u=f.useCallback((()=>{-1!==o?(t&&(l(t,a,o),r(!1)),s(void 0)):Object(me.e)("Please select a valid assessment type before uploading!")}),[t,a,l,o]),p=f.useCallback((()=>s(void 0)),[s]),m=f.useCallback((e=>{s(e[0]),r(!1)}),[s]),b=f.useCallback((e=>{e.length>1&&Object(me.e)("Uploading multiple files at once is not currently supported!",2e3)}),[]),{getRootProps:v,getInputProps:y,isFocused:j,isDragActive:O,isDragAccept:S,isDragReject:w}=Object(Cc.a)({multiple:!1,onDropAccepted:m,onDropRejected:b}),_=f.useMemo((()=>x()("dropzone-base",j||O?"dropzone-active":void 0,S?"dropzone-accept":void 0,w?"dropzone-reject":void 0)),[j,O,S,w]),A=f.useCallback((()=>{a?r(!1):i(!0)}),[a,i,r]),k=f.useMemo((()=>Object(se.jsx)("div",{className:"toggle-button-wrapper",children:Object(se.jsx)(h.T,{checked:a,onChange:A})})),[a,A]),T=f.useCallback((()=>{r(!0),i(!1)}),[r]),R=f.useCallback((()=>{i(!1)}),[i]),I=f.useMemo((()=>Object(se.jsxs)("div",{className:"dropzone-controls",children:[Object(se.jsx)(J.a,{label:"Yes",icon:E.a.CONFIRM,onClick:T,options:{minimal:!1,intent:g.a.DANGER}}),Object(se.jsx)(J.a,{label:"No",icon:E.a.CROSS,onClick:R,options:{minimal:!1}})]})),[R,T]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.e,{elevation:C.a.TWO,interactive:!0,children:Object(se.jsxs)("div",{...v({className:_}),children:[Object(se.jsx)("input",{...y()}),Object(se.jsx)("p",{children:"Drag 'n' drop a file here, or click to select a file"})]})}),t&&Object(se.jsxs)(h.e,{className:"dropzone-prompt",elevation:C.a.TWO,interactive:!0,children:[Object(se.jsx)("h3",{children:null===t||void 0===t?void 0:t.name}),!n&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("div",{className:"dropzone-controls",children:[Object(se.jsx)(h.u,{options:d,onChange:e=>c(parseInt(e.target.value)),value:o}),Object(se.jsx)(J.a,{label:"Confirm Upload",icon:E.a.UPLOAD,onClick:u,options:{minimal:!1,intent:g.a.DANGER}}),Object(se.jsx)(J.a,{label:"Cancel Upload",icon:E.a.DELETE,onClick:p,options:{minimal:!1}})]}),Object(se.jsxs)("div",{className:"dropzone-controls",children:[Object(se.jsx)("p",{children:"Force update opened assessment"}),k]})]}),n&&Object(se.jsx)("p",{children:"Are you sure that you want to force update the assessment?"}),n&&I]})]})},Ec=s(1318);const wc="YYYY-MM-DD HH:mm:ss ZZ";var _c=e=>{const t=new Date(2010,0,0),s=new Date(2030,11,31),{data:n,forOpenDate:i}=e,a=i?n.openAt:n.closeAt,r=m(a,m.ISO_8601,!0),[o,c]=f.useState(!1),[l,d]=f.useState(r),u=f.useCallback((()=>c(!0)),[]),b=f.useCallback((()=>c(!1)),[]),{handleAssessmentChangeDate:v}=e,y=f.useCallback((()=>{if(l){const{id:e,openAt:t,closeAt:s}=n;v(e,i?l.toISOString():t,i?s:l.toISOString()),b()}else Object(me.e)("No date and time selected!",2e3),d(r)}),[l,r,n,v,i,b]),x=f.useCallback((e=>d(m(e))),[]),j=f.useCallback((()=>{Object(me.e)("Failed to parse date string! Defaulting to current date.",2e3),d(r)}),[r]),O=Object(se.jsx)(Ec.a,{formatDate:e=>m(e).format(wc),onChange:x,onError:j,parseDate:e=>{const t=m(e,wc,!0);return!!t.isValid()&&t.toDate()},placeholder:`${wc} or select a date`,value:null===l||void 0===l?void 0:l.toDate(),timePrecision:"second",fill:!0,minDate:t,maxDate:s,closeOnSelection:!1});return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("span",{className:"date-cell-text",children:r.format(wc)}),Object(se.jsx)(J.a,{icon:E.a.EDIT,onClick:u}),Object(se.jsxs)(h.h,{icon:E.a.INFO_SIGN,isOpen:o,onClose:b,title:"Updating assessment settings",canOutsideClickClose:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsxs)("p",{children:[i?"Opening":"Closing"," date and time:"]}),O]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:b,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",icon:E.a.TICK,onClick:y,options:{minimal:!1,intent:g.a.DANGER}})]})})]})]})};var Ac=e=>{const{data:t}=e,[s,n]=f.useState(!1),[i]=f.useState(!!t.isPublished),a=f.useCallback((()=>n(!0)),[]),r=f.useCallback((()=>n(!1)),[]),{handlePublishAssessment:o}=e,c=f.useCallback((()=>{const{id:e}=t;o(!i,e),r()}),[t,i,r,o]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(h.T,{className:"publish-cell",checked:i,onChange:a}),Object(se.jsxs)(h.h,{icon:E.a.WARNING_SIGN,isOpen:s,onClose:r,title:(i?"Unpublish":"Publish")+" assessment",canOutsideClickClose:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsxs)("p",{children:["Are you sure you want to ",Object(se.jsx)("b",{children:i?"unpublish":"publish"})," the assessment"," ",Object(se.jsx)("i",{children:t.title}),"?"]}),i?Object(se.jsx)("p",{children:Object(se.jsx)("b",{children:"This will hide the assessment for students and prevent them from uploading new answers. Admins and staff are not affected."})}):null]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:r,options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",icon:E.a.CONFIRM,onClick:c,options:{minimal:!1,intent:g.a.DANGER}})]})})]})]})};class kc extends f.Component{constructor(e){super(e),this.columnDefs=void 0,this.defaultColumnDefs=void 0,this.gridApi=void 0,this.columnApi=void 0,this.loadContent=()=>{this.props.handleAssessmentOverviewFetch(),this.props.handleFetchCourseConfigs()},this.dateFilterComparator=(e,t)=>{const s=new Date(t);return s<e?-1:s>e?1:0},this.onGridReady=e=>{this.gridApi=e.api,this.columnApi=e.columnApi,this.gridApi.sizeColumnsToFit(),this.columnApi.applyColumnState({state:[{colId:"openAt",sort:"desc"},{colId:"closeAt",sort:"desc"}]})},this.resizeGrid=()=>{this.gridApi&&this.gridApi.sizeColumnsToFit()},this.toggleDropzone=()=>{this.setState({showDropzone:!this.state.showDropzone})},this.state={showDropzone:!1},this.columnDefs=[{field:"number",headerName:"ID",width:50},{headerName:"Title",field:"title"},{headerName:"Category",field:"type",width:100},{headerName:"Open Date",field:"openAt",filter:"agDateColumnFilter",filterParams:{comparator:this.dateFilterComparator,inRangeInclusive:!0},sortingOrder:["desc","asc",null],cellRendererFramework:_c,cellRendererParams:{handleAssessmentChangeDate:this.props.handleAssessmentChangeDate,forOpenDate:!0},width:150},{headerName:"Close Date",field:"closeAt",filter:"agDateColumnFilter",filterParams:{comparator:this.dateFilterComparator,inRangeInclusive:!0},sortingOrder:["desc","asc",null],cellRendererFramework:_c,cellRendererParams:{handleAssessmentChangeDate:this.props.handleAssessmentChangeDate,forOpenDate:!1},width:150},{headerName:"Publish",field:"",cellRendererFramework:Ac,cellRendererParams:{handlePublishAssessment:this.props.handlePublishAssessment},width:100,filter:!1,resizable:!1,sortable:!1,cellStyle:{padding:0}},{headerName:"Delete",field:"",cellRendererFramework:Oc,cellRendererParams:{handleDeleteAssessment:this.props.handleDeleteAssessment},width:100,filter:!1,resizable:!1,sortable:!1,cellStyle:{padding:0}}],this.defaultColumnDefs={filter:!0,resizable:!0,sortable:!0}}render(){const e=Object(se.jsxs)("div",{className:"GridControls ground-control-controls",children:[Object(se.jsx)(h.b,{active:this.state.showDropzone,icon:E.a.CLOUD_UPLOAD,intent:this.state.showDropzone?g.a.PRIMARY:g.a.NONE,onClick:this.toggleDropzone,children:Object(se.jsx)("span",{className:"hidden-xs",children:"Upload assessment"})}),Object(se.jsx)(jc,{}),Object(se.jsx)(h.b,{icon:E.a.REFRESH,onClick:this.props.handleAssessmentOverviewFetch,children:Object(se.jsx)("span",{className:"hidden-xs",children:"Refresh assessments"})})]}),t=Object(se.jsx)(h.g,{isOpen:this.state.showDropzone,keepChildrenMounted:!0,children:Object(se.jsx)(Sc,{handleUploadAssessment:this.props.handleUploadAssessment,assessmentConfigurations:this.props.assessmentConfigurations})}),s=Object(se.jsx)("div",{className:"Grid ag-grid-parent ag-theme-balham",children:Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",columnDefs:this.columnDefs,defaultColDef:this.defaultColumnDefs,onGridReady:this.onGridReady,onGridSizeChanged:this.resizeGrid,rowData:this.props.assessmentOverviews,rowHeight:30,suppressCellSelection:!0,suppressMovableColumns:!0,suppressPaginationPanel:!0})}),n=Object(se.jsxs)("div",{className:"GroundControl",children:[e,t,Object(se.jsx)(h.i,{}),s]});return Object(se.jsx)("div",{children:Object(se.jsx)(Ne.a,{display:n,loadContentDispatch:this.loadContent})})}}var Tc=kc;var Rc=Object(r.b)((e=>({assessmentOverviews:e.session.assessmentOverviews,assessmentConfigurations:e.session.assessmentConfigurations})),(e=>Object(c.b)({handleAssessmentChangeDate:yc.changeDateAssessment,handleAssessmentOverviewFetch:u.fetchAssessmentOverviews,handleDeleteAssessment:yc.deleteAssessment,handleUploadAssessment:yc.uploadAssessment,handlePublishAssessment:yc.publishAssessment,handleFetchCourseConfigs:u.fetchCourseConfig},e)))(Tc),Ic=s(120),Lc=s(378),Pc=s.n(Lc);class Nc extends f.PureComponent{constructor(e){super(e),this.recorder=void 0,this.handleCloseDialog=()=>this.setState({dialogOpen:!1}),this.handleOpenDialog=()=>this.setState({dialogOpen:!0}),this.updateTimerDuration=()=>{this.setState({duration:this.props.getTimerDuration()})},this.handleTruncatePlaybackData=()=>{const e=this.props.playbackData.inputs.filter((e=>e.time<=1e3*this.props.currentPlayerTime));this.props.handleResetInputs(e)},this.handleRecorderPausing=()=>{if(!this.recorder)return;const{handleSetIsEditorReadonly:e,handleSetSourcecastData:t,handleTimerPause:s}=this.props;clearInterval(this.state.updater),e(!0),s(),this.recorder.pause();t("","","",window.URL.createObjectURL(this.recorder.exportWAV()),this.props.playbackData)},this.handleRecorderStarting=()=>{this.recorder=new Pc.a;const{handleRecordInit:e,handleSetIsEditorReadonly:t,handleTimerStart:s}=this.props;this.recorder.start().then((()=>{e(),t(!1),s();const n=setInterval(this.updateTimerDuration,100);this.setState({updater:n})}),(e=>{alert("Microphone not found: "+e)}))},this.handleRecorderResuming=()=>{if(!this.recorder)return;const{handleSetIsEditorReadonly:e,handleTimerResume:t}=this.props;e(!1),t(-1);const s=setInterval(this.updateTimerDuration,100);this.setState({updater:s}),this.recorder.resume()},this.handleRecorderResumingFromCurrent=()=>{if(!this.recorder)return;const{currentPlayerTime:e,handleSetIsEditorReadonly:t,handleTimerResume:s}=this.props;this.handleTruncatePlaybackData(),t(!1),s(1e3*e);const n=setInterval(this.updateTimerDuration,100);this.setState({updater:n}),this.recorder.resume(e)},this.handleRecorderStopping=()=>{if(!this.recorder)return;const{handleSetIsEditorReadonly:e,handleTimerStop:t}=this.props;e(!1),t(),clearInterval(this.state.updater),this.recorder.stop(),this.setState({fileDataBlob:this.recorder.exportWAV()}),this.recorder.clear()},this.handleRecorderResetting=()=>{const{handleSetIsEditorReadonly:e,handleTimerReset:t}=this.props;e(!1),t(),clearInterval(this.state.updater),this.setState({duration:0}),this.recorder&&(this.recorder.stop(),this.recorder.clear())},this.handleRecorderSaving=()=>{this.state.fileDataBlob?this.props.handleSaveSourcecastData(this.state.saveTitle,this.state.saveDescription,this.state.saveUID,this.state.fileDataBlob,this.props.playbackData):alert("No recording found")},this.renderLabel=e=>{const t=Math.floor(e/60),s=Math.floor(e-60*t);return(t<10?"0"+t:t)+":"+(s<10?"0"+s:s)},this.handleSaveTitleInputChange=e=>{this.setState({saveTitle:e.target.value})},this.handleSaveDescriptionInputChange=e=>{this.setState({saveDescription:e.target.value})},this.handleSaveUIDInputChange=e=>{this.setState({saveUID:e.target.value})},this.state={dialogOpen:!1,duration:0,updater:void 0,saveTitle:"",saveDescription:"",saveUID:""}}async componentDidMount(){Pc.a.getPermission().then((()=>{}),(e=>{alert("Microphone not found: "+e)}))}render(){const e=Object(se.jsx)(J.a,{label:"Record Pause",icon:E.a.SNOWFLAKE,onClick:this.props.handleRecordPause}),t=Object(se.jsx)(J.a,{label:"Pause",icon:E.a.PAUSE,onClick:this.handleRecorderPausing}),s=Object(se.jsx)(J.a,{label:"Resume",icon:E.a.PLAY,onClick:this.handleRecorderResuming}),n=Object(se.jsx)(J.a,{label:"Resume Here",icon:E.a.PLAY,onClick:this.handleRecorderResumingFromCurrent}),i=Object(se.jsx)(J.a,{label:"Record",icon:E.a.PLAY,onClick:this.handleRecorderStarting}),a=Object(se.jsx)(J.a,{label:"Stop",icon:E.a.STOP,onClick:this.handleRecorderStopping}),r=Object(se.jsx)(J.a,{label:"Reset",icon:E.a.REFRESH,onClick:this.handleRecorderResetting}),o=Object(se.jsx)(J.a,{label:"Upload",icon:E.a.FLOPPY_DISK,onClick:this.handleOpenDialog});return Object(se.jsxs)("div",{children:[Object(se.jsxs)(h.h,{icon:"info-sign",isOpen:this.state.dialogOpen,onClose:this.handleCloseDialog,title:"Upload Sourcecast",canOutsideClickClose:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)(h.y,{id:"title",leftIcon:E.a.HEADER,onChange:this.handleSaveTitleInputChange,placeholder:"Title",value:this.state.saveTitle}),Object(se.jsx)("br",{}),Object(se.jsx)(h.y,{id:"description",leftIcon:E.a.LIST_DETAIL_VIEW,onChange:this.handleSaveDescriptionInputChange,placeholder:"Description",value:this.state.saveDescription}),Object(se.jsx)("br",{}),Object(se.jsx)(h.y,{id:"uid",leftIcon:E.a.KEY,onChange:this.handleSaveUIDInputChange,placeholder:"UID (optional, only alphanumeric, dash and underscore allowed)",value:this.state.saveUID})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(J.a,{label:"Confirm Upload",icon:E.a.TICK,onClick:this.handleRecorderSaving}),Object(se.jsx)(J.a,{label:"Cancel",icon:E.a.CROSS,onClick:this.handleCloseDialog})]})})]}),Object(se.jsx)("br",{}),Object(se.jsx)("div",{className:"Timer",children:Object(se.jsx)(h.e,{elevation:2,style:{background:"#24323F"},children:Object(se.jsx)(h.o,{children:this.renderLabel(this.props.recordingStatus!==F.c.paused?this.state.duration/1e3:this.props.currentPlayerTime)})})}),Object(se.jsx)("br",{}),Object(se.jsxs)("div",{className:"RecorderControl",children:[this.props.recordingStatus===F.c.notStarted&&i,this.props.recordingStatus===F.c.paused&&s,this.props.recordingStatus===F.c.paused&&n,this.props.recordingStatus===F.c.recording&&t,this.props.recordingStatus===F.c.recording&&e,this.props.recordingStatus===F.c.paused&&a,this.props.recordingStatus===F.c.finished&&o,this.props.recordingStatus!==F.c.notStarted&&r]}),Object(se.jsx)("br",{})]})}}var Dc=Nc;const Mc="sourcereel",Uc="Welcome to Sourcereel!",Bc={label:"Data Visualizer",iconName:E.a.EYE_OPEN,body:Object(se.jsx)(ks,{}),id:Ce.b.dataVisualizer},Gc={label:"Env Visualizer",iconName:E.a.GLOBE,body:Object(se.jsx)(Is,{}),id:Ce.b.envVisualizer};var Fc=e=>{const[t,s]=Object(f.useState)(Ce.b.sourcereel),n=Object(r.c)();Object(f.useEffect)((()=>{Object(Cs.fetchSourcecastIndex)("sourcecast")}),[]),Object(f.useEffect)((()=>{const{inputToApply:t}=e;if(t)switch(t.type){case"activeTabChange":s(t.data);break;case"chapterSelect":e.handleChapterSelect(t.data);break;case"externalLibrarySelect":e.handleExternalSelect(t.data);break;case"forcePause":e.handleSetSourcecastStatus(F.b.forcedPaused)}}),[e.inputToApply]);const i=()=>e.timeElapsedBeforePause+Date.now()-e.timeResumed,a=Object(se.jsx)(Ss,{handleDebuggerPause:()=>n(Object(Os.beginDebuggerPause)(Mc)),handleDebuggerResume:()=>n(Object(Os.debuggerResume)(Mc)),handleDebuggerReset:()=>n(Object(Os.debuggerReset)(Mc)),handleEditorEval:()=>{e.handleEditorEval(),e.recordingStatus===F.c.recording&&e.handleRecordInput({time:i(),type:"keyboardCommand",data:F.a.run})},handleInterruptEval:()=>n(Object(Os.beginInterruptExecution)(Mc)),handleToggleEditorAutorun:()=>n(Object(R.toggleEditorAutorun)(Mc)),isDebugging:e.isDebugging,isEditorAutorun:e.isEditorAutorun,isRunning:e.isRunning},"autorun"),o=Object(se.jsx)(V.a,{handleChapterSelect:(t,s)=>{let{chapter:n}=t;e.handleChapterSelect(n),e.recordingStatus===F.c.recording&&e.handleRecordInput({time:i(),type:"chapterSelect",data:n})},sourceChapter:e.sourceChapter,sourceVariant:e.sourceVariant},"chapter"),c=Object(se.jsx)(W.a,{handleReplOutputClear:()=>n(Object(R.clearReplOutput)(Mc))},"clear_repl"),l=Object(se.jsx)(q.a,{handleReplEval:e.handleReplEval,isRunning:e.isRunning},"eval_repl"),d={controlBarProps:{editorButtons:[a,o]},editorContainerProps:{...A.a.pick(e,"codeDeltasToApply","handleEditorEval","handleEditorValueChange","isEditorAutorun","inputToApply","handleRecordInput","isEditorReadonly"),editorVariant:"sourcecast",editorTabs:e.editorTabs.map(Z.a),handleDeclarationNavigate:e=>n(Object(R.navigateToDeclaration)(Mc,e)),handleEditorUpdateBreakpoints:e=>n(Object(R.setEditorBreakpoint)(e,Mc)),editorSessionId:"",getTimerDuration:i,isPlaying:e.playbackStatus===F.b.playing,isRecording:e.recordingStatus===F.c.recording},handleSideContentHeightChange:e=>n(Object(R.changeSideContentHeight)(e,Mc)),replProps:{output:e.output,replValue:e.replValue,handleBrowseHistoryDown:()=>n(Object(R.browseReplHistoryDown)(Mc)),handleBrowseHistoryUp:()=>n(Object(R.browseReplHistoryUp)(Mc)),handleReplEval:e.handleReplEval,handleReplValueChange:e=>n(Object(R.updateReplValue)(e,Mc)),sourceChapter:e.sourceChapter,sourceVariant:e.sourceVariant,externalLibrary:e.externalLibraryName,replButtons:[l,c]},sideBarProps:{tabs:[]},sideContentHeight:e.sideContentHeight,sideContentProps:{onChange:t=>{s(t),e.recordingStatus===F.c.recording&&e.handleRecordInput({time:i(),type:"activeTabChange",data:t})},selectedTabId:t,tabs:{beforeDynamicTabs:[{label:"Recording Panel",iconName:E.a.COMPASS,body:Object(se.jsxs)("div",{children:[Object(se.jsx)("span",{className:"Multi-line",children:Object(se.jsxs)(h.M,{children:[" ",Uc," "]})}),Object(se.jsx)(Dc,{currentPlayerTime:e.currentPlayerTime,editorValue:e.editorTabs[0].value,getTimerDuration:i,playbackData:e.playbackData,handleRecordInit:()=>{const t={chapter:e.sourceChapter,externalLibrary:e.externalLibraryName,editorValue:e.editorTabs[0].value};n(Object(Ic.recordInit)(t,Mc))},handleRecordPause:()=>e.handleRecordInput({time:i(),type:"forcePause",data:null}),handleResetInputs:e=>n(Object(Ic.resetInputs)(e,Mc)),handleSaveSourcecastData:(e,t,s,i,a)=>n(Object(js.saveSourcecastData)(e,t,s,i,a,"sourcecast")),handleSetSourcecastData:(e,t,s,i,a)=>n(Object(js.setSourcecastData)(e,t,s,i,a,"sourcecast")),handleSetIsEditorReadonly:e.handleSetIsEditorReadonly,handleTimerPause:()=>n(Object(Ic.timerPause)(Mc)),handleTimerReset:()=>n(Object(Ic.timerReset)(Mc)),handleTimerResume:e=>n(Object(Ic.timerResume)(e,Mc)),handleTimerStart:()=>n(Object(Ic.timerStart)(Mc)),handleTimerStop:()=>n(Object(Ic.timerStop)(Mc)),recordingStatus:e.recordingStatus})]}),id:Ce.b.sourcereel},{label:"Sourcecast Table",iconName:E.a.EDIT,body:Object(se.jsx)("div",{children:Object(se.jsx)(Vs,{handleDeleteSourcecastEntry:e=>n(Object(Ic.deleteSourcecastEntry)(e,"sourcecast")),sourcecastIndex:e.sourcecastIndex,courseId:e.courseId})}),id:Ce.b.introduction},Bc,Gc],afterDynamicTabs:[]},workspaceLocation:"sourcereel"}},u={...A.a.pick(e,"handleEditorValueChange","handleSetIsEditorReadonly","handleSetSourcecastStatus","audioUrl","currentPlayerTime","playbackData","playbackStatus","handleChapterSelect","handleExternalSelect"),handleSetCurrentPlayerTime:e=>n(Object(js.setCurrentPlayerTime)(e,"sourcecast")),handleSetCodeDeltasToApply:e=>n(Object(js.setCodeDeltasToApply)(e,"sourcecast")),handleSetInputToApply:e=>n(Object(js.setInputToApply)(e,"sourcecast")),handleSetSourcecastDuration:e=>n(Object(js.setSourcecastDuration)(e,"sourcecast")),handlePromptAutocomplete:(e,t,s)=>n(Object(R.promptAutocomplete)(Mc,e,t,s)),duration:e.playbackDuration};return Object(se.jsxs)("div",{className:x()("Sourcereel",p.a.DARK),children:[e.recordingStatus===F.c.paused?Object(se.jsx)(Ps,{...u}):void 0,Object(se.jsx)(_e.a,{...d})]})};const Hc="sourcereel";var Vc=Object(r.b)((e=>({audioUrl:e.workspaces.sourcecast.audioUrl,currentPlayerTime:e.workspaces.sourcecast.currentPlayerTime,codeDeltasToApply:e.workspaces.sourcecast.codeDeltasToApply,activeEditorTabIndex:e.workspaces.sourcereel.activeEditorTabIndex,editorTabs:e.workspaces.sourcereel.editorTabs,enableDebugging:e.workspaces.sourcereel.enableDebugging,externalLibraryName:e.workspaces.sourcereel.externalLibrary,inputToApply:e.workspaces.sourcecast.inputToApply,isDebugging:e.workspaces.sourcereel.isDebugging,isEditorAutorun:e.workspaces.sourcereel.isEditorAutorun,isEditorReadonly:e.workspaces.sourcereel.isEditorReadonly,isRunning:e.workspaces.sourcereel.isRunning,output:e.workspaces.sourcereel.output,playbackData:e.workspaces.sourcereel.playbackData,playbackDuration:e.workspaces.sourcecast.playbackDuration,playbackStatus:e.workspaces.sourcecast.playbackStatus,recordingStatus:e.workspaces.sourcereel.recordingStatus,replValue:e.workspaces.sourcereel.replValue,sideContentHeight:e.workspaces.sourcereel.sideContentHeight,sourcecastIndex:e.workspaces.sourcecast.sourcecastIndex,sourceChapter:I.Chapter.CLANG,sourceVariant:e.workspaces.sourcereel.context.variant,timeElapsedBeforePause:e.workspaces.sourcereel.timeElapsedBeforePause,timeResumed:e.workspaces.sourcereel.timeResumed,courseId:e.session.courseId})),(e=>Object(c.b)({handleChapterSelect:e=>Object(R.chapterSelect)(e,I.Variant.DEFAULT,Hc),handleEditorEval:()=>Object(R.evalEditor)(Hc),handleEditorValueChange:e=>Object(R.updateEditorValue)(e,Hc),handleExternalSelect:e=>Object(R.externalLibrarySelect)(e,Hc),handleRecordInput:e=>Object(Ic.recordInput)(e,Hc),handleReplEval:()=>Object(R.evalRepl)(Hc),handleSetSourcecastStatus:e=>Object(js.setSourcecastStatus)(e,"sourcecast"),handleSetIsEditorReadonly:e=>Object(R.setIsEditorReadonly)(Hc,e)},e)))(Fc);let Wc;!function(e){e.Default="Default",e.ObjectPlacement="ObjectPlacement",e.AssetUploader="AssetUploader",e.CheckpointSim="CheckpointSim",e.ChapterSim="ChapterSim"}(Wc||(Wc={}));const qc=e=>async function(t,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const a=Yc(zo.getInstance().getAccountInfo().accessToken||"");Object.entries(n).forEach((e=>{let[t,s]=e;a.append(t,s)}));const r={method:s,headers:a,...i};return fetch(Se.b.backendUrl+`/v2/courses/${ti()}/${e}/`+t,r)}finally{}},$c=qc("admin/assets"),Xc=qc("stories"),zc=qc("admin/stories");function Yc(e){const t=new Headers;return t.append("Accept","application/json"),t.append("Authorization",`Bearer ${e}`),t}const Kc=["locations","objects","images","avatars","ui","sfx","bgm","stories"];const Qc=async()=>(await Zc("stories")).filter((e=>e.startsWith("stories")&&e.endsWith("txt"))).map((e=>e.slice(8)));async function Jc(){return(await Promise.all(Kc.map((async e=>{const t=await Zc(e);return t.length?t:[`${e}`]})))).reduce(((e,t)=>e.concat(t)),[])}async function Zc(e){const t=await $c(e,"GET",{"Content-Type":"application/json"});return 200===t.status?t.json():[]}async function el(e,t){const s=await Promise.all(Array.from(e).map((async e=>{const s=await async function(e,t){const s=new FormData;s.set("upload",e);const n=await $c(`${t}/${e.name}`,"POST",{},{body:s,mode:"cors"});return n?n.text():""}(e,t);return e.name+" => "+s})));return s.join("\n")}async function tl(){const e=await Xc("","GET"),t=200===e.status?await e.json():[];return A.a.sortBy(t,(e=>new Date(e.openAt)))}async function sl(e,t){const s=await zc(e,"POST",{"Content-Type":"application/json"},{body:JSON.stringify(t)});return 200===s.status?"Chapter successfully created/updated":s.text()}const nl="Specify own folder...";var il=()=>{const[e,t]=v.a.useState(),[s,n]=v.a.useState(Kc[0]),[i,a]=v.a.useState(),[r,o]=v.a.useState(!1);function c(e){e.target.innerText&&(n(e.target.innerText),o(!1))}const l=Object(se.jsxs)(h.A,{children:[Kc.map((e=>Object(se.jsx)(h.B,{onClick:c,id:e,text:e},e))),Object(se.jsx)(h.B,{onClick:function(e){e.target.innerText&&(n(e.target.innerText),o(!0))},id:nl,text:nl},nl)]});return Object(se.jsxs)("div",{className:"LeftAlign",children:[Object(se.jsx)("h4",{children:"Choose Folder"}),Object(se.jsx)(De.a,{placement:S.a.BOTTOM,content:l,children:Object(se.jsx)(h.b,{text:s})}),r&&Object(se.jsx)(h.y,{placeholder:"Or specify your own, e.g. 'locations/hallway'",onChange:function(e){a(e.target.value)}}),Object(se.jsx)("br",{}),Object(se.jsx)("h4",{children:"Choose File"}),Object(se.jsx)("input",{type:"file",multiple:!0,onChange:function(e){if(!e.target.files)return;const s=e.target.files;t(s)}}),Object(se.jsx)(h.b,{onClick:async function(){const t=i||s;if(!e||!t)return;const n=await el(e,t);alert(n)},children:"Upload"})]})};function al(e,t){e&&e.forEach((e=>{t(e),al(e.childNodes,t)}))}function rl(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n={};function i(e,s){return Object.keys(s).map((n=>{const a="/"+e.join("/")+"/"+n;return{id:a,label:n,secondaryLabel:t(a),childNodes:"FILE"===s[n]?void 0:i([...e,n],s[n])}}))}return e.forEach((e=>A.a.set(n,e.split("/"),"FILE"))),s.forEach((e=>{n[e]&&"FILE"!==n[e]||(n[e]=[])})),i([],n)}var ol=Object(f.memo)((e=>{let{assetPath:t}=e;const s=t||vn.defaultAssetPath;return Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("img",{alt:"asset",crossOrigin:"anonymous",src:Zn(s,!!t),width:"150px",onError:e=>{e.target.onerror=null,e.target.src=Zn(vn.defaultAssetPath,!1)}})})}));const cl=e=>Object(se.jsx)(w.a,{content:"Delete",children:Object(se.jsx)(h.w,{icon:"trash",onClick:ll(e)})}),ll=e=>async()=>{const t=window.confirm(`Are you sure you want to delete ${e}?\nThere is no undoing this action!`);alert(t?await async function(e){const t=await $c(e,"DELETE");return await t.text()||"Successfully Deleted"}(e):"Whew")};var dl=()=>{const{value:e}=Object(j.d)(Jc,[]),[t,s]=v.a.useState(""),[n,i]=v.a.useState({nodes:[]});v.a.useEffect((()=>{i({nodes:rl(e,cl,Kc)})}),[e]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ol,{assetPath:t}),Object(se.jsx)(h.bb,{contents:n.nodes,onNodeClick:e=>{al(n.nodes,(e=>e.isSelected=!1)),e.isSelected=!e.isSelected,e.isExpanded=!e.isExpanded;const t=e.id.toString();e.childNodes||(s(t),sessionStorage.setItem("selectedAsset",t)),i({...n})}})]})},ul=s(522),hl=s(381);const pl=v.a.memo(Object(hl.b)((e=>{let{value:t}=e;return Object(se.jsx)("div",{children:Object(se.jsx)(h.b,{children:t})})}))),gl=v.a.memo(Object(hl.a)((e=>{let{items:t}=e;return Object(se.jsx)("div",{children:t&&t.map(((e,t)=>Object(se.jsx)(pl,{index:t,value:e},`item-${e}`)))})})));var ml=v.a.memo((e=>{let{chapterDetail:t,checkpointFilenames:s}=e;const{id:n}=t,{value:i,setValue:a,inputProps:r}=Object(j.b)(""),{value:o,setValue:c,inputProps:l}=Object(j.b)(""),{items:d,setItems:u,onSortEnd:p}=(()=>{const[e,t]=v.a.useState([]),s=v.a.useCallback((e=>{let{oldIndex:s,newIndex:n}=e;t((e=>Object(ul.a)(e,s,n)))}),[]);return{items:e,setItems:t,onSortEnd:s}})(),[m,f]=v.a.useState(!1),[y,x]=v.a.useState(new Date),[O,C]=v.a.useState([]),[S,E]=v.a.useState(!1);v.a.useEffect((()=>{a(t.title),c(t.imageUrl),x(new Date(t.openAt)),u(t.filenames),f(t.isPublished),C((s||[]).filter((e=>!t.filenames.includes(e))))}),[t,u,c,x,a,s,S]);const w=v.a.useCallback((e=>{u((t=>t.filter((t=>t!==e)))),C((t=>[...t,e]))}),[u]),_=v.a.useCallback((e=>{u((t=>[...t,e])),C((t=>t.filter((t=>t!==e))))}),[u]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("h4",{children:["Title: ",Object(se.jsx)("input",{className:"bp4-input",type:"text",...r})]}),Object(se.jsx)("b",{children:"Open date: "}),y&&(A=y.toISOString(),b()(A).format("MMMM Do YYYY, HH:mm")),Object(se.jsx)(gt.a,{onChange:e=>{e&&x(e)}}),Object(se.jsxs)("h4",{children:["Image url: ",Object(se.jsx)("input",{className:"bp4-input",type:"text",...l}),Object(se.jsx)(h.b,{onClick:e=>window.open(Zn(o,!0)),children:"View"})]}),Object(se.jsx)("b",{children:"Checkpoint Txt Files"}),Object(se.jsx)(gl,{items:d,onSortEnd:p}),Object(se.jsx)("br",{}),d.length>0&&Object(se.jsx)(h.b,{icon:"delete",onClick:()=>d.map(w),children:"Clear checkpoint files"}),Object(se.jsx)("br",{}),Object(se.jsx)("b",{children:"All Txt Files"}),O&&O.map((e=>Object(se.jsx)("div",{children:Object(se.jsx)(h.b,{onClick:()=>_(e),icon:"add",children:e})},`choice-${e}`))),Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{icon:"play",onClick:async()=>{zo.getInstance().setChapterSimStack(d),await go()},children:"Simulate Chapter"}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)(h.T,{checked:m,labelElement:"Published",onChange:()=>f(!m)}),Object(se.jsx)(h.b,{onClick:async()=>{const e={openAt:y.toISOString(),closeAt:bl(y).toISOString(),title:i,filenames:d,imageUrl:o,isPublished:m};if(!window.confirm(`Are you sure you want to save changes to ${JSON.stringify(e)}`))return;const t=parseInt(n)===fl?await sl("",{story:e}):await sl(n,{story:e});alert(t)},children:"Save Changes"}),Object(se.jsx)(h.b,{intent:g.a.WARNING,onClick:()=>{window.confirm("Are you you want to clear changes for this chapter?")&&(E(!S),alert("Cleared changes"))},children:"Clear Changes"}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{icon:"trash",intent:g.a.DANGER,onClick:async()=>{if(window.confirm("Are you sure you want to delete this chapter?")){const e=await async function(e){const t=await zc(e,"DELETE");return 204===t.status?"Chapter successfully deleted":t.text()}(n);alert(e)}},children:"Delete Chapter"})]});var A}));const bl=e=>(e.setFullYear(e.getFullYear()+1),e),fl=-1,vl={id:fl,title:"title goes here",imageUrl:"/locations/telebay/emergency.png",openAt:(new Date).toISOString(),closeAt:bl(new Date).toISOString(),isPublished:!1,filenames:[]};var yl=v.a.memo((()=>{const{value:e}=Object(j.d)(Qc,[]),{value:t}=Object(j.d)(tl,[]),[s,n]=v.a.useState(fl);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h3",{children:"Chapter Simulator"}),Object(se.jsxs)("select",{className:"bp4-menu",onChange:e=>n(e.target.value),children:[t.map(((e,t)=>Object(se.jsx)("option",{value:t,children:`Chapter ${t}: ${e.title}`},t))),Object(se.jsx)("option",{value:fl,children:"Create new chapter"},fl)]}),Object(se.jsx)("hr",{}),Object(se.jsx)(ml,{chapterDetail:t[s]||vl,checkpointFilenames:e})]})}));const xl={key:fn.zektonDarkFont.key,size:35,align:Phaser.GameObjects.BitmapText.ALIGN_CENTER};var jl={maxOptButtonsRow:2,optButton:{xSpace:.9*yn.x,ySpace:.5*yn.y},gameTxtStorageName:{defaultChapter:"defaultChapter",checkpointTxt:"checkpointTxt"}};s(854);const Ol=(e,t)=>{const s=new FileReader;s.readAsText(t),s.onloadend=t=>{s.result&&sessionStorage.setItem(e,s.result.toString())}};var Cl=function(e){let{storageName:t,s3TxtFiles:s}=e;const[n,i]=v.a.useState(s[0]),a=Object(se.jsx)("input",{type:"file",onChange:function(e){if(!e.target.files)return;const[s]=e.target.files;Ol(t,s)},style:{width:"250px"}}),r=Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("select",{className:"bp4-menu",onChange:async function(e){const s=e.target.value;i(s);const n=await fetch(Zn(`/stories/${s}`,!0),{headers:Sl()}),a=await n.text();sessionStorage.setItem(t,a)},children:s.map((e=>Object(se.jsx)("option",{value:e,children:e},e)))}),Object(se.jsx)(h.b,{icon:"download",onClick:()=>window.open(Nr(n))})]});return Object(se.jsxs)("div",{className:"LeftAlign",children:[Object(se.jsx)("hr",{}),Object(se.jsxs)(h.V,{id:"Tabs",renderActiveTabPanelOnly:!0,children:[Object(se.jsx)(h.U,{id:"own",title:"Local",panel:a}),Object(se.jsx)(h.U,{id:"s3",title:"S3",panel:r})]},"vertical"),Object(se.jsx)("hr",{})]})};function Sl(){const e=new Headers;return e.append("Access-Control-Allow-Origin","*"),e}function El(){const{value:e}=Object(j.d)(Qc,[]);return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h3",{children:"Checkpoint Text Loader"}),Object(se.jsx)("b",{children:"Step 1: Choose default checkpoint"}),Object(se.jsx)(Cl,{s3TxtFiles:e,storageName:jl.gameTxtStorageName.defaultChapter}),Object(se.jsx)("b",{children:"Step 2: Choose checkpoint text"}),Object(se.jsx)(Cl,{s3TxtFiles:e,storageName:jl.gameTxtStorageName.checkpointTxt}),Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{onClick:function(){zo.getInstance().getCurrentSceneRef().simulateCheckpoint()},icon:"play",children:"Simulate Checkpoint"}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{onClick:wl,children:"Reset All Files"}),Object(se.jsx)("br",{})]})}function wl(e){sessionStorage.setItem(jl.gameTxtStorageName.checkpointTxt,""),sessionStorage.setItem(jl.gameTxtStorageName.defaultChapter,"")}var _l={storySimBg:{type:Hn.Image,key:"student-room",path:"/locations/deathCube_ext/shields-down.png"},shortButton:{type:Hn.Image,key:"short-button",path:"/ui/shortButton.png"},invertedButton:{type:Hn.Image,key:"inverted-button",path:"/ui/invertedColorButton.png"},blueUnderlay:{type:Hn.Image,key:"blue-underlay",path:"/ui/blueUnderlay.png"},topButton:{type:Hn.Image,key:"top-button",path:"/ui/topButton.png"},colorIcon:{type:Hn.Image,key:"color-icon",path:"/ui/colorIcon.png"},imageIcon:{type:Hn.Image,key:"image-icon",path:"/ui/imageIcon.png"},bboxIcon:{type:Hn.Image,key:"bbox-icon",path:"/ui/bboxIcon.png"},handIcon:{type:Hn.Image,key:"hand-icon",path:"/ui/handIcon.png"},listIcon:{type:Hn.Image,key:"list-icon",path:"/ui/listIcon.png"},eraseIcon:{type:Hn.Image,key:"erase-icon",path:"/ui/eraserIcon.png"},iconBg:{type:Hn.Image,key:"icon-bg",path:"/ui/modeIconBg.png"}};class Al extends Phaser.Scene{constructor(){super("StorySimulatorMenu"),this.layerManager=void 0,this.getLayerManager=()=>ei(this.layerManager)}preload(){zo.getInstance().setCurrentSceneRef(this),this.layerManager=new Oa(this),la(this),Object.values(Wn).forEach((e=>this.load.image(e.key,Zn(e.path,!1)))),Object.values(_l).forEach((e=>this.load.image(e.key,Zn(e.path,!1)))),Object.values(fn).forEach((e=>this.load.bitmapFont(e.key,e.pngPath,e.fntPath))),zo.getInstance().getSoundManager().loadSoundAssetMap(Xn)}async create(){"student"!==zo.getInstance().getAccountInfo().role?(this.renderBackground(),this.renderOptionButtons()):console.log("Students cannot use story sim")}renderOptionButtons(){const e=new Phaser.GameObjects.Container(this,0,0),t=this.getOptionButtons(),s=Sn({numOfItems:t.length,maxXSpace:jl.optButton.xSpace,maxYSpace:jl.optButton.ySpace,numItemLimit:jl.maxOptButtonsRow,redistributeLast:!0});e.add(t.map(((e,t)=>this.createOptButton(e.text,s[t][0],s[t][1],e.callback)))),this.getLayerManager().addToLayer(zn.UI,e)}getOptionButtons(){return[{text:"Object Placement",callback:()=>{zo.getInstance().setStorySimState(Wc.ObjectPlacement),this.getLayerManager().clearAllLayers(),this.scene.start("ObjectPlacement")}},{text:"Checkpoint Simulator",callback:()=>{zo.getInstance().setStorySimState(Wc.CheckpointSim)}},{text:"Asset Uploader",callback:()=>{zo.getInstance().setStorySimState(Wc.AssetUploader)}},{text:"Chapter Simulator",callback:()=>{zo.getInstance().setStorySimState(Wc.ChapterSim)}}]}createOptButton(e,t,s,n){return Ci(this,{assetKey:_l.invertedButton.key,message:e,textConfig:{x:0,y:0,oriX:.5,oriY:.5},bitMapTextStyle:xl,onUp:n}).setPosition(t,s)}simulateCheckpoint(){const e=sessionStorage.getItem(jl.gameTxtStorageName.defaultChapter)||"",t=sessionStorage.getItem(jl.gameTxtStorageName.checkpointTxt)||"";if(""===e&&""===t)return;this.getLayerManager().clearAllLayers(),ho.parse(e),t&&ho.parse(t,!0);const s=ho.checkpoint;this.scene.start("GameManager",{gameCheckpoint:s,chapterNum:-1,checkpointNum:-1})}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,_l.storySimBg.key);e.setDisplaySize(yn.x,yn.y);const t=new Phaser.GameObjects.Image(this,xn.x,xn.y,_l.blueUnderlay.key).setAlpha(.5);this.getLayerManager().addToLayer(zn.Background,e),this.getLayerManager().addToLayer(zn.Background,t)}}var kl=Al;class Tl{constructor(){this.backgroundAssetPath=void 0,this.objectPlacement=void 0,this.x=void 0,this.y=void 0,this.getObjectPlacement=()=>ei(this.objectPlacement),this.x=xn.x,this.y=xn.y}initialise(e){this.objectPlacement=e}async loadBackground(){const e=sessionStorage.getItem("selectedAsset");if(!e||!e.startsWith("/locations/"))return;this.backgroundAssetPath=e;const t=`!${e}`;this.getObjectPlacement().addAsset(t,e);const s=await kr(this.getObjectPlacement(),t,Zn(e,!0));this.renderBackground(s)}renderBackground(e){if("!"!==e[0])return;this.getObjectPlacement().getLayerManager().clearLayerContents(zn.Background);const t=new Phaser.GameObjects.Image(this.getObjectPlacement(),xn.x,xn.y,e).setInteractive();this.getObjectPlacement().getLayerManager().addToLayer(zn.Background,t)}getBackgroundAssetPath(){return this.backgroundAssetPath}screenLog(){return this.backgroundAssetPath+"\n"}}let Rl;!function(e){e[e.DrawBBox=0]="DrawBBox",e[e.DragResizeObj=1]="DragResizeObj"}(Rl||(Rl={}));class Il{constructor(){this.checkpointTitle="boundingBoxes",this.objectPlacement=void 0,this.bboxBeingDrawn=void 0,this.startingCoordinates=void 0,this.bboxDetailMap=void 0,this.getObjectPlacement=()=>ei(this.objectPlacement),this.bboxDetailMap=new Map}initialise(e){this.objectPlacement=e,this.addBBoxListeners(e)}addBBoxListeners(e){this.getObjectPlacement().getInputManager().registerEventListener("pointerdown",(()=>{this.getObjectPlacement().isCursorMode(Rl.DrawBBox)&&(this.bboxBeingDrawn=this.createNewBBox())})),this.getObjectPlacement().getInputManager().registerEventListener("pointerup",(()=>{if(this.getObjectPlacement().isCursorMode(Rl.DrawBBox)&&this.bboxBeingDrawn){if(this.bboxBeingDrawn.displayWidth<=2||this.bboxBeingDrawn.displayHeight<=2)return void this.bboxBeingDrawn.destroy();this.bboxBeingDrawn.x+=this.bboxBeingDrawn.displayWidth/2,this.bboxBeingDrawn.y+=this.bboxBeingDrawn.displayHeight/2,this.bboxBeingDrawn.setOrigin(.5),this.registerBBox(this.bboxBeingDrawn),e.input.setDraggable(this.bboxBeingDrawn),this.getObjectPlacement().setActiveSelection(this.bboxBeingDrawn),this.startingCoordinates=void 0,this.bboxBeingDrawn=void 0}}))}createNewBBox(){const[e,t]=this.getObjectPlacement().getCoordinates(),s=new Phaser.GameObjects.Rectangle(this.getObjectPlacement(),e,t,1,1,On.white).setOrigin(0).setAlpha(.1).setInteractive().setDataEnabled();return this.startingCoordinates=[e,t],this.getObjectPlacement().getLayerManager().addToLayer(zn.BBox,s),s}registerBBox(e){const t="bbox"+this.getObjectPlacement().generateItemIdNumber(),s={id:t,x:e.x,y:e.y,width:e.displayWidth,height:e.displayHeight};this.bboxDetailMap.set(t,s),e.data.set("itemId",t),e.data.set("type","bbox")}getLoggables(){return[...this.bboxDetailMap.values()]}getItemById(e){return this.bboxDetailMap.get(e)}resizeWhileBeingDrawn(e){if(!this.getObjectPlacement().isCursorMode(Rl.DrawBBox)||!this.startingCoordinates||!this.bboxBeingDrawn)return;const[t,s]=this.startingCoordinates,n=e.input.x,i=e.input.y;Gi(this.bboxBeingDrawn,n-t,i-s)}checkpointTxtLog(){const e=[];return this.bboxDetailMap.forEach((t=>{const s=["+"+t.id,ta.toIntString(t.x),ta.toIntString(t.y),ta.toIntString(t.width),ta.toIntString(t.height)];e.push(s.join(", ")),e.push("    show_dialogue*(click)")})),e}setAttribute(e,t,s){const n=e.data.get("itemId"),i=this.bboxDetailMap.get(n);i&&(i[t]=s)}deleteAll(){this.bboxDetailMap.clear()}delete(e){const t=e.data.get("itemId");this.bboxDetailMap.delete(t)}}var Ll={icon:{bgSize:55,size:40,yInterval:15},alpha:{inactive:.7,hover:1,active:.9}};class Pl extends Phaser.GameObjects.Container{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rl.DragResizeObj;super(e,t,s),this.isModes=void 0,this.currCursorMode=void 0,this.cursorModes=void 0,this.currActiveModeIdx=void 0,this.currCursorMode=n,this.isModes=new Array,this.cursorModes=new Array,this.currActiveModeIdx=vn.nullSequenceNumber}getCurrCursorMode(){return this.currCursorMode}setCursorMode(e){this.currCursorMode=e}addCursorMode(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vn.nullFunction,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vn.nullFunction,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vn.nullFunction;const o=new Phaser.GameObjects.Container(e,0,0);this.isModes.push(s),this.cursorModes.push(o);const c=this.cursorModes.length-1,l=new kn(e,0,0,n),d=Ci(e,{assetKey:_l.iconBg.key,onUp:()=>{this.isModes[c]&&(this.currActiveModeIdx=c),i(),this.renderCursorModesContainer()},onHover:()=>{""!==n&&l.setVisible(!0),o.setAlpha(Ll.alpha.hover),a()},onOut:()=>{l.setVisible(!1);const e=c===this.currActiveModeIdx&&this.isModes[c];o.setAlpha(e?Ll.alpha.active:Ll.alpha.inactive),r()},onPointerMove:e=>{l.x=e.x-o.x-100,l.y=e.y-o.y-100},onHoverEffect:!1}),u=new Phaser.GameObjects.Sprite(e,0,0,t).setDisplaySize(Ll.icon.size,Ll.icon.size);d.add(u),o.add([d,l])}renderCursorModesContainer(){this.removeAll(!1);let e=0;this.cursorModes.forEach(((t,s)=>{t.setPosition(0,e);const n=s===this.currActiveModeIdx&&this.isModes[s];t.setAlpha(n?Ll.alpha.active:Ll.alpha.inactive),this.add(t),e+=Ll.icon.bgSize+Ll.icon.yInterval}))}}const Nl={key:fn.zektonFont.key,size:27,align:Phaser.GameObjects.BitmapText.ALIGN_LEFT};function Dl(e){return e.split("/").pop().split(".")[0]}const Ml=e=>"    "+e;class Ul{constructor(){this.detailMapContainer=void 0,this.objectPlacement=void 0,this.getObjectPlacement=()=>ei(this.objectPlacement)}initialise(e){this.objectPlacement=e}printCheckpoint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/locations/yourRoom-dim/normal.png",t=arguments.length>1?arguments[1]:void 0;const s=""===e?"default":Dl(e),n=t.map((e=>{const t=e.checkpointTxtLog();if(!t)return"";return`${e.checkpointTitle}\n${t.map(Ml).map(Ml).join("\n")}`})),i=`\nstartingLoc: ${s}\n\nobjectives\n    talk\n\nlocations\n    ${s}, ${e}, ${ta.toCapitalizedWords(e)}\n\n${s}\n    modes: explore\n    actions\n        show_dialogue(welcome)\n${n.map(Ml).join("\n")}\n\ndialogues\n    welcome\n        Congrats on creating your scene\n    click\n        Invisible bounding box is right here\n`;alert("Chapter ready!"),console.log(i)}showDetailMap(e){this.detailMapContainer=new Phaser.GameObjects.Container(this.getObjectPlacement(),0,0),e.forEach((e=>{const t=new Phaser.GameObjects.Rectangle(this.getObjectPlacement(),e.x,e.y,400,210,On.darkBlue).setOrigin(0,.5).setAlpha(.9),s=Tn(this.getObjectPlacement(),this.formatObjectDetails(e),{x:e.x+20,y:e.y+10,oriX:0,oriY:.6},Nl).setLetterSpacing(3);this.detailMapContainer.add([t,s])})),this.getObjectPlacement().add.existing(this.detailMapContainer)}formatObjectDetails(e){return Object.entries(e).map((e=>{let[t,s]=e;return`${t}: ${"number"===typeof s?ta.toIntString(s):s.toString()}`})).join("\n")}hideDetailMap(){this.detailMapContainer&&this.detailMapContainer.destroy()}}class Bl{constructor(){this.checkpointTitle="objects",this.objectPlacement=void 0,this.objectDetailMap=void 0,this.getObjectPlacement=()=>ei(this.objectPlacement),this.objectDetailMap=new Map}initialise(e){this.objectPlacement=e,this.objectDetailMap=new Map}async loadObject(){const e=sessionStorage.getItem("selectedAsset");if(!e)return;const t=`#${e}`;this.getObjectPlacement().addAsset(t,e);const s=await kr(this.getObjectPlacement(),t,Zn(e,!0));this.renderObject(s)}renderObject(e){if("#"!==e[0])return;const t=new Phaser.GameObjects.Image(this.getObjectPlacement(),xn.x,xn.y,e).setInteractive().setDataEnabled();this.getObjectPlacement().input.setDraggable(t),this.getObjectPlacement().getLayerManager().addToLayer(zn.Objects,t),this.registerObject(e,t)}registerObject(e,t){const s=this.generateItemId(e,this.getObjectPlacement().generateItemIdNumber()),n={id:s,assetKey:e,assetPath:ei(this.getObjectPlacement().getAssetPath(e)),x:xn.x,y:xn.y};this.objectDetailMap.set(s,n),t.data.set("itemId",s),t.data.set("type","object"),this.getObjectPlacement().setActiveSelection(t)}generateItemId(e,t){return`${Dl(e)}${t}`}getLoggables(){return[...this.objectDetailMap.values()]}checkpointTxtLog(){return Array.from(this.objectDetailMap.values()).map((e=>{const t=["+"+e.id,e.assetPath,ta.toIntString(e.x),ta.toIntString(e.y)];return e.width&&(t.push(ta.toIntString(e.width)),t.push(ta.toIntString(e.height))),t.join(", ")}))}setAttribute(e,t,s){const n=e.data.get("itemId"),i=this.objectDetailMap.get(n);i&&(i[t]=s)}deleteAll(){this.objectDetailMap.clear()}delete(e){const t=e.data.get("itemId");this.objectDetailMap.delete(t)}}var Gl={activeSelectMargin:30,scaleFactor:1.02};class Fl{constructor(){this.activeSelection=void 0,this.activeSelectRect=void 0,this.objectPlacement=void 0,this.getObjectPlacement=()=>ei(this.objectPlacement)}initialise(e){this.objectPlacement=e,this.trackDraggables(e),this.drawActiveSelectRect(),this.bindDeleteKey()}drawActiveSelectRect(){this.activeSelectRect=new Phaser.GameObjects.Rectangle(this.getObjectPlacement(),0,0,1,1,0).setAlpha(.3),this.getObjectPlacement().getLayerManager().addToLayer(zn.Selector,this.activeSelectRect)}trackDraggables(e){e.getInputManager().registerEventListener("drag",((t,s,n,i)=>{e.isCursorMode(Rl.DrawBBox)||(e.getCursorManager().setCursorMode(Rl.DragResizeObj),s.x=n,s.y=i),"object"===s.data.get("type")&&(e.setObjAttribute(s,"x",n),e.setObjAttribute(s,"y",i),this.setActiveSelection(s)),"bbox"===s.data.get("type")&&(e.setBBoxAttribute(s,"x",n),e.setBBoxAttribute(s,"y",i),this.setActiveSelection(s))}))}resizeActive(e){const t=this.getObjectPlacement();if(!this.activeSelection||!this.activeSelectRect)return;const s=e?Gl.scaleFactor:1/Gl.scaleFactor;!function(e,t){e.displayWidth*=t,e.displayHeight*=t}(this.activeSelection,s),this.activeSelectRect.displayHeight=this.activeSelection.displayHeight+Gl.activeSelectMargin,this.activeSelectRect.displayWidth=this.activeSelection.displayWidth+Gl.activeSelectMargin,"object"===this.activeSelection.data.get("type")&&(t.setObjAttribute(this.activeSelection,"width",Math.abs(this.activeSelection.displayWidth)),t.setObjAttribute(this.activeSelection,"height",Math.abs(this.activeSelection.displayHeight))),"bbox"===this.activeSelection.data.get("type")&&(t.setBBoxAttribute(this.activeSelection,"width",Math.abs(this.activeSelection.displayWidth)),t.setBBoxAttribute(this.activeSelection,"height",Math.abs(this.activeSelection.displayHeight)))}setActiveSelection(e){this.activeSelectRect&&(this.activeSelectRect.setAlpha(.3),this.activeSelection=e,this.activeSelectRect.x=e.x,this.activeSelectRect.y=e.y,this.activeSelectRect.displayHeight=e.displayHeight+Gl.activeSelectMargin,this.activeSelectRect.displayWidth=e.displayWidth+Gl.activeSelectMargin)}deselect(){this.activeSelectRect.setAlpha(0),this.activeSelection=void 0}bindDeleteKey(){[Phaser.Input.Keyboard.KeyCodes.BACKSPACE,Phaser.Input.Keyboard.KeyCodes.DELETE].forEach((e=>this.getObjectPlacement().getInputManager().registerKeyboardListener(e,"up",(()=>{this.deleteActiveSelection(),this.deselect()}))))}deleteActiveSelection(){if(this.activeSelection){switch(this.getType(this.activeSelection)){case"object":this.getObjectPlacement().deleteObj(this.activeSelection);break;case"bbox":this.getObjectPlacement().deleteBBox(this.activeSelection)}this.activeSelection.destroy()}}getType(e){var t;return null===(t=this.activeSelection)||void 0===t?void 0:t.data.get("type")}}var Hl={cursor:{x:100,y:100}};class Vl extends Phaser.Scene{constructor(){super("ObjectPlacement"),this.layerManager=void 0,this.inputManager=void 0,this.transformManager=void 0,this.cursorModes=void 0,this.bboxManager=void 0,this.objectManager=void 0,this.backgroundManager=void 0,this.logManager=void 0,this.assetMap=void 0,this.itemIdNumber=void 0,this.openBracket=void 0,this.closedBracket=void 0,this.getCursorManager=()=>ei(this.cursorModes),this.getInputManager=()=>ei(this.inputManager),this.getLayerManager=()=>ei(this.layerManager),this.objectManager=new Bl,this.bboxManager=new Il,this.backgroundManager=new Tl,this.logManager=new Ul,this.transformManager=new Fl,this.cursorModes=void 0,this.itemIdNumber=0,this.assetMap=new Map}init(){this.layerManager=new Oa(this),this.inputManager=new ja(this),this.objectManager=new Bl,this.bboxManager=new Il,this.backgroundManager=new Tl,this.logManager=new Ul,this.transformManager=new Fl,this.cursorModes=void 0,this.itemIdNumber=0,this.assetMap=new Map}create(){zo.getInstance().setCurrentSceneRef(this),this.renderBackground(),this.createUIButtons(),this.backgroundManager.initialise(this),this.objectManager.initialise(this),this.bboxManager.initialise(this),this.transformManager.initialise(this),this.logManager.initialise(this),this.openBracket=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.OPEN_BRACKET),this.closedBracket=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.CLOSED_BRACKET)}update(){this.openBracket&&this.openBracket.isDown&&this.transformManager.resizeActive(!1),this.closedBracket&&this.closedBracket.isDown&&this.transformManager.resizeActive(!0),this.bboxManager.resizeWhileBeingDrawn(this)}createUIButtons(){const e=new Phaser.GameObjects.Container(this,0,0),t=new qa(this,(()=>{this.cleanUp(),zo.getInstance().setStorySimState(Wc.Default),this.scene.start("StorySimulatorMenu")}));this.cursorModes=new Pl(this,Hl.cursor.x,Hl.cursor.y),this.populateCursorModes(),e.add(this.cursorModes),e.add(t),this.getLayerManager().addToLayer(zn.UI,e)}renderBackground(){const e=new Phaser.GameObjects.Image(this,xn.x,xn.y,_l.storySimBg.key);e.setDisplaySize(yn.x,yn.y),this.getLayerManager().addToLayer(zn.Background,e)}populateCursorModes(){this.cursorModes&&(this.cursorModes.addCursorMode(this,_l.colorIcon.key,!1,"Set background",(async()=>await this.backgroundManager.loadBackground())),this.cursorModes.addCursorMode(this,_l.imageIcon.key,!1,"Add selected object",(async()=>await this.objectManager.loadObject())),this.cursorModes.addCursorMode(this,_l.bboxIcon.key,!0,"Draw bounding boxes",(()=>this.cursorModes.setCursorMode(Rl.DrawBBox))),this.cursorModes.addCursorMode(this,_l.handIcon.key,!0,"Drag or resize",(()=>this.cursorModes.setCursorMode(Rl.DragResizeObj))),this.cursorModes.addCursorMode(this,_l.listIcon.key,!1,"Print coordinates",(()=>this.logManager.printCheckpoint(this.backgroundManager.getBackgroundAssetPath(),[this.objectManager,this.bboxManager])),(()=>this.logManager.showDetailMap([...this.objectManager.getLoggables(),...this.bboxManager.getLoggables()])),(()=>this.logManager.hideDetailMap())),this.cursorModes.addCursorMode(this,_l.eraseIcon.key,!1,"Erase all",(()=>{window.confirm("Are you sure you want to delete?")&&(this.getLayerManager().clearSeveralLayers([zn.Background,zn.BBox,zn.Objects]),this.objectManager.deleteAll(),this.bboxManager.deleteAll(),this.transformManager.deselect(),this.renderBackground())})),this.cursorModes.renderCursorModesContainer())}getCoordinates(){return[this.input.x,this.input.y]}isCursorMode(e){return this.getCursorManager().getCurrCursorMode()===e}cleanUp(){this.getInputManager().clearListeners(),this.getLayerManager().clearAllLayers()}addAsset(e,t){this.assetMap.set(e,t)}getAssetPath(e){return this.assetMap.get(e)}generateItemIdNumber(){return this.itemIdNumber++}setActiveSelection(e){this.transformManager.setActiveSelection(e)}setObjAttribute(e,t,s){this.objectManager.setAttribute(e,t,s)}deleteObj(e){this.objectManager.delete(e)}setBBoxAttribute(e,t,s){this.bboxManager.setAttribute(e,t,s)}deleteBBox(e){this.bboxManager.delete(e)}}const Wl={debug:!0,type:bn.CANVAS,width:yn.x,height:yn.y,physics:{default:"arcade"},scale:{mode:bn.Scale.FIT,parent:"game-display"},fps:{target:24}};var ql=function(){const e=Object(j.f)((e=>e.session)),[t,s]=f.useState(Wc.Default);return f.useEffect((()=>{(()=>{const e=new zo(Wl,Xo.Simulator);return e.scene.add("StorySimulatorMenu",kl,!0),e.scene.add("ObjectPlacement",Vl),e.scene.add("GameManager",or),e.scene.add("CheckpointTransition",Oo),e})().setStorySimStateSetter(s)}),[]),f.useEffect((()=>{zo.getInstance().setAccountInfo({accessToken:e.accessToken,refreshToken:e.refreshToken,role:e.role,name:e.name})}),[e]),Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)("div",{className:"StorySimulatorWrapper",children:[Object(se.jsx)("div",{id:"game-display"}),Object(se.jsxs)("div",{className:"LeftAlign StorySimulatorPanel",children:[t===Wc.Default&&Object(se.jsx)(se.Fragment,{children:Object(se.jsx)("h3",{children:"Welcome to story simulator!"})}),t===Wc.CheckpointSim&&Object(se.jsx)(El,{}),t===Wc.ObjectPlacement&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h3",{children:"Asset Selection"}),Object(se.jsx)(dl,{})]}),t===Wc.AssetUploader&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("h3",{children:"Asset uploader"}),Object(se.jsx)(il,{}),Object(se.jsx)("h3",{children:"Asset Viewer"}),Object(se.jsx)(dl,{})]}),t===Wc.ChapterSim&&Object(se.jsx)(yl,{})]})]})})};const $l=[{field:"name"},{field:"NUS Net ID"},{field:"Assessment Xp"},{field:"Achievement Xp"}],Xl={resizable:!0,sortable:!0},zl=(e,t,s,n)=>0===s?"(none)":t!==s?`(#${e*t-19} - #${e*t})`:`(#${e*t-19} - #${n})`;var Yl=()=>{const e=Object(r.c)(),t=Object(j.f)((e=>e.session.allUserXp)),[s,n]=Object(f.useState)([]),[i,a]=Object(f.useState)(),[o,c]=Object(f.useState)({currPage:1,maxPages:1,rowCountString:"(none)",isBackDisabled:!0,isForwardDisabled:!0});Object(f.useEffect)((()=>{if(t){const e=t.map((e=>{const[t,s,n,i]=e;return{name:null!==t&&void 0!==t?t:"","NUS Net ID":null!==s&&void 0!==s?s:"","Assessment Xp":null!==n&&void 0!==n?n:"0","Achievement Xp":null!==i&&void 0!==i?i:"0"}}));n(e)}}),[t]);const l=Object(f.useCallback)((()=>{i&&i.exportDataAsCsv({fileName:`SA XP Count (${(new Date).toISOString()}).csv`,columnKeys:["name","NUS Net ID","Assessment Xp","Achievement Xp"]})}),[i]),d=Object(f.useCallback)((()=>{i&&i.sizeColumnsToFit()}),[i]),p=Object(f.useCallback)((e=>()=>{if(i)switch(e){case"first":return i.paginationGoToFirstPage();case"prev":return i.paginationGoToPreviousPage();case"next":return i.paginationGoToNextPage();case"last":return i.paginationGoToLastPage()}}),[i]),g=Object(f.useCallback)((()=>{if(i){const e=i.paginationGetTotalPages(),t=0===e?0:i.paginationGetCurrentPage()+1;c({currPage:t,maxPages:e,rowCountString:zl(25,t,e,i.paginationGetRowCount()),isBackDisabled:0===e||1===t,isForwardDisabled:0===e||t===e})}}),[i,c]),m=Object(f.useCallback)((e=>{a(e.api),g()}),[a,g]),b=()=>Object(se.jsx)("div",{className:"grading-controls",children:Object(se.jsxs)("div",{className:"GridControls ag-grid-controls",children:[Object(se.jsx)("div",{style:{width:"130px"},className:"left-controls"}),Object(se.jsxs)("div",{className:"centre-controls",children:[Object(se.jsx)(h.b,{icon:E.a.CHEVRON_BACKWARD,onClick:p("first"),minimal:!0,disabled:o.isBackDisabled}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_LEFT,onClick:p("prev"),minimal:!0,disabled:o.isBackDisabled}),Object(se.jsxs)(h.b,{className:"pagination-details hidden-xs",disabled:!0,minimal:!0,children:[Object(se.jsx)("div",{children:`Page ${o.currPage} of ${o.maxPages}`}),Object(se.jsx)("div",{children:o.rowCountString})]}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_RIGHT,onClick:p("next"),minimal:!0,disabled:o.isForwardDisabled}),Object(se.jsx)(h.b,{icon:E.a.CHEVRON_FORWARD,onClick:p("last"),minimal:!0,disabled:o.isForwardDisabled})]}),Object(se.jsx)("div",{className:"right-controls",children:Object(se.jsx)(h.b,{icon:E.a.EXPORT,onClick:l,children:Object(se.jsx)("span",{className:"hidden-xs",children:"Export to CSV"})})})]})}),v=Object(se.jsx)(h.G,{className:"Grading",description:"Fetching XP...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})}),y=Object(se.jsxs)("div",{className:"Grading",children:[Object(se.jsx)(b,{}),Object(se.jsx)(h.i,{}),Object(se.jsx)(Ns.AgGridReact,{domLayout:"autoHeight",className:"ag-grid-parent ag-theme-balham",columnDefs:$l,onGridReady:m,onPaginationChanged:g,onGridSizeChanged:d,defaultColDef:Xl,rowData:s,rowHeight:30,pagination:!0,paginationPageSize:20,suppressCellSelection:!0,suppressMovableColumns:!0,suppressPaginationPanel:!0})]});return Object(se.jsx)(Ne.a,{loadContentDispatch:()=>e(Object(u.fetchAllUserXp)()),display:t?y:v,fullWidth:!1})};const Kl=()=>{const{path:e,url:t}=Object(o.k)(),s=Object(r.c)();f.useEffect((()=>{s(Object(u.fetchNotifications)())}),[s]);const n=Object(j.f)((e=>e.session.assessmentConfigurations)),i=Object(j.f)((e=>e.session.enableGame)),a=Object(j.f)((e=>e.session.role)),c="student"!==a?[Object(se.jsx)(o.c,{path:`${e}/groundcontrol`,component:Rc},0),Object(se.jsx)(o.c,{path:`${e}/grading/${Ye.e}`,component:vc},1),Object(se.jsx)(o.c,{path:`${e}/xpcalculation`,component:Yl},2),Object(se.jsx)(o.c,{path:`${e}/sourcereel`,component:Vc},3),Object(se.jsx)(o.c,{path:`${e}/storysimulator`,component:ql},4),Object(se.jsx)(o.c,{path:`${e}/dashboard`,component:mn},5)]:null;return Object(se.jsx)("div",{className:"Academy",children:Object(se.jsxs)(o.e,{children:[null===n||void 0===n?void 0:n.map((t=>Object(se.jsx)(o.c,{path:`${e}/${Object(we.a)(t.type)}/${Ye.d}`,children:Object(se.jsx)(ze,{assessmentConfiguration:t})},t.type))),i&&Object(se.jsx)(o.c,{path:`${e}/game`,component:Jo}),Object(se.jsx)(o.c,{path:`${e}/sourcecast/:sourcecastId?`,component:Ks}),Object(se.jsx)(o.c,{path:`${e}/achievements`,component:xs}),Object(se.jsx)(o.c,{exact:!0,path:e,children:Object(se.jsx)(o.b,{push:!1,to:i?`${t}/game`:n&&n.length>0?`${t}/${Object(we.a)(n[0].type)}`:"admin"===a?`${t}/adminpanel`:"/404"})}),c,"admin"===a&&Object(se.jsx)(o.c,{path:`${e}/adminpanel`,component:un}),Object(se.jsx)(o.c,{component:Ke})]})})};var Ql=()=>{const e=Object(r.c)(),t=Object(j.f)((e=>e.session.courseId)),{courseId:s}=Object(o.j)(),n=null!=s?parseInt(s,10):void 0;return f.useEffect((()=>{void 0!==n&&t!==n&&e(Object(u.updateLatestViewedCourse)(n))}),[t,e,n]),n===t?Object(se.jsx)(Kl,{}):Object(se.jsx)("div",{className:x()("Academy-switching-courses",p.a.DARK),children:Object(se.jsx)(h.e,{className:p.a.ELEVATION_4,children:Object(se.jsx)(h.G,{description:"Switching courses...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})})})})};const Jl=Object(se.jsx)("span",{className:"dot",children:"\u2022"});var Zl=()=>Object(se.jsx)("div",{className:"outsideDetails",children:Object(se.jsxs)(h.e,{className:"contributorsDetails",elevation:C.a.ONE,children:[Object(se.jsx)(h.q,{children:"The Team behind the Source Academy"}),Object(se.jsxs)("p",{className:"description",children:["The ",Object(se.jsx)("i",{children:"Source Academy"})," is designed and developed by a team of students, most of who have used the system to learn the fundamentals of computing and enjoyed it. This page includes all developers who contributed to the Source Academy ",Object(se.jsx)("i",{children:"Merlin"})," (2023) and its precursors"," ",Object(se.jsx)("i",{children:"Rook"})," (2022), ",Object(se.jsx)("i",{children:"Knight"})," (2020) and ",Object(se.jsx)("i",{children:"Cadet"})," (2018). These versions succeeded Source Academy 2 (2017) and ultimately the original Source Academy (2016)."]}),Object(se.jsxs)("div",{className:"leadership",children:[Object(se.jsx)(h.s,{children:Object(se.jsx)("strong",{children:Object(se.jsx)("u",{children:"2023 Leadership (Merlin)"})})}),Object(se.jsxs)("p",{children:["Chow En Rong,",Object(se.jsx)("br",{}),"Shen Yi Hong",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Frontend)"})]}),Jl,Object(se.jsxs)("p",{children:["Chen Yanyu",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Backend)"})]}),Jl,Object(se.jsxs)("p",{children:["Gokul Rajiv,",Object(se.jsx)("br",{}),"Lee Hyung Woon",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Game)"})]}),Jl,Object(se.jsxs)("p",{children:["Shen Yi Hong,",Object(se.jsx)("br",{}),"Zhan Jie,",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Source)"})]}),Jl,Object(se.jsxs)("p",{children:["Lee Yi,",Object(se.jsx)("br",{}),"Joel Leow",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Modules)"})]}),Jl,Object(se.jsxs)("p",{children:["Richard Dominick",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Robotics)"})]}),Jl,Object(se.jsxs)("p",{children:["Boyd Anderson,",Object(se.jsx)("br",{}),"Martin Henz,",Object(se.jsx)("br",{}),"Eldric Liew,",Object(se.jsx)("br",{}),"Low Kok Lim,",Object(se.jsx)("br",{}),"Sanka Rasnayaka",Object(se.jsx)("br",{}),Object(se.jsx)("strong",{children:"(Coordination)"})]})]}),Object(se.jsxs)("div",{className:"hallOfFame",children:[Object(se.jsx)(h.s,{children:Object(se.jsx)("strong",{children:Object(se.jsx)("u",{children:"Hall of Fame"})})}),Object(se.jsx)("p",{children:Object(se.jsx)("strong",{children:"Cadet architect"})}),Object(se.jsx)("p",{children:"Evan Sebastian"}),Object(se.jsx)("p",{children:Object(se.jsx)("strong",{children:"Cadet core team"})}),Object(se.jsxs)("p",{children:["Julius Putra Tanu Setiaji ",Jl," Lee Ning Yuan ",Jl," Vignesh Shankar ",Jl," Thomas Tan ",Jl," ","Chen Shaowei"]}),Object(se.jsx)("p",{children:Object(se.jsx)("strong",{children:"Graphic design"})}),Object(se.jsxs)("p",{children:["Ng Tse Pei ",Jl," Joey Yeo ",Jl," Tan Yu Wei ",Jl," Sigmund Chianasta"]})]}),Object(se.jsxs)("div",{className:"leadership",children:[Object(se.jsx)("p",{children:Object(se.jsx)("strong",{children:"2019 Leadership"})}),Object(se.jsx)("br",{}),Object(se.jsxs)("p",{children:["Liow Jia Chen",Object(se.jsx)("br",{}),"(Backend)"]}),Jl,Object(se.jsxs)("p",{children:["Ge Shuming",Object(se.jsx)("br",{}),"(Frontend)"]}),Jl,Object(se.jsxs)("p",{children:["Rahul Rajesh",Object(se.jsx)("br",{}),"(DevOps)"]}),Jl,Object(se.jsxs)("p",{children:["Daryl Tan",Object(se.jsx)("br",{}),"(Source)"]}),Jl,Object(se.jsxs)("p",{children:["She Jiayu",Object(se.jsx)("br",{}),"(Tools)"]})]}),Object(se.jsxs)("div",{className:"leadership",children:[Object(se.jsx)("p",{className:"evenWider",children:Object(se.jsx)("strong",{children:"2020 Leadership (Knight)"})}),Object(se.jsx)("br",{}),Object(se.jsxs)("p",{children:["Tiffany Chong",Object(se.jsx)("br",{}),"(Game)"]}),Jl,Object(se.jsxs)("p",{children:["Anthony Halim",Object(se.jsx)("br",{}),"(Architecture)"]}),Jl,Object(se.jsxs)("p",{children:["Kan Yip Keng, Jet",Object(se.jsx)("br",{}),"(Frontend)"]}),Jl,Object(se.jsxs)("p",{children:["Low Jun Kai, Sean",Object(se.jsx)("br",{}),"(Frontend)"]}),Jl,Object(se.jsxs)("p",{children:["Daryl Tan",Object(se.jsx)("br",{}),"(Source)"]}),Jl,Object(se.jsxs)("p",{className:"wider",children:["Tee Hao Wei",Object(se.jsx)("br",{}),"(Backend & DevOps)"]})]}),Object(se.jsxs)("div",{className:"leadership",children:[Object(se.jsx)("p",{children:Object(se.jsx)("strong",{children:"2021 Leadership"})}),Object(se.jsx)("br",{}),Object(se.jsxs)("p",{children:["Tiffany Chong",Object(se.jsx)("br",{}),"(Game)"]}),Jl,Object(se.jsxs)("p",{children:["Anthony Halim",Object(se.jsx)("br",{}),"(Frontend)"]}),Jl,Object(se.jsxs)("p",{className:"evenWider",children:["Daryl Tan, Thomas Tan",Object(se.jsx)("br",{}),"(Source)"]}),Jl,Object(se.jsxs)("p",{className:"wider",children:["Tee Hao Wei",Object(se.jsx)("br",{}),"(Backend & DevOps)"]})]}),Object(se.jsxs)("div",{className:"leadership",children:[Object(se.jsx)("p",{className:"evenWider",children:Object(se.jsx)("strong",{children:"2022 Leadership (Rook)"})}),Object(se.jsx)("br",{}),Object(se.jsxs)("p",{children:["Tee Hao Wei",Object(se.jsx)("br",{}),"(CTO)"]}),Jl,Object(se.jsxs)("p",{children:["Chow En Rong",Object(se.jsx)("br",{}),"(Frontend)"]}),Jl,Object(se.jsxs)("p",{children:["Chen Yanyu",Object(se.jsx)("br",{}),"(Backend)"]}),Jl,Object(se.jsxs)("p",{children:["Samuel Fang",Object(se.jsx)("br",{}),"(SICP JS)"]}),Jl,Object(se.jsxs)("p",{children:["Gokul Rajiv,",Object(se.jsx)("br",{}),"Lee Hyung Woon",Object(se.jsx)("br",{}),"(Game)"]}),Jl,Object(se.jsxs)("p",{children:["Shen Yi Hong,",Object(se.jsx)("br",{}),"Zhan Jie,",Object(se.jsx)("br",{}),"Thomas Tan",Object(se.jsx)("br",{}),"(Source)"]}),Jl,Object(se.jsxs)("p",{children:["Bryan Loh,",Object(se.jsx)("br",{}),"Marcus Tang",Object(se.jsx)("br",{}),"(Modules)"]})]}),Object(se.jsxs)("div",{className:"contributors",children:[Object(se.jsx)(h.s,{children:Object(se.jsx)("strong",{children:Object(se.jsx)("u",{children:"All Contributors"})})}),Object(se.jsxs)("p",{children:["Below are all contributors to the"," ",Object(se.jsx)("a",{href:Se.a.githubOrg,children:"GitHub repositories of the Source Academy"}),". Feel free to join us!"]})]})]})});const ed=["assessments","tools","source-academy2"],td=["dependabot[bot]","dependabot-preview[bot]"];var sd=()=>{const[e,t]=Object(f.useState)([]),[s,n]=Object(f.useState)([]);Object(f.useEffect)((()=>{(async()=>{const e=await fetch("https://api.github.com/orgs/source-academy/repos"),t=await e.json();return await t.filter((e=>!ed.includes(e.name))).map((e=>({key:e.id,name:e.name,description:e.description,link:e.contributors_url})))})().then((e=>{(async e=>{const t=await Promise.all(e.map((e=>fetch(e.link)))),s=await Promise.all(t.map((e=>e.json())));return await Promise.all(s.map((e=>e.filter((e=>!td.includes(e.login))).map((e=>({key:e.id,photo:e.avatar_url,githubPage:e.html_url,githubName:e.login,commits:e.contributions}))))))})(e).then((s=>{t(e),n(s)}))}))}),[]);const i=s.length?s.map(((t,s)=>{const n=e[s],i=t.map((e=>Object(se.jsxs)("div",{children:[Object(se.jsx)("img",{src:e.photo,alt:"Contributor"}),Object(se.jsx)("p",{children:Object(se.jsx)("a",{href:e.githubPage,rel:"noopener noreferrer",target:"_blank",children:e.githubName})}),Object(se.jsxs)("p",{children:["Commits: ",e.commits]})]},e.key)));return Object(se.jsxs)(h.e,{className:"containerPermalink",elevation:C.a.ONE,children:[Object(se.jsxs)("div",{className:"repoDetailsPermalink",children:[Object(se.jsx)(h.q,{children:n.name}),Object(se.jsx)(h.s,{children:n.description})]}),Object(se.jsx)("div",{className:"inPermalink",children:i})]},n.key)})):Object(se.jsx)(h.p,{children:"Loading..."});return Object(se.jsx)("div",{children:i})};var nd=()=>Object(se.jsx)("div",{className:"fullpage",children:Object(se.jsxs)(h.e,{className:"fullpage-content",elevation:C.a.THREE,children:[Object(se.jsx)(Zl,{}),Object(se.jsx)(sd,{})]})});var id=e=>{let{reason:t}=e;return Object(se.jsx)("div",{className:x()("NoPage",p.a.DARK),children:Object(se.jsx)(h.G,{icon:E.a.ERROR,title:"Disabled",description:`The Source Academy has been disabled${t?` for this reason: ${t}`:""}.`})})},ad=s(523),rd=s(215),od=s(281);function cd(e){const t=rd.parse(e);for(const[s,n]of Object.entries(t))Object(od.isArray)(n)?t[s]=n.join(","):null===n&&delete t[s];return t}var ld=s(72);function dd(e){let{title:t,children:s}=e;return Object(se.jsx)("div",{className:x()("NoPage",p.a.DARK),children:Object(se.jsx)(h.G,{icon:E.a.ERROR,title:t,description:s})})}var ud=function(e){let{location:t}=e;const s=cd(t.search).code,[n,i]=Object(f.useState)("initial");return Object(f.useEffect)((()=>{"initial"===n&&Se.b.githubClientId&&s&&(i("loading"),async function(e,t,s){const n=await ld.e(Se.b.githubOAuthProxyUrl,rd.stringify({code:e,clientId:t}));let i;try{if(i=await n.json(),"undefined"===typeof i.access_token)throw new Error("Access Token not found in payload")}catch(a){return void s()}try{new BroadcastChannel("GitHubOAuthAccessToken").postMessage(i.access_token),window.close()}catch(a){}}(s,Se.b.githubClientId,(()=>i("error"))))}),[s,n]),Se.b.githubClientId?s?"error"===n?Object(se.jsx)(dd,{title:"We couldn't authenticate you with GitHub",children:"Connection with server was denied, or incorrect payload received. Please try again or contact the website administrator."}):Object(se.jsx)("div",{className:x()("NoPage",p.a.DARK),children:Object(se.jsx)(h.G,{description:"Logging In...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})})}):Object(se.jsx)(dd,{title:"We couldn't authenticate you with GitHub",children:"Access code not found in callback URL. Please try again or contact the website administrator."}):Object(se.jsx)(dd,{title:"We couldn't authenticate you with GitHub",children:"Client ID not included with deployment. Please try again or contact the website administrator."})};const hd=[...Se.b.authProviders.entries()].map((e=>{let[t,{name:s}]=e;return{id:t,name:s}})),pd=e=>{let{handleClick:t,id:s,name:n}=e;return Object(se.jsx)(h.b,{className:p.a.LARGE,rightIcon:E.a.LOG_IN,onClick:f.useCallback((()=>t(s)),[t,s]),children:`Log in with ${n}`})};var gd=()=>{const e=Object(r.c)(),t=Object(o.i)(),{code:s,provider:n}=cd(t.search),i=f.useCallback((t=>e(Object(u.login)(t))),[e]);return f.useEffect((()=>{s&&e(Object(u.fetchAuth)(s,n))}),[s,n,e]),s?Object(se.jsx)("div",{className:x()("Login",p.a.DARK),children:Object(se.jsx)(h.e,{className:x()("login-card",p.a.ELEVATION_4),children:Object(se.jsx)("div",{className:"login-body",children:Object(se.jsx)(h.G,{description:"Logging In...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})})})})}):Object(se.jsx)("div",{className:x()("Login",p.a.DARK),children:Object(se.jsxs)(h.e,{className:x()("login-card",p.a.ELEVATION_4),children:[Object(se.jsx)("div",{className:"login-header",children:Object(se.jsxs)(h.r,{children:[Object(se.jsx)(h.w,{icon:E.a.LOCK}),"LOGIN"]})}),Object(se.jsx)("div",{className:"login-body",children:Object(se.jsx)(h.c,{fill:!0,vertical:!0,children:hd.map((e=>{let{id:t,name:s}=e;return Object(se.jsx)(pd,{handleClick:i,name:s,id:t},t)}))})})]})})},md=s(298),bd=s(296);const fd=e=>e.charAt(0).toUpperCase()+e.slice(1),vd=()=>{const e=localStorage.getItem("MissionEditingAssessmentSA");return e?JSON.parse(e):null},yd=e=>{localStorage.setItem("MissionEditingAssessmentSA",JSON.stringify(e))},xd=e=>{localStorage.setItem("MissionEditingOverviewSA",JSON.stringify(e))},jd=(e,t)=>{const s=e.CONTENT.TASK[0],n=s.$;return{type:fd(n.kind),isManuallyGraded:!0,closeAt:n.duedate,coverImage:n.coverimage,id:-1,maxXp:t,number:n.number||"",openAt:n.startdate,title:n.title,reading:s.READING?s.READING[0]:"",shortSummary:s.WEBSUMMARY?s.WEBSUMMARY[0]:"",status:H.a.attempting,story:n.story,xp:0,gradingStatus:"none"}},Od=e=>{const t=e.CONTENT.TASK[0],s=t.$,n=Sd(t);return[{type:fd(s.kind),id:-1,globalDeployment:Cd(t.DEPLOYMENT),graderDeployment:Cd(t.GRADERDEPLOYMENT),longSummary:t.TEXT[0],missionPDF:"google.com",questions:n[0],title:s.title},n[1]]},Cd=e=>{if(void 0===e)return Object(H.h)();{const t=e[0],s=t.IMPORT||t.EXTERNAL;return{external:{name:s?s[0].$.name:"NONE",symbols:s&&s[0].SYMBOL||[]},globals:t.GLOBAL?t.GLOBAL.map((e=>{return[e.IDENTIFIER[0],(t=e.VALUE[0],Function('"use strict";return ('+t+")")()),e.VALUE[0]];var t})):[]}}},Sd=e=>{let t=0;const s=[];return e.PROBLEMS[0].PROBLEM.forEach(((e,n)=>{const i=e.$.maxxp?parseInt(e.$.maxxp,10):0,a={answer:null,content:e.TEXT[0],id:n,library:Cd(e.DEPLOYMENT),graderLibrary:Cd(e.GRADERDEPLOYMENT),type:e.$.type,xp:0,maxXp:i};t+=i,"programming"===a.type&&s.push(wd(e,a)),"mcq"===a.type&&s.push(Ed(e,a))})),[s,t]},Ed=(e,t)=>{const s=[],n=e.SNIPPET?e.SNIPPET[0].SOLUTION:void 0;let i=0;return e.CHOICE.forEach(((e,t)=>{s.push({content:e.TEXT[0],hint:null}),i="true"===e.$.correct?t:i})),{...t,type:"mcq",answer:n?parseInt(n[0],10):0,choices:s,solution:i}},wd=(e,t)=>{const s=e.SNIPPET[0].TESTCASES,n=s&&s[0].PUBLIC||[],i=s&&s[0].PRIVATE||[],a=e.SNIPPET[0].PREPEND,r=e.SNIPPET[0].POSTPEND,o=e.SNIPPET[0].SOLUTION,c={...t,autogradingResults:[],prepend:a?a[0].trim():"",solutionTemplate:e.SNIPPET[0].TEMPLATE[0].trim(),postpend:r?r[0].trim():"",testcases:n.map((e=>_d(e))),testcasesPrivate:i.map((e=>_d(e))),answer:o?o[0].trim():"",type:"programming"};return e.SNIPPET[0].GRADER&&(c.graderTemplate=e.SNIPPET[0].GRADER[0]),c},_d=e=>({type:H.f.public,answer:e.$.answer,score:parseInt(e.$.score,10),program:e._}),Ad=(e,t)=>{const s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},kd=e=>{const t={$:{interpreter:I.Chapter.CLANG.toString()},EXTERNAL:{$:{name:e.external.name}}};return 0!==e.external.symbols.length&&(t.EXTERNAL.SYMBOL=e.external.symbols),0!==e.globals.length&&(t.GLOBAL=e.globals.map((e=>({IDENTIFIER:e[0],VALUE:e[2]})))),t},Td=(e,t)=>{const s={},n={coverimage:t.coverImage,duedate:t.closeAt,kind:t.type.toLowerCase(),number:t.number||"",startdate:t.openAt,story:t.story,title:t.title};return s.$=n,t.reading&&""!==t.reading&&(s.READING=t.reading),s.WEBSUMMARY=t.shortSummary,s.TEXT=e.longSummary,s.PROBLEMS={PROBLEM:[]},s.DEPLOYMENT=kd(e.globalDeployment),s.GRADERDEPLOYMENT=kd(e.graderDeployment),e.questions.forEach((e=>{const t={$:{type:e.type},SNIPPET:{SOLUTION:e.answer},TEXT:e.content,CHOICE:[]};if(t.$.DEPLOYMENT=kd(e.library),t.$.GRADERDEPLOYMENT=kd(e.graderLibrary),e.maxXp&&(t.$.maxxp=e.maxXp),"programming"===e.type){e.graderTemplate&&(t.SNIPPET.GRADER=e.graderTemplate);const s={...t.SNIPPET,TEMPLATE:e.solutionTemplate,PREPEND:e.prepend,POSTPEND:e.postpend,TESTCASES:""};if(e.testcases.length||e.testcasesPrivate.length){if(s.TESTCASES={},e.testcases.length){const t=e.testcases.map((e=>({$:{answer:e.answer,score:e.score},_:e.program})));s.TESTCASES.PUBLIC=t}if(e.testcasesPrivate&&e.testcasesPrivate.length){const t=e.testcasesPrivate.map((e=>({$:{answer:e.answer,score:e.score},_:e.program})));s.TESTCASES.PRIVATE=t}}t.SNIPPET=s}"mcq"===e.type&&e.choices.forEach(((s,n)=>{t.CHOICE.push({$:{correct:e.solution===n?"true":"false"},TEXT:s.content})})),s.PROBLEMS.PROBLEM.push(t)})),s};class Rd extends f.Component{constructor(e){var t;super(e),t=this,this.saveEditOverview=e=>t=>{const s={...this.props.overview,[e]:this.state.fieldValue};this.setState({editingOverviewField:"",fieldValue:""}),xd(s),this.props.updateEditingOverview(s)},this.handleEditOverview=()=>e=>{this.setState({fieldValue:e.target.value})},this.toggleEditField=e=>t=>{this.state.editingOverviewField!==e&&this.setState({editingOverviewField:e,fieldValue:this.props.overview[e]})},this.toggleOptionsOverlay=()=>{this.setState({showOptionsOverlay:!this.state.showOptionsOverlay})},this.handleExportXml=e=>{(()=>{const e=localStorage.getItem("MissionEditingAssessmentSA"),t=localStorage.getItem("MissionEditingOverviewSA");if(e&&t){const s=JSON.parse(e),n=JSON.parse(t),i=n.fileName||n.title,a=new bd.Builder,r={CONTENT:{$:{"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},TASK:Td(s,n)}};let o=a.buildObject(r);o=o.replace(/(&#xD;)+/g,""),Ad(i+".xml",o)}})()},this.makeEditingOverviewTextarea=e=>Object(se.jsx)(md.a,{autoFocus:!0,className:"editing-textarea",onChange:this.handleEditOverview(),onBlur:this.saveEditOverview(e),value:this.state.fieldValue}),this.makeEditingOverviewCard=e=>Object(se.jsx)("div",{children:Object(se.jsxs)(h.e,{className:"row listing",elevation:C.a.ONE,children:[Object(se.jsx)("div",{className:"col-xs-3 listing-picture",onClick:this.toggleEditField("coverImage"),children:"coverImage"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("coverImage"):Object(se.jsx)("img",{alt:"Assessment cover",className:`cover-image-${e.status}`,src:e.coverImage?e.coverImage:T.a})}),Object(se.jsxs)("div",{className:"col-xs-9 listing-text",children:[this.makeEditingOverviewCardTitle(e,e.title),Object(se.jsx)("div",{className:"row listing-xp",children:Object(se.jsxs)(h.t,{children:[" ",`Max XP: ${e.maxXp}`," "]})}),Object(se.jsx)("div",{className:"row listing-description",onClick:this.toggleEditField("shortSummary"),children:"shortSummary"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("shortSummary"):Object(se.jsx)(ee.a,{content:Id(e.shortSummary)})}),Object(se.jsxs)("div",{className:"listing-controls",children:[Object(se.jsxs)(h.Y,{className:"listing-due-date",children:[Object(se.jsx)(h.w,{className:"listing-due-icon",iconSize:12,icon:E.a.TIME}),Object(se.jsx)("div",{className:"date-container",children:"Opens at:\xa0"}),Object(se.jsx)("div",{className:"date-container",onClick:this.toggleEditField("openAt"),children:"openAt"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("openAt"):`${ke(e.openAt)}`}),Object(se.jsx)("div",{className:"date-container",children:"\xa0\xa0Due:\xa0"}),Object(se.jsx)("div",{className:"date-container",onClick:this.toggleEditField("closeAt"),children:"closeAt"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("closeAt"):`${ke(e.closeAt)}`})]}),Object(se.jsx)(h.b,{icon:E.a.WRENCH,minimal:!0,onClick:this.toggleOptionsOverlay,children:"Other Options"}),Object(se.jsx)(k.b,{to:`${this.props.listingPath}/${e.id.toString()}/${Se.b.defaultQuestionId}`,children:Object(se.jsx)(J.a,{label:"Edit mission",icon:E.a.EDIT})})]})]})]})}),this.makeEditingOverviewCardTitle=(e,t)=>Object(se.jsxs)("div",{className:"row listing-title",children:[Object(se.jsx)(h.Y,{ellipsize:!0,className:"col-xs-10",children:Object(se.jsx)(h.r,{onClick:this.toggleEditField("title"),children:"title"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("title"):Id(t)})}),Object(se.jsx)("div",{className:"col-xs-2",children:this.makeExportButton(e)})]}),this.makeExportButton=e=>Object(se.jsx)(h.b,{icon:E.a.EXPORT,intent:g.a.DANGER,minimal:!0,onClick:this.handleExportXml,children:"Save as XML"}),this.saveCategory=(e,t)=>{const s={...this.props.overview,category:e};xd(s),this.props.updateEditingOverview(s)},this.optionsOverlay=()=>Object(se.jsx)(h.h,{canOutsideClickClose:!1,className:"assessment-reset",icon:E.a.WRENCH,isCloseButtonShown:!0,isOpen:this.state.showOptionsOverlay,onClose:this.toggleOptionsOverlay,title:"Other options",children:Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)(h.q,{children:"Assessment Type"}),this.assessmentTypeSelect(this.props.overview.type,this.saveCategory),Object(se.jsx)(h.q,{children:"Number"}),Object(se.jsx)("div",{onClick:this.toggleEditField("number"),children:"number"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("number"):Id(this.props.overview.number||"")}),Object(se.jsx)(h.q,{children:"Story"}),Object(se.jsx)("div",{onClick:this.toggleEditField("story"),children:"story"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("story"):Id(this.props.overview.story||"")}),Object(se.jsx)("br",{}),Object(se.jsx)(h.q,{children:"Filename"}),Object(se.jsx)("div",{onClick:this.toggleEditField("fileName"),children:"fileName"===this.state.editingOverviewField?this.makeEditingOverviewTextarea("fileName"):Id(this.props.overview.fileName||"")})]})}),this.assessmentTypeSelect=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>{};return Object(se.jsx)(Ld,{className:p.a.MINIMAL,items:t.props.assessmentTypes,onItemSelect:s,itemRenderer:Pd,filterable:!1,children:Object(se.jsx)(h.b,{className:p.a.MINIMAL,text:e,rightIcon:E.a.DOUBLE_CARET_VERTICAL})})},this.state={editingOverviewField:"",fieldValue:"",showOptionsOverlay:!1}}render(){return Object(se.jsxs)("div",{children:[this.optionsOverlay(),this.makeEditingOverviewCard(this.props.overview)]})}}const Id=e=>e.match("^(\n| )*$")?"Enter Value Here (If Applicable)":e,Ld=ct.a.ofType(),Pd=(e,t)=>{let{handleClick:s,modifiers:n,query:i}=t;return Object(se.jsx)(h.B,{active:!1,onClick:s,text:e},e)},Nd=e=>{let{toggleEditMode:t,editingMode:s}=e;const n="question"===s?"Global":"Question Specific";return Object(se.jsx)(w.a,{content:"Switch to "+n+" Editing Mode",children:Object(se.jsx)(J.a,{label:n+" Editing Mode",icon:E.a.REFRESH,onClick:t})})},Dd=(e,t)=>{for(const s of e)t=t[s];return t},Md=(e,t,s)=>{let n=0;for(n=0;n<e.length-1;n++)s=s[e[n]];s[e[n]]=t},Ud=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s=>{let n;return s="string"===typeof s?parseInt(s,10):s,n=null!==e&&s<e?e:null!==t&&s>t?t:s,n}},Bd=e=>{const t=e.isNumber||!1,[s,n]=Object(f.useState)(!1),[i]=Object(f.useState)(t),[a,r]=Object(f.useState)(""),[o]=Object(f.useState)(e.useRawValue||t),c=t=>{let s;i?(s=parseInt(a,10),isNaN(s)&&(s=Dd(e.path,e.assessment))):s=a;const r=Dd(e.path,e.assessment);if(e.processResults&&(s=e.processResults(s)),s!==r){const t=e.assessment;Md(e.path,s,t),e.updateAssessment(t)}n(!1)},l=e=>{r(e.target.value)};let d;if(s)d=Object(se.jsx)(md.a,{autoFocus:!0,className:"editing-textarea",onChange:l,onBlur:c,value:a});else{const t="Please enter value (if applicable)";let s=Dd(e.path,e.assessment);e.isNumber||(s=s||"",s=s.match(/^\s*$/)?t:s),d=o?s:Object(se.jsx)(ee.a,{content:s})}return Object(se.jsx)("div",{onClick:t=>{if(!s){const t=Dd(e.path,e.assessment)||"";n(!0),r("string"===typeof t?t:t.toString())}},children:d})};var Gd=Bd;const Fd=e=>{const t=t=>()=>{t.push(Object(H.l)()),e.updateAssessment(e.assessment)},s=(t,s)=>{const n=Dd(t,e.assessment),i=n[s];return Object(se.jsx)("div",{children:Object(se.jsx)(h.e,{className:"row listing",elevation:C.a.ONE,children:Object(se.jsxs)("div",{className:"col-xs-9 listing-text",children:[Object(se.jsx)("div",{className:"row listing-program",children:Object(se.jsxs)(h.t,{children:["Test Program:",Object(se.jsx)(Gd,{assessment:e.assessment,path:t.concat([s,"program"]),useRawValue:!0,updateAssessment:e.updateAssessment})]})}),Object(se.jsx)("div",{className:"row listing-expected",children:Object(se.jsxs)(h.t,{children:["Score:",Object(se.jsx)(Gd,{assessment:e.assessment,isNumber:!0,path:t.concat([s,"score"]),updateAssessment:e.updateAssessment})]})}),Object(se.jsx)("div",{className:"row listing-expected",children:Object(se.jsxs)(h.t,{children:["Expected Answer:",Object(se.jsx)(Gd,{assessment:e.assessment,path:t.concat([s,"answer"]),useRawValue:!0,updateAssessment:e.updateAssessment})]})}),Object(se.jsx)("div",{className:"listing-controls",children:Object(se.jsxs)("div",{children:[Object(se.jsx)(J.a,{label:"Test",icon:E.a.PLAY,onClick:()=>e.handleTestcaseEval(i)}),Object(se.jsx)(J.a,{label:"Delete",icon:E.a.DELETE,onClick:()=>((t,s)=>{t.splice(s,1),e.updateAssessment(e.assessment)})(n,s)})]})})]})})})},n=e.assessment.questions[e.questionId],i=["questions",e.questionId,"testcases"],a=n.testcases.map(((e,t)=>Object(se.jsx)("div",{children:s(i,t)},t))),r=["questions",e.questionId,"testcasesPrivate"],o=n.testcasesPrivate.map(((e,t)=>Object(se.jsx)("div",{children:s(r,t)},t)));return Object(se.jsxs)("div",{children:["Public Testcases",a,Object(se.jsx)(J.a,{label:"New public testcase",icon:E.a.PLUS,onClick:t(n.testcases)}),Object(se.jsx)("br",{}),Object(se.jsx)("br",{}),"Private Testcases",o,Object(se.jsx)(J.a,{label:"New private testcase",icon:E.a.PLUS,onClick:t(n.testcasesPrivate)})]})};var Hd=s(71);class Vd extends f.Component{constructor(){var e;super(...arguments),e=this,this.deploymentTab=()=>{const e=this.props.pathToLibrary,t=Dd(e,this.props.assessment),s=t.external.symbols.map(((t,s)=>Object(se.jsxs)("tr",{children:[Object(se.jsx)("td",{children:this.textareaContent(e.concat(["external","symbols",s]))}),Object(se.jsx)("td",{style:{width:"100px"},children:Object(se.jsx)(J.a,{label:"Delete",icon:E.a.MINUS,onClick:this.handleSymbolDelete(s)})})]},s))),n=t.globals.map(((t,s)=>Object(se.jsxs)("tr",{children:[Object(se.jsx)("td",{style:{width:"170px"},children:this.textareaContent(e.concat(["globals",s,0]))}),Object(se.jsx)("td",{children:this.globalValueTextareaContent(s)}),Object(se.jsx)("td",{style:{width:"90px"},children:Object(se.jsx)(J.a,{label:"Delete",icon:E.a.MINUS,onClick:this.handleGlobalDelete(s)})})]},s))),i=Object(se.jsx)(J.a,{label:"Use this Library",icon:E.a.REFRESH,onClick:()=>this.props.handleRefreshLibrary(t)}),a=Object(se.jsxs)(f.Fragment,{children:["External Library:",Object(se.jsx)("br",{}),Kd(t.external.name,this.handleExternalSelect),Object(se.jsx)(h.i,{}),Object(se.jsx)("div",{children:"Symbols:"}),Object(se.jsx)("br",{}),Object(se.jsx)("table",{style:{width:"100%"},children:Object(se.jsx)("tbody",{children:s})}),Object(se.jsx)(J.a,{label:"New Symbol",icon:E.a.PLUS,onClick:this.handleNewSymbol})]}),r=Object(se.jsxs)(f.Fragment,{children:[Object(se.jsx)("div",{children:"Globals:"}),Object(se.jsx)("br",{}),Object(se.jsx)("table",{style:{width:"100%",borderSpacing:"5px"},children:Object(se.jsx)("tbody",{children:n})}),Object(se.jsx)(J.a,{label:"New Global",icon:E.a.PLUS,onClick:this.handleNewGlobal})]});return Object(se.jsxs)("div",{children:[Object(se.jsx)(h.i,{}),i,Object(se.jsx)(h.i,{}),"Interpreter:",Object(se.jsx)("br",{}),$d(t.variant,this.handleChapterSelect),Object(se.jsx)(h.i,{}),a,Object(se.jsx)(h.i,{}),r]})},this.textareaContent=e=>Object(se.jsx)(Gd,{assessment:this.props.assessment,path:e,processResults:Wd,updateAssessment:this.props.updateAssessment,useRawValue:!0}),this.globalValueTextareaContent=e=>{const t=this.props.pathToLibrary.concat(["globals",e,2]);return Object(se.jsx)(Gd,{assessment:this.props.assessment,path:t,updateAssessment:this.handleGlobalValueUpdate(e),useRawValue:!0})},this.handleGlobalValueUpdate=e=>t=>{const s=Dd(this.props.pathToLibrary,this.props.assessment).globals[e];try{s[1]=qd(s[2]),this.props.updateAssessment(t)}catch(n){s[2]='"Invalid Expression"'}},this.handleSymbolDelete=e=>()=>{const t=this.props.assessment;Dd(this.props.pathToLibrary,t).external.symbols.splice(e,1),this.props.updateAssessment(t)},this.handleNewSymbol=()=>{const e=this.props.assessment;Dd(this.props.pathToLibrary,e).external.symbols.push("new_symbol"),this.props.updateAssessment(e)},this.handleGlobalDelete=e=>()=>{const t=this.props.assessment;Dd(this.props.pathToLibrary,t).globals.splice(e,1),this.props.updateAssessment(t)},this.handleNewGlobal=()=>{const e=this.props.assessment;Dd(this.props.pathToLibrary,e).globals.push(["new_global",null,"null"]),this.props.updateAssessment(e)},this.handleChapterSelect=(e,t)=>{const s=this.props.assessment;this.props.updateAssessment(s)},this.handleExternalSelect=(e,t)=>{const s=this.props.assessment,n=Dd(this.props.pathToLibrary,s);n.external.name=e.name,n.external.symbols=JSON.parse(JSON.stringify(Hd.b.get(e.name))),this.props.updateAssessment(s)},this.handleSwitchDeployment=()=>{const e=this.props.assessment;if(this.isEmptyLibrary()){let t=Dd(this.props.pathToCopy||["globalDeployment"],e);t=JSON.parse(JSON.stringify(t)),Md(this.props.pathToLibrary,t,e)}else Md(this.props.pathToLibrary,Object(H.h)(),e);this.props.updateAssessment(e)},this.isEmptyLibrary=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.pathToLibrary;return-1===Dd(t.concat(["chapter"]),e.props.assessment)}}render(){return this.props.isOptionalDeployment?Object(se.jsxs)("div",{children:[Object(se.jsx)(h.T,{checked:!this.isEmptyLibrary(),label:"Enable "+this.props.label+" Deployment",onChange:this.handleSwitchDeployment}),this.isEmptyLibrary()?null:this.deploymentTab()]}):Object(se.jsxs)("div",{children:[this.props.label+" Deployment",Object(se.jsx)("br",{}),this.deploymentTab()]})}}const Wd=e=>"string"===typeof e?e.replace(/\s+/g,""):e,qd=e=>Function('"use strict";return ('+e+")")(),$d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.Variant.DEFAULT,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>{};return Object(se.jsx)(Xd,{className:p.a.MINIMAL,items:O.n,onItemSelect:t,itemRenderer:zd,filterable:!1,children:Object(se.jsx)(h.b,{className:p.a.MINIMAL,text:Object(O.o)(I.Chapter.CLANG,e),rightIcon:E.a.DOUBLE_CARET_VERTICAL})})},Xd=ct.a.ofType(),zd=(e,t)=>{let{handleClick:s,modifiers:n,query:i}=t;return Object(se.jsx)(h.B,{active:!1,onClick:s,text:e.displayName},e.displayName)},Yd=Array.from(Hd.b.entries()).map(((e,t)=>({name:e[0],key:t,symbols:e[1]}))),Kd=(e,t)=>Object(se.jsx)(Qd,{className:p.a.MINIMAL,items:Yd,onItemSelect:t,itemRenderer:Jd,filterable:!1,children:Object(se.jsx)(h.b,{className:p.a.MINIMAL,text:e,rightIcon:E.a.DOUBLE_CARET_VERTICAL})}),Qd=ct.a.ofType(),Jd=(e,t)=>{let{handleClick:s,modifiers:n,query:i}=t;return Object(se.jsx)(h.B,{active:!1,onClick:s,text:e.name},e.key)};var Zd=Vd;var eu=e=>{return Object(se.jsxs)("div",{children:["Max Xp:",(t=e.path.concat(["maxXp"]),Object(se.jsx)(Gd,{assessment:e.assessment,isNumber:!0,path:t,processResults:Ud(0),updateAssessment:e.updateAssessment}))]});var t};const tu=e=>JSON.parse(JSON.stringify(e));var su=e=>{const[t,s]=Object(f.useState)(!1),[n,i]=Object(f.useState)((()=>{})),a=t=>Object(se.jsxs)("div",{children:[Object(se.jsx)(J.a,{label:"Clone",icon:E.a.DOCUMENT,onClick:l(o((()=>tu(e.assessment.questions[t])),t))}),Object(se.jsx)(J.a,{label:"Delete",icon:E.a.REMOVE,onClick:l(c(t))}),Object(se.jsx)(J.a,{label:"Shift Up",icon:E.a.CARET_UP,onClick:l(r(-1,t)),isDisabled:0===t}),Object(se.jsx)(J.a,{label:"Shift Down",icon:E.a.CARET_DOWN,onClick:l(r(1,t)),isDisabled:t>=e.assessment.questions.length-1}),Object(se.jsx)("br",{}),Object(se.jsx)(J.a,{label:"Insert Programming Question",icon:E.a.FONT,onClick:l(o(H.k,t))}),Object(se.jsx)(J.a,{label:"Insert MCQ Question",icon:E.a.CONFIRM,onClick:l(o(H.i,t))})]}),r=(t,s)=>()=>{const n=e.assessment,i=s+t;if(i>=0&&i<n.questions.length){const t=n.questions[s],a=n.questions;a[s]=a[i],a[i]=t,n.questions=a,e.updateAssessment(n),Ee.a.push("/mission-control/-1/"+i.toString())}},o=(t,s)=>()=>{const n=e.assessment;s+=1;const i=n.questions;i.splice(s,0,t()),n.questions=i,e.updateAssessment(n),Ee.a.push("/mission-control/-1/"+s.toString())},c=t=>()=>{const s=e.assessment;let n=s.questions;n.length>1&&(n=n.slice(0,t).concat(n.slice(t+1))),s.questions=n,e.updateAssessment(s)},l=t=>()=>{e.hasUnsavedChanges?(s(!0),i(t)):t()},d=Object(se.jsxs)(h.h,{className:"assessment-reset",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:t,title:"Confirmation: Save unsaved changes?",children:[Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsx)(ee.a,{content:"Are you sure you want to save over your unsaved changes?"})}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(J.a,{label:"Cancel",onClick:()=>s(!1),options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",onClick:()=>{n(),s(!1)},options:{minimal:!1,intent:g.a.DANGER}})]})})]});return Object(se.jsxs)("div",{children:[d,e.assessment.questions.map(((e,t)=>Object(se.jsxs)("div",{children:["Question ",t+1,Object(se.jsx)("br",{}),Object(se.jsx)(h.b,{className:"mcq-option col-xs-12",minimal:!0,children:Object(se.jsx)(ee.a,{content:e.content.length>200?e.content.substring(0,300)+"...":e.content})}),a(t),Object(se.jsx)("br",{}),Object(se.jsx)("br",{})]},t)))]})};var nu=e=>{const t=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0];return s?Object(se.jsx)(Gd,{assessment:e.assessment,isNumber:!0,path:t,processResults:Ud(n[0],n[1]),updateAssessment:e.updateAssessment}):Object(se.jsx)(Gd,{assessment:e.assessment,path:t,updateAssessment:e.updateAssessment})},{questionId:s}=e,n=e.assessment.questions[s],i=n.choices.map(((e,n)=>Object(se.jsxs)("div",{className:"mcq-option col-xs-12",children:["Option ",n,":",t(["questions",s,"choices",n,"content"]),Object(se.jsx)("br",{}),"Hint:",t(["questions",s,"choices",n,"hint"])]},n))),a=Object(se.jsx)(J.a,{label:"Delete Option",icon:E.a.REMOVE,onClick:()=>{const{assessment:t,questionId:s}=e,n=t.questions[s],i=n.choices.slice(0,n.choices.length-1);n.choices=i,t.questions[s]=n,e.updateAssessment(t)}});return Object(se.jsx)("div",{className:"MCQChooser row",children:Object(se.jsx)(h.e,{className:"mcq-content-parent col-xs-12 middle-xs",children:Object(se.jsxs)("div",{className:"row mcq-options-parent between-xs",children:[i,"Solution:",t(["questions",s,"solution"],!0,[0,n.choices.length]),Object(se.jsx)("br",{}),Object(se.jsx)(J.a,{label:"Add Option",icon:E.a.CONFIRM,onClick:()=>{const{assessment:t,questionId:s}=e,n=t.questions[s],i=n.choices.concat([{content:"A",hint:null}]);n.choices=i,t.questions[s]=n,e.updateAssessment(t)}}),n.choices.length>0?a:void 0]})})})},iu=s(148),au=s.n(iu);const ru=ct.a.ofType(),ou=[{label:"Prepend",icon:E.a.CHEVRON_UP,id:"prepend"},{label:"Postpend",icon:E.a.CHEVRON_DOWN,id:"postpend"},{label:"Solution Template",icon:E.a.MANUAL,id:"solutionTemplate"},{label:"Suggested Answer",icon:E.a.TICK,id:"answer"}];var cu=e=>{const[t,s]=Object(f.useState)(ou[0]),[n,i]=Object(f.useState)(""),[a,r]=Object(f.useState)(!1),o=t=>{const s=a?n:Dd(t,e.assessment);return Object(se.jsx)("div",{onClick:c(t),onBlur:l(t),children:Object(se.jsx)(au.a,{className:"react-ace",editorProps:{$blockScrolling:1/0},fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:i,theme:"source",value:s,width:"100%"})})},c=t=>s=>{a||(i(Dd(t,e.assessment)),r(!0))},l=s=>o=>{if(a){if(Dd(s,e.assessment)!==n){const t=e.assessment;Md(s,n,t),e.updateAssessment(t)}if("prepend"===t.id){const t=n;e.handleUpdateActiveEditorTab({prependValue:t})}else if("postpend"===t.id){const t=n;e.handleUpdateActiveEditorTab({postpendValue:t})}i(""),r(!1)}},d=t=>()=>{const s=e.assessment;Md(t,e.editorValue,s),e.updateAssessment(s)},u=t=>()=>{const s=Dd(t,e.assessment);e.handleEditorValueChange(s)};return(()=>{const n=["questions",e.questionId].concat(t.id),i=Object(se.jsx)(J.a,{label:"Copy from Editor",icon:E.a.IMPORT,onClick:d(n)}),a=Object(se.jsx)(J.a,{label:"Copy to Editor",icon:E.a.EXPORT,onClick:u(n)}),r=Object(se.jsxs)("div",{children:[i,a,Object(se.jsx)(h.i,{}),o(n)]}),c=(e,t)=>{let{handleClick:s}=t;return Object(se.jsx)(h.B,{active:!1,onClick:s,text:e.label,icon:e.icon},e.id)};return Object(se.jsx)("div",{className:"side-content",children:Object(se.jsxs)(h.e,{children:[(l=t,g=s,Object(se.jsx)(ru,{className:p.a.MINIMAL,items:ou,itemRenderer:c,onItemSelect:g,filterable:!1,children:Object(se.jsx)(h.b,{className:p.a.MINIMAL,text:l.label,icon:E.a.EDIT,rightIcon:E.a.DOUBLE_CARET_VERTICAL})})),Object(se.jsx)(h.i,{}),Object(se.jsx)("div",{className:"side-content-text",children:r})]})});var l,g})()};function lu(e){const t={};return e.filter((e=>!t.hasOwnProperty(e)&&(t[e]=!0)))}var du=e=>{var t,s;const[n,i]=Object(f.useState)(vd()),[a,r]=Object(f.useState)("question"),[o,c]=Object(f.useState)(!1),[l,d]=Object(f.useState)(!1),[u,m]=Object(f.useState)(0);if(Object(f.useEffect)((()=>{n&&(y(),m(S()))}),[]),Object(f.useEffect)((()=>function(){if(void 0===n)return;const t=-1,s=b();e.storedAssessmentId===t&&e.storedQuestionId===s||(y(),e.handleUpdateCurrentAssessmentId(t,s),e.handleUpdateHasUnsavedChanges(!1),o&&(i(vd()),c(!1)),v())}())),null===n||0===n.questions.length)return Object(se.jsx)(h.G,{className:x()("WorkspaceParent",p.a.DARK),description:"Getting mission ready...",icon:Object(se.jsx)(h.R,{size:h.S.LARGE})});const b=()=>{let t=e.questionId;return t<0?t=0:t>=n.questions.length&&(t=n.questions.length-1),t};const v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;const s=n.questions[b()];if(t||(t=s.library),t&&t.globals.length>0){const e=t.globals.map((e=>e[0])),s=t.external.symbols.concat(e);t={...t,external:{name:t.external.name,symbols:lu(s)}}}e.handleClearContext(t,!0)},y=()=>{const t=n.questions[b()];let s,i="",a="";t.type===H.d.programming?(s=t.editorValue?t.editorValue:t.solutionTemplate,i=t.prepend,a=t.postpend):s="//If you see this, this is a bug. Please report bug.",e.handleResetWorkspace({editorTabs:[{value:s,prependValue:i,postpendValue:a,highlightedLines:[],breakpoints:[]}]}),e.handleEditorValueChange(s)},j=t=>{const s=[t];e.handleUpdateWorkspace({editorTestcases:s}),e.handleTestcaseEval(0)},O=()=>{n.questions[b()].editorValue=e.editorTabs[0].value,i(n),c(!1),yd(n),C()},C=()=>{const t=S(),s=t-u;if(0!==s){const n=e.assessmentOverview;0!==s&&(n.maxXp=t),m(t),e.updateAssessmentOverview(n),xd(n)}},S=()=>{let e=0;const t=n.questions;for(const s of t)e+=s.maxXp;return e},w=e=>{i(e),c(!0)},_=e=>{i(e),v(),O(),y()},A=()=>{r("question"===a?"global":"question")};const k=b(),T=n.questions[k],R={controlBarProps:(t=>{const s="/mission-control",i=`/mission-control/${n.id.toString()}`,r=[t+1,n.questions.length],c=Object(se.jsx)($.a,{onClickNext:()=>Ee.a.push(i+`/${(t+1).toString()}`),onClickReturn:()=>Ee.a.push(s),questionProgress:r},"next_question"),l=Object(se.jsx)(X.a,{onClick:()=>Ee.a.push(i+`/${(t-1).toString()}`),questionProgress:r},"previous_question"),u=Object(se.jsx)(z.a,{questionProgress:r},"question_view"),h=Object(se.jsx)(Y.a,{onClick:()=>{d((()=>o))}},"reset_template");return{editorButtons:[Object(se.jsx)(K.a,{handleEditorEval:e.handleEditorEval},"run"),Object(se.jsx)(Q.a,{hasUnsavedChanges:o,onClickSave:O},"save"),h],flowButtons:[l,u,c],editingWorkspaceButtons:[Object(se.jsx)(Nd,{editingMode:a,toggleEditMode:A},"toggle_edit_mode")]}})(k),editorContainerProps:T.type===H.d.programming?{editorVariant:"normal",editorTabs:e.editorTabs.map(Z.a).map(((e,t)=>0!==t?e:{...e,editorValue:e.editorValue||T.editorValue||T.solutionTemplate})),editorSessionId:"",handleDeclarationNavigate:e.handleDeclarationNavigate,handleEditorEval:e.handleEditorEval,handleEditorValueChange:e.handleEditorValueChange,handleEditorUpdateBreakpoints:e.handleEditorUpdateBreakpoints,handleUpdateHasUnsavedChanges:e.handleUpdateHasUnsavedChanges,handlePromptAutocomplete:e.handlePromptAutocomplete,isEditorAutorun:!1}:void 0,handleSideContentHeightChange:e.handleSideContentHeightChange,hasUnsavedChanges:o,mcqProps:{mcq:T,handleMCQSubmit:t=>e.handleSave(n.questions[k].id,t)},sideBarProps:{tabs:[]},sideContentHeight:e.sideContentHeight,sideContentProps:((e,t)=>{const s=n;let i;if("question"===a){const n=s.questions[e.questionId].type,a="mcq"===n?Object(se.jsx)(nu,{assessment:s,questionId:t,updateAssessment:w}):Object(se.jsx)(cu,{assessment:s,questionId:t,updateAssessment:w,editorValue:e.editorTabs[0].value,handleEditorValueChange:e.handleEditorValueChange,handleUpdateActiveEditorTab:e.handleUpdateActiveEditorTab});i=[{label:`Question ${t+1}`,iconName:E.a.NINJA,body:Object(se.jsx)(Bd,{assessment:s,path:["questions",t,"content"],updateAssessment:w}),id:Ce.b.editorQuestionOverview},{label:"Question Template",iconName:E.a.DOCUMENT,body:a,id:Ce.b.editorQuestionTemplate},{label:"Manage Local Deployment",iconName:E.a.HOME,body:Object(se.jsx)(Zd,{assessment:s,label:"Question Specific",handleRefreshLibrary:v,pathToLibrary:["questions",t,"library"],updateAssessment:w,isOptionalDeployment:!0}),id:Ce.b.editorLocalDeployment},{label:"Manage Local Grader Deployment",iconName:E.a.CONFIRM,body:Object(se.jsx)(Zd,{assessment:s,label:"Question Specific Grader",handleRefreshLibrary:v,pathToLibrary:["questions",t,"graderLibrary"],pathToCopy:["questions",t,"library"],updateAssessment:w,isOptionalDeployment:!0}),id:Ce.b.editorLocalGraderDeployment},{label:"Grading",iconName:E.a.TICK,body:Object(se.jsx)(eu,{assessment:s,path:["questions",t],updateAssessment:w}),id:Ce.b.editorGrading}],"programming"===n&&i.push({label:"Autograder",iconName:E.a.AIRPLANE,body:Object(se.jsx)(Fd,{assessment:s,questionId:t,handleTestcaseEval:j,updateAssessment:w}),id:Ce.b.editorAutograder});s.globalDeployment.external.symbols.includes("get_matrix")&&i.push({label:"Tone Matrix",iconName:E.a.GRID_VIEW,body:Object(se.jsx)(Oe,{}),id:Ce.b.toneMatrix})}else i=[{label:`${s.type} Briefing`,iconName:E.a.BRIEFCASE,body:Object(se.jsx)(Bd,{assessment:s,path:["longSummary"],updateAssessment:w}),id:Ce.b.editorBriefing},{label:"Manage Question",iconName:E.a.WRENCH,body:Object(se.jsx)(su,{assessment:s,hasUnsavedChanges:o,questionId:t,updateAssessment:_}),id:Ce.b.editorManageQuestion},{label:"Manage Global Deployment",iconName:E.a.GLOBE,body:Object(se.jsx)(Zd,{assessment:s,label:"Global",handleRefreshLibrary:v,pathToLibrary:["globalDeployment"],updateAssessment:w,isOptionalDeployment:!1}),id:Ce.b.editorGlobalDeployment},{label:"Manage Global Grader Deployment",iconName:E.a.CONFIRM,body:Object(se.jsx)(Zd,{assessment:s,label:"Global Grader",handleRefreshLibrary:v,pathToLibrary:["graderDeployment"],updateAssessment:w,isOptionalDeployment:!0}),id:Ce.b.editorGlobalGraderDeployment}];return{tabs:{beforeDynamicTabs:i,afterDynamicTabs:[]}}})(e,k),replProps:{handleBrowseHistoryDown:e.handleBrowseHistoryDown,handleBrowseHistoryUp:e.handleBrowseHistoryUp,handleReplEval:e.handleReplEval,handleReplValueChange:e.handleReplValueChange,output:e.output,replValue:e.replValue,sourceChapter:I.Chapter.CLANG,sourceVariant:I.Variant.DEFAULT,externalLibrary:(null===T||void 0===T||null===(t=T.library)||void 0===t||null===(s=t.external)||void 0===s?void 0:s.name)||"NONE",replButtons:function(){const t=Object(se.jsx)(W.a,{handleReplOutputClear:e.handleReplOutputClear},"clear_repl");return[Object(se.jsx)(q.a,{handleReplEval:e.handleReplEval,isRunning:e.isRunning},"eval_repl"),t]}()}};return Object(se.jsxs)("div",{className:x()("WorkspaceParent",p.a.DARK),children:[Object(se.jsxs)(h.h,{className:"assessment-reset",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:l,title:"Confirmation: Reset editor?",children:[Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsx)(ee.a,{content:"Are you sure you want to reset to your last save?"})}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)(h.c,{children:[Object(se.jsx)(J.a,{label:"Cancel",onClick:()=>d(!1),options:{minimal:!1}}),Object(se.jsx)(J.a,{label:"Confirm",onClick:()=>{const e=vd();i(e),c(!1),d(!1),m(S()),v(),y()},options:{minimal:!1,intent:g.a.DANGER}})]})})]}),Object(se.jsx)(_e.a,{...R})]})};const uu="assessment";var hu=Object(r.b)(((e,t)=>({activeEditorTabIndex:e.workspaces.assessment.activeEditorTabIndex,editorTabs:e.workspaces.assessment.editorTabs,hasUnsavedChanges:e.workspaces.assessment.hasUnsavedChanges,isRunning:e.workspaces.assessment.isRunning,isDebugging:e.workspaces.assessment.isDebugging,enableDebugging:e.workspaces.assessment.enableDebugging,output:e.workspaces.assessment.output,replValue:e.workspaces.assessment.replValue,sideContentHeight:e.workspaces.assessment.sideContentHeight,storedAssessmentId:e.workspaces.assessment.currentAssessment,storedQuestionId:e.workspaces.assessment.currentQuestion})),(e=>Object(c.b)({handleBrowseHistoryDown:()=>Object(R.browseReplHistoryDown)(uu),handleBrowseHistoryUp:()=>Object(R.browseReplHistoryUp)(uu),handleChapterSelect:(e,t)=>Object(R.chapterSelect)(e,I.Variant.DEFAULT,uu),handleClearContext:(e,t)=>Object(R.beginClearContext)(uu,e,t),handleDeclarationNavigate:e=>Object(R.navigateToDeclaration)(uu,e),handleEditorEval:()=>Object(R.evalEditor)(uu),handleEditorValueChange:e=>Object(R.updateEditorValue)(e,uu),handleEditorUpdateBreakpoints:e=>Object(R.setEditorBreakpoint)(e,uu),handleInterruptEval:()=>Object(Os.beginInterruptExecution)(uu),handleReplEval:()=>Object(R.evalRepl)(uu),handleReplOutputClear:()=>Object(R.clearReplOutput)(uu),handleReplValueChange:e=>Object(R.updateReplValue)(e,uu),handleResetWorkspace:e=>Object(R.resetWorkspace)(uu,e),handleUpdateWorkspace:e=>Object(R.updateWorkspace)(uu,e),handleUpdateActiveEditorTab:e=>Object(R.updateActiveEditorTab)(uu,e),handleSave:u.submitAnswer,handleSideContentHeightChange:e=>Object(R.changeSideContentHeight)(e,uu),handleTestcaseEval:e=>Object(R.evalTestcase)(uu,e),handleUpdateHasUnsavedChanges:e=>Object(R.updateHasUnsavedChanges)(uu,e),handleUpdateCurrentAssessmentId:R.updateCurrentAssessmentId,handleDebuggerPause:()=>Object(Os.beginDebuggerPause)(uu),handleDebuggerResume:()=>Object(Os.debuggerResume)(uu),handleDebuggerReset:()=>Object(Os.debuggerReset)(uu),handlePromptAutocomplete:(e,t,s)=>Object(R.promptAutocomplete)(uu,e,t,s)},e)))(du);class pu extends f.Component{constructor(e){super(e),this.fileReader=void 0,this.handleFileRead=e=>t=>{if(!this.fileReader)return;const s=this.fileReader.result;s&&Object(bd.parseString)(s,((t,s)=>{console.dir(e);try{const t=(e=>{const t=Od(e);return[jd(e,t[1]),t[0]]})(s);t[0].fileName=e.name.slice(0,-4),xd(t[0]),this.props.updateEditingOverview(t[0]),yd(t[1]),this.props.newAssessment(t[1]),this.setState({fileInputText:"Success!"})}catch(t){console.log(t),this.setState({fileInputText:"Invalid XML!"})}}))},this.handleChangeFile=e=>{const t=e.target.files;e.target.files&&(this.fileReader=new FileReader,this.fileReader.onloadend=this.handleFileRead(t[0]),this.fileReader.readAsText(t[0]))},this.makeMission=()=>{xd(Object(H.j)()),this.props.updateEditingOverview(Object(H.j)()),yd(Object(H.g)()),this.props.newAssessment(Object(H.g)())},this.handleFileRead=this.handleFileRead.bind(this),this.handleChangeFile=this.handleChangeFile.bind(this),this.makeMission=this.makeMission.bind(this),this.state={fileInputText:"Import XML"}}componentDidMount(){const e=vd();e&&this.props.newAssessment(e)}render(){return Object(se.jsxs)("div",{children:[Object(se.jsx)("div",{children:"Please ensure that the xml uploaded is trustable."}),Object(se.jsx)("div",{children:Object(se.jsx)(h.m,{text:this.state.fileInputText,inputProps:{accept:".xml"},onChange:this.handleChangeFile})}),Object(se.jsx)("div",{children:Object(se.jsx)(J.a,{label:"Make New Mission",icon:E.a.NEW_OBJECT,onClick:this.makeMission})})]})}}var gu=pu;var mu=Object(r.b)(((e,t)=>t),(e=>Object(c.b)({newAssessment:u.updateAssessment},e)))(gu);const bu=()=>{};var fu=e=>{const[t,s]=Object(f.useState)((()=>{const e=localStorage.getItem("MissionEditingOverviewSA");return e?JSON.parse(e):null})()),n=Object(we.b)(e.match.params.assessmentId),i=Object(we.b)(e.match.params.questionId)||Se.b.defaultQuestionId;if(-1===n&&t){const e=t,a={assessmentId:n,questionId:i,assessmentOverview:e,updateAssessmentOverview:s,notAttempted:e.status===H.a.not_attempted,closeDate:e.closeAt};return Object(se.jsx)("div",{className:"Academy",children:Object(se.jsx)(hu,{...a})})}const a=Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(mu,{updateEditingOverview:s}),t&&Object(se.jsx)(Rd,{overview:t,updateEditingOverview:s,listingPath:"/mission-control",assessmentTypes:e.assessmentTypes})]});return Object(se.jsx)("div",{className:"Assessment Academy",children:Object(se.jsx)(Ne.a,{display:a,loadContentDispatch:bu})})};var vu=Object(o.l)(Object(r.b)((e=>{var t;return{assessmentTypes:(null===(t=e.session.assessmentConfigurations)||void 0===t?void 0:t.map((e=>e.type)))||[]}}))(fu)),yu=s(134),xu=s(184),ju=s(249),Ou=s(128);const Cu=e=>Object(se.jsx)(w.a,{content:"Execution Time",placement:S.a.TOP,children:Object(se.jsx)(h.H,{leftIcon:E.a.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var Su=s(221);function Eu(e){Object(me.e)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}class wu extends f.PureComponent{constructor(e){super(e),this.inviteInputElem=void 0,this.state={joinElemValue:""},this.handleChange=this.handleChange.bind(this),this.inviteInputElem=f.createRef(),this.selectInviteInputText=this.selectInviteInputText.bind(this)}render(){const e=Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)("input",{value:this.props.editorSessionId,readOnly:!0,ref:this.inviteInputElem}),Object(se.jsx)(Bs,{text:""+this.props.editorSessionId,children:Object(se.jsx)(J.a,{icon:E.a.DUPLICATE,onClick:this.selectInviteInputText})})]}),t=Object(se.jsx)(De.a,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:Object(se.jsx)(J.a,{label:"Invite",icon:E.a.GRAPH,onClick:()=>{""===this.props.editorSessionId&&Object(Su.b)(this.props.editorValue||"").then((e=>{this.props.handleSetEditorSessionId(e)}),Eu)}})}),s=Object(se.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Object(Su.a)(this.state.joinElemValue).then((e=>{e?this.props.handleSetEditorSessionId(this.state.joinElemValue):(this.props.handleSetEditorSessionId(""),Object(me.e)("Could not find a session with that ID."))}),(e=>{this.props.handleSetEditorSessionId(""),Eu(e)}))},children:[Object(se.jsx)("input",{type:"text",value:this.state.joinElemValue,onChange:this.handleChange}),Object(se.jsx)("span",{className:p.a.POPOVER_DISMISS,children:Object(se.jsx)(J.a,{icon:E.a.KEY_ENTER,options:{type:"submit"}})})]}),n=Object(se.jsx)(De.a,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:s,children:Object(se.jsx)(J.a,{label:"Join",icon:E.a.LOG_IN})}),i=Object(se.jsx)(J.a,{label:"Leave",icon:E.a.FEED,onClick:()=>{this.props.handleSetEditorSessionId(""),this.setState({joinElemValue:""})}});return Object(se.jsx)(De.a,{content:Object(se.jsxs)(h.A,{large:!0,children:[t,""===this.props.editorSessionId?n:i]}),children:Object(se.jsx)(J.a,{label:"Session",icon:E.a.SOCIAL_MEDIA,options:{iconColor:""===this.props.editorSessionId?void 0:this.props.sharedbConnected?Zo.Colors.GREEN3:Zo.Colors.RED3}})})}selectInviteInputText(){null!==this.inviteInputElem.current&&(this.inviteInputElem.current.focus(),this.inviteInputElem.current.select())}handleChange(e){this.setState({joinElemValue:e.target.value})}}class _u extends f.PureComponent{constructor(e){super(e),this.shareInputElem=void 0,this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=f.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?Object(se.jsx)(h.Y,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?Object(se.jsxs)("div",{children:[Object(se.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),Object(se.jsx)(w.a,{content:"Copy link to clipboard",children:Object(se.jsx)(Bs,{text:this.props.queryString,children:Object(se.jsx)(J.a,{icon:E.a.DUPLICATE,onClick:this.selectShareInputText})})})]}):Object(se.jsx)(se.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?Object(se.jsxs)("div",{children:[Object(se.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),Object(se.jsx)(w.a,{content:"Copy link to clipboard",children:Object(se.jsx)(Bs,{text:this.props.shortURL,children:Object(se.jsx)(J.a,{icon:E.a.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?Object(se.jsx)("div",{children:Object(se.jsx)(h.G,{description:"Generating Shareable Link...",icon:Object(se.jsx)(h.R,{size:h.S.SMALL})})}):Object(se.jsxs)("div",{children:[Se.b.urlShortenerBase,"\xa0",Object(se.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),Object(se.jsx)(J.a,{label:"Get Link",icon:E.a.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return Object(se.jsx)(De.a,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:Object(se.jsx)(w.a,{content:"Get shareable link",placement:S.a.TOP,children:Object(se.jsx)(J.a,{label:"Share",icon:E.a.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}const Au=e=>Object(se.jsx)(w.a,{content:"Step Limit",placement:S.a.TOP,children:Object(se.jsx)(h.H,{leftIcon:E.a.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,onValueChange:e.handleChangeStepLimit})}),ku=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${Se.a.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${Se.a.sourceHotkeys}).\n\n`,Tu=(e,t)=>"\nWelcome to the Source Academy playground!\n"+ku,Ru={goGreen:"h u l k"};const Iu=[Ce.b.mobileEditor,Ce.b.mobileEditorRun],Lu=[Ce.b.introduction];var Pu=e=>{let{workspaceLocation:t="playground",...s}=e;const{isSicpEditor:n}=s,{isMobileBreakpoint:i}=Object(j.e)(),a=f.useRef(s);a.current=s;const c=Object(r.c)(),[l,d]=f.useState(),u=Object(o.i)(),h=Object(o.h)(),g=new URLSearchParams(u.search).get("add_device");g&&!l&&(d(g),h.replace(u.pathname));const[,m]=f.useState(new Date),[b,v]=f.useState(!1),[y,C]=f.useState(g?Ce.b.remoteExecution:Ce.b.introduction),[S,w]=f.useState(!1),[k,T]=f.useState((()=>U("playground",{editorValue:a.current.editorTabs[0].value,chapter:a.current.playgroundSourceChapter}))),L=Object(j.f)((e=>!!e.session.remoteExecutionSession))&&!n,P=Object(j.f)((e=>e.workspaces.playground.externalLibrary));f.useEffect((()=>{T(U("playground",{editorValue:a.current.editorTabs[0].value,chapter:a.current.playgroundSourceChapter}))}),[s.editorSessionId]);const N=n?s.initialEditorValueHash:s.location.hash;f.useEffect((()=>{N?async function(e,t){var s,n,i;const a=cd(e),r=Object(we.b)(a.chap)||void 0,o=null!==(s=a.lz)&&void 0!==s?s:a.prgrm,c=o&&Object(xu.decompressFromEncodedURIComponent)(o);c&&t.handleEditorValueChange(c);const l=null!==(n=null===(i=O.n.find((e=>e.chapter===r&&e.variant===a.variant)))||void 0===i?void 0:i.variant)&&void 0!==n?n:I.Variant.DEFAULT;r&&t.handleChapterSelect(r,l);const d=Math.max(Object(we.b)(a.exec||"1000")||1e3,1e3);d&&t.handleChangeExecTime(d)}(N,a.current):s.courseSourceChapter&&s.courseSourceVariant&&a.current.handleChapterSelect(s.courseSourceChapter,s.courseSourceVariant)}),[N,s.courseSourceChapter,s.courseSourceVariant]),f.useEffect((()=>{i&&Lu.includes(y)?C(Ce.b.mobileEditor):!i&&Iu.includes(y)&&C(Ce.b.introduction)}),[i,y]);const D=f.useMemo((()=>({goGreen:()=>v(!b)})),[b]),B=f.useCallback((e=>{m(new Date),a.current.handleEditorValueChange(e)}),[]),G=f.useCallback(((e,t,s)=>{if(e===t)return;const{handleUsingSubst:n,handleReplOutputClear:i,playgroundSourceChapter:r}=a.current;t===Ce.b.substVisualizer&&e===Ce.b.mobileEditorRun||(r<=2&&e===Ce.b.substVisualizer&&n(!0),t!==Ce.b.substVisualizer||S||(i(),n(!1)),C(e))}),[S]),F=f.useCallback((e=>{M(k,e)}),[k]),H=f.useCallback((()=>c(Object(R.evalEditor)(t))),[c,t]),$=f.useMemo((()=>Object(f.createElement)(Ss,{...A.a.pick(s,"isDebugging","isEditorAutorun","isRunning"),handleInterruptEval:()=>c(Object(Os.beginInterruptExecution)(t)),handleToggleEditorAutorun:()=>c(Object(R.toggleEditorAutorun)(t)),handleEditorEval:H,handleDebuggerPause:()=>c(Object(Os.beginDebuggerPause)(t)),handleDebuggerReset:()=>c(Object(Os.debuggerReset)(t)),handleDebuggerResume:()=>c(Object(Os.debuggerResume)(t)),key:"autorun",autorunDisabled:L,sourceChapter:s.playgroundSourceChapter,pauseDisabled:L||!Object(O.m)(s.playgroundSourceChapter)})),[c,H,s,L,t]),X=f.useCallback(((e,t)=>{let{chapter:s,variant:n}=e;const{handleUsingSubst:i,handleReplOutputClear:r,handleChapterSelect:o}=a.current;(s<=2&&S||y===Ce.b.substVisualizer)&&i(!0),s>2&&(r(),i(!1));const c={time:Date.now(),type:"chapterSelect",data:s};F(c),o(s,n)}),[S,y,F]),z=f.useMemo((()=>Object(se.jsx)(V.a,{handleChapterSelect:X,sourceChapter:s.playgroundSourceChapter,sourceVariant:s.playgroundSourceVariant,disabled:L},"chapter")),[X,s.playgroundSourceChapter,s.playgroundSourceVariant,L]),Y=f.useMemo((()=>y===Ce.b.substVisualizer?null:Object(se.jsx)(W.a,{handleReplOutputClear:s.handleReplOutputClear},"clear_repl")),[s.handleReplOutputClear,y]),K=f.useMemo((()=>y===Ce.b.substVisualizer?null:Object(se.jsx)(q.a,{handleReplEval:s.handleReplEval,isRunning:s.isRunning},"eval_repl")),[s.handleReplEval,s.isRunning,y]),Q=f.useMemo((()=>Object(se.jsx)(Cu,{execTime:s.execTime,handleChangeExecTime:s.handleChangeExecTime},"execution_time")),[s.execTime,s.handleChangeExecTime]),J=f.useMemo((()=>Object(se.jsx)(Au,{stepLimit:s.stepLimit,handleChangeStepLimit:e=>c(Object(R.changeStepLimit)(e,t))},"step_limit")),[c,s.stepLimit,t]),{handleEditorValueChange:ne}=s,ie=Object(se.jsx)(wu,{editorSessionId:s.editorSessionId,editorValue:s.editorTabs[0].value,handleSetEditorSessionId:e=>c(Object(ju.setEditorSessionId)(t,e)),sharedbConnected:s.sharedbConnected},"session"),ae=f.useMemo((()=>{const e=n?Se.a.playground+"#"+s.initialEditorValueHash:s.queryString;return Object(se.jsx)(_u,{handleGenerateLz:()=>c(Object(Ou.generateLzString)()),handleShortenURL:e=>c(Object(Ou.shortenURL)(e)),handleUpdateShortURL:e=>c(Object(Ou.updateShortURL)(e)),queryString:e,shortURL:s.shortURL,isSicp:n},"share")}),[c,n,s.initialEditorValueHash,s.queryString,s.shortURL]),re=f.useMemo((()=>({label:"Introduction",iconName:E.a.HOME,body:Object(se.jsx)(ee.a,{content:Tu(s.playgroundSourceChapter,s.playgroundSourceVariant),openLinksInNewWindow:!0}),id:Ce.b.introduction})),[s.playgroundSourceChapter,s.playgroundSourceVariant]),oe=f.useMemo((()=>[re]),[re]),ce=[...oe].filter((e=>{let{id:t}=e;return!(t&&Lu.includes(t))})),le=f.useCallback((e=>{const t=()=>{e.getSession().addFold("    ",new yu.Range(1,0,s.prependLength,0)),e.renderer.off("afterRender",t)};e.renderer.on("afterRender",t)}),[s.prependLength]),de=f.useCallback(((e,t)=>{ne(e);const s={time:Date.now(),type:"codeDelta",data:t};F(s)}),[ne,F]),ue=f.useCallback((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};F(t)}),[F]),he=f.useCallback((e=>{const t=e.getRange(),s=e.isBackwards();if(!Object(_.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:s}};F(e)}}),[F]),pe=f.useCallback((e=>{const t=e.filter((e=>!!e)).length;t>0&&(w(!0),a.current.playgroundSourceChapter<=2&&a.current.handleUsingSubst(!0)),0===t&&(w(!1),y!==Ce.b.substVisualizer&&(a.current.handleReplOutputClear(),a.current.handleUsingSubst(!1))),a.current.handleEditorUpdateBreakpoints(e)}),[y]),ge=L,me={...A.a.pick(s,"editorSessionId","isEditorAutorun"),editorVariant:"normal",editorTabs:s.editorTabs.map(Z.a),handleDeclarationNavigate:e=>c(Object(R.navigateToDeclaration)(t,e)),handleEditorEval:H,handlePromptAutocomplete:(e,s,n)=>c(Object(R.promptAutocomplete)(t,e,s,n)),handleSendReplInputToOutput:e=>c(Object(R.sendReplInputToOutput)(e,t)),handleSetSharedbConnected:e=>c(Object(ju.setSharedbConnected)(t,e)),onChange:de,onCursorChange:ue,onSelectionChange:he,onLoad:n&&s.prependLength?le:void 0,sourceChapter:s.playgroundSourceChapter,externalLibraryName:P,sourceVariant:s.playgroundSourceVariant,handleEditorValueChange:B,handleEditorUpdateBreakpoints:pe},be={...A.a.pick(s,"output","replValue","handleReplEval","usingSubst"),handleBrowseHistoryDown:()=>c(Object(R.browseReplHistoryDown)(t)),handleBrowseHistoryUp:()=>c(Object(R.browseReplHistoryUp)(t)),handleReplValueChange:e=>c(Object(R.updateReplValue)(e,t)),sourceChapter:s.playgroundSourceChapter,sourceVariant:s.playgroundSourceVariant,externalLibrary:Hd.a.NONE,hidden:y===Ce.b.substVisualizer,inputHidden:ge,replButtons:[ge?null:K,Y],disableScrolling:n},fe={tabs:[]},ve={controlBarProps:{editorButtons:[$,z,L||!Object(O.m)(s.playgroundSourceChapter)?null:s.usingSubst?J:Q]},editorContainerProps:me,handleSideContentHeightChange:e=>c(Object(R.changeSideContentHeight)(e,t)),replProps:be,sideBarProps:fe,sideContentHeight:s.sideContentHeight,sideContentProps:{selectedTabId:y,onChange:G,tabs:{beforeDynamicTabs:oe,afterDynamicTabs:[]},workspaceLocation:n?"sicp":"playground",sideContentHeight:s.sideContentHeight},sideContentIsResizeable:y!==Ce.b.substVisualizer},ye={editorContainerProps:me,replProps:be,sideBarProps:fe,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[$,z,ae,n?null:ie]},selectedTabId:y,onChange:G,tabs:{beforeDynamicTabs:ce,afterDynamicTabs:[]},workspaceLocation:n?"sicp":"playground"}};return i?Object(se.jsx)("div",{className:x()("Playground",p.a.DARK,b?"GreenScreen":void 0),children:Object(se.jsx)(te.a,{...ye})}):Object(se.jsx)(Es.HotKeys,{className:x()("Playground",p.a.DARK,b?"GreenScreen":void 0),keyMap:Ru,handlers:D,children:Object(se.jsx)(_e.a,{...ve})})};const Nu=e=>({...A.a.pick(e.workspaces.playground,"activeEditorTabIndex","editorTabs","editorSessionId","execTime","stepLimit","isEditorAutorun","isRunning","isDebugging","enableDebugging","output","replValue","sideContentHeight","sharedbConnected","usingSubst"),queryString:e.playground.queryString,shortURL:e.playground.shortURL,playgroundSourceChapter:I.Chapter.CLANG,playgroundSourceVariant:e.workspaces.playground.context.variant,courseSourceChapter:e.session.sourceChapter,courseSourceVariant:e.session.sourceVariant,persistenceUser:e.session.googleUser,persistenceFile:e.playground.persistenceFile,githubOctokitObject:e.session.githubOctokitObject,githubSaveInfo:e.playground.githubSaveInfo}),Du="playground",Mu=e=>Object(c.b)({handleChangeExecTime:e=>Object(R.changeExecTime)(e,Du),handleChapterSelect:(e,t)=>Object(R.chapterSelect)(e,t,Du),handleEditorValueChange:e=>Object(R.updateEditorValue)(e,Du),handleEditorUpdateBreakpoints:e=>Object(R.setEditorBreakpoint)(e,Du),handleReplEval:()=>Object(R.evalRepl)(Du),handleReplOutputClear:()=>Object(R.clearReplOutput)(Du),handleUsingSubst:e=>Object(R.toggleUsingSubst)(e,Du)},e);var Uu=()=>{const e=Object(o.l)(Object(r.b)(Nu,Mu)(Pu));return Object(se.jsx)(e,{workspaceLocation:Du})};var Bu=()=>{const e=Object(j.f)((e=>e.session.name));return Object(se.jsx)("div",{className:"fullpage",children:Object(se.jsx)(h.e,{className:"fullpage-content",children:Object(se.jsx)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:Object(se.jsxs)("div",{children:[Object(se.jsxs)(h.p,{children:["Welcome to ",Se.b.sourceAcademyDeploymentName]}),Object(se.jsxs)("div",{children:["You have logged in as ",Object(se.jsx)("strong",{children:e}),". ",Se.b.sourceAcademyDeploymentName," ","does not have any course information for this account."]}),Object(se.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(se.jsxs)(h.cb,{style:{textAlign:"left"},children:[Object(se.jsx)("li",{children:"If you are enrolled in a course, check with the course staff to make sure your account is added to the course."}),Object(se.jsxs)("li",{children:["If you are looking for a course to join, check"," ",Object(se.jsx)("a",{href:Se.a.resourcesForLearners,children:"here"})," to find a course that suits your needs."]}),Object(se.jsxs)("li",{children:["If you are an instructor and want to create a course, click"," ",Object(se.jsx)("a",{href:Se.a.resourcesForEducators,children:"here"})," for a list of resources to get started."]})]})})]})})})})},Gu=s(1317),Fu=s(242);var Hu=e=>{const{item:t}=e,s=t.maxXp<=0&&0===t.xp,n=Object(se.jsxs)("div",{className:"xp-details",children:[Object(se.jsx)("div",{className:"title",children:"XP"}),Object(se.jsxs)("div",{className:"value",children:[t.xp," / ",t.maxXp]}),Object(se.jsx)(h.N,{animate:!1,className:"value-bar"+e.parseColour(e.getFrac(t.xp,t.maxXp)),stripes:!1,value:e.getFrac(t.xp,t.maxXp)})]});return Object(se.jsx)(k.b,{className:"profile-summary-navlink",target:"_blank",to:`/courses/${e.courseId}/${Object(we.a)(t.type)}/${t.id}/0`,activeClassName:"profile-summary-navlink",children:Object(se.jsx)(h.d,{className:"profile-summary-callout",icon:e.renderIcon(t.type),title:t.title,children:s?"":n},`${t.title}-${t.id}`)},`${t.title}-${t.id}`)};var Vu=e=>{const{name:t,role:s,assessmentOverviews:n,assessmentConfigurations:i,xp:a,courseId:o}=Object(j.f)((e=>e.session)),c=Object(r.c)();Object(f.useEffect)((()=>{t&&s&&!n&&c(Object(u.fetchAssessmentOverviews)())}),[n,c,t,s,a]),Object(f.useEffect)((()=>{o&&!a&&c(Object(u.fetchTotalXp)())}),[o,c,a]);const[l,d]=Object(f.useState)(t&&s&&n);let p;if(Object(f.useEffect)((()=>{d(t&&s&&n)}),[n,t,s]),l){const e=n.filter((e=>e.status===H.a.submitted)).length,r=a||0,c=Se.b.caFulfillmentLevel,l=1e3*c,d=Object(se.jsx)("div",{className:"profile-header",children:Object(se.jsxs)("div",{className:"profile-username",children:[Object(se.jsx)("div",{className:"name",children:t}),Object(se.jsx)("div",{className:"role",children:s})]})});if(0===e)p=Object(se.jsxs)("div",{className:"profile-content",children:[d,Object(se.jsx)("div",{className:"profile-placeholder",children:"There are no closed assessments to render grade and XP of."})]});else{const e=(e,t)=>t<=0||e/t>1?1:e/t,t=e=>e<0?"":e>=.8?" progress-steelblue":e>=.45?" progress-deepskyblue":" progress-skyblue",s=e=>{const t=[E.a.FLAME,E.a.LIGHTBULB,E.a.PREDICTIVE_ANALYSIS,E.a.COMPARISON,E.a.MANUAL];if(i){const s=i.findIndex((t=>t.type===e));return s>0?t[s]:E.a.PULSE}return E.a.PULSE},a=n.filter((e=>e.status===H.a.submitted&&(e.gradingStatus===H.c.graded||e.gradingStatus===H.c.excluded))).map(((n,i)=>Object(se.jsx)(Hu,{item:n,getFrac:e,parseColour:t,renderIcon:s,courseId:o},i)));p=Object(se.jsxs)("div",{className:"profile-content",children:[d,Object(se.jsx)("div",{className:"profile-progress",children:Object(se.jsxs)("div",{className:"profile-xp",children:[Object(se.jsx)(h.R,{className:"profile-spinner"+t(e(r,l)),size:144,value:e(r,l)}),Object(se.jsx)("div",{className:"type",children:"XP Progress"}),Object(se.jsxs)("div",{className:"total-value",children:[r," / ",l,"*"]}),Object(se.jsxs)("div",{className:"percentage",children:[(100*e(r,l)).toFixed(2),"%"]})]})}),Object(se.jsxs)("div",{className:"profile-xp-footer",children:["*",l,"XP needed to reach full CA level of ",c]}),Object(se.jsx)("div",{className:"profile-callouts",children:a})]})}}else p=Object(se.jsx)(h.G,{description:"Loading...",icon:Object(se.jsx)(h.R,{})});return Object(se.jsx)(h.j,{className:"profile",icon:E.a.USER,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"User Profile",position:"left",size:h.k.SMALL,children:p})};var Wu=e=>Object(se.jsx)(h.h,{className:"about",icon:E.a.HELP,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"About",children:Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsxs)("div",{className:"abt",children:[Object(se.jsxs)("p",{children:["The ",Object(se.jsx)("i",{children:"Source Academy"})," is a computer-mediated learning environment for studying the structure and interpretation of computer programs. Students write and run their programs in their web browser, using sublanguages of JavaScript called"," ",Object(se.jsx)("a",{href:Se.a.sourceDocs,children:"Source"}),", designed for the textbook"," ",Object(se.jsx)("a",{href:Se.a.textbook,children:"Structure and Interpretation of Computer Programs, JavaScript Edition"}),"."]}),Object(se.jsxs)("p",{children:["The Source Academy is available under the Apache License 2.0 at the GitHub organisation"," ",Object(se.jsx)("a",{href:Se.a.githubOrg,children:"source-academy"}),". More information and resources are available at the ",Object(se.jsx)("a",{href:Se.a.about,children:"about pages"})," of the Source Academy."]})]})})});var qu=e=>{const{courses:t}=e,s=t.map((e=>({value:e.courseId,label:e.courseName.concat(e.viewable?"":" - disabled"),disabled:!e.viewable&&e.role!==O.a.Admin})));return Object(se.jsx)(h.h,{className:"my-courses",icon:E.a.PROPERTIES,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"My Courses",children:Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)("div",{children:"Select a course to switch to:"}),Object(se.jsx)(h.u,{value:e.courseId,options:s,fill:!0,onChange:t=>{Ee.a.push(`/courses/${t.currentTarget.value}`),e.onClose()},disabled:t.length<=1})]})})};var $u=e=>{const[t,s]=f.useState({courseName:"",courseShortName:"",viewable:!0,enableGame:!0,enableAchievements:!0,enableSourcecast:!0,sourceChapter:I.Chapter.CLANG,sourceVariant:I.Variant.DEFAULT,moduleHelpText:""}),[n,i]=f.useState(an.WRITE),a=[{value:I.Chapter.CLANG}],r=f.useCallback(((e,t,s)=>{e!==t&&i(e)}),[i]);return Object(se.jsx)(h.h,{className:"create-course",icon:E.a.ADD,isCloseButtonShown:!0,canOutsideClickClose:!1,isOpen:e.isOpen,onClose:e.onClose,title:"Create Course",children:Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)("div",{children:Object(se.jsx)("b",{children:"Create your own Source Academy course and manage your own learners!"})}),Object(se.jsx)("br",{}),Object(se.jsx)(h.n,{helperText:"Please enter the course name that will be used for course selection",label:"Course Name",labelInfo:"(* required)",labelFor:"courseName",children:Object(se.jsx)(h.y,{id:"courseName",value:t.courseName,onChange:e=>s({...t,courseName:e.target.value})})}),Object(se.jsx)(h.n,{helperText:"Usually the module code of the course. This will be displayed on the top left.",label:"Course Short Name",labelInfo:"(optional)",labelFor:"courseShortName",children:Object(se.jsx)(h.y,{id:"courseShortName",value:t.courseShortName,onChange:e=>s({...t,courseShortName:e.target.value})})}),Object(se.jsxs)(h.n,{helperText:"The module help text will be used in the course help dialog.",labelFor:"moduleHelpText",children:[Object(se.jsx)(h.Y,{tagName:"span",children:"Module Help Text\xa0"}),Object(se.jsx)(h.Y,{tagName:"span",className:"optional-text",children:"(optional)"}),Object(se.jsxs)(h.V,{selectedTabId:n,onChange:r,className:"module-help-text-tabs",children:[Object(se.jsx)(h.U,{id:an.WRITE,title:"Write"}),Object(se.jsx)(h.U,{id:an.PREVIEW,title:"Preview"})]}),n===an.WRITE&&Object(se.jsx)(h.Z,{id:"moduleHelpText",className:"input-textarea",fill:!0,value:t.moduleHelpText,onChange:e=>s({...t,moduleHelpText:e.target.value})}),n===an.PREVIEW&&Object(se.jsx)("div",{className:"input-markdown",children:Object(se.jsx)(ee.a,{content:t.moduleHelpText||"",openLinksInNewWindow:!0})})]}),Object(se.jsxs)("div",{className:"boolean-container",children:[Object(se.jsxs)("div",{children:[Object(se.jsx)(h.T,{checked:t.viewable,inline:!0,label:"Viewable",onChange:e=>s({...t,viewable:e.target.checked})}),Object(se.jsx)(h.T,{checked:t.enableAchievements,inline:!0,label:"Enable Achievements",onChange:e=>s({...t,enableAchievements:e.target.checked})})]}),Object(se.jsxs)("div",{children:[Object(se.jsx)(h.T,{checked:t.enableGame,inline:!0,label:"Enable Game",onChange:e=>s({...t,enableGame:e.target.checked})}),Object(se.jsx)(h.T,{checked:t.enableSourcecast,inline:!0,label:"Enable Sourcecast",onChange:e=>s({...t,enableSourcecast:e.target.checked})})]})]}),Object(se.jsxs)("div",{children:[Object(se.jsx)(h.n,{label:"Default Source Chapter",labelInfo:"(configurable later on)",labelFor:"source-chapter",children:Object(se.jsx)(h.u,{id:"source-chapter",options:a,value:t.sourceChapter,onChange:e=>{s({...t,sourceChapter:parseInt(e.target.value)})},fill:!0})}),Object(se.jsx)(h.n,{label:"Default Source Variant",labelInfo:"(configurable later on)",labelFor:"source-variant",children:Object(se.jsx)(h.u,{id:"source-variant",options:(o=t.sourceChapter,O.n.filter((e=>e.chapter===o)).map((e=>({label:e.variant.replace(/^\w/,(e=>e.toUpperCase())),value:e.variant})))),value:t.sourceVariant,onChange:e=>{s({...t,sourceVariant:e.target.value})},fill:!0})})]}),Object(se.jsx)("div",{className:"create-course-button-container",children:Object(se.jsx)(h.b,{text:"Create Course",onClick:()=>{""!==t.courseName?(e.handleCreateCourse(t),e.onClose()):Object(me.e)("Course Name cannot be empty!")}})})]})});var o};var Xu=e=>{const t=Object(j.f)((e=>e.session.moduleHelpText));return Object(se.jsx)(h.h,{className:"help",icon:E.a.ERROR,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"Help",children:Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:t?Object(se.jsx)(ee.a,{content:t,openLinksInNewWindow:!0}):Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("p",{children:["We recommend recent updates of the browsers ",Object(se.jsx)("b",{children:"Google Chrome"}),","," ",Object(se.jsx)("b",{children:"Microsoft Edge"}),", or ",Object(se.jsx)("b",{children:"Mozilla Firefox"})," to visit the Source Academy."]}),Object(se.jsxs)("p",{children:["If you encounter issues with the Source Academy using these browsers, please use the issue system of the"," ",Object(se.jsx)("a",{href:Se.a.githubIssues,children:"Source Academy frontend repository on GitHub"}),"."]})]})})})},zu=s(150);var Yu=e=>{const[t,s]=Object(f.useContext)(zu.b),n=Object(f.useMemo)((()=>[{label:"None",value:zu.a.NONE},{label:"Vim",value:zu.a.VIM},{label:"Emacs",value:zu.a.EMACS}]),[]);return Object(se.jsx)(h.h,{className:"settings",icon:E.a.COG,isCloseButtonShown:!0,isOpen:e.isOpen,onClose:e.onClose,title:"Settings",children:Object(se.jsx)("div",{className:p.a.DIALOG_BODY,children:Object(se.jsxs)(h.n,{label:"Editor Binding: ",labelFor:"editor-binding",inline:!0,children:[Object(se.jsx)(h.u,{id:"editor-binding",options:n,value:t.editorBinding,onChange:e=>{s({...t,editorBinding:e.target.value})}}),Object(se.jsx)(w.a,{position:h.L.TOP,className:"form-field-help-text",content:"Optional editor bindings for advanced users. Set to 'None' for default text editor behaviour.",children:Object(se.jsx)(h.w,{icon:"help"})})]})})})};const Ku=e=>e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()));var Qu=e=>{const[t,s]=Object(f.useState)(!1),[n,i]=Object(f.useState)(!1),[a,r]=Object(f.useState)(!1),[o,c]=Object(f.useState)(!1),[l,d]=Object(f.useState)(!1),[u,p]=Object(f.useState)(!1);const g=()=>{s((e=>!e))},m=()=>{i((e=>!e))},b=()=>r((e=>!e)),v=()=>c((e=>!e)),y=()=>d((e=>!e)),x=()=>p((e=>!e));return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(De.a,{content:function(e){const t=e.name&&null!=e.courseId?Object(se.jsx)(h.B,{icon:E.a.USER,onClick:v,text:Ku(e.name)}):null,s=e.name?Object(se.jsx)(h.B,{icon:E.a.PROPERTIES,onClick:y,text:"My Courses"}):null,n=e.name?Object(se.jsx)(h.B,{icon:E.a.ADD,onClick:x,text:"Create Course"}):null,i=e.name?Object(se.jsx)(h.B,{icon:E.a.LOG_OUT,text:"Logout",onClick:e.handleLogOut}):null;return Object(se.jsxs)(h.A,{children:[t,s,n,Object(se.jsx)(h.B,{icon:E.a.COG,onClick:g,text:"Settings"}),Object(se.jsx)(h.B,{icon:E.a.HELP,onClick:m,text:"About"}),Object(se.jsx)(h.B,{icon:E.a.ERROR,onClick:b,text:"Help"}),i]})}(e),inheritDarkTheme:!1,placement:S.a.BOTTOM,children:Object(se.jsx)(J.a,{icon:E.a.CARET_DOWN})}),Object(se.jsx)(Yu,{isOpen:t,onClose:g}),Object(se.jsx)(Wu,{isOpen:n,onClose:m}),Object(se.jsx)(Xu,{isOpen:a,onClose:b}),e.name?Object(se.jsx)(qu,{isOpen:l,onClose:y,courses:e.courses,courseId:e.courseId}):null,e.name?Object(se.jsx)($u,{isOpen:u,onClose:x,handleCreateCourse:e.handleCreateCourse}):null,e.name?Object(se.jsx)(Vu,{isOpen:o,onClose:v}):null]})};const Ju=[E.a.FLAME,E.a.LIGHTBULB,E.a.PREDICTIVE_ANALYSIS,E.a.COMPARISON,E.a.MANUAL,E.a.GRAPH,E.a.LAB_TEST,E.a.CALCULATOR];var Zu=e=>{var t;return Object(se.jsxs)(h.C,{className:"NavigationBar secondary-navbar",children:[Object(se.jsx)(h.E,{align:Fu.a.LEFT,children:null===(t=e.assessmentTypes)||void 0===t?void 0:t.map(((t,s)=>Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/${Object(we.a)(t)}`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:Ju[s]}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:t}),Object(se.jsx)(Ve,{notificationFilter:Be(t),disableHover:!0})]},s)))}),e.role===O.a.Admin||e.role===O.a.Staff?Object(se.jsxs)(h.E,{align:Fu.a.RIGHT,children:[Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/groundcontrol`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.SATELLITE}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:"Ground Control"})]}),Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/dashboard`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.GLOBE}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:"Dashboard"})]}),Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/sourcereel`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.MOBILE_VIDEO}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm hidden-md",children:"Sourcereel"})]}),e.role===O.a.Admin&&Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/xpcalculation`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.CALCULATOR}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:"XP Calculation"})]}),Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/grading`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.ENDORSED}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm hidden-md",children:"Grading"}),Object(se.jsx)(Ve,{notificationFilter:Be("Grading"),disableHover:!0})]}),Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/storysimulator`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.CROWN}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm hidden-md",children:"Story Simulator"})]}),e.role===O.a.Admin&&Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/adminpanel`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:E.a.SETTINGS}),Object(se.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm hidden-md hidden-lg",children:"Admin Panel"})]})]}):null]})};var eh=e=>{var t;return Object(se.jsxs)(h.j,{isOpen:e.isOpen,position:"left",onClose:e.onClose,title:"",className:p.a.DARK,children:[e.role?null===(t=e.assessmentTypes)||void 0===t?void 0:t.map(((t,s)=>Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/${Object(we.a)(t)}`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:Ju[s]}),Object(se.jsx)("div",{children:t}),Object(se.jsx)(Ve,{notificationFilter:Be(t),disableHover:!0})]},s))):Object(se.jsx)(se.Fragment,{}),e.role&&e.enableSourcecast&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:`/courses/${e.courseId}/sourcecast`,onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:E.a.MUSIC}),Object(se.jsx)("div",{children:"Sourcecast"})]}),e.role&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:"/playground",onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:E.a.CODE}),Object(se.jsx)("div",{children:"Playground"})]}),Se.b.enableGitHubAssessments&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link_mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:"/githubassessments",onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:E.a.BRIEFCASE}),Object(se.jsx)("div",{className:"navbar-button-text",children:"Classroom"})]}),e.name&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link_mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:"/sicpjs/",onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:E.a.BOOK}),Object(se.jsx)("div",{className:"navbar-button-text",children:"SICP JS"})]}),e.role&&e.enableAchievements&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:`/courses/${e.courseId}/achievements`,onClick:e.onClose,children:[Object(se.jsx)(h.w,{icon:E.a.MOUNTAIN}),Object(se.jsx)("div",{children:"Achievements"})]})]})};const th=/^\/courses\/\d+\/(sourcecast|achievements)/,sh=(e,t)=>!!e&&!th.test(t.pathname);var nh=e=>{var t;const[s,n]=f.useState(!1),{isMobileBreakpoint:i}=Object(j.e)(),a=Object(o.i)();Gu.a.onlyShowFocusOnTabs();const r=Se.b.enableGitHubAssessments?i?Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)(h.E,{align:Fu.a.LEFT,children:[Object(se.jsx)(h.b,{onClick:()=>n(!s),icon:E.a.MENU,large:!0,minimal:!0}),Object(se.jsxs)(k.b,{className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:"/",children:[Object(se.jsx)(h.w,{icon:E.a.SYMBOL_DIAMOND}),Object(se.jsx)(h.F,{style:{paddingBottom:"0px"},children:"Source Academy"})]}),Object(se.jsxs)(h.j,{isOpen:s,position:"left",onClose:()=>n(!1),title:"",className:p.a.DARK,children:[Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:"/playground",onClick:()=>n(!1),children:[Object(se.jsx)(h.w,{icon:E.a.CODE}),Object(se.jsx)("div",{children:"Playground"})]}),Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL,p.a.LARGE),to:"/githubassessments/missions",onClick:()=>n(!1),children:[Object(se.jsx)(h.w,{icon:E.a.BRIEFCASE}),Object(se.jsx)("div",{children:"Classroom"})]})]})]})}):Object(se.jsxs)(h.E,{align:Fu.a.LEFT,children:[Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL),to:"/playground",children:[Object(se.jsx)(h.w,{icon:E.a.CODE}),Object(se.jsx)("div",{children:"Playground"})]}),Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL),to:"/githubassessments",children:[Object(se.jsx)(h.w,{icon:E.a.BRIEFCASE}),Object(se.jsx)("div",{children:"Classroom"})]})]}):Object(se.jsx)(h.E,{align:Fu.a.LEFT,children:Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link__mobile",p.a.BUTTON,p.a.MINIMAL),to:"/playground",children:[Object(se.jsx)(h.w,{icon:E.a.CODE}),Object(se.jsx)("div",{children:"Playground"})]})}),c=Object(se.jsxs)(h.E,{align:Fu.a.LEFT,children:[(e.role||Se.b.enableGitHubAssessments)&&Object(se.jsx)(h.b,{onClick:()=>n(!s),icon:E.a.MENU,large:!0,minimal:!0}),Object(se.jsxs)(k.b,{className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),activeClassName:p.a.ACTIVE,to:null==e.courseId?"/welcome":`/courses/${e.courseId}`,children:[Object(se.jsx)(h.w,{icon:E.a.SYMBOL_DIAMOND}),Object(se.jsx)(h.F,{style:{paddingBottom:"0px"},children:e.courseShortName||"Source Academy @ NUS"})]}),(e.role||Se.b.enableGitHubAssessments)&&Object(se.jsx)(eh,{name:e.name,role:e.role,courseId:e.courseId,enableAchievements:e.enableAchievements,enableSourcecast:e.enableSourcecast,assessmentTypes:e.assessmentTypes,isOpen:s,onClose:()=>n(!1),handleGitHubLogIn:()=>e.handleGitHubLogIn,handleGitHubLogOut:()=>e.handleGitHubLogOut})]}),l=Object(se.jsx)(h.C,{children:Object(se.jsx)(h.E,{children:null===(t=e.assessmentTypes)||void 0===t?void 0:t.map(((t,s)=>Object(se.jsxs)(k.b,{to:`/courses/${e.courseId}/${Object(we.a)(t)}`,activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),children:[Object(se.jsx)(h.w,{icon:Ju[s]}),Object(se.jsx)("div",{className:"navbar-button-text",children:t}),Object(se.jsx)(Ve,{notificationFilter:Be(t),disableHover:!0})]},t)))})}),d=Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:null==e.courseId?"/welcome":`/courses/${e.courseId}`,isActive:sh,children:[Object(se.jsx)(h.w,{icon:E.a.SYMBOL_DIAMOND}),Object(se.jsx)(h.F,{style:{paddingBottom:"0px"},children:e.courseShortName||"Source Academy @ NUS"})]}),u=["/playground","/contributors",`/courses/${e.courseId}/sourcecast`,`/courses/${e.courseId}/achievements`],g=null!=e.courseId&&!!u.find((e=>a.pathname.startsWith(e))),m=Object(se.jsxs)(h.E,{align:Fu.a.LEFT,children:[g?Object(se.jsx)(De.a,{position:S.a.BOTTOM_RIGHT,interactionKind:"hover",content:l,popoverClassName:"desktop-navbar-popover",children:d}):d,e.role&&e.enableSourcecast&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:`/courses/${e.courseId}/sourcecast`,children:[Object(se.jsx)(h.w,{icon:E.a.MUSIC}),Object(se.jsx)("div",{className:"navbar-button-text",children:"Sourcecast"})]}),e.role&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:"/playground",children:[Object(se.jsx)(h.w,{icon:E.a.CODE}),Object(se.jsx)("div",{className:"navbar-button-text",children:"Playground"})]}),Se.b.enableGitHubAssessments&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:"/githubassessments",children:[Object(se.jsx)(h.w,{icon:E.a.BRIEFCASE}),Object(se.jsx)("div",{className:"navbar-button-text",children:"Classroom"})]}),e.name,e.role&&e.enableAchievements&&Object(se.jsxs)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:`/courses/${e.courseId}/achievements`,children:[Object(se.jsx)(h.w,{icon:E.a.MOUNTAIN}),Object(se.jsx)("div",{className:"navbar-button-text",children:"Achievements"})]})]}),b=Object(se.jsxs)(h.E,{align:Fu.a.RIGHT,children:[Object(se.jsx)(k.b,{activeClassName:p.a.ACTIVE,className:x()("NavigationBar__link",p.a.BUTTON,p.a.MINIMAL),to:"/contributors",children:Object(se.jsx)(h.w,{icon:E.a.HEART})}),Object(se.jsx)("div",{className:"visible-xs",children:Object(se.jsx)(h.D,{className:"thin-divider"})}),Object(se.jsx)("div",{className:"hidden-xs",children:Object(se.jsx)(h.D,{className:"default-divider"})}),Object(se.jsx)(Qu,{handleLogOut:e.handleLogOut,handleCreateCourse:e.handleCreateCourse,courses:e.courses,courseId:e.courseId,name:e.name})]});return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)(h.C,{className:x()("NavigationBar","primary-navbar",p.a.DARK),children:[Se.b.playgroundOnly?r:i?c:m,b]}),Object(se.jsxs)(o.e,{children:[Object(se.jsx)(o.c,{path:"/playground"}),Object(se.jsx)(o.c,{path:"/githubassessments"}),Object(se.jsx)(o.c,{path:"/contributors"}),Object(se.jsx)(o.c,{path:"/courses/:courseId/sourcecast"}),Object(se.jsx)(o.c,{path:"/courses/:courseId/achievements"}),Object(se.jsx)(o.c,{children:!Se.b.playgroundOnly&&e.role&&!i&&Object(se.jsx)(Zu,{role:e.role,assessmentTypes:e.assessmentTypes,courseId:e.courseId})})]})]})};const ih=Object(se.jsx)(o.c,{path:"/login",component:gd},"login"),ah=()=>Object(se.jsx)(o.b,{to:"/login"}),rh=()=>Object(se.jsx)(o.b,{to:"/welcome"}),oh=e=>{let{name:t,role:s}=e;return void 0===t?ah:void 0===s?rh:()=>Object(se.jsx)(Ql,{})},ch=(e,t)=>{let{name:s}=e;return void 0===s?ah:()=>t},lh=(e,t)=>{let{name:s,role:n}=e;return void 0===s?ah:void 0===n?rh:()=>t};function dh(){const e=b()();for(const{start:t,end:s,reason:n}of Se.b.disablePeriods)if(t.isBefore(e)&&s.isAfter(e))return n||!0;return!1}var uh=e=>{const t=f.useRef(void 0),[s,n]=f.useState(dh()),i=/iPhone|iPad|Android/.test(navigator.userAgent),a=window.matchMedia("(display-mode: standalone)").matches,r=f.useRef({height:0,width:0}),[c,l]=Object(j.c)(Se.b.workspaceSettingsLocalStorageKey,zu.c),d="string"===typeof e.name&&"string"===typeof e.role;f.useEffect((()=>{e.name&&e.fetchUserAndCourse()}),[]),f.useEffect((()=>(Se.b.disablePeriods.length>0&&(t.current=window.setInterval((()=>{const e=dh();s!==e&&n(e)}),5e3)),()=>{t.current&&window.clearInterval(t.current)})),[s]),f.useEffect((()=>{const e=()=>{window.innerHeight<r.current.height&&window.innerWidth===r.current.width||document.documentElement.style.setProperty("--application-height",window.innerHeight+"px"),r.current={height:window.innerHeight,width:window.innerWidth}};return!a&&i&&(e(),window.addEventListener("resize",e)),()=>{!a&&i&&window.removeEventListener("resize",e)}}),[a,i]);const u=[Object(se.jsx)(o.c,{path:"/contributors",component:nd},"contributors"),Object(se.jsx)(o.c,{path:"/callback/github",component:ud},"githubCallback"),Se.b.enableGitHubAssessments?Object(se.jsx)(o.c,{path:"/githubassessments",render:()=>Object(se.jsx)(ad.a,{handleGitHubLogIn:e.handleGitHubLogIn,handleGitHubLogOut:e.handleGitHubLogOut})},"githubAssessments"):null],m=!["staff","admin"].includes(e.role)&&s;return Object(se.jsx)(zu.b.Provider,{value:[c,l],children:Object(se.jsxs)("div",{className:"Application",children:[Object(se.jsx)(nh,{handleLogOut:e.handleLogOut,handleGitHubLogIn:e.handleGitHubLogIn,handleGitHubLogOut:e.handleGitHubLogOut,handleCreateCourse:e.handleCreateCourse,role:e.role,name:e.name,courses:e.courses,courseId:e.courseId,courseShortName:e.courseShortName,enableAchievements:e.enableAchievements,enableSourcecast:e.enableSourcecast,assessmentTypes:f.useMemo((()=>{var t;return null===(t=e.assessmentConfigurations)||void 0===t?void 0:t.map((e=>e.type))}),[e.assessmentConfigurations])}),Object(se.jsxs)("div",{className:"Application__main",children:[m&&Object(se.jsxs)(o.e,{children:[!Se.b.playgroundOnly&&ih,d||Se.b.playgroundOnly?[]:[Object(se.jsx)(o.c,{path:"/courses",render:ah},0),Object(se.jsx)(o.c,{exact:!0,path:"/",render:ah},1)],Object(se.jsx)(o.c,{children:Object(se.jsx)(id,{reason:"string"===typeof s?s:void 0})})]}),!m&&Se.b.playgroundOnly&&Object(se.jsxs)(o.e,{children:[u,Object(se.jsx)(o.c,{path:"/playground",component:Uu}),Object(se.jsx)(o.c,{exact:!0,path:"/",children:Object(se.jsx)(o.b,{to:"/playground"})}),Object(se.jsx)(o.c,{component:Ke})]}),!m&&!Se.b.playgroundOnly&&Object(se.jsxs)(o.e,{children:[ih,u,Object(se.jsx)(o.c,{path:"/courses/:courseId(\\d+)?",render:oh(e)}),Object(se.jsx)(o.c,{path:"/welcome",render:ch(e,Object(se.jsx)(Bu,{}))}),Object(se.jsx)(o.c,{path:"/mission-control/:assessmentId(-?\\d+)?/:questionId(\\d+)?",component:vu}),Object(se.jsx)(o.c,{path:"/playground",render:lh(e,Object(se.jsx)(Uu,{}))}),Object(se.jsx)(o.b,{from:"/",exact:!0,to:null!=e.courseId?`/courses/${e.courseId}`:"/welcome"}),null!=e.courseId&&[Object(se.jsx)(o.b,{from:"/sourcecast/:splat?",to:`/courses/${e.courseId}/sourcecast/:splat?`},"legacy-sourcecast"),Object(se.jsx)(o.b,{from:"/achievements/:splat?",to:`/courses/${e.courseId}/achievements/:splat?`},"legacy-achievements"),Object(se.jsx)(o.b,{from:"/academy/:splat?",to:`/courses/${e.courseId}/:splat?`},"legacy-academy")],Object(se.jsx)(o.c,{component:Ke})]})]}),Se.b.showResearchPrompt&&null===e.agreedToResearch&&Object(se.jsx)("div",{className:"research-prompt",children:Object(se.jsxs)(h.h,{className:p.a.DARK,title:"Agreement to Participate in Educational Research",canOutsideClickClose:!1,canEscapeKeyClose:!1,isCloseButtonShown:!1,isOpen:!0,children:[Object(se.jsxs)("div",{className:p.a.DIALOG_BODY,children:[Object(se.jsx)(h.r,{children:"Welcome to your new Source Academy @ NUS course!"}),Object(se.jsx)("div",{children:"Here at Source Academy @ NUS, our mission is to bring out the beauty and fun in programming and the ideas behind programming, and to make these ideas universally accessible. This includes educational research!"}),Object(se.jsx)("br",{}),Object(se.jsx)("div",{children:"We collect programs that students run in Source Academy @ NUS and store them anonymously for our research. You are free to opt out of this collection, with no penalty for you whatsoever. Contact your course instructor if you have questions or concerns about this research."})]}),Object(se.jsx)("div",{className:p.a.DIALOG_FOOTER,children:Object(se.jsxs)("div",{className:p.a.DIALOG_FOOTER_ACTIONS,children:[Object(se.jsx)(h.b,{text:"I would like to opt out",onClick:()=>e.updateCourseResearchAgreement(!1)}),Object(se.jsx)(h.b,{text:"I consent!",intent:g.a.SUCCESS,onClick:()=>e.updateCourseResearchAgreement(!0)})]})})]})})]})})};var hh=Object(o.l)(Object(r.b)((e=>({role:e.session.role,name:e.session.name,courses:e.session.courses,courseId:e.session.courseId,courseShortName:e.session.courseShortName,enableAchievements:e.session.enableAchievements,enableSourcecast:e.session.enableSourcecast,assessmentConfigurations:e.session.assessmentConfigurations,agreedToResearch:e.session.agreedToResearch})),(e=>Object(c.b)({handleLogOut:d.logOut,handleGitHubLogIn:u.loginGitHub,handleGitHubLogOut:u.logoutGitHub,fetchUserAndCourse:u.fetchUserAndCourse,handleCreateCourse:l.createCourse,updateCourseResearchAgreement:u.updateCourseResearchAgreement},e)))(uh));const ph=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function gh(e,t){navigator.serviceWorker.register(e).then((e=>{setInterval((()=>{try{e.update()}catch{}}),3e5),e.onupdatefound=()=>{const s=e.installing;null!=s&&(s.onstatechange=()=>{"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}var mh=s(379);const bh=Object(f.createContext)(void 0);var fh=e=>{let{children:t}=e;const[s,n]=Object(f.useState)();return Object(mh.configure)({fs:"MountableFileSystem",options:{"/playground":{fs:"IndexedDB",options:{storeName:"playground"}}}},(e=>{e&&console.error(e),n(Object(mh.BFSRequire)("fs"))})),Object(se.jsx)(bh.Provider,{value:s,children:t})};if(Se.b.sentryDsn){n.a({dsn:Se.b.sentryDsn,environment:Se.b.sourceAcademyEnvironment,release:`cadet-frontend@${Se.b.sourceAcademyVersion}`});const e=Kn.a.getState().session.userId;i.b("undefined"!==typeof e?{id:e.toString()}:null)}const vh=document.getElementById("root");if(window.__REDUX_STORE__=Kn.a,console.log(`%cSource Academy ${Se.b.sourceAcademyEnvironment}-${Se.b.sourceAcademyVersion}; Please visit ${Se.a.githubIssues} to report bugs or issues.`,"font-weight: bold;"),Object(a.render)(Object(se.jsx)(r.a,{store:Kn.a,children:Object(se.jsx)(fh,{children:Object(se.jsx)(o.d,{history:Ee.a,children:Object(se.jsx)(hh,{})})})}),vh),function(e){if("serviceWorker"in navigator){if(new URL("/CS4215-frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="/CS4215-frontend/service-worker.js";ph?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((s=>{const n=s.headers.get("content-type");404===s.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):gh(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):gh(t,e)}))}}({onUpdate:()=>{Object(me.e)("A new version of Source Academy is available. Please refresh the browser.",0)}}),Se.b.cadetLoggerUrl){const e=()=>function(e){var t;e&&(null===(t=navigator.serviceWorker.controller)||void 0===t||t.postMessage({type:"SYNC_LOGS",accessToken:e}))}(Kn.a.getState().session.accessToken);navigator.serviceWorker.ready.then((()=>{setInterval(e,Se.b.cadetLoggerInterval)}))}},135:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a}));const n="FETCH_SOURCECAST_INDEX",i="SET_IS_EDITOR_READONLY",a="UPDATE_SOURCECAST_INDEX"},146:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n="LOG_OUT"},147:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s(63),i=s(122),a=s(304),r=(s(1),s(12)),o=s(0);const c=e=>Object(o.jsx)(a.a,{content:"...or press shift-enter in the editor",placement:n.a.TOP,children:Object(o.jsx)(r.a,{label:"Run",icon:i.a.PLAY,onClick:e.handleEditorEval,options:{iconColor:e.color,className:e.className}})})},15:function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"q",(function(){return i})),s.d(t,"k",(function(){return a})),s.d(t,"f",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"o",(function(){return d})),s.d(t,"p",(function(){return u})),s.d(t,"l",(function(){return h})),s.d(t,"m",(function(){return p})),s.d(t,"r",(function(){return g})),s.d(t,"u",(function(){return m})),s.d(t,"s",(function(){return b})),s.d(t,"t",(function(){return f})),s.d(t,"G",(function(){return v})),s.d(t,"H",(function(){return y})),s.d(t,"A",(function(){return x})),s.d(t,"B",(function(){return j})),s.d(t,"z",(function(){return O})),s.d(t,"y",(function(){return C})),s.d(t,"F",(function(){return S})),s.d(t,"D",(function(){return E})),s.d(t,"E",(function(){return w})),s.d(t,"C",(function(){return _})),s.d(t,"I",(function(){return A})),s.d(t,"J",(function(){return k})),s.d(t,"K",(function(){return T})),s.d(t,"L",(function(){return R})),s.d(t,"w",(function(){return I})),s.d(t,"v",(function(){return L})),s.d(t,"x",(function(){return P})),s.d(t,"M",(function(){return N})),s.d(t,"Q",(function(){return D})),s.d(t,"X",(function(){return M})),s.d(t,"N",(function(){return U})),s.d(t,"O",(function(){return B})),s.d(t,"U",(function(){return G})),s.d(t,"T",(function(){return F})),s.d(t,"n",(function(){return H})),s.d(t,"a",(function(){return V})),s.d(t,"W",(function(){return W})),s.d(t,"V",(function(){return q})),s.d(t,"R",(function(){return $})),s.d(t,"h",(function(){return X})),s.d(t,"P",(function(){return z})),s.d(t,"b",(function(){return Y})),s.d(t,"d",(function(){return K})),s.d(t,"Y",(function(){return Q})),s.d(t,"S",(function(){return J})),s.d(t,"c",(function(){return Z}));const n="FETCH_AUTH",i="FETCH_USER_AND_COURSE",a="FETCH_COURSE_CONFIG",r="FETCH_ASSESSMENT",o="FETCH_ASSESSMENT_ADMIN",c="FETCH_ASSESSMENT_OVERVIEWS",l="FETCH_ALL_USER_XP",d="FETCH_TOTAL_XP",u="FETCH_TOTAL_XP_ADMIN",h="FETCH_GRADING",p="FETCH_GRADING_OVERVIEWS",g="LOGIN",m="LOGOUT_GOOGLE",b="LOGIN_GITHUB",f="LOGOUT_GITHUB",v="SET_TOKENS",y="SET_USER",x="SET_COURSE_CONFIGURATION",j="SET_COURSE_REGISTRATION",O="SET_ASSESSMENT_CONFIGURATIONS",C="SET_ADMIN_PANEL_COURSE_REGISTRATIONS",S="SET_GOOGLE_USER",E="SET_GITHUB_ASSESSMENT",w="SET_GITHUB_OCTOKIT_OBJECT",_="SET_GITHUB_ACCESS_TOKEN",A="SUBMIT_ANSWER",k="SUBMIT_ASSESSMENT",T="SUBMIT_GRADING",R="SUBMIT_GRADING_AND_CONTINUE",I="REAUTOGRADE_SUBMISSION",L="REAUTOGRADE_ANSWER",P="REMOVE_GITHUB_OCTOKIT_OBJECT_AND_ACCESS_TOKEN",N="UNSUBMIT_SUBMISSION",D="UPDATE_ASSESSMENT_OVERVIEWS",M="UPDATE_TOTAL_XP",U="UPDATE_ALL_USER_XP",B="UPDATE_ASSESSMENT",G="UPDATE_GRADING_OVERVIEWS",F="UPDATE_GRADING",H="FETCH_NOTIFICATIONS",V="ACKNOWLEDGE_NOTIFICATIONS",W="UPDATE_NOTIFICATIONS",q="UPDATE_LATEST_VIEWED_COURSE",$="UPDATE_COURSE_CONFIG",X="FETCH_ASSESSMENT_CONFIGS",z="UPDATE_ASSESSMENT_CONFIGS",Y="DELETE_ASSESSMENT_CONFIG",K="FETCH_ADMIN_PANEL_COURSE_REGISTRATIONS",Q="UPDATE_USER_ROLE",J="UPDATE_COURSE_RESEARCH_AGREEMENT",Z="DELETE_USER_COURSE_REGISTRATION"},150:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s(1),i=s.n(n);let a;!function(e){e.NONE="",e.VIM="vim",e.EMACS="emacs"}(a||(a={}));const r={editorBinding:a.NONE},o=i.a.createContext(null)},151:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return r}));const n="CHANGE_DATE_ASSESSMENT",i="DELETE_ASSESSMENT",a="PUBLISH_ASSESSMENT",r="UPLOAD_ASSESSMENT"},152:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return r}));const n="PERSISTENCE_OPEN_PICKER",i="PERSISTENCE_SAVE_FILE_AS",a="PERSISTENCE_SAVE_FILE",r="PERSISTENCE_INITIALISE"},153:function(e,t,s){"use strict";(function(e){s.d(t,"f",(function(){return r})),s.d(t,"e",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"d",(function(){return g})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n=s(28),i=s(33),a=s(10);const r=20,o=e=>JSON.stringify(e,null,4),c=e=>e,l={taskDescription:{fileName:"Problem.md",isDefaultValue:e=>""===e,fromStringConverter:c,toStringConverter:c},starterCode:{fileName:"StarterCode.js",isDefaultValue:e=>""===e,fromStringConverter:c,toStringConverter:c},savedCode:{fileName:"SavedCode.js",isDefaultValue:e=>""===e,fromStringConverter:c,toStringConverter:c},testPrepend:{fileName:"TestPrepend.js",isDefaultValue:e=>""===e,fromStringConverter:c,toStringConverter:c},testPostpend:{fileName:"TestPostpend.js",isDefaultValue:e=>""===e,fromStringConverter:c,toStringConverter:c},testCases:{fileName:"TestCases.json",isDefaultValue:e=>0===e.length,fromStringConverter:JSON.parse,toStringConverter:e=>{const t=e.map((e=>({answer:e.answer,program:e.program,score:e.score?e.score:0,type:e.type?e.type:"public"})));return o(t)}}};async function d(e,t){const s=u(e.repoOwner,e.repoName,"README.md",t),i=u(e.repoOwner,e.repoName,".metadata",t),o=async function(e,t,s){const n=[];if(void 0===s)return n;const i=(await s.repos.getContent({owner:e,repo:t,path:""})).data;if(!Array.isArray(i))return n;const o=[];for(let c=1;c<=r;c++){const r="Q"+c;if(void 0===i.find((e=>e.name===r)))break;o.push(s.repos.getContent({owner:e,repo:t,path:r}).then((i=>{if(!Array.isArray(i.data))return;const a=i.data.map((e=>e.name)),o=Object.keys(l).filter((e=>a.includes(l[e].fileName))),d=o.map((async n=>{const i=l[n].fileName,a=await u(e,t,r+"/"+i,s);return l[n].fromStringConverter(a)}));return Promise.all(d).then((e=>{const t={questionNumber:c,taskDescription:"",starterCode:"",savedCode:"",testPrepend:"",testPostpend:"",testCases:[]};for(let s=0;s<e.length;s++)t[o[s]]=e[s];""===t.savedCode&&(t.savedCode=t.starterCode),n.push(t)}))})).catch((e=>{Object(a.e)("Error occurred while trying to retrieve file content",1e3),console.error(e)})))}return await Promise.all(o),n.sort(((e,t)=>e.questionNumber-t.questionNumber)),n}(e.repoOwner,e.repoName,t),[c,d,h]=await Promise.all([s,i,o]),p=function(e){try{return JSON.parse(e)}catch(t){return console.error(t),{sourceVersion:n.Chapter.CLANG}}}(d);return{missionRepoData:e,missionBriefing:c,missionMetadata:p,tasksData:h}}async function u(t,s,n,i){let r="";if(void 0===i)return r;try{const a=await i.repos.getContent({owner:t,repo:s,path:n});r=e.from(a.data.content,"base64").toString()}catch(o){Object(a.e)("Error occurred while trying to retrieve file content",1e3),console.error(o)}return r}function h(e){return o(e)}function p(e,t,s,n,a,r,o){const c={},d=[];e!==t&&(c[".metadata"]=h(e)),s!==n&&(c["README.md"]=s);let u=0;for(;u<a.length;){const e=u+1,t="Q"+e;if(e>r.length){c[t+"/StarterCode.js"]=a[u].savedCode,c[t+"/Problem.md"]=a[u].taskDescription;const e=["testCases","testPrepend","testPostpend"];for(const s of e){const e=a[u][s];if(!l[s].isDefaultValue(e)){const e=t+"/"+l[s].fileName,n=l[s].toStringConverter(a[u][s]);c[e]=n}}}else{const e=Object.keys(l);for(const s of e){const e=a[u][s],n=r[u][s];if(!Object(i.isEqual)(e,n)){const e=t+"/"+l[s].fileName,n=l[s].toStringConverter(a[u][s]);c[e]=n}}if(o&&c[t+"/"+l.savedCode.fileName]){const e=c[t+"/"+l.savedCode.fileName];delete c[t+"/"+l.savedCode.fileName],c[t+"/"+l.starterCode.fileName]=e}}u++}for(;u<r.length;){const e=u+1;d.push("Q"+e),u++}return[c,d]}function g(e,t,s){const n={};n[".metadata"]=h(e),n["README.md"]=t;const i=["testCases","testPrepend","testPostpend"];for(let a=0;a<s.length;a++){const e="Q"+(a+1);n[e+"/"+l.starterCode.fileName]=s[a].savedCode,n[e+"/"+l.taskDescription.fileName]=s[a].taskDescription,i.forEach((t=>{const i=s[a][t];if(!l[t].isDefaultValue(i)){const i=e+"/"+l[t].fileName,r=l[t].toStringConverter(s[a][t]);n[i]=r}}))}return n}function m(e){let t=!1;const s={answer:0,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:n.Chapter.CLANG,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},i=e.trim();if("mcq"===i.substring(0,3).toLowerCase()&&(t=!0),t){const e=i.substring(3,i.length);try{const t=JSON.parse(e),n=t.answer,i=t.choices.map((e=>({content:e.option,hint:e.hint}))),a=t.solution;s.answer=n,s.choices=i,s.solution=a}catch(a){t=!1}}return[t,s]}function b(e){const t=e.answer,s=e.choices.map((e=>({option:e.content,hint:e.hint}))),n=e.solution;return"MCQ\n"+o({choices:s,answer:t,solution:n})}}).call(this,s(74).Buffer)},157:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetPropertyError=t.GetInheritedPropertyError=t.GetPropertyError=t.ConstAssignment=t.VariableRedeclaration=t.InvalidNumberOfArguments=t.UnassignedVariable=t.UndefinedVariable=t.CallingNonFunctionValue=t.MaximumStackLimitExceeded=t.ExceptionError=t.InterruptedError=void 0;const n=s(573),i=s(28),a=s(106),r=s(311);class o extends r.RuntimeSourceError{constructor(e){super(e)}explain(){return"Execution aborted by user."}elaborate(){return"TODO"}}t.InterruptedError=o;t.ExceptionError=class{constructor(e,t){this.error=e,this.location=t,this.type=i.ErrorType.RUNTIME,this.severity=i.ErrorSeverity.ERROR}explain(){return this.error.toString()}elaborate(){return"TODO"}};class c extends r.RuntimeSourceError{constructor(e,t){super(e),this.calls=t,this.customGenerator=Object.assign(Object.assign({},n.baseGenerator),{CallExpression(e,t){t.write((0,n.generate)(e.callee)),t.write("(");const s=e.arguments.map((e=>(0,a.stringify)(e.value)));t.write(s.join(", ")),t.write(")")}})}explain(){const e=e=>(0,n.generate)(e,{generator:this.customGenerator});return"Maximum call stack size exceeded\n  "+this.calls.map((t=>e(t)+"..")).join("  ")}elaborate(){return"TODO"}}t.MaximumStackLimitExceeded=c,c.MAX_CALLS_TO_SHOW=3;class l extends r.RuntimeSourceError{constructor(e,t){super(t),this.callee=e,this.node=t}explain(){return`Calling non-function value ${(0,a.stringify)(this.callee)}.`}elaborate(){const e=this.callee,t=(0,a.stringify)(e);let s="";s=this.node.arguments.map(n.generate).join(", ");const i=`Because ${t} is not a function, you cannot run ${t}(${s}).`,r=`If you were planning to perform multiplication by ${t}, you need to use the * operator.`;return Number.isFinite(e)?`${i} ${r}`:i}}t.CallingNonFunctionValue=l;class d extends r.RuntimeSourceError{constructor(e,t){super(t),this.name=e}explain(){return`Name ${this.name} not declared.`}elaborate(){return`Before you can read the value of ${this.name}, you need to declare it as a variable or a constant. You can do this using the let or const keywords.`}}t.UndefinedVariable=d;class u extends r.RuntimeSourceError{constructor(e,t){super(t),this.name=e}explain(){return`Name ${this.name} declared later in current scope but not yet assigned`}elaborate(){return`If you're trying to access the value of ${this.name} from an outer scope, please rename the inner ${this.name}. An easy way to avoid this issue in future would be to avoid declaring any variables or constants with the name ${this.name} in the same scope.`}}t.UnassignedVariable=u;class h extends r.RuntimeSourceError{constructor(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(e),this.expected=t,this.got=s,this.hasVarArgs=i,this.calleeStr=(0,n.generate)(e.callee)}explain(){return`Expected ${this.expected} ${this.hasVarArgs?"or more ":""}arguments, but got ${this.got}.`}elaborate(){const e=this.calleeStr,t=1===this.expected?"":"s";return`Try calling function ${e} again, but with ${this.expected} argument${t} instead. Remember that arguments are separated by a ',' (comma).`}}t.InvalidNumberOfArguments=h;class p extends r.RuntimeSourceError{constructor(e,t,s){super(e),this.node=e,this.name=t,this.writable=s}explain(){return`Redeclaring name ${this.name}.`}elaborate(){if(!0===this.writable){const e=`Since ${this.name} has already been declared, you can assign a value to it without re-declaring.`;let t="";return"FunctionDeclaration"===this.node.type?t="("+this.node.params.map(n.generate).join(",")+") => {...":"VariableDeclaration"===this.node.type&&(t=(0,n.generate)(this.node.declarations[0].init)),`${e} As such, you can just do\n\n\t${this.name} = ${t};\n`}return!1===this.writable?`You will need to declare another variable, as ${this.name} is read-only.`:""}}t.VariableRedeclaration=p;class g extends r.RuntimeSourceError{constructor(e,t){super(e),this.name=t}explain(){return`Cannot assign new value to constant ${this.name}.`}elaborate(){return`As ${this.name} was declared as a constant, its value cannot be changed. You will have to declare a new variable.`}}t.ConstAssignment=g;class m extends r.RuntimeSourceError{constructor(e,t,s){super(e),this.obj=t,this.prop=s}explain(){return`Cannot read property ${this.prop} of ${(0,a.stringify)(this.obj)}.`}elaborate(){return"TODO"}}t.GetPropertyError=m;class b extends r.RuntimeSourceError{constructor(e,t,s){super(e),this.obj=t,this.prop=s,this.type=i.ErrorType.RUNTIME,this.severity=i.ErrorSeverity.ERROR,this.location=e.loc}explain(){return`Cannot read inherited property ${this.prop} of ${(0,a.stringify)(this.obj)}.`}elaborate(){return"TODO"}}t.GetInheritedPropertyError=b;class f extends r.RuntimeSourceError{constructor(e,t,s){super(e),this.obj=t,this.prop=s}explain(){return`Cannot assign property ${this.prop} of ${(0,a.stringify)(this.obj)}.`}elaborate(){return"TODO"}}t.SetPropertyError=f},158:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));const n="FETCH_GROUP_GRADING_SUMMARY",i="UPDATE_GROUP_GRADING_SUMMARY"},16:function(e,t,s){"use strict";s.d(t,"a",(function(){return L}));var n=s(28),i=s(65),a=s.n(i);function r(e,t){return"undefined"===typeof e&&"undefined"!==typeof t?t:"string"===typeof e&&"TRUE"===e.toUpperCase()}const o=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_VERSION||"local",c=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_ENVIRONMENT||"dev",l=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_DEPLOYMENT_NAME||"Source Academy",d=r(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_SHOW_RESEARCH_PROMPT),u=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_BACKEND_URL,h=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_CADET_LOGGER,p=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_CADET_LOGGER_INTERVAL||"10000",10),g=r(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_USE_BACKEND),m=n.Chapter.CLANG,b=n.Variant.DEFAULT,f=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_URL_SHORTENER_BASE,v=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_URL_SHORTENER_SIGNATURE,y=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_MODULE_BACKEND_URL||"modules",x=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_SHAREDB_BACKEND_URL||"",j=r(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_PLAYGROUND_ONLY,!0),O=r(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_ENABLE_GITHUB_ASSESSMENTS),C=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_SENTRY_DSN,S=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_GOOGLE_CLIENT_ID,E=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_GOOGLE_API_KEY,w=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_GOOGLE_APP_ID,_=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_GITHUB_CLIENT_ID||"",A=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_GITHUB_OAUTH_PROXY_URL||"",k=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_SICPJS_BACKEND_URL||"https://sicp.sourceacademy.org/",T=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0}).REACT_APP_CA_FULFILLMENT_LEVEL||"0"),R=new Map;for(let N=1;;++N){const e=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_OAUTH2_PROVIDER${N}`];if(!e)break;const t=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_OAUTH2_PROVIDER${N}_NAME`]||"Unnamed provider",s=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_OAUTH2_PROVIDER${N}_ENDPOINT`]||"";R.set(e,{name:t,endpoint:s,isDefault:1===N})}const I=[];for(let N=1;;++N){const e=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_DISABLE${N}_START`],t=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_DISABLE${N}_END`];if(!e||!t)break;const s=Object({NODE_ENV:"production",PUBLIC_URL:"/CS4215-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SW_EXCLUDE_REGEXES:void 0})[`REACT_APP_DISABLE${N}_REASON`],n=a()(e),i=a()(t);i.isBefore(n)||a()().isAfter(i)||I.push({start:n,end:i,reason:s})}let L;!function(e){e.githubIssues="https://github.com/source-academy/frontend/issues",e.githubOrg="https://github.com/source-academy",e.about="https://about.sourceacademy.org",e.moduleDetails="https://www.comp.nus.edu.sg/~cs1101s",e.luminus="https://luminus.nus.edu.sg/modules/41d42e9a-5880-43b5-8ee6-75f5a41355e3/announcements/active",e.piazza="https://piazza.com/class/kas136yscf8605",e.resourcesForEducators="https://about.sourceacademy.org/educator/README.html",e.resourcesForLearners="https://about.sourceacademy.org/learner/README.html",e.sourceAcademyAssets="https://source-academy-assets.s3-ap-southeast-1.amazonaws.com/",e.sourceDocs="https://docs.sourceacademy.org/",e.techSVC="mailto:techsvc@comp.nus.edu.sg",e.techSVCNumber="6516 2736",e.textbook="https://sourceacademy.org/sicpjs/",e.playground="https://sourceacademy.org/playground",e.textbookChapter2_2="https://sourceacademy.org/sicpjs/2.2",e.textbookChapter3_2="https://sourceacademy.org/sicpjs/3.2",e.aceHotkeys="https://github.com/ajaxorg/ace/wiki/Default-Keyboard-Shortcuts",e.sourceHotkeys="https://github.com/source-academy/frontend/wiki/Source-Academy-Keyboard-Shortcuts",e.source_1="https://docs.sourceacademy.org/source_1/",e.source_1_Lazy="https://docs.sourceacademy.org/source_1_lazy/",e.source_1_Wasm="https://docs.sourceacademy.org/source_1_wasm/",e.source_2="https://docs.sourceacademy.org/source_2/",e.source_2_Lazy="https://docs.sourceacademy.org/source_2_lazy/",e.source_3="https://docs.sourceacademy.org/source_3/",e.source_3_Concurrent="https://docs.sourceacademy.org/source_3_concurrent/",e.source_3_Nondet="https://docs.sourceacademy.org/source_3_non-det/",e.source_4="https://docs.sourceacademy.org/source_4/",e.source_4_Gpu="https://docs.sourceacademy.org/source_4_gpu/",e.ecmaScript_2021="https://262.ecma-international.org/12.0/"}(L||(L={}));const P={sourceAcademyVersion:o,sourceAcademyEnvironment:c,sourceAcademyDeploymentName:l,showResearchPrompt:d,backendUrl:u,cadetLoggerUrl:h,useBackend:g,defaultSourceChapter:m,defaultSourceVariant:b,defaultQuestionId:0,maxBrowseIndex:50,mobileBreakpoint:768,urlShortenerBase:f,urlShortenerSignature:v,moduleBackendUrl:y,authProviders:R,playgroundOnly:j,enableGitHubAssessments:O,sentryDsn:C,googleClientId:S,googleApiKey:E,googleAppId:w,githubClientId:_,githubOAuthProxyUrl:A,sharedbBackendUrl:x,disablePeriods:I,cadetLoggerInterval:p,sicpBackendUrl:k,workspaceSettingsLocalStorageKey:"workspace-settings",caFulfillmentLevel:T};t.b=P},169:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(122),i=(s(1),s(12)),a=s(0);const r=e=>e.questionProgress[0]<=1?null:Object(a.jsx)(i.a,{label:"Previous",icon:n.a.ARROW_LEFT,onClick:e.onClick})},170:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s(1);var n=s(12),i=s(0);const a=e=>{let{questionProgress:t}=e;return Object(i.jsx)(n.a,{label:`Question ${t[0]} of ${t[1]}  `,isDisabled:!0})}},171:function(e,t,s){"use strict";var n=s(33),i=s(306),a=s(26),r=s(10),o=s(75);class c{constructor(e){this.achievement=void 0,this.displayDeadline=void 0,this.xp=void 0,this.progressFrac=void 0,this.status=void 0,this.children=void 0,this.descendant=void 0,this.parents=void 0;const{deadline:t,prerequisiteUuids:s}=e;this.achievement=e,this.displayDeadline=t,this.xp=0,this.progressFrac=0,this.status=a.b.ACTIVE,this.children=new Set(s),this.descendant=new Set(s),this.parents=new Set}}t.a=class{constructor(e,t){this.nodeList=new Map,this.goalList=new Map,this.textToUuid=new Map,this.titleToUuid=new Map,this.achievementsToDelete=[],this.goalsToDelete=[],this.invalidGoal={uuid:"invalid",text:"invalid",achievementUuids:[],meta:{type:a.l.MANUAL,targetCount:0},count:0,targetCount:0,completed:!1},this.invalidAchievement={uuid:"invalid",title:"invalid",xp:0,isVariableXp:!1,deadline:void 0,release:void 0,isTask:!1,position:0,prerequisiteUuids:[],goalUuids:[],cardBackground:"invalid",view:{coverImage:"invalid",description:"invalid",completionText:"invalid"}},this.nodeList=this.constructNodeList(e),this.goalList=this.constructGoalList(t),this.processNodes(),this.processGoals()}getAllAchievements(){return[...this.nodeList.values()].map((e=>e.achievement))}getAllReleasedAchievements(){return[...this.nodeList.values()].filter((e=>e.status!==a.b.UNRELEASED)).map((e=>e.achievement))}getAllCompletedAchievements(){return[...this.nodeList.values()].filter((e=>e.status===a.b.COMPLETED)).map((e=>e.achievement))}getAllAchievementUuids(){return[...this.nodeList.keys()]}getAllGoals(){return[...this.goalList.values()]}getAllGoalUuids(){return[...this.goalList.keys()]}hasAchievement(e){return this.nodeList.has(e)}isPrerequisite(e){const t=this.nodeList.get(e);return!!t&&t.parents.size>0}getAchievement(e){const t=this.nodeList.get(e);return t?t.achievement:this.invalidAchievement}hasGoal(e){return this.goalList.has(e)}getGoal(e){return this.goalList.get(e)||this.invalidGoal}getGoalDefinition(e){return this.getGoal(e)}getGoalProgress(e){return this.getGoal(e)}getAchievementPositionByUuid(e){return this.getAchievement(e).position}getAchievementsToDelete(){return this.achievementsToDelete}getGoalsToDelete(){return this.goalsToDelete}resetToDelete(){this.achievementsToDelete=[],this.goalsToDelete=[]}getAchievementsByGoal(e){return this.getGoal(e).achievementUuids}listSortedAchievementUuids(){return this.getAllAchievements().sort(((e,t)=>e.position-t.position)).map((e=>e.uuid))}isInvalidGoal(e){return e===this.invalidGoal}isInvalidAchievement(e){return e===this.invalidAchievement}insertAchievement(e){let t=Object(i.a)();for(;this.nodeList.has(t);)t=Object(i.a)();return e.uuid=t,this.nodeList.set(t,new c(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position),t}insertFakeAchievement(e){return this.nodeList.set(e.uuid,new c(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position),e.uuid}insertGoalDefinition(e){let t=Object(i.a)();for(;this.goalList.has(t);)t=Object(i.a)();return e.uuid=t,this.goalList.set(t,{...e,...a.v}),this.processGoals(),t}insertFakeGoalDefinition(e,t){return t?this.goalList.set(e.uuid,{...e,count:1,targetCount:1,completed:!0}):this.goalList.set(e.uuid,{...e,count:0,targetCount:1,completed:!1}),this.processGoals(),e.uuid}modifyAchievement(e){this.nodeList.set(e.uuid,new c(e)),this.processNodes(),this.normalizePositions(e.uuid,e.position)}modifyGoalDefinition(e){this.goalList.set(e.uuid,{...e,...a.v}),this.processNodes(),this.processGoals()}modifyGoalProgress(e){const t=this.getGoal(e.uuid);if(this.isInvalidGoal(t))return;this.goalList.set(e.uuid,{...t,...e});const s=t.achievementUuids;for(const n in s){const e=this.nodeList.get(n);e&&(this.generateXp(e),this.generateProgressFrac(e),this.generateStatus(e))}}removeAchievement(e){this.nodeList.delete(e),this.nodeList.forEach(((t,s)=>{(t=>t.children.has(e))(t)&&this.nodeList.set(s,(t=>{const s=t.achievement.prerequisiteUuids.filter((t=>t!==e));return t.achievement.prerequisiteUuids=s,new c(t.achievement)})(t))})),this.achievementsToDelete.push(e),this.processNodes(),this.normalizePositions()}removeGoalDefinition(e){const t=t=>{const s=(t=>t.achievement.goalUuids.findIndex((t=>t===e)))(t);-1!==s&&t.achievement.goalUuids.splice(s,1)};this.goalList.delete(e),this.nodeList.forEach((e=>t(e))),this.goalsToDelete.push(e),this.processNodes(),this.processGoals()}listTaskUuids(){return this.getAllAchievements().filter((e=>e.isTask||this.isCompleted(e))).map((e=>e.uuid))}listSortedTaskUuids(){return this.getAllAchievements().filter((e=>e.isTask||this.isCompleted(e))).sort(((e,t)=>e.position-t.position)).map((e=>e.uuid))}listSortedReleasedTaskUuids(){return this.getAllReleasedAchievements().filter((e=>e.isTask||this.isCompleted(e))).sort(((e,t)=>e.position-t.position)).map((e=>e.uuid))}listAllSortedAchievementUuids(){return this.getAllAchievements().sort(((e,t)=>e.position-t.position)).map((e=>e.uuid))}isCompleted(e){const t=e.goalUuids.length,s=e.prerequisiteUuids.length;if(0===t&&0===s)return!1;for(let n=0;n<t;n++)if(!this.getGoal(e.goalUuids[n]).completed)return!1;for(let n=0;n<s;n++)if(!this.isCompleted(this.getAchievement(e.prerequisiteUuids[n])))return!1;return!0}listGoals(e){const{goalUuids:t}=this.getAchievement(e);return t.map((e=>this.getGoal(e)))}listPrerequisiteGoals(e){const t=[];for(const s of this.getImmediateChildren(e)){const{goalUuids:e}=this.getAchievement(s);e.forEach((e=>t.push(e)))}return t.map((e=>this.getGoal(e)))}getUuidByText(e){return this.textToUuid.get(e)}getTextByUuid(e){return this.getGoal(e).text}getUuidByTitle(e){return this.titleToUuid.get(e)}getTitleByUuid(e){return this.getAchievement(e).title}getAchievementXp(e){const t=this.getAchievement(e);return t.isVariableXp?this.listGoals(t.uuid).reduce(((e,t)=>e+t.count),0):t.xp}getTotalXp(){return this.getAllCompletedAchievements().reduce(((e,t)=>e+this.getAchievementXp(t.uuid)),0)}getProgressFrac(e){return this.nodeList.has(e)?this.nodeList.get(e).progressFrac:0}getStatus(e){return this.nodeList.has(e)?this.nodeList.get(e).status:a.b.ACTIVE}getDisplayDeadline(e){return this.nodeList.has(e)?this.nodeList.get(e).displayDeadline:void 0}isImmediateChild(e,t){return!!this.nodeList.has(e)&&this.nodeList.get(e).children.has(t)}getImmediateChildren(e){return this.nodeList.has(e)?this.nodeList.get(e).children:new Set}isDescendant(e,t){return!!this.nodeList.has(e)&&this.nodeList.get(e).descendant.has(t)}getDescendants(e){return this.nodeList.has(e)?this.nodeList.get(e).descendant:new Set}getDescendantXp(e){let t=this.getAchievementXp(e);return this.getDescendants(e).forEach((e=>{this.isCompleted(this.getAchievement(e))&&(t+=this.getAchievementXp(e))})),t}listAvailablePrerequisiteUuids(e){return this.getAllAchievementUuids().filter((t=>t!==e&&!this.isDescendant(e,t)&&!this.isDescendant(t,e)))}processNodes(){this.titleToUuid=new Map,this.nodeList.forEach((e=>{const{title:t,uuid:s}=e.achievement;this.titleToUuid.set(t,s),e.achievement.prerequisiteUuids=Object(n.uniq)(e.achievement.prerequisiteUuids),e.achievement.goalUuids=Object(n.uniq)(e.achievement.goalUuids),this.generateParentReference(e),this.generateDescendant(e),this.generateDisplayDeadline(e),this.generateXp(e),this.generateProgressFrac(e),this.generateStatus(e)}))}processGoals(){this.textToUuid=new Map,this.goalList.forEach((e=>{const{text:t,uuid:s}=e;this.textToUuid.set(t,s),e.achievementUuids=Object(n.uniq)(e.achievementUuids)}))}constructNodeList(e){const t=new Map;return e.forEach((e=>t.set(e.uuid,new c(Object(n.cloneDeep)(e))))),t}constructGoalList(e){const t=new Map;return e.forEach((e=>t.set(e.uuid,Object(n.cloneDeep)(e)))),t}generateParentReference(e){for(const s of e.children){var t;null===(t=this.nodeList.get(s))||void 0===t||t.parents.add(e.achievement.uuid)}}generateDescendant(e){for(const t of e.descendant){if(t===e.achievement.uuid){const{title:t}=e.achievement;Object(r.b)(`Circular dependency detected in achievement ${t}`,3e4)}for(const s of this.getDescendants(t))e.descendant.add(s)}}generateDisplayDeadline(e){const t=[];for(const s of e.descendant){const e=this.getAchievement(s).deadline;t.push(e)}e.displayDeadline=t.reduce(((e,t)=>void 0===t||Object(o.a)(t)?e:void 0===e||Object(o.a)(e)||t<e?t:e),e.displayDeadline)}generateXp(e){const{goalUuids:t,isVariableXp:s}=e.achievement,n=t.reduce(((e,t)=>e&&this.getGoal(t).completed),!0);e.xp=n?s?t.reduce(((e,t)=>e+this.getGoal(t).count),0):e.achievement.xp:0}generateProgressFrac(e){const{goalUuids:t}=e.achievement;if(0===t.length)e.progressFrac=0;else{const s=t.reduce(((e,t)=>e+this.getGoal(t).count),0),n=t.reduce(((e,t)=>e+this.getGoal(t).targetCount),0);e.progressFrac=Math.min(0===n?0:s/n,1)}}generateStatus(e){const t=this.isCompleted(e.achievement),s=Object(o.b)(e.achievement.release),n=!Object(o.a)(e.displayDeadline);e.status=t?a.b.COMPLETED:s?n?a.b.ACTIVE:a.b.EXPIRED:a.b.UNRELEASED}normalizePositions(e,t){let s=1;if(this.getAllAchievements().filter((e=>e.isTask)).filter((e=>e.position>=0)).sort(((e,t)=>e.position-t.position)).forEach((e=>e.position=s++)),this.getAllAchievements().filter((e=>!e.isTask)).forEach((e=>e.position=0)),e&&t&&0!==t){const s=this.getAchievement(e),n=s.position;if(n!==t){const e=this.getAllAchievements().find((e=>e.position===t));e&&(e.position=n,s.position=t)}}}}},172:function(e,t,s){"use strict";var n=s(1317),i=s(122),a=s(1),r=s.n(a),o=s(208),c=s(25),l=s(289),d=s(97),u=s(290),h=s(24),p=s(291),g=s.n(p),m=s(301),b=s(0);var f=e=>Object(b.jsx)(g.a,{axis:"y",handle:"#dragHandle",position:e.position,bounds:{top:-500,left:0,right:0,bottom:0},onDrag:e.onDrag,disabled:e.disabled,children:Object(b.jsxs)("div",{className:"mobile-draggable",children:[e.disabled?Object(b.jsx)("div",{className:"handle disabled",id:"draghandle",children:["1","2","3"].map((e=>Object(b.jsx)("div",{className:"circle"},e)))}):Object(b.jsx)("div",{className:"handle enabled",id:"dragHandle",children:["1","2","3"].map((e=>Object(b.jsx)("div",{className:"circle"},e)))}),Object(b.jsx)("div",{className:"REPL-content",children:Object(b.jsx)(m.a,{...e.replProps})})]})}),v=s(516),y=s.n(v);var x=e=>{const[t,s]=r.a.useState(!1),[n,i]=r.a.useState("\u1438"),[a,o]=r.a.useState({x:0,y:0}),[c,l]=r.a.useState(1),d=e=>{e.preventDefault()},u={onKeyPress:t=>{if(!e.targetKeyboardInput)return;const s=e.targetKeyboardInput;"{arrowleft}"===t?s.navigateLeft():"{arrowright}"===t?s.navigateRight():"{bksp}"===t?s.remove("left"):"{tab}"===t?s.insert("\t"):["+","-","*","/","%","=>","===","&&","||"].includes(t)?s.insert(" "+t+" "):s.insert(t)},baseClass:"simple-keyboard-shortcut",layout:{default:["{ } ( ) \" ' _ => ;","{tab} && || ! < > = ===","+ - * / % // {arrowleft} {arrowright}"]},buttonTheme:[{class:"mobile-navigation",buttons:"{arrowleft} {arrowright}"},{class:"big-buttons",buttons:"=== &&"}],theme:"hg-theme-default",preventMouseDownDefault:!0,disableCaretPositioning:!1};return Object(b.jsx)(g.a,{axis:"y",handle:"#floating-dragHandle",position:a,bounds:{top:-200,left:0,right:0,bottom:200},onDrag:(e,t)=>{o(t)},children:Object(b.jsxs)("div",{className:"mobile-floating-keyboard",id:"mobile-floating-toggle",children:[Object(b.jsx)("button",{className:"mobile-floating-toggle",onClick:e=>{t?(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","none"),document.getElementById("mobile-floating-toggle").style.setProperty("width","42px"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","0.6"),i("\u1438"),s(!1)):(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","flex"),document.getElementById("mobile-floating-toggle").style.setProperty("width","99%"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","1"),i("\u1433"),s(!0))},onMouseDown:d,children:n}),Object(b.jsxs)("div",{className:"mobile-keyboard-toggle-container",id:"mobile-keyboard-toggle",children:[Object(b.jsx)("div",{className:"mobile-keyboard-container",children:Object(b.jsx)(y.a,{...u})}),Object(b.jsx)("button",{className:"mobile-keyboard-row-toggle",onClick:e=>{l((c+1)%3);const t=document.getElementsByClassName("simple-keyboard-shortcut");Array.from(t)[0].style.top=45*-c+"px"},onMouseDown:d,children:"\u2938"})]}),Object(b.jsx)("div",{id:"floating-dragHandle",children:":"})]})})},j=s(42),O=s(3),C=s(304),S=s(20),E=s.n(S),w=s(189),_=s(292),A=s(380);var k=e=>{const t=Object(b.jsxs)("div",{className:"mobile-control-bar",children:[e.editorButtons,e.flowButtons,e.editingWorkspaceButtons]});return Object(b.jsx)(A.a,{content:t,autoFocus:!1,children:Object(b.jsx)(j.b,{icon:i.a.COG,className:E()(O.a.MINIMAL,"mobile-control-bar-button")})})};var T=r.a.memo((e=>{let{selectedTabId:t,renderActiveTabPanelOnly:s,mobileControlBarProps:n,...i}=e;const a=/iPhone|iPod/.test(navigator.platform),r=e=>e.map((e=>((e,s)=>{if(!e.body)return;const n=s?{...e.body,props:{...e.body.props,workspaceLocation:s}}:e.body;return Object(b.jsx)("div",{className:e.id===t?"mobile-selected-panel":"mobile-unselected-panel",children:n},e.id)})(e,i.workspaceLocation)));return Object(b.jsx)(w.a,{...i,renderFunction:(e,o)=>Object(b.jsxs)(b.Fragment,{children:[r(e),Object(b.jsx)("div",{className:"mobile-tabs-container",children:Object(b.jsxs)(j.V,{id:"mobile-side-content",onChange:o,renderActiveTabPanelOnly:s,selectedTabId:t,className:E()(O.a.DARK,"mobile-side-content"),children:[e.map((e=>((e,t,s)=>{const n=void 0===e.id?e.label:e.id,i=Object(b.jsx)(C.a,{content:e.label,onOpening:()=>{var e;t&&(null===(e=document.getElementById(Object(w.b)(n)))||void 0===e||e.click())},children:Object(b.jsx)("div",{className:"side-content-tooltip",id:Object(w.b)(n),children:Object(b.jsx)(j.w,{icon:e.iconName,iconSize:20})})});return Object(b.jsx)(j.U,{id:n,title:i,disabled:e.disabled,className:"side-content-tab"},n)})(e,a,i.workspaceLocation))),("playground"===i.workspaceLocation||"sicp"===i.workspaceLocation)&&Object(b.jsx)(k,{...n})]})})]})})}),_.a);t.a=e=>{const t=/Android/.test(navigator.userAgent),s=Object(o.useMediaQuery)({orientation:"portrait"}),[a,p]=r.a.useState({x:0,y:0}),[g,m]=r.a.useState(!1);n.a.onlyShowFocusOnTabs(),r.a.useEffect((()=>("assessment"===e.mobileSideContentProps.workspaceLocation&&document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 100px - 1.1rem)"),()=>{document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 70px)")})),[]),r.a.useEffect((()=>{if(s&&t){document.documentElement.style.setProperty("overflow","auto");document.querySelector("meta[name=viewport]").setAttribute("content","height="+window.innerHeight+", width=device-width")}return()=>{if(t){document.documentElement.style.setProperty("overflow","hidden");document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}S()}}),[s,t]);const[v,y]=r.a.useState(null),j=()=>y(null),O=e=>({...e,onFocus:(t,s)=>{e.onFocus&&e.onFocus(t,s),s&&y(s)},onBlur:(t,s)=>{e.onBlur&&e.onBlur(t,s),j()}}),C=e=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-e,0)+"px"),p({x:0,y:e})},S=()=>{p({x:0,y:0}),document.documentElement.style.setProperty("--mobile-repl-height","0px")},E=e.sideBarProps.tabs.filter((e=>void 0!==e.id)),w=r.a.useMemo((()=>({label:"Editor",iconName:i.a.EDIT,body:null,id:h.b.mobileEditor})),[]),_=r.a.useMemo((()=>({label:"Run",iconName:i.a.PLAY,body:null,id:h.b.mobileEditorRun})),[]),A="assessment"===e.mobileSideContentProps.workspaceLocation||"githubAssessment"===e.mobileSideContentProps.workspaceLocation;return Object(b.jsxs)("div",{className:"workspace mobile-workspace",children:[e.hasUnsavedChanges?Object(b.jsx)(c.a,{message:"You have changes that may not be saved. Are you sure you want to leave?"}):null,A&&Object(b.jsx)(l.a,{...e.mobileSideContentProps.mobileControlBarProps}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"mobile-editor-panel",children:(()=>{if(e.editorContainerProps){const t={...e.editorContainerProps};return"sourcecast"===t.editorVariant&&(t.setDraggableReplPosition=()=>C(-100)),Object(b.jsx)(d.b,{...O(e.editorContainerProps)})}return Object(b.jsx)(u.a,{...e.mcqProps})})()}),Object(b.jsx)(T,{...{...e.mobileSideContentProps,onChange:(t,s,n)=>{e.mobileSideContentProps.onChange(t,s,n),((t,s)=>{var n;t===h.b.mobileEditorRun&&(null===(n=e.editorContainerProps)||void 0===n||n.handleEditorEval()),t===h.b.mobileEditorRun&&s!==h.b.substVisualizer&&s!==h.b.autograder&&s!==h.b.testcases?C(-300):S(),t===h.b.files||t===h.b.substVisualizer||s===h.b.substVisualizer&&t===h.b.mobileEditorRun?m(!0):m(!1)})(t,s)},tabs:{beforeDynamicTabs:[...E,w,...e.mobileSideContentProps.tabs.beforeDynamicTabs],afterDynamicTabs:[...e.mobileSideContentProps.tabs.afterDynamicTabs,_]}}})]}),Object(b.jsx)(f,{position:a,onDrag:(e,t)=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-t.y,0)+"px"),p(t)},disabled:g,replProps:(e=>({...e,onFocus:t=>{e.onFocus&&e.onFocus(t),y(t)},onBlur:()=>{e.onBlur&&e.onBlur(),j()}}))(e.replProps)},"repl"),Object(b.jsx)(x,{targetKeyboardInput:v})]})}},173:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(122),i=(s(1),s(12)),a=s(0);const r=e=>{let{onClick:t}=e;return Object(a.jsx)(i.a,{label:"Return to Academy",icon:n.a.ARROW_RIGHT,onClick:t,options:{iconOnRight:!0}})},o=e=>e.questionProgress[0]===e.questionProgress[1]?Object(a.jsx)(r,{onClick:e.onClickReturn},"return_to_academy"):Object(a.jsx)(i.a,{label:"Next",icon:n.a.ARROW_RIGHT,onClick:e.onClickNext,options:{iconOnRight:!0}})},174:function(e,t,s){"use strict";s.d(t,"a",(function(){return Ie}));var n=s(42),i=s(1),a=s.n(i),r=s(14);class o{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._isDrawn=!1,this.ref=a.a.createRef()}x(){return this._x}y(){return this._y}width(){return this._width}height(){return this._height}isDrawn(){return this._isDrawn}reset(){this._isDrawn=!1}}let c;!function(e){e[e.CanvasMinHeight=300]="CanvasMinHeight",e[e.CanvasMinWidth=300]="CanvasMinWidth",e[e.CanvasPaddingX=30]="CanvasPaddingX",e[e.CanvasPaddingY=30]="CanvasPaddingY",e[e.LevelPaddingX=10]="LevelPaddingX",e[e.LevelPaddingY=10]="LevelPaddingY",e[e.FrameMinWidth=100]="FrameMinWidth",e[e.FramePaddingX=20]="FramePaddingX",e[e.FramePaddingY=30]="FramePaddingY",e[e.FrameMarginX=30]="FrameMarginX",e[e.FrameMarginY=10]="FrameMarginY",e[e.FrameCornerRadius=3]="FrameCornerRadius",e[e.FnRadius=15]="FnRadius",e[e.FnInnerRadius=3]="FnInnerRadius",e[e.FnTooltipOpacity=.3]="FnTooltipOpacity",e[e.DataMinWidth=20]="DataMinWidth",e[e.DataUnitWidth=40]="DataUnitWidth",e[e.DataUnitHeight=40]="DataUnitHeight",e[e.DataCornerRadius=3]="DataCornerRadius",e[e.DataHitStrokeWidth=5]="DataHitStrokeWidth",e[e.TextPaddingX=10]="TextPaddingX",e[e.TextPaddingY=30]="TextPaddingY",e[e.TextMargin=5]="TextMargin",e[e.TextMinWidth=30]="TextMinWidth",e.FontFamily="monospace, monospace",e[e.FontSize=15]="FontSize",e.FontStyle="normal",e.FontVariant="normal",e.HoveredColor="#32CD32",e[e.ArrowHeadSize=10]="ArrowHeadSize",e[e.ArrowStrokeWidth=1]="ArrowStrokeWidth",e[e.ArrowHitStrokeWidth=5]="ArrowHitStrokeWidth",e[e.ArrowHoveredStrokeWidth=2]="ArrowHoveredStrokeWidth",e[e.ArrowCornerRadius=40]="ArrowCornerRadius",e.SA_WHITE="#999999",e.SA_BLUE="#2c3e50",e.PRINT_BACKGROUND="white",e.ConstantColon=":= ",e.VariableColon=": ",e.Ellipsis="\u2026",e.UnassignedData="",e.GlobalFrameDefaultText=":::pre-declared names::",e.GlobalEnvId="-1"}(c||(c={}));const l={preventDefault:!1};var d=s(149),u=s(33);let h;!function(e){e[e.CanvasMinHeight=300]="CanvasMinHeight",e[e.CanvasMinWidth=300]="CanvasMinWidth",e[e.CanvasPaddingX=30]="CanvasPaddingX",e[e.CanvasPaddingY=30]="CanvasPaddingY",e[e.LevelPaddingX=10]="LevelPaddingX",e[e.LevelPaddingY=10]="LevelPaddingY",e[e.FrameMinWidth=100]="FrameMinWidth",e[e.FramePaddingX=20]="FramePaddingX",e[e.FramePaddingY=30]="FramePaddingY",e[e.FrameMarginX=60]="FrameMarginX",e[e.FrameMarginY=100]="FrameMarginY",e[e.FrameCornerRadius=3]="FrameCornerRadius",e[e.FnRadius=15]="FnRadius",e[e.FnInnerRadius=3]="FnInnerRadius",e[e.FnTooltipOpacity=.6]="FnTooltipOpacity",e[e.DataMinWidth=20]="DataMinWidth",e[e.DataUnitWidth=40]="DataUnitWidth",e[e.DataUnitPaddingY=40]="DataUnitPaddingY",e[e.DataUnitPaddingX=50]="DataUnitPaddingX",e[e.DataUnitHeight=40]="DataUnitHeight",e[e.DataCornerRadius=3]="DataCornerRadius",e[e.DataHitStrokeWidth=5]="DataHitStrokeWidth",e[e.DataGroupMaxDist=500]="DataGroupMaxDist",e[e.TextPaddingX=10]="TextPaddingX",e[e.TextPaddingY=20]="TextPaddingY",e[e.TextMargin=5]="TextMargin",e[e.TextMinWidth=30]="TextMinWidth",e.FontFamily="monospace, monospace",e[e.FontSize=15]="FontSize",e.FontStyle="normal",e.FontVariant="normal",e.HoveredColor="#32CD32",e[e.ArrowHeadSize=10]="ArrowHeadSize",e[e.ArrowStrokeWidth=1]="ArrowStrokeWidth",e[e.ArrowHitStrokeWidth=5]="ArrowHitStrokeWidth",e[e.ArrowHoveredStrokeWidth=2]="ArrowHoveredStrokeWidth",e[e.ArrowUnhoveredOpacity=.8]="ArrowUnhoveredOpacity",e[e.ArrowCornerRadius=10]="ArrowCornerRadius",e[e.ArrowMinHeight=100]="ArrowMinHeight",e[e.ArrowNumLanes=5]="ArrowNumLanes",e[e.ArrowLaneInterval=1]="ArrowLaneInterval",e[e.FrameArrowStrokeWidth=2]="FrameArrowStrokeWidth",e[e.FrameArrowHoveredStrokeWidth=2.5]="FrameArrowHoveredStrokeWidth",e[e.MaxExportWidth=2e4]="MaxExportWidth",e[e.MaxExportHeight=12e3]="MaxExportHeight",e.SA_WHITE="#999999",e.SA_BLUE="#2c3e50",e.PRINT_BACKGROUND="white",e.ConstantColon=":= ",e.VariableColon=": ",e.Ellipsis="\u2026",e.UnassignedData="",e.GlobalFrameDefaultText=":::pre-declared names::",e.GlobalEnvId="-1"}(h||(h={}));const p={preventDefault:!1};var g=s(0);const m={maxWidth:Number.MAX_VALUE,fontFamily:h.FontFamily.toString(),fontSize:Number(h.FontSize),fontStyle:h.FontStyle.toString(),fontVariant:h.FontVariant.toString(),isStringIdentifiable:!1};class b extends o{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;super(),this.data=e,this._hoveredWidth=void 0,this.partialStr=void 0,this.fullStr=void 0,this.options=m,this.frame=void 0,this.updatePosition=(e,t)=>{this._x=e,this._y=t},this.onMouseEnter=e=>{var t;let{currentTarget:s}=e;Ie.getPrintableMode()||(ne(s),this.ref.current.moveToTop(),this.ref.current.show(),null===(t=s.getLayer())||void 0===t||t.draw())},this.onMouseLeave=e=>{var t;let{currentTarget:s}=e;Ie.getPrintableMode()||(ie(s),this.ref.current.hide(),null===(t=s.getLayer())||void 0===t||t.draw())},this._x=t,this._y=s,this.frame=i,this.options={...this.options,...n};const{fontSize:a,fontStyle:r,fontFamily:o,maxWidth:c,isStringIdentifiable:l}=this.options;this.fullStr=this.partialStr=l&&JSON.stringify(e)||String(e),this._height=a;const d=e=>ee(e,`${r} ${a}px ${o}`);if(this._hoveredWidth=d(this.partialStr),this._hoveredWidth>c){let e=h.Ellipsis.toString(),t=0;for(;d(this.partialStr.substring(0,t)+h.Ellipsis.toString())<c;)e=this.partialStr.substring(0,t++)+h.Ellipsis.toString();this._width=d(e),this.partialStr=e}else this._width=Math.max(h.TextMinWidth,d(this.partialStr))}hoveredWidth(){return this._hoveredWidth}draw(){const e={fontFamily:this.options.fontFamily,fontSize:this.options.fontSize,fontStyle:this.options.fontStyle,fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()};return Object(g.jsxs)(r.c,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(g.jsx)(r.d,{x:this.x(),y:this.y(),children:Object(i.createElement)(r.l,{...p,key:Re.key++,text:this.partialStr,...e})}),Object(g.jsxs)(r.d,{x:this.x(),y:this.y(),ref:this.ref,visible:!1,listening:!1,children:[Object(g.jsx)(r.k,{...p,fill:Ie.getPrintableMode()?"white":"black",opacity:.5,listening:!1}),Object(i.createElement)(r.l,{...p,key:Re.key++,text:this.fullStr,...e,listening:!1})]})]},Re.key++)}}class f extends o{constructor(e){super(),this.points=[],this.source=void 0,this.target=void 0,this._path="",this.selected=!1,this.unhovered_opacity=h.ArrowUnhoveredOpacity,this.hovered_opacity=1,this.source=e,this._x=e.x(),this._y=e.y()}path(){return this._path}to(e){return this.target=e,this._width=Math.abs(e.x()-this.source.x()),this._height=Math.abs(e.y()-this.source.y()),this}isSelected(){return this.selected}calculateSteps(){const e=this.target;return e?[()=>[e.x(),e.y()]]:[]}getStrokeWidth(){return Number(h.ArrowStrokeWidth)}onMouseEnter(e){ne(e.target),ae(e.currentTarget,{strokeWidth:Number(h.ArrowHoveredStrokeWidth)}),this.ref.current.opacity=this.unhovered_opacity}onClick(e){let{currentTarget:t}=e;var s;(this.selected=!this.selected,this.isSelected())||(this.source instanceof b&&null!==(s=this.source.frame)&&void 0!==s&&s.isSelected()||this.source instanceof R&&this.source.isSelected()?(ae(t,{strokeWidth:Number(h.ArrowHoveredStrokeWidth)*this.unhovered_opacity}),this.ref.current.opacity=this.hovered_opacity):(re(t,{strokeWidth:this.getStrokeWidth()}),this.ref.current.opacity=this.unhovered_opacity))}onMouseLeave(e){var t;(ie(e.target),this.isSelected())||(this.source instanceof b&&null!==(t=this.source.frame)&&void 0!==t&&t.isSelected()||this.source instanceof R&&this.source.isSelected()?(ae(e.currentTarget,{strokeWidth:Number(h.ArrowHoveredStrokeWidth)*this.unhovered_opacity}),this.ref.current.opacity=this.hovered_opacity):(re(e.currentTarget,{strokeWidth:this.getStrokeWidth()}),this.ref.current.opacity=this.unhovered_opacity))}draw(){const e=this.calculateSteps().reduce(((e,t)=>[...e,...t(e[e.length-2],e[e.length-1])]),[this.source.x(),this.source.y()]);e.splice(0,2);let t="";if(t+=`M ${e[0]} ${e[1]} `,4===e.length)t+=`L ${e[2]} ${e[3]} `;else{let s=0;for(;s<e.length-4;){const[n,i,a,r,o,c]=e.slice(s,s+6),l=(a-n)/2,d=(o-a)/2,u=(r-i)/2,p=(c-r)/2,g=Math.sqrt(Math.pow(l,2)+Math.pow(u,2))/2,m=Math.sqrt(Math.pow(d,2)+Math.pow(p,2))/2,b=Math.min(h.ArrowCornerRadius,g,m);t+=`L ${a-b*l/g} ${r-b*u/g} Q ${a} ${r} ${a+b*d/m} ${r+b*p/m} `,s+=2}}return t+=`L ${e[e.length-2]} ${e[e.length-1]} `,this._path=t,Object(g.jsxs)(r.c,{ref:this.ref,onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),onClick:e=>this.onClick(e),opacity:this.unhovered_opacity,children:[Object(i.createElement)(r.g,{...p,stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),strokeWidth:this.getStrokeWidth(),hitStrokeWidth:Number(h.ArrowHitStrokeWidth),data:t,key:Re.key++}),Object(i.createElement)(r.a,{...p,points:e.slice(e.length-4),fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),strokeEnabled:!1,pointerWidth:Number(h.ArrowHeadSize),pointerLength:Number(h.ArrowHeadSize),key:Re.key++})]},Re.key++)}}class v extends f{calculateSteps(){const e=this.target;if(!e)return[];const t=[(e,t)=>[e+h.FramePaddingX,t]];return e instanceof R&&(t.push(((t,s)=>[t,D.getHorizontalLaneAfterSource(e,s).getPosition(e)])),t.push(((t,s)=>[e.x()+h.FramePaddingX,s]))),t.push(((t,s)=>[e.x()+h.FramePaddingX,e.y()+e.height()])),t}getStrokeWidth(){return Number(h.FrameArrowStrokeWidth)}onClick(e){super.onClick(e),ae(e.currentTarget,{strokeWidth:Number(h.FrameArrowHoveredStrokeWidth)})}onMouseEnter(e){super.onMouseEnter(e),ae(e.currentTarget,{strokeWidth:Number(h.FrameArrowHoveredStrokeWidth)})}onMouseLeave(e){super.onMouseLeave(e),this.isSelected()||this.source.isSelected()?ae(e.currentTarget,{strokeWidth:Number(h.FrameArrowStrokeWidth)}):re(e.currentTarget,{strokeWidth:Number(h.FrameArrowStrokeWidth)})}}class y extends o{constructor(e){super(),this.parent=e,this.value=null,this.data=[],this.ref=a.a.createRef(),this.updatePosition=()=>{this._x=this.parent.x(),this._y=this.parent.y()},this._x=this.parent.x(),this._y=this.parent.y(),this._height=this.parent.height(),this._width=this.parent.width()}draw(){return Object(i.createElement)(r.h,{...p,key:Re.key++,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),ref:this.ref})}}class x extends f{calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(e,t)=>[e+3*h.FnRadius,t]];return t.y()<e.y()&&e.y()<t.y()+t.height()?(s.push(((e,t)=>[e,t-2*h.FnRadius])),s.push(((s,n)=>[t.x()+(e.x()<t.x()?0:t.width()),n]))):(s.push(((e,t)=>[e,t-2*h.FnRadius])),s.push(((t,s)=>[D.getVerticalLaneBeforeTarget(e,t).getPosition(e),s])),s.push(((e,s)=>[e,D.getHorizontalLaneBeforeTarget(t,s).getPosition(t)])),s.push(((e,s)=>[t.x()+(t.x()<e?t.width():0),s])),s.push(((s,n)=>[s,t.y()+(t.y()<e.y()?t.height():0)]))),s}}class j extends o{constructor(){super(...arguments),this.referencedBy=void 0,this.data=void 0}addReference(e){this.referencedBy.push(e)}}class O extends j{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.centerX=void 0,this.tooltipWidth=void 0,this.exportTooltipWidth=void 0,this.radius=h.FnRadius,this.innerRadius=h.FnInnerRadius,this.fnName=void 0,this.paramsText=void 0,this.bodyText=void 0,this.exportBodyText=void 0,this.tooltip=void 0,this.exportTooltip=void 0,this.selected=!1,this._arrow=void 0,this.enclosingEnvNode=void 0,this.ref=a.a.createRef(),this.labelRef=a.a.createRef(),this.onMouseEnter=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.labelRef.current.moveToTop(),this.labelRef.current.show(),ae(t))},this.onMouseLeave=e=>{let{currentTarget:t}=e;if(!Ie.getPrintableMode())if(this.selected){var s;const e=null===(s=t.getStage())||void 0===s?void 0:s.container();e&&(e.style.cursor="default")}else this.labelRef.current.hide(),re(t)},this.onClick=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.selected=!this.selected,this.selected?(this.labelRef.current.show(),ae(t)):(this.labelRef.current.hide(),re(t)))},Re.memoizeValue(this);const s=this.referencedBy[0];s instanceof B?(this._x=s.frame.x()+s.frame.width()+h.FrameMarginX/4,this._y=s.y(),this.centerX=this._x+2*this.radius):(s.isLastUnit?(this._x=s.x()+2*h.DataUnitWidth,this._y=s.y()+h.DataUnitHeight/2-this.radius):(this._x=s.x(),this._y=s.y()+s.parent.height()+h.DataUnitHeight),this.centerX=this._x+h.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius,this._width=4*this.radius,this._height=2*this.radius,this.enclosingEnvNode=Re.environmentTree.getTreeNode(oe(this.data.environment)),this.fnName=this.data.functionName,this.paramsText=`params: (${te(this.data)})`,this.bodyText=`body: ${se(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}\n${this.bodyText}`,this.exportTooltip=`${this.paramsText}\n${this.exportBodyText}`,this.tooltipWidth=Math.max(ee(this.paramsText),ee(this.bodyText)),this.exportTooltipWidth=Math.max(ee(this.paramsText),ee(this.exportBodyText))}isSelected(){return this.selected}arrow(){return this._arrow}updatePosition(){const e=this.referencedBy.find((e=>e instanceof B&&e.frame.envTreeNode===this.enclosingEnvNode))||this.referencedBy[0];e instanceof B?(this._x=e.frame.x()+e.frame.width()+h.FrameMarginX/4,this._y=e.y(),this.centerX=this._x+2*this.radius):(e.isLastUnit?(this._x=e.x()+2*h.DataUnitWidth,this._y=e.y()+h.DataUnitHeight/2-this.radius):(this._x=e.x(),this._y=e.y()+e.parent.height()+h.DataUnitHeight),this.centerX=this._x+h.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius}reset(){super.reset(),this.referencedBy.length=0}draw(){var e;return this._isDrawn=!0,this._arrow=this.enclosingEnvNode.frame&&new x(this).to(this.enclosingEnvNode.frame),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsxs)(r.c,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),onClick:e=>this.onClick(e),ref:this.ref,children:[Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()})]}),Ie.getPrintableMode()?Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*h.TextPaddingX,y:this.y()-h.TextPaddingY,visible:!0,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"white",opacity:Number(h.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.exportTooltip,fontFamily:h.FontFamily.toString(),fontSize:Number(h.FontSize),fontStyle:h.FontStyle.toString(),fill:h.SA_BLUE.toString(),padding:5})]}):Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*h.TextPaddingX,y:this.y()-h.TextPaddingY,visible:!1,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"black",opacity:Number(h.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.tooltip,fontFamily:h.FontFamily.toString(),fontSize:Number(h.FontSize),fontStyle:h.FontStyle.toString(),fill:h.SA_WHITE.toString(),padding:5})]}),null===(e=this._arrow)||void 0===e?void 0:e.draw()]},Re.key++)}}class C extends j{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.centerX=void 0,this.tooltipWidth=void 0,this.exportTooltipWidth=void 0,this.radius=h.FnRadius,this.innerRadius=h.FnInnerRadius,this._arrow=void 0,this.paramsText=void 0,this.bodyText=void 0,this.exportBodyText=void 0,this.tooltip=void 0,this.exportTooltip=void 0,this.selected=!1,this.ref=a.a.createRef(),this.labelRef=a.a.createRef(),this.onMouseEnter=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.labelRef.current.show(),ae(t))},this.onMouseLeave=e=>{let{currentTarget:t}=e;if(!Ie.getPrintableMode())if(this.selected){var s;const e=null===(s=t.getStage())||void 0===s?void 0:s.container();e&&(e.style.cursor="default")}else this.labelRef.current.hide(),re(t)},this.onClick=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.selected=!this.selected,this.selected?(this.labelRef.current.show(),ae(t)):(this.labelRef.current.hide(),re(t)))},Re.memoizeValue(this);const s=this.referencedBy[0];s instanceof B?(this._x=s.frame.x()+s.frame.width()+h.FrameMarginX/4,this._y=s.y(),this.centerX=this._x+2*this.radius):(s.isLastUnit?(this._x=s.x()+2*h.DataUnitWidth,this._y=s.y()+h.DataUnitHeight/2-this.radius):(this._x=s.x(),this._y=s.y()+s.parent.height()+h.DataUnitHeight),this.centerX=this._x+h.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius,this._width=4*this.radius,this._height=2*this.radius,this.paramsText=`params: ${te(this.data)}`,this.bodyText=`body: ${se(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}\n${this.bodyText}`,this.exportTooltip=`${this.paramsText}\n${this.exportBodyText}`,this.tooltipWidth=Math.max(ee(this.paramsText),ee(this.bodyText))+h.TextPaddingX,this.exportTooltipWidth=Math.max(ee(this.paramsText),ee(this.exportBodyText))}isSelected(){return this.selected}arrow(){return this._arrow}updatePosition(){const e=this.referencedBy.find((e=>e instanceof B))||this.referencedBy[0];e instanceof B?(this._x=e.frame.x()+e.frame.width()+h.FrameMarginX/4,this._y=e.y(),this.centerX=this._x+2*this.radius):(e.isLastUnit?(this._x=e.x()+2*h.DataUnitWidth,this._y=e.y()+h.DataUnitHeight/2-this.radius):(this._x=e.x(),this._y=e.y()+e.parent.height()+h.DataUnitHeight),this.centerX=this._x+h.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius}draw(){var e;return this._isDrawn=!0,this._arrow=Re.globalEnvNode.frame&&new x(this).to(Re.globalEnvNode.frame),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsxs)(r.c,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),onClick:e=>this.onClick(e),ref:this.ref,children:[Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...p,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString()})]}),Ie.getPrintableMode()?Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*h.TextPaddingX,y:this.y()-h.TextPaddingY,visible:!0,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"white",opacity:Number(h.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.exportTooltip,fontFamily:h.FontFamily.toString(),fontSize:Number(h.FontSize),fontStyle:h.FontStyle.toString(),fill:h.SA_BLUE.toString(),padding:5})]}):Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*h.TextPaddingX,y:this.y()-h.TextPaddingY,visible:!1,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"black",opacity:Number(h.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.tooltip,fontFamily:h.FontFamily.toString(),fontSize:Number(h.FontSize),fontStyle:h.FontStyle.toString(),fill:h.SA_WHITE.toString(),padding:5})]}),null===(e=this._arrow)||void 0===e?void 0:e.draw()]},Re.key++)}}class S extends f{static emergeFromTopOrBottom(e,t,s){e.push(((e,n)=>[e,n+(s.y()>t.y()||s.y()===t.y()&&s.x()<=t.x()?.9:-.9)*h.DataUnitHeight]))}calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(e,t)=>[e+h.DataUnitWidth/2,t+h.DataUnitHeight/2]];if(t instanceof O||t instanceof C)Math.abs(t.y()-e.y())<2*h.DataUnitHeight?(S.emergeFromTopOrBottom(s,e,t),s.push((()=>[t.centerX+2*h.FnRadius+h.FnRadius,t.y()])),s.push(((e,t)=>[e-h.FnRadius,t]))):s.push((()=>[t.centerX+2*h.FnRadius,t.y()]));else if(t instanceof k)if(e.parent===t)s.push(((e,t)=>[e,t-3*h.DataUnitHeight/4])),s.push(((e,t)=>[e+h.DataUnitHeight/3,t])),s.push(((e,t)=>[e,t+h.DataUnitHeight/4]));else if(e.isLastUnit&&t.x()-e.x()<=3*h.DataUnitWidth&&t.x()>e.x()&&t.level===e.parent.level)s.push((()=>[t.x(),t.y()+h.DataUnitHeight/2]));else{S.emergeFromTopOrBottom(s,e,t);const n=D.getVerticalLaneAfterSource(t,e.x()).getPosition(t);(n-e.x())*(n-t.x())<0&&s.push(((e,t)=>[n,t]));const i=D.getHorizontalLaneBeforeTarget(t,e.y()).getPosition(t);(i-e.y())*(i-t.y())<0&&s.push(((e,s)=>(i-s)*(i-t.y())>0?[e,s]:[e,D.getHorizontalLaneBeforeTarget(t,s).getPosition(t)])),s.push(((e,s)=>{let n,i=t.y()+h.DataUnitHeight/2-s;const a=t.y()+h.DataUnitHeight/2-Math.sign(i)*h.DataUnitHeight/2;if(i=a-s,e<t.x()-h.DataUnitWidth)n=Math.max(e+h.DataUnitWidth,t.x()-Math.abs(i));else{if(!(e>=t.x()+t.units.length*h.DataUnitWidth+h.DataUnitWidth)){if(e<t.x())n=t.x();else if(e>=t.x()+t.units.length*h.DataUnitWidth+h.DataUnitWidth)n=t.x()+t.units.length*h.DataUnitWidth+h.DataUnitWidth;else{const s=Math.floor((e-t.x())/h.DataUnitWidth);n=t.x()+h.DataUnitWidth*s}return[(e+n)/2,(s+a)/2]}n=t.x()+t.units.length*h.DataUnitWidth,n=Math.min(e-h.DataUnitWidth,n+Math.abs(i))}return[n,s]})),s.push(((e,s)=>{const n=Math.floor((e-t.x())/h.DataUnitWidth),i=t.y()+h.DataUnitHeight/2-s,a=t.y()+h.DataUnitHeight/2-Math.sign(i)*h.DataUnitHeight/2;return e<t.x()?[t.x(),a]:e>=t.x()+t.units.length*h.DataUnitWidth?[t.x()+t.units.length*h.DataUnitWidth,a]:[t.x()+h.DataUnitWidth*n,a]}))}else s.push((()=>[t.x(),t.y()]));return s}}const E=e=>{let{x:t,y:s,width:n,height:i,cornerRadius:a,forwardRef:o,...c}=e;return Object(g.jsx)(r.i,{sceneFunc:(e,r)=>{const{upperLeft:o,lowerLeft:c,upperRight:l,lowerRight:d}=a;e.beginPath(),e.moveTo(t+o,s),e.lineTo(t+n-l,s),e.quadraticCurveTo(t+n,s,t+n,s+l),e.lineTo(t+n,s+i-d),e.quadraticCurveTo(t+n,s+i,t+n-d,s+i),e.lineTo(t+c,s+i),e.quadraticCurveTo(t,s+i,t,s+i-c),e.lineTo(t,s+o),e.quadraticCurveTo(t,s,t+o,s),e.closePath(),e.fillStrokeShape(r)},...p,ref:o,...c})};class w extends o{constructor(e){super(),this.arrayUnit=void 0,this.referencedBy=void 0,this.updatePosition=()=>{this._x=this.arrayUnit.x(),this._y=this.arrayUnit.y()},this.referencedBy=e,this.arrayUnit=e[0],this._x=this.arrayUnit.x(),this._y=this.arrayUnit.y(),this._height=this.arrayUnit.height(),this._width=this.arrayUnit.width()}draw(){return Object(i.createElement)(r.f,{...p,key:Re.key++,points:[this.x(),this.y()+this.height(),this.x()+this.width(),this.y()],stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),hitStrokeWidth:Number(h.DataHitStrokeWidth),ref:this.ref,listening:!1})}}class _ extends j{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.text=void 0,this.updatePosition=()=>{const e=this.referencedBy[0];if(e instanceof B)this._x=e.x()+ee(e.keyString)+h.TextPaddingX,this._y=e.y();else{const t=e.width(),s=Math.min(ee(String(this.data)),t);this._x=e.x()+(e.width()-s)/2,this._y=e.y()+(e.height()-h.FontSize)/2}this.text instanceof b?this.text.updatePosition(this.x(),this.y()):this.text.updatePosition()};const s=this.referencedBy[0];if(s instanceof B)this._x=s.x()+ee(s.keyString)+h.TextPaddingX,this._y=s.y(),this.text=new b(this.data,this._x,this._y,{isStringIdentifiable:!0});else{const e=s.width(),t=Math.min(ee(String(this.data)),e);this._x=s.x()+(s.width()-t)/2,this._y=s.y()+(s.height()-h.FontSize)/2,this.text=z(this.data)?new w([s]):new b(this.data,this.x(),this.y(),{maxWidth:e,isStringIdentifiable:!0})}this._width=this.text.width(),this._height=this.text.height()}reset(){super.reset(),this.referencedBy.length=0}onMouseEnter(){}onMouseLeave(){}draw(){return this._isDrawn=!0,Object(g.jsx)(a.a.Fragment,{children:this.text.draw()},Re.key++)}}class A extends o{constructor(e,t,s){super(),this.idx=e,this.data=t,this.value=void 0,this.isFirstUnit=void 0,this.isLastUnit=void 0,this.isMainReference=void 0,this.parent=void 0,this.arrow=void 0,this.updatePosition=()=>{this._x=this.parent.x()+this.idx*h.DataUnitWidth,this._y=this.parent.y(),this.value instanceof _&&this.value.updatePosition()},this.onMouseEnter=()=>{this.parent.units.forEach((e=>{ae(e.ref.current)}))},this.onMouseLeave=e=>{let{currentTarget:t}=e;if(this.parent.isSelected()){var s;const e=null===(s=t.getStage())||void 0===s?void 0:s.container();e&&(e.style.cursor="default")}else this.parent.units.forEach((e=>{re(e.ref.current)}))},this.onClick=()=>{this.parent.onClick()},this.parent=s,this._x=this.parent.x()+this.idx*h.DataUnitWidth,this._y=this.parent.y(),this._height=h.DataUnitHeight,this._width=h.DataUnitWidth,this.isFirstUnit=0===this.idx,this.isLastUnit=this.idx===this.parent.data.length-1,this.value=Re.createValue(this.data,this),this.isMainReference=this.value.referencedBy.length>1}draw(){if(this._isDrawn)return null;this._isDrawn=!0;const e={upperLeft:0,lowerLeft:0,upperRight:0,lowerRight:0};return this.isFirstUnit&&(e.upperLeft=e.lowerLeft=Number(h.DataCornerRadius)),this.isLastUnit&&(e.upperRight=e.lowerRight=Number(h.DataCornerRadius)),this.value instanceof _||(this.arrow=new S(this).to(this.value),this.parent.addArrow(this.arrow),this.value instanceof k&&this.value.addArrow(this.arrow)),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(E,{x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),hitStrokeWidth:Number(h.DataHitStrokeWidth),fillEnabled:!1,forwardRef:this.ref,cornerRadius:e,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},Re.key++),!(this.value instanceof O||this.value instanceof C)&&this.value.draw(),this.arrow&&this.arrow.draw()]},Re.key++)}}class k extends j{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.units=[],this.emptyUnit=void 0,this.level=void 0,this._arrows=[],this.selected=!1,this.ref=a.a.createRef(),this.parentArray=void 0,this.arrayLevelY=-1,this.onClick=()=>{this.selected=!this.selected,this.selected||(this.units.forEach((e=>{re(e.ref.current)})),this.emptyUnit&&re(this.emptyUnit.ref.current))},this.addArrow=e=>{this._arrows.push(e)},Re.memoizeValue(this);const s=this.referencedBy[0];s instanceof B?(this._x=s.frame.x()+s.frame.width()+h.FrameMarginX,this._y=s.y()):(this.parentArray=s.parent,s.isLastUnit?(this._x=s.x()+2*h.DataUnitWidth,this._y=s.y()):(this._x=s.x(),this._y=s.y()+s.parent.height()+h.DataUnitHeight)),this._width=this.data.length*h.DataUnitWidth+h.DataMinWidth,this._height=h.DataUnitHeight;for(let n=this.data.length-1;n>=0;n--){const e=new A(n,this.data[n],this);this.units=[e,...this.units]}}onMouseEnter(){}onMouseLeave(){}isSelected(){return this.selected}arrows(){return this._arrows}reset(){super.reset(),this.units.map((e=>e.reset())),this.referencedBy.length=0,this._arrows=[]}setLevel(e,t){this.level=e,this.arrayLevelY=t}updatePosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:-1,y:-1};this._x=e.x>0?e.x:this._x,this._y=e.y>0?e.y:this._y,this.units.forEach((e=>{e.updatePosition()}))}draw(){return this.isDrawn()?null:(this._isDrawn=!0,this._arrows=this.referencedBy.filter((e=>e instanceof B)).map((e=>{const t=new M(e.key).to(this);return e.frame.trackObjects(this),e.frame.trackObjects(t),t})),0===this.units.length&&(this.emptyUnit=new y(this)),Object(g.jsxs)(r.c,{ref:this.ref,children:[this._arrows.map((e=>e.draw())),this.units.length>0&&this.units.map((e=>e.draw())),this.emptyUnit&&this.emptyUnit.draw(),Object(g.jsx)(r.h,{width:this.width(),height:this.height()})]},Re.key++))}}const T=new Map([["global","Global"],["programEnvironment","Program"],["forLoopEnvironment","Body of for-loop"],["forBlockEnvironment","Control variable of for-loop"],["blockEnvironment","Block"],["functionBodyEnvironment","Function Body"]]);class R extends o{constructor(e,t,s){var n;super(),this.envTreeNode=e,this.xCoord=t,this.yCoord=s,this.totalHeight=void 0,this.totalWidth=void 0,this.totalHoveredWidth=void 0,this.bindings=[],this.name=void 0,this.level=void 0,this.environment=void 0,this.parentFrame=void 0,this.offsetY=void 0,this.values=[],this.selected=!1,this.updatePosition=(e,t)=>{this._x=e,this._y=t+this.offsetY,this.name.updatePosition(this.x(),t),this.bindings.forEach((e=>{e.updatePosition(this.x(),t)}))},this.update=e=>{this.level=e.level,this.environment=e.environment,this.offsetY=this.name.height()+h.TextPaddingY/3,this._y=this.level.y()+this.offsetY;let t=0;for(const[l,d]of Object.entries(this.environment.head)){const e=Math.max(h.TextMinWidth,ee(l+h.ConstantColon))+h.TextPaddingX+(Y(d)?Math.max(h.TextMinWidth,ee(h.UnassignedData.toString())):K(d)?Math.max(h.TextMinWidth,ee(String(d))):0);t=Math.max(t,e)}this._width=t+2*h.FramePaddingX,this.values=[];let s=null,n=this._width,i=this._width;this.totalHoveredWidth=Math.max(n,this.name.hoveredWidth());const a=Object.getOwnPropertyDescriptors(this.environment.head),r=[],o=[];for(const l of Object.entries(a))if(Z(l[0])){const e=oe(l[1].value.environment);(this.environment.id===h.GlobalEnvId||e&&e.id===this.environment.id)&&o.push(l)}else r.push(l);r.push(...o);for(const[l,d]of r){const e=new B(l,d.value,this,s,!d.writable);-1===this.bindings.findIndex((t=>t.value===e.value&&(e.isDummyBinding||t.keyString===e.keyString)))&&(this.bindings.push(e),s=e,n=Math.max(n,e.width()+h.FramePaddingX),i=Math.max(i,e.exportWidth()+h.FramePaddingX),this.totalHoveredWidth=Math.max(this.totalHoveredWidth,e.hoveredWidth()+h.FramePaddingX))}Ie.getPrintableMode()?this.totalWidth=i:this.totalWidth=n,this._height=s?s.y()+s.height()+h.FramePaddingY-this.y():2*h.FramePaddingY,this.totalHeight=this.height()+this.name.height()+h.TextPaddingY/2;const c=R.cumWidths[this.xCoord]+this.totalWidth+h.FrameMarginX+h.FnRadius;R.cumWidths[this.xCoord+1]=void 0===R.cumWidths[this.xCoord+1]?c:Math.max(R.cumWidths[this.xCoord+1],c),R.maxX=Math.max(R.maxX,R.cumWidths[this.xCoord]+(Ie.getPrintableMode()?this.totalWidth:this.totalHoveredWidth),R.cumWidths[R.cumWidths.length-1]),R.heights[this.yCoord]=Math.max(R.heights[this.yCoord]||0,this.totalHeight)},this.isSelected=()=>this.selected,this.onMouseEnter=()=>{ne(this.ref.current),ae(this.ref.current),this.bindings.forEach((e=>{const t=e.getArrow();t&&ae(t.ref.current)})),this.values.forEach((e=>{e&&ae(e.ref.current)}))},this.onMouseLeave=()=>{ie(this.ref.current),this.selected||(re(this.ref.current),this.bindings.forEach((e=>{const t=e.getArrow();t&&!t.isSelected()&&re(t.ref.current)})),this.values.forEach((e=>{e instanceof k&&e.isSelected()||e&&re(e.ref.current)})))},this.onClick=e=>{this.selected=!this.selected,this.selected?(ae(this.ref.current),this.bindings.forEach((e=>{const t=e.getArrow();t&&ae(t.ref.current)})),this.values.forEach((e=>{e&&ae(e.ref.current)}))):(re(this.ref.current),this.bindings.forEach((e=>{const t=e.getArrow();t&&!t.isSelected()&&re(t.ref.current)})),this.values.forEach((e=>{e instanceof k&&e.isSelected()||e&&re(e.ref.current)})))},this._width=h.FrameMinWidth,this.level=e.level,this.environment=e.environment,this.parentFrame=null===(n=e.parent)||void 0===n?void 0:n.frame,this.xCoord=t,this.yCoord=s,R.maxXCoord=Math.max(t,R.maxXCoord),this._x=0===t?h.CanvasPaddingX:R.cumWidths[t],this.name=new b(T.get(this.environment.name)||this.environment.name,this.x(),this.level.y(),{maxWidth:this.width()}),this.offsetY=this.name.height()+h.TextPaddingY/3,this._y=this.level.y()+this.offsetY,this._width=2*h.FramePaddingX,this.totalWidth=this.width(),this.totalHoveredWidth=this.totalWidth,this._height=2*h.FramePaddingY,this.totalHeight=this.height()+this.name.height()+h.TextPaddingY/2,this.update(e)}static lastXCoordBelow(e){let t=R.cumWidths.length;for(;t--;)if(R.cumWidths[t]<=e)return t;return 0}trackObjects(e){const t=this.values.includes(e);return!t&&this.values.push(e),!t}draw(){let e;return void 0!==this.parentFrame&&(e=new v(this).to(this.parentFrame),this.trackObjects(e)),Object(g.jsxs)(r.c,{ref:this.ref,children:[e&&e.draw(),this.bindings.map((e=>!(e.data instanceof k)&&e.draw())),this.name.draw(),Object(i.createElement)(r.h,{...p,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString(),cornerRadius:Number(h.FrameCornerRadius),key:Re.key++,onClick:e=>this.onClick(e),onMouseEnter:()=>this.onMouseEnter(),onMouseLeave:()=>this.onMouseLeave()})]},Re.key++)}}R.maxXCoord=-1,R.maxX=h.CanvasPaddingX.valueOf(),R.cumWidths=[h.CanvasPaddingX.valueOf()],R.heights=[h.CanvasPaddingY.valueOf()],R.reset=()=>{R.maxX=h.CanvasPaddingX.valueOf(),R.maxXCoord=-1,R.cumWidths=[h.CanvasPaddingX.valueOf()],R.heights=[h.CanvasPaddingY.valueOf()]};class I extends o{constructor(e){super(),this.parentLevel=e}}class L extends I{constructor(e){super(e),this.parentLevel=e,this._minX=1/0,this._count=0,this.position=[[]],this._rowCount=0,this.arrays=[],this.getNumLanes=()=>this._rowCount,this.addArray=(e,t)=>{var s,n;t=t||0;let i=null!==(s=null===(n=e.parentArray)||void 0===n?void 0:n.arrayLevelY)&&void 0!==s?s:0,a=0,r=e;const o=[];for(;r instanceof k&&!o.includes(r);)o.push(r),a+=h.DataUnitPaddingX+r.units.length*h.DataUnitWidth,r.units.length>0&&r.units[r.units.length-1].value instanceof k&&(r=r.units[r.units.length-1].value);e:for(const d of this.position.slice(i)){for(const e of d)if(e[0]<t+a+h.DataMinWidth&&e[1]>t){i++;continue e}break}this._minX=Math.min(t,this._minX),this._count++,this._rowCount=Math.max(this._rowCount,i),this.position[i]=this.position[i]||[],this.position[i].push([t,t+e.width()+h.DataUnitWidth/2]),this.position[i].sort(((e,t)=>e[0]-t[0]));const c=h.DataUnitPaddingY,l=this._y+i*h.DataUnitHeight+(i+1)*c;e.updatePosition({x:t,y:l}),e.setLevel(this,i),this._height=Math.max(this._height,l+c),this.arrays.push(e),this._width=Math.max(this._width,t+e.width())},this.setY=e=>{this.arrays.forEach((t=>t.updatePosition({x:t.x(),y:t.y()-this.y()+e}))),this._y=e},this.reset=()=>{this._minX=1/0,this._count=0},this._x=h.CanvasPaddingX,this._y=0,this._width=0,this._rowCount=0}minX(){return this._minX}count(){return this._count}draw(){return Object(g.jsxs)(r.c,{ref:this.ref,children:[Object(i.createElement)(r.h,{...p,x:this.x(),y:this.y(),width:this.width(),height:this.height(),key:Re.key++,listening:!1}),this.arrays.map((e=>e.draw()))]},Re.key++)}}class P extends I{constructor(e){super(e),this.parentLevel=e,this.lastXcoord=void 0,this.yCoord=void 0,this.frames=[],this.addFrame=e=>{var t;const s=Math.max(null!==(t=e.xCoord)&&void 0!==t?t:0,P.maxXcoord,this.lastXcoord+1);this.lastXcoord=s,P.maxXcoord=Math.max(P.maxXcoord,s),e.level=this,void 0!==this.frames[s]?this.frames[s].update(e):(this.frames[s]=new R(e,s,this.yCoord),e.frame=this.frames[s]),this._width=R.maxX},this.setY=e=>{this._y=e,this.frames.forEach((t=>{t.updatePosition(t.x(),e)}))},this._x=h.CanvasPaddingX,this._y=0,this._width=0,this.lastXcoord=-1,this.yCoord=P.maxYcoord++}height(){return R.heights[this.yCoord]+h.FrameMarginY}draw(){return Object(g.jsxs)(r.c,{ref:this.ref,children:[Object(i.createElement)(r.h,{...p,x:this.x(),y:this.y(),width:this.width(),height:this.height(),key:Re.key++,listening:!1}),this.frames.reverse().map((e=>e.draw()))]},Re.key++)}}P.maxXcoord=0,P.maxYcoord=0,P.reset=()=>{P.maxXcoord=0,P.maxYcoord=0};class N extends o{constructor(e){super(),this.envTreeNodes=e,this.frameLevels=void 0,this.arrayLevels=void 0,this.levels=void 0,this.widths=void 0,this.destroy=()=>{this.frameLevels.forEach((e=>e.ref.current.destroyChildren()))},this._x=0,this._y=0,this.frameLevels=[],this.arrayLevels=[],this.levels=[],this.widths=[],N.cumHeights=[],this._height=0,this._width=0,this.update(e)}update(e){R.reset(),P.reset(),D.reset(),this.arrayLevels.forEach((e=>e.reset())),this.frameLevels=[],this.arrayLevels=[],this.levels=[];const t=e.reduce(((e,t,s)=>(0===s?(this.frameLevels[s]=new P(null),this.arrayLevels[s]=new L(this.frameLevels[s])):(this.frameLevels[s]=new P(this.arrayLevels[s-1]),this.arrayLevels[s]=new L(this.frameLevels[s])),this.levels.push(this.frameLevels[s]),this.levels.push(this.arrayLevels[s]),[...e,...t.map((e=>[s,e]))])),new Array);t.sort(((e,t)=>parseInt(e[1].environment.id)-parseInt(t[1].environment.id))),this.widths=[],N.cumHeights=[];const s=[];t.forEach((e=>{var t,n,i;if(s[e[0]]=null!==(t=s[e[0]])&&void 0!==t?t:[],e[1].xCoord=Math.max(s[e[0]].length-1+1,null!==(n=null===(i=e[1].parent)||void 0===i?void 0:i.xCoord)&&void 0!==n?n:0),s[e[0]][e[1].xCoord]=e[1],e[1].parent){let t=e[1],n=e[0],i=!0;for(;i;){const e=t.parent;if(e.xCoord&&e.children.flatMap((e=>de(e)))[0]===t)if(void 0===t.xCoord||void 0===e.xCoord)i=!1;else{const a=t.xCoord-e.xCoord,r=e.xCoord;a>0&&s[n].slice(r,t.xCoord).every((t=>{var s;return void 0===t||parseInt(null!==(s=t.parent.environment.id)&&void 0!==s?s:0)<parseInt(e.environment.id)}))?(s[n-1].slice(r).forEach((e=>{void 0!==e&&(e.xCoord=e.xCoord?e.xCoord+a:e.xCoord)})),s[n-1]=[...s[n-1].slice(0,r),...Array(a).fill(void 0),...s[n-1].slice(r)],n-=1,t=e):i=!1}else i=!1}}})),t.sort(((e,t)=>{var s,n;return(null!==(s=e[1].xCoord)&&void 0!==s?s:0)-(null!==(n=t[1].xCoord)&&void 0!==n?n:0)})),t.forEach((e=>this.frameLevels[e[0]].addFrame(e[1]))),Re.values.forEach(((e,t,s)=>{if(e instanceof k){let t=e.referencedBy.filter((e=>e instanceof B)),s=e.referencedBy.find((e=>e instanceof A));const r=e.referencedBy[0]instanceof B;for(;0===t.length;)t=s.parent.referencedBy.filter((e=>e instanceof B)),s=s.parent.referencedBy.find((e=>e instanceof A));if(r){const t=e.referencedBy[0].frame.yCoord,s=R.cumWidths[e.referencedBy[0].frame.xCoord+1]+.8*h.FrameMarginX;this.arrayLevels[Math.floor(t)].addArray(e,s)}else if(e.referencedBy[0]instanceof A){var n,i,a;const t=null!==(n=null===(i=e.referencedBy[0].parent.level)||void 0===i||null===(a=i.parentLevel)||void 0===a?void 0:a.yCoord)&&void 0!==n?n:0,s=e.referencedBy[0].x()+(e.referencedBy[0]instanceof A&&e.referencedBy[0].isLastUnit?h.DataUnitWidth+h.DataUnitPaddingX:0);this.arrayLevels[Math.floor(t)].addArray(e,s)}}})),N.cumHeights=this.levels.reduce(((e,t,s)=>{let n;if(s%2===0){const e=this.arrayLevels[Math.floor(s/2)];n=R.cumWidths[t.lastXcoord+1]<=e.minX()?0:R.heights[Math.floor(s/2)]+(R.heights[Math.floor(s/2)],h.FrameMarginY/2)}else{const e=this.frameLevels[Math.floor(s/2)];n=R.heights[Math.floor(s/2)]+(R.heights[Math.floor(s/2)]>0?h.FrameMarginY:0),t.count()>0&&(n=R.cumWidths[e.lastXcoord+1]<=t.minX()?Math.max(n,this.arrayLevels[Math.floor((s-1)/2)].height()+(this.arrayLevels[Math.floor((s-1)/2)].height()>0?h.FrameMarginY:h.FrameMarginY/2)):this.arrayLevels[Math.floor((s-1)/2)].height()+h.FrameMarginY)}return[...e,e[e.length-1]+n]}),[h.CanvasPaddingY.valueOf()]),this.levels.forEach(((e,t)=>{e.setY(N.cumHeights[t])})),this._height=N.cumHeights[N.cumHeights.length-1],this._width=Math.max(this.frameLevels.reduce(((e,t)=>Math.max(e,t.width())),0),this.arrayLevels.reduce(((e,t)=>Math.max(e,t.width())),0))+h.FrameMarginX}static lastYCoordBelow(e){let t=N.cumHeights.length;for(;t--;)if(N.cumHeights[t]<=e)return t;return 0}draw(){return Object(g.jsxs)(r.c,{children:[Object(i.createElement)(r.h,{...p,x:this.x(),y:this.y(),width:this.width(),height:this.height(),key:Re.key++,listening:!1}),this.arrayLevels.reverse().map((e=>e.draw())),this.frameLevels.reverse().map((e=>e.draw()))]},Re.key++)}}N.cumHeights=void 0;class D{constructor(e,t){this.id=void 0,this.objects=[],this.frames=[],this.isVertical=!0,this.getPosition=e=>{if(e instanceof R){let t=this.frames.indexOf(e);-1===t&&(t=this.frames.push(e)-1);const s=t*h.ArrowLaneInterval%h.ArrowNumLanes;return N.cumHeights[this.id]-.45*h.FrameMarginY-s/h.ArrowNumLanes*h.FrameMarginY*.35}{let t=this.objects.indexOf(e instanceof j?e.data:e);-1===t&&(t=this.objects.push(e instanceof j?e.data:e)-1);const s=t*h.ArrowLaneInterval%h.ArrowNumLanes;return this.isVertical?R.cumWidths[this.id]-.9*h.FrameMarginX+h.FnRadius+s/(h.ArrowNumLanes+1)*h.FrameMarginX*.7:(this.id,N.cumHeights[this.id]-.1*h.FrameMarginY-s/h.ArrowNumLanes*h.FrameMarginY*.35)}},this.id=e,this.isVertical=t}}D.verticalLanes=[],D.horizontalLanes=[],D.arrayLevelLanes=[],D.reset=()=>{D.verticalLanes=[],D.horizontalLanes=[],D.arrayLevelLanes=[]},D.getVerticalLaneBeforeTarget=(e,t)=>{let s=R.lastXCoordBelow(e.x())+(t>e.x()?0:1);const n=R.cumWidths[s];return e.x()>n&&t>n&&s++,void 0===D.verticalLanes[s]&&(D.verticalLanes[s]=new D(s,!0)),D.verticalLanes[s]},D.getVerticalLaneAfterSource=(e,t)=>{let s=R.lastXCoordBelow(t)+(t>e.x()?0:1);const n=R.cumWidths[s];return e.x()>n&&t>n&&s++,void 0===D.verticalLanes[s]&&(D.verticalLanes[s]=new D(s,!0)),D.verticalLanes[s]},D.getHorizontalLaneBeforeTarget=(e,t)=>{const s=N.lastYCoordBelow(e.y())+(t>e.y()?1:0);return void 0===D.horizontalLanes[s]&&(D.horizontalLanes[s]=new D(s,!1)),D.horizontalLanes[s]},D.getHorizontalLaneAfterSource=(e,t)=>{const s=N.lastYCoordBelow(t)+(t>e.y()?0:1);return void 0===D.horizontalLanes[s]&&(D.horizontalLanes[s]=new D(s,!1)),D.horizontalLanes[s]};class M extends f{calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(t,s)=>[t+e.width(),s+e.height()/2]];if(t instanceof k){s.push(((e,t)=>[e+h.TextMargin+h.TextPaddingX,t])),s.push(((s,n)=>D.getVerticalLaneAfterSource(t,s).getPosition(t)<s?[s,n-Math.sign(e.y()-t.y())*(e.height()+h.TextMargin)]:[s,n])),s.push(((e,s)=>[D.getVerticalLaneAfterSource(t,e).getPosition(t),s]));const n=D.getHorizontalLaneBeforeTarget(t,e.y()).getPosition(t);(n-e.y())*(n-t.y())<0&&s.push(((e,s)=>{const n=D.getHorizontalLaneBeforeTarget(t,s).getPosition(t);return(n-s)*(n-t.y())>0?[e,s]:[e,D.getHorizontalLaneBeforeTarget(t,s).getPosition(t)]})),s.push(((e,s)=>{let n,i=t.y()+h.DataUnitHeight/2-s;if(i=Math.abs(i-Math.sign(i)*h.DataUnitHeight/2),e<t.x())n=Math.max(e+h.DataUnitWidth,t.x()-i);else{if(!(e>=t.x()+t.units.length*h.DataUnitWidth)){const i=Math.floor((e-t.x())/h.DataUnitWidth);return n=t.x()+h.DataUnitWidth*i,[(e+n)/2,(s+t.y())/2]}n=t.x()+t.units.length*h.DataUnitWidth,n=Math.min(e-h.DataUnitWidth,n+i)}return[n,s]})),s.push(((s,n)=>{const i=Math.floor((s-t.x())/h.DataUnitWidth),a=e.y()-(t.y()+h.DataUnitHeight/2),r=t.y()+h.DataUnitHeight/2+(Math.abs(a)<h.DataUnitHeight?0:Math.sign(a))*h.DataUnitHeight/2;return s<t.x()?[t.x(),r]:s>=t.x()+t.units.length*h.DataUnitWidth?[t.x()+t.units.length*h.DataUnitWidth,r]:[t.x()+h.DataUnitWidth*i,r]}))}else t instanceof O||t instanceof C?t.x()<e.x()?(s.push(((e,t)=>[e+h.TextMargin,t])),s.push(((s,n)=>[s,n-Math.sign(e.y()-t.y())*e.height()])),N.lastYCoordBelow(t.y())===N.lastYCoordBelow(e.y())&&R.lastXCoordBelow(e.x())===R.lastXCoordBelow(t.x())+1?(s.push(((e,s)=>[t.centerX+3*h.FnRadius,s])),s.push(((e,s)=>[e,t.y()])),s.push(((e,t)=>[e-h.FnRadius,t]))):(s.push(((e,s)=>[D.getVerticalLaneAfterSource(t,e).getPosition(t),s])),s.push(((e,s)=>[e,D.getHorizontalLaneBeforeTarget(t,s).getPosition(t)])),s.push(((e,s)=>[D.getVerticalLaneBeforeTarget(t,e).getPosition(t),s])),s.push(((e,s)=>[e,t.y()])),s.push(((e,s)=>[t.centerX+2*h.FnRadius,s])))):N.lastYCoordBelow(t.y())===N.lastYCoordBelow(e.y())&&R.lastXCoordBelow(e.x())===R.lastXCoordBelow(t.x())?(s.push(((e,s)=>[t.x(),s])),s.push(((e,s)=>[e,t.y()]))):(s.push(((e,s)=>[D.getVerticalLaneAfterSource(t,e).getPosition(t),s])),s.push(((e,s)=>[e,D.getHorizontalLaneBeforeTarget(t,s).getPosition(t)])),s.push(((e,s)=>[D.getVerticalLaneBeforeTarget(t,e).getPosition(t),s])),s.push(((e,s)=>[e,t.y()])),s.push(((e,s)=>[t.centerX+2*h.FnRadius,s]))):(s.push(((e,s)=>[e,t.y()])),s.push(((e,s)=>[t.x(),s])));return s}}class U extends j{constructor(e){super(),this.referencedBy=e,this.data=Symbol(),this.text=void 0;const t=this.referencedBy[0];if(t instanceof B)this._x=t.x()+ee(t.keyString)+h.TextPaddingX,this._y=t.y(),this.text=new b(h.UnassignedData.toString(),this._x,this._y,{isStringIdentifiable:!1});else{const e=t.width(),s=Math.min(ee(String(this.data)),e);this._x=t.x()+(t.width()-s)/2,this._y=t.y()+(t.height()-h.FontSize)/2,this.text=new b(h.UnassignedData.toString(),this._x,this._y,{maxWidth:e,isStringIdentifiable:!1})}this._width=this.text.width(),this._height=this.text.height()}reset(){super.reset(),this.referencedBy.length=0}updatePosition(){const e=this.referencedBy[0];if(e instanceof B)this._x=e.x()+ee(e.keyString)+h.TextPaddingX,this._y=e.y();else{const t=e.width(),s=Math.min(ee(String(this.data)),t);this._x=e.x()+(e.width()-s)/2,this._y=e.y()+(e.height()-h.FontSize)/2}this.text.updatePosition(this._x,this._y)}onMouseEnter(){}onMouseLeave(){}draw(){return this._isDrawn=!0,Object(g.jsx)(a.a.Fragment,{children:this.text.draw()},Re.key++)}}class B extends o{constructor(e,t,s,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.keyString=e,this.data=t,this.frame=s,this.prevBinding=n,this.isConstant=i,this.offsetY=void 0,this._hoveredWidth=void 0,this.isMainReference=void 0,this.value=void 0,this.key=void 0,this.isDummyBinding=!1,this.keyYOffset=void 0,this.arrow=void 0,this.getArrow=()=>this.arrow,this.updatePosition=(e,t)=>{this._x=e+h.FramePaddingX,this._y=t+this.offsetY,this.key.updatePosition(this.x(),this.y()+this.keyYOffset),Q(this.value,this)&&this.value.updatePosition()},this.isDummyBinding=Z(this.keyString),this.prevBinding?(this._x=this.prevBinding.x(),this.offsetY=this.prevBinding.offsetY+this.prevBinding.height()+h.TextPaddingY):(this._x=this.frame.x()+h.FramePaddingX,this.offsetY=this.frame.y()+h.FramePaddingY),this._y=this.offsetY,this.keyString+=i?h.ConstantColon:h.VariableColon,this.value=Re.createValue(t,this),this.isMainReference=Q(this.value,this),this.isMainReference&&this.value.updatePosition(),this.keyYOffset=(this.value instanceof O||this.value instanceof C)&&this.isMainReference?(this.value.height()-h.FontSize)/2:0,this.key=new b(this.keyString,this.x(),this.offsetY+this.keyYOffset,{},s),this._width=this.value instanceof k||!this.isMainReference?this.key.width():this.value.x()+this.value.width()-this.x(),this._hoveredWidth=this._width+(this.value instanceof O||this.value instanceof C?this.value.tooltipWidth:0),this._height=Math.max(this.key.height(),(this.value instanceof O||this.value instanceof C)&&this.isMainReference?this.value.height():0),this.isDummyBinding&&!this.isMainReference&&this.prevBinding&&(this.offsetY=this.prevBinding.offsetY,this._width=this.prevBinding.width(),this._height=this.prevBinding.height()),this._y=this.offsetY}hoveredWidth(){return Ie.getPrintableMode()?this._hoveredWidth:this._width+(this.value instanceof O||this.value instanceof C?this.value.tooltipWidth:0)}exportWidth(){return this._width+(this.value instanceof O||this.value instanceof C?this.value.exportTooltipWidth:0)}draw(){return this.isDummyBinding||this.value instanceof _||this.value instanceof U||this.value instanceof k||(this.arrow=new M(this.key).to(this.value)),Object(g.jsxs)(a.a.Fragment,{children:[this.isDummyBinding?null:this.key.draw(),this.arrow&&this.arrow.draw(),this.value instanceof k||!this.isMainReference?null:this.value.draw()]},Re.key++)}}function G(e){return"head"in e&&"tail"in e&&"name"in e}function F(e){return"parent"in e&&"children"in e}function H(e){return"root"in e}function V(e){return null===e||(t=e.head,0===Object.keys(t).length);var t}function W(e){return Array.isArray(e)}function q(e){return e&&"[object Function]"==={}.toString.call(e)}function $(e){return q(e)&&"environment"in e&&"functionName"in e}function X(e){return q(e)&&!$(e)}function z(e){return null===e}function Y(e){return"symbol"===typeof e}function K(e){return function(e){return void 0===e}(e)||z(e)||function(e){return"string"===typeof e}(e)||function(e){return"number"===typeof e}(e)||function(e){return"boolean"===typeof e}(e)}function Q(e,t){return e instanceof O?t instanceof B&&e.enclosingEnvNode===t.frame.envTreeNode&&-1!==e.referencedBy.findIndex((e=>e instanceof B&&e===t)):e instanceof C?e.referencedBy.find((e=>e instanceof B))===t:e.referencedBy[0]===t}function J(e,t){return e.referencedBy[0]===t}function Z(e){return/^-?\d+$/.test(e)}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${h.FontStyle} ${h.FontSize}px ${h.FontFamily}`;const s=document.createElement("canvas"),n=s.getContext("2d");if(!n||!e)return 0;n.font=t;const i=e.split("\n").reduce(((e,t)=>n.measureText(e).width>n.measureText(t).width?e:t),""),a=n.measureText(i);return a.width}function te(e){if($(e))return e.node.params.map((e=>e.name)).join(",");{const t=e.toString();return t.substring(t.indexOf("("),t.indexOf("{")).trim()}}function se(e){const t=e.toString();if($(e)){let s="FunctionDeclaration"===e.node.type||"function"===t.substring(0,8)?t.substring(t.indexOf("{")):t.substring(t.indexOf("=")+3);return"{"!==s[0]&&(s="{\n  return "+s+";\n}"),s}return t.substring(t.indexOf("{"))}function ne(e){var t;const s=null===(t=e.getStage())||void 0===t?void 0:t.container();s&&(s.style.cursor="pointer")}function ie(e){var t;const s=null===(t=e.getStage())||void 0===t?void 0:t.container();s&&(s.style.cursor="default")}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e instanceof d.a?Array.from(e.children||[]):[];s.push(e),s.forEach((e=>{e.setAttrs({stroke:e.attrs.stroke?h.HoveredColor.toString():e.attrs.stroke,fill:e.attrs.fill?h.HoveredColor.toString():e.attrs.fill,...t})}))}function re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e instanceof d.a?Array.from(e.children||[]):[];s.push(e),s.forEach((e=>{e.setAttrs({stroke:e.attrs.stroke?Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString():e.attrs.stroke,fill:e.attrs.fill?Ie.getPrintableMode()?h.SA_BLUE.toString():h.SA_WHITE.toString():e.attrs.fill,...t})}))}function oe(e){return null===e?null:V(e)?oe(e.tail):e}function ce(e,t){q(e)||K(e)||(H(e)&&H(t)?ce(e.root,t.root):F(e)&&F(t)?(ce(e.children,t.children),ce(e.environment,t.environment)):W(e)&&W(t)?e.forEach(((e,s)=>ce(e,t[s]))):G(e)&&G(t)&&(Object.defineProperties(t.head,Object.getOwnPropertyDescriptors(e.head)),ce(e.tail,t.tail)))}function le(e){const t=Object(u.cloneDeep)(e);return ce(e,t),t}function de(e){if(V(e.environment)){const t=[];return e.children.forEach((e=>{t.push(...de(e))})),t}return[e]}class ue extends o{constructor(e){super(),this._path="",this.points=[],this.source=void 0,this.target=void 0,this.onMouseEnter=e=>{let{currentTarget:t}=e;ae(t,{strokeWidth:Number(c.ArrowHoveredStrokeWidth)})},this.onMouseLeave=e=>{let{currentTarget:t}=e;re(t,{strokeWidth:Number(c.ArrowStrokeWidth)})},this.source=e,this.target=void 0,this._x=e.x(),this._y=e.y()}path(){return this._path}to(e){return this.target=e,this._width=Math.abs(e.x()-this.source.x()),this._height=Math.abs(e.y()-this.source.y()),this}calculateSteps(){const e=this.target;return e?[()=>[e.x(),e.y()]]:[]}onClick(){}draw(){const e=this.calculateSteps().reduce(((e,t)=>[...e,...t(e[e.length-2],e[e.length-1])]),[this.source.x(),this.source.y()]);if(e.splice(0,2),this._path+=`M ${e[0]} ${e[1]} `,4===e.length)this._path+=`L ${e[2]} ${e[3]} `;else{let t=0;for(;t<e.length-4;){const[s,n,i,a,r,o]=e.slice(t,t+6),l=i-s,d=r-i,u=a-n,h=o-a,p=Math.min(c.ArrowCornerRadius,Math.max(Math.abs(l),Math.abs(u))/2,Math.max(Math.abs(d),Math.abs(h))/2),g=i-p*Math.sign(l),m=a-p*Math.sign(u),b=i+p*Math.sign(d),f=a+p*Math.sign(h);this._path+=`L ${g} ${m} Q ${i} ${a} ${b} ${f}`,t+=2}}return this._path+=`L ${e[e.length-2]} ${e[e.length-1]} `,Object(g.jsxs)(r.c,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(i.createElement)(r.g,{...l,stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),strokeWidth:Number(c.ArrowStrokeWidth),hitStrokeWidth:Number(c.ArrowHitStrokeWidth),data:this.path(),key:Re.key++}),Object(i.createElement)(r.a,{...l,points:e.slice(e.length-4),fill:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),strokeEnabled:!1,pointerWidth:Number(c.ArrowHeadSize),key:Re.key++})]},Re.key++)}}class he extends ue{calculateSteps(){const e=this.target;if(!e)return[];const t=[(e,t)=>[e+c.FramePaddingX,t]];return e instanceof ke&&(t.push(((e,t)=>[e,t-c.FrameMarginY])),t.push(((t,s)=>[e.x()+c.FramePaddingX,s]))),t.push(((t,s)=>[e.x()+c.FramePaddingX,e.y()+e.height()])),t}}class pe extends o{constructor(e){super(),this.parent=e,this.value=null,this.data=[],this.updatePosition=()=>{this._x=this.parent.x(),this._y=this.parent.y()},this._x=this.parent.x(),this._y=this.parent.y(),this._height=this.parent.height(),this._width=this.parent.width()}x(){return this._x}y(){return this._y}height(){return this._height}width(){return this._width}reset(){}draw(){return Object(i.createElement)(r.h,{...l,key:Re.key++,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),ref:this.ref})}}class ge extends ue{calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(e,t)=>[e+3*c.FnRadius,t]];return t.y()<e.y()&&e.y()<t.y()+t.height()?(s.push(((e,t)=>[e,t-2*c.FnRadius])),s.push(((s,n)=>[t.x()+(e.x()<t.x()?0:t.width()),n]))):s.push((()=>[t.x()+t.width()/2,t.y()+(t.y()<e.y()?t.height():0)])),s}}class me extends o{constructor(){super(...arguments),this.referencedBy=[],this.data=void 0}addReference(e){this.referencedBy.push(e)}}class be extends me{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.radius=c.FnRadius,this.innerRadius=c.FnInnerRadius,this.tooltipWidth=void 0,this.centerX=void 0,this.fnName=void 0,this.paramsText=void 0,this.bodyText=void 0,this.exportBodyText=void 0,this.tooltip=void 0,this.exportTooltip=void 0,this.exportTooltipWidth=void 0,this._arrow=void 0,this.enclosingEnvNode=void 0,this.labelRef=a.a.createRef(),this.onMouseEnter=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.ref.current.moveToTop(),this.labelRef.current.show(),ae(t))},this.onMouseLeave=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.labelRef.current.hide(),re(t))},Re.memoizeCompactValue(this);const s=this.referencedBy[0];s instanceof _e?(this._x=s.frame.x()+s.frame.width()+c.FrameMarginX/4,this._y=s.y(),this.centerX=this._x+2*this.radius):(s.isLastUnit?(this._x=s.x()+2*c.DataUnitWidth,this._y=s.y()+c.DataUnitHeight/2-this.radius):(this._x=s.x(),this._y=s.y()+s.parent.height()+c.DataUnitHeight),this.centerX=this._x+c.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius,this._width=4*this.radius,this._height=2*this.radius,this.enclosingEnvNode=Re.environmentTree.getTreeNode(oe(this.data.environment)),this.fnName=this.data.functionName,this.paramsText=`params: (${te(this.data)})`,this.bodyText=`body: ${se(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}\n${this.bodyText}`,this.exportTooltip=`${this.paramsText}\n${this.exportBodyText}`,this.tooltipWidth=Math.max(ee(this.paramsText),ee(this.bodyText)),this.exportTooltipWidth=Math.max(ee(this.paramsText),ee(this.exportBodyText))}updatePosition(){}draw(){var e;return this._arrow=this.enclosingEnvNode.compactFrame&&new ge(this).to(this.enclosingEnvNode.compactFrame),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsxs)(r.c,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),ref:this.ref,children:[Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()})]}),Ie.getPrintableMode()?Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*c.TextPaddingX,y:this.y()-c.TextPaddingY,visible:!0,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"white",opacity:Number(c.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.exportTooltip,fontFamily:c.FontFamily.toString(),fontSize:Number(c.FontSize),fontStyle:c.FontStyle.toString(),fill:c.SA_BLUE.toString(),padding:5})]}):Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*c.TextPaddingX,y:this.y()-c.TextPaddingY,visible:!1,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"black",opacity:Number(c.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.tooltip,fontFamily:c.FontFamily.toString(),fontSize:Number(c.FontSize),fontStyle:c.FontStyle.toString(),fill:c.SA_WHITE.toString(),padding:5})]}),null===(e=this._arrow)||void 0===e?void 0:e.draw()]},Re.key++)}}class fe extends me{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.centerX=void 0,this.tooltipWidth=void 0,this.exportTooltipWidth=void 0,this.radius=c.FnRadius,this.innerRadius=c.FnInnerRadius,this._arrow=void 0,this.paramsText=void 0,this.bodyText=void 0,this.exportBodyText=void 0,this.tooltip=void 0,this.exportTooltip=void 0,this.selected=!1,this.labelRef=a.a.createRef(),this.onMouseEnter=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.labelRef.current.show(),ae(t))},this.onMouseLeave=e=>{let{currentTarget:t}=e;if(!Ie.getPrintableMode())if(this.selected){var s;const e=null===(s=t.getStage())||void 0===s?void 0:s.container();e&&(e.style.cursor="default")}else this.labelRef.current.hide(),re(t)},this.onClick=e=>{let{currentTarget:t}=e;Ie.getPrintableMode()||(this.selected=!this.selected,this.selected?(this.labelRef.current.show(),ae(t)):(this.labelRef.current.hide(),re(t)))},Re.memoizeCompactValue(this);const s=this.referencedBy[0];s instanceof _e?(this._x=s.frame.x()+s.frame.width()+c.FrameMarginX/4,this._y=s.y(),this.centerX=this._x+2*this.radius):(s.isLastUnit?(this._x=s.x()+2*c.DataUnitWidth,this._y=s.y()+c.DataUnitHeight/2-this.radius):(this._x=s.x(),this._y=s.y()+s.parent.height()+c.DataUnitHeight),this.centerX=this._x+c.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius,this._width=4*this.radius,this._height=2*this.radius,this.paramsText=`params: ${te(this.data)}`,this.bodyText=`body: ${se(this.data)}`,this.exportBodyText=(this.bodyText.length>23?this.bodyText.slice(0,20):this.bodyText).split("\n").slice(0,2).join("\n")+" ...",this.tooltip=`${this.paramsText}\n${this.bodyText}`,this.exportTooltip=`${this.paramsText}\n${this.exportBodyText}`,this.tooltipWidth=Math.max(ee(this.paramsText),ee(this.bodyText))+c.TextPaddingX,this.exportTooltipWidth=Math.max(ee(this.paramsText),ee(this.exportBodyText))}isSelected(){return this.selected}arrow(){return this._arrow}updatePosition(){const e=this.referencedBy.find((e=>e instanceof _e))||this.referencedBy[0];e instanceof _e?(this._x=e.frame.x()+e.frame.width()+c.FrameMarginX/4,this._y=e.y(),this.centerX=this._x+2*this.radius):(e.isLastUnit?(this._x=e.x()+2*c.DataUnitWidth,this._y=e.y()+c.DataUnitHeight/2-this.radius):(this._x=e.x(),this._y=e.y()+e.parent.height()+c.DataUnitHeight),this.centerX=this._x+c.DataUnitWidth/2,this._x=this.centerX-2*this.radius),this._y+=this.radius}draw(){return this._isDrawn=!0,this._arrow=Re.globalEnvNode.compactFrame&&new ge(this).to(Re.globalEnvNode.compactFrame),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsxs)(r.c,{onMouseEnter:e=>this.onMouseEnter(e),onMouseLeave:e=>this.onMouseLeave(e),onClick:e=>this.onClick(e),ref:this.ref,children:[Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX-this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.radius,stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()}),Object(i.createElement)(r.b,{...l,key:Re.key++,x:this.centerX+this.radius,y:this.y(),radius:this.innerRadius,fill:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString()})]}),Ie.getPrintableMode()?Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*c.TextPaddingX,y:this.y()-c.TextPaddingY,visible:!0,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"white",opacity:Number(c.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.exportTooltip,fontFamily:c.FontFamily.toString(),fontSize:Number(c.FontSize),fontStyle:c.FontStyle.toString(),fill:c.SA_BLUE.toString(),padding:5})]}):Object(g.jsxs)(r.d,{x:this.x()+this.width()+2*c.TextPaddingX,y:this.y()-c.TextPaddingY,visible:!1,ref:this.labelRef,children:[Object(g.jsx)(r.k,{stroke:"black",fill:"black",opacity:Number(c.FnTooltipOpacity)}),Object(g.jsx)(r.l,{text:this.tooltip,fontFamily:c.FontFamily.toString(),fontSize:Number(c.FontSize),fontStyle:c.FontStyle.toString(),fill:c.SA_WHITE.toString(),padding:5})]}),Re.globalEnvNode.compactFrame&&new ge(this).to(Re.globalEnvNode.compactFrame).draw()]},Re.key++)}}class ve extends ue{calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(e,t)=>[e+c.DataUnitWidth/2,t+c.DataUnitHeight/2]];return t instanceof be||t instanceof fe?s.push((()=>[e.x()<t.x()?t.x():t.centerX,t.y()])):t instanceof Se&&(e.y()===t.y()?Math.abs(e.x()-t.x())>2*c.DataUnitWidth?(s.push(((e,t)=>[e,t-c.DataUnitHeight])),s.push((()=>[t.x()+c.DataUnitWidth/2,t.y()-c.DataUnitHeight/2])),s.push(((e,t)=>[e,t+c.DataUnitHeight/2]))):s.push((()=>[t.x(),t.y()+c.DataUnitHeight/2])):s.push((()=>[t.x()+c.DataUnitWidth/2,t.y()+(e.y()>t.y()?c.DataUnitHeight:0)]))),s}}class ye extends o{constructor(e){super(),this.arrayUnit=void 0,this.referencedBy=void 0,this.updatePosition=()=>{},this.referencedBy=e,this.arrayUnit=e[0],this._x=this.arrayUnit.x(),this._y=this.arrayUnit.y(),this._height=this.arrayUnit.height(),this._width=this.arrayUnit.width()}draw(){return Object(i.createElement)(r.f,{...l,key:Re.key++,points:[this.x(),this.y()+this.height(),this.x()+this.width(),this.y()],stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),hitStrokeWidth:Number(c.DataHitStrokeWidth),ref:this.ref,listening:!1})}}const xe={maxWidth:Number.MAX_VALUE,fontFamily:c.FontFamily.toString(),fontSize:Number(c.FontSize),fontStyle:c.FontStyle.toString(),fontVariant:c.FontVariant.toString(),isStringIdentifiable:!1};class je extends o{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.data=e,this._x=t,this._y=s,this._height=void 0,this._width=void 0,this.partialStr=void 0,this.fullStr=void 0,this.options=xe,this.onMouseEnter=e=>{var t,s;let{currentTarget:n}=e;const i=null===(t=n.getStage())||void 0===t?void 0:t.container();i&&(i.style.cursor="pointer"),this.ref.current.moveToTop(),this.ref.current.show(),null===(s=n.getLayer())||void 0===s||s.draw()},this.onMouseLeave=e=>{var t,s;let{currentTarget:n}=e;const i=null===(t=n.getStage())||void 0===t?void 0:t.container();i&&(i.style.cursor="default"),this.ref.current.hide(),null===(s=n.getLayer())||void 0===s||s.draw()},this.options={...this.options,...n};const{fontSize:i,fontStyle:a,fontFamily:r,maxWidth:o,isStringIdentifiable:l}=this.options;this.fullStr=this.partialStr=l&&JSON.stringify(e)||String(e),this._height=i;const d=e=>ee(e,`${a} ${i}px ${r}`);if(d(this.partialStr)>o){let e=c.Ellipsis.toString(),t=0;for(;d(this.partialStr.substring(0,t)+c.Ellipsis.toString())<o;)e=this.partialStr.substring(0,t++)+c.Ellipsis.toString();this._width=d(e),this.partialStr=e}else this._width=Math.max(c.TextMinWidth,d(this.partialStr))}draw(){const e={fontFamily:this.options.fontFamily,fontSize:this.options.fontSize,fontStyle:this.options.fontStyle,fill:c.SA_WHITE.toString()};return Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(r.d,{x:this.x(),y:this.y(),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(i.createElement)(r.l,{...l,key:Re.key++,text:this.partialStr,...e})}),Object(g.jsxs)(r.d,{x:this.x(),y:this.y(),ref:this.ref,visible:!1,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[Object(g.jsx)(r.k,{...l,fill:"black",opacity:.5}),Object(i.createElement)(r.l,{...l,key:Re.key++,text:this.fullStr,...e})]})]},Re.key++)}}class Oe extends me{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.text=void 0;const s=this.referencedBy[0];if(s instanceof _e)this._x=s.x()+ee(s.keyString)+c.TextPaddingX,this._y=s.y(),this.text=new je(this.data,this.x(),this.y(),{isStringIdentifiable:!0});else{const e=s.width(),t=Math.min(ee(String(this.data)),e);this._x=s.x()+(s.width()-t)/2,this._y=s.y()+(s.height()-c.FontSize)/2,this.text=z(this.data)?new ye([s]):new je(this.data,this.x(),this.y(),{maxWidth:e,isStringIdentifiable:!0})}this._width=this.text.width(),this._height=this.text.height()}updatePosition(){}draw(){return Object(g.jsx)(a.a.Fragment,{children:this.text.draw()},Re.key++)}}class Ce extends o{constructor(e,t,s){super(),this.idx=e,this.data=t,this.value=void 0,this.isFirstUnit=void 0,this.isLastUnit=void 0,this.isMainReference=void 0,this.parent=void 0,this.arrow=void 0,this.updatePosition=()=>{},this.onMouseEnter=e=>{let{currentTarget:t}=e;ae(t)},this.onMouseLeave=e=>{let{currentTarget:t}=e;re(t)},this.parent=s,this._x=this.parent.x()+this.idx*c.DataUnitWidth,this._y=this.parent.y(),this._height=c.DataUnitHeight,this._width=c.DataUnitWidth,this.isFirstUnit=0===this.idx,this.isLastUnit=this.idx===this.parent.data.length-1,this.value=Re.createCompactValue(this.data,this),this.isMainReference=this.value.referencedBy.length>1}draw(){if(this.isDrawn())return null;this._isDrawn=!0;const e={upperLeft:0,lowerLeft:0,upperRight:0,lowerRight:0};return this.isFirstUnit&&(e.upperLeft=e.lowerLeft=Number(c.DataCornerRadius)),this.isLastUnit&&(e.upperRight=e.lowerRight=Number(c.DataCornerRadius)),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(E,{x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),hitStrokeWidth:Number(c.DataHitStrokeWidth),fillEnabled:!1,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,cornerRadius:e,forwardRef:this.ref},Re.key++),this.value.draw(),this.value instanceof Oe||new ve(this).to(this.value).draw()]},Re.key++)}}class Se extends me{constructor(e,t){super(),this.data=e,this.referencedBy=t,this.units=[],Re.memoizeCompactValue(this);const s=this.referencedBy[0];s instanceof _e?(this._x=s.frame.x()+s.frame.width()+c.FrameMarginX,this._y=s.y()):s.isLastUnit?(this._x=s.x()+2*c.DataUnitWidth,this._y=s.y()):(this._x=s.x(),this._y=s.y()+s.parent.height()+c.DataUnitHeight),this._width=this.data.length*c.DataUnitWidth+c.DataMinWidth,this._height=c.DataUnitHeight;for(let n=this.data.length-1;n>=0;n--){const e=new Ce(n,this.data[n],this);this._width=Math.max(this.width(),e.value.width()+(e.value instanceof Oe||n!==this.data.length-1?n*c.DataUnitWidth:(n+1)*c.DataUnitWidth+c.DataUnitWidth)),this._height=Math.max(this._height,e.value instanceof Oe||e.isMainReference?c.DataUnitHeight:e.value.y()+e.value.height()-e.y()),this.units=[e,...this.units]}}reset(){super.reset(),this.units.map((e=>e.reset())),this.referencedBy.length=0}updatePosition(){}draw(){return this.isDrawn()?null:(this._isDrawn=!0,Object(g.jsx)(a.a.Fragment,{children:this.units.length>0?this.units.map((e=>e.draw())):new pe(this).draw()},Re.key++))}}class Ee extends ue{calculateSteps(){const e=this.source,t=this.target;if(!t)return[];const s=[(t,s)=>[t+e.width(),s+e.height()/2]];return t.x()<e.x()?t instanceof Se?(s.push(((e,t)=>[e+c.TextMargin,t])),s.push(((e,s)=>[e,t.y()-c.DataUnitHeight/3])),s.push(((e,s)=>[t.x()+c.DataUnitWidth/2,s])),s.push(((e,s)=>[e,t.y()]))):(s.push(((e,t)=>[e+c.TextMargin,t])),s.push(((t,s)=>[t,s-e.height()/2-c.TextMargin])),s.push(((e,s)=>[t.x()+t.width()+c.ArrowHeadSize,s])),s.push(((e,s)=>[e,t.y()])),s.push(((e,t)=>[e-c.ArrowHeadSize,t]))):s.push(((e,s)=>[t.x(),t.y()+(t instanceof Se?c.DataUnitHeight/2:0)])),s}}class we extends me{constructor(e){super(),this.referencedBy=e,this.data=Symbol(),this.text=void 0;const t=this.referencedBy[0];if(t instanceof _e)this._x=t.x()+ee(t.keyString)+c.TextPaddingX,this._y=t.y(),this.text=new je(c.UnassignedData.toString(),this._x,this._y,{isStringIdentifiable:!1});else{const e=t.width(),s=Math.min(ee(String(this.data)),e);this._x=t.x()+(t.width()-s)/2,this._y=t.y()+(t.height()-c.FontSize)/2,this.text=new je(c.UnassignedData.toString(),this._x,this._y,{maxWidth:e,isStringIdentifiable:!1})}this._width=this.text.width(),this._height=this.text.height()}reset(){super.reset(),this.referencedBy.length=0}updatePosition(){}draw(){return this._isDrawn=!0,Object(g.jsx)(a.a.Fragment,{children:this.text.draw()},Re.key++)}}class _e extends o{constructor(e,t,s,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.keyString=e,this.data=t,this.frame=s,this.prevBinding=n,this.isConstant=i,this.value=void 0,this.key=void 0,this.isDummyBinding=!1,this.arrow=void 0,this.getArrow=()=>this.arrow,this.isDummyBinding=Z(this.keyString),this.prevBinding?(this._x=this.prevBinding.x(),this._y=this.prevBinding.y()+this.prevBinding.height()+c.TextPaddingY):(this._x=this.frame.x()+c.FramePaddingX,this._y=this.frame.y()+c.FramePaddingY),this.keyString+=i?c.ConstantColon:c.VariableColon,this.value=Re.createCompactValue(t,this);const a=this.value instanceof Se?(c.DataUnitHeight-c.FontSize)/2:(this.value.height()-c.FontSize)/2;this.key=new je(this.keyString,this.x(),this.y()+a),this._width=J(this.value,this)?this.value.x()+this.value.width()-this.x()+(this.value instanceof be||this.value instanceof fe?this.value.tooltipWidth:0):this.key.width(),this._height=Math.max(this.key.height(),this.value.height()),this.isDummyBinding&&!J(this.value,this)&&this.prevBinding&&(this._y=this.prevBinding.y(),this._width=this.prevBinding.width(),this._height=this.prevBinding.height())}draw(){return Object(g.jsxs)(a.a.Fragment,{children:[this.isDummyBinding?null:this.key.draw(),this.isDummyBinding||this.value instanceof Oe||this.value instanceof we?null:new Ee(this.key).to(this.value).draw(),J(this.value,this)?this.value.draw():null]},Re.key++)}}const Ae=new Map([["global","Global"],["programEnvironment","Program"],["forLoopEnvironment","Body of for-loop"],["forBlockEnvironment","Control variable of for-loop"],["blockEnvironment","Block"],["functionBodyEnvironment","Function Body"]]);class ke extends o{constructor(e,t){var s;super(),this.envTreeNode=e,this.leftSiblingFrame=t,this.totalHeight=void 0,this.totalWidth=void 0,this.bindings=[],this.name=void 0,this.level=void 0,this.environment=void 0,this.parentFrame=void 0,this.onMouseEnter=e=>{let{currentTarget:t}=e;ae(t)},this.onMouseLeave=e=>{let{currentTarget:t}=e;re(t)},this._width=c.FrameMinWidth,this.level=e.compactLevel,this.environment=e.environment,this.parentFrame=null===(s=e.parent)||void 0===s?void 0:s.compactFrame,this._x=this.level.x(),this.leftSiblingFrame&&(this._x+=this.leftSiblingFrame.x()+this.leftSiblingFrame.totalWidth+c.FrameMarginX),this.name=new je(Ae.get(this.environment.name)||this.environment.name,this.x(),this.level.y(),{maxWidth:this.width()}),this._y=this.level.y()+this.name.height()+c.TextPaddingY/2;let n=0;for(const[d,u]of Object.entries(this.environment.head)){const e=Math.max(c.TextMinWidth,ee(d+c.ConstantColon))+c.TextPaddingX+(Y(u)?Math.max(c.TextMinWidth,ee(c.UnassignedData.toString())):K(u)?Math.max(c.TextMinWidth,ee(String(u))):0);n=Math.max(n,e)}this._width=n+2*c.FramePaddingX;let i=null,a=this._width;const r=Object.getOwnPropertyDescriptors(this.environment.head),o=[],l=[];for(const d of Object.entries(r))if(Z(d[0])){const e=oe(d[1].value.environment);(this.environment.id===c.GlobalEnvId||e&&e.id===this.environment.id)&&l.push(d)}else o.push(d);o.push(...l);for(const[d,u]of o){const e=new _e(d,u.value,this,i,!u.writable);this.bindings.push(e),i=e,a=Math.max(a,e.width()+c.FramePaddingX)}this.totalWidth=a,this._height=i?i.y()+i.height()+c.FramePaddingY-this.y():2*c.FramePaddingY,this.totalHeight=this.height()+this.name.height()+c.TextPaddingY/2}draw(){return Object(g.jsxs)(r.c,{children:[this.name.draw(),Object(i.createElement)(r.h,{...l,x:this.x(),y:this.y(),width:this.width(),height:this.height(),stroke:Ie.getPrintableMode()?c.SA_BLUE.toString():c.SA_WHITE.toString(),cornerRadius:Number(c.FrameCornerRadius),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,key:Re.key++}),this.bindings.map((e=>e.draw())),this.parentFrame&&new he(this).to(this.parentFrame).draw()]},Re.key++)}}class Te extends o{constructor(e,t){super(),this.parentLevel=e,this.envTreeNodes=t,this.frames=[],this._x=c.CanvasPaddingX,this._y=c.CanvasPaddingY,this.parentLevel&&(this._y+=this.parentLevel.height()+this.parentLevel.y());let s=null;t.forEach((e=>{e.compactLevel=this;const t=new ke(e,s);e.compactFrame=t,this.frames.push(t),s=t})),this._height=this.frames.reduce(((e,t)=>Math.max(e,t.totalHeight)),0);const n=this.frames[this.frames.length-1];this._width=n.x()+n.totalWidth-this.x()+c.LevelPaddingX}destroy(){this.ref.current.destroyChildren()}draw(){return Object(g.jsxs)(r.c,{ref:this.ref,children:[Object(i.createElement)(r.h,{...l,x:this.x(),y:this.y(),width:this.width(),height:this.height(),key:Re.key++,listening:!1}),this.frames.map((e=>e.draw()))]},Re.key++)}}class Re{static updateDimensions(e,t){Re.visibleWidth=e,Re.visibleHeight=t,null!==Re.stageRef.current&&(Math.min(Re.width(),window.innerWidth)>Re.stageWidth||Math.min(Re.height(),window.innerHeight)>Re.stageHeight)&&(Re.currentLight=void 0,Re.currentDark=void 0,Re.currentCompactLight=void 0,Re.currentCompactDark=void 0,Re.stageWidth=Math.min(Re.width(),window.innerWidth),Re.stageHeight=Math.min(Re.height(),window.innerHeight),Re.stageRef.current.width(Re.stageWidth),Re.stageRef.current.height(Re.stageHeight),Ie.redraw()),Re.stageHeight,Re.visibleHeight,Re.invisiblePaddingVertical=Re.stageHeight>Re.visibleHeight?(Re.stageHeight-Re.visibleHeight)/2:0,Re.invisiblePaddingHorizontal=Re.stageWidth>Re.visibleWidth?(Re.stageWidth-Re.visibleWidth)/2:0;const s=this.scrollContainerRef.current;s&&(s.style.width=`${Re.visibleWidth}px`,s.style.height=`${Re.visibleHeight}px`)}static setContext(e){if(Re.currentLight=void 0,Re.currentDark=void 0,Re.currentCompactLight=void 0,Re.currentCompactDark=void 0,Re.values.forEach(((e,t)=>{e.reset()})),Re.values.clear(),Re.compactValues.forEach(((e,t)=>{e.reset()})),Re.compactValues.clear(),Re.key=0,Re.environmentTree=le(e),Re.globalEnvNode=Re.environmentTree.root,Re.removeProgramEnv(),Re.removeUnreferencedGlobalFns(),Re.initializeGrid(),Ie.getCompactLayout()){const e=Re.compactLevels[Re.compactLevels.length-1];Re.compactHeight=Math.max(h.CanvasMinHeight,e.y()+e.height()+h.CanvasPaddingY),Re.compactWidth=Math.max(h.CanvasMinWidth,Re.compactLevels.reduce(((e,t)=>Math.max(e,t.width())),0)+2*h.CanvasPaddingX)}else Re.nonCompactHeight=Math.max(h.CanvasMinHeight,this.grid.height()+h.CanvasPaddingY),Re.nonCompactWidth=Math.max(h.CanvasMinWidth,this.grid.width()+2*h.CanvasPaddingX)}static removeProgramEnv(){if(!Re.globalEnvNode.children)return;const e=Re.globalEnvNode.children[0],t=Re.globalEnvNode;t.environment.head={...e.environment.head,...t.environment.head},e.children&&t.resetChildren(e.children);for(const s of Object.values(t.environment.head))$(s)&&delete s.functionName}static removeUnreferencedGlobalFns(){const e=new Set,t=new Set,s=t=>{for(const s of Object.values(t.environment.head))X(s)?e.add(s):W(s)&&n(s);t.children&&t.children.forEach(s)},n=s=>{s.forEach((s=>{X(s)?e.add(s):W(s)&&!t.has(s)&&(t.add(s),n(s))}))};Re.globalEnvNode.children&&Re.globalEnvNode.children.forEach(s);const i={};for(const[a,r]of Object.entries(Re.globalEnvNode.environment.head))(e.has(r)||Z(a))&&(i[a]=r);Re.globalEnvNode.environment.head={[h.GlobalFrameDefaultText]:Symbol(),...i}}static width(){return Ie.getCompactLayout()?Re.compactWidth:Re.nonCompactWidth}static height(){return Ie.getCompactLayout()?Re.compactHeight:Re.nonCompactHeight}static initializeGrid(){if(Ie.getCompactLayout()){this.compactLevels=[];let e,t=[Re.globalEnvNode],s=null;for(;t.length>0;){e=new Te(s,t),this.compactLevels.push(e);const n=[];t.forEach((e=>{e.children.forEach((t=>{const s=de(t);s.forEach((t=>t.parent=e)),n.push(...s)}))})),s=e,t=n}}else{const e=[];let t=[Re.globalEnvNode];for(;t.length>0;){e.push(t);const s=[];t.forEach((e=>{e.children.forEach((t=>{const n=de(t);n.forEach((t=>t.parent=e)),s.push(...n)}))})),t=s}void 0===this.grid?this.grid=new N(e):this.grid.update(e)}}static memoizeValue(e){Re.values.set(e.data,e)}static createValue(e,t){if(Y(e))return new U([t]);if(K(e))return new _(e,[t]);{const s=Re.values.get(e);if(s)return s.addReference(t),s;let n=new _(null,[t]);return W(e)?n=new k(e,[t]):q(e)&&(n=$(e)?new O(e,[t]):new C(e,[t])),n}}static memoizeCompactValue(e){Re.compactValues.set(e.data,e)}static createCompactValue(e,t){if(Y(e))return new we([t]);if(K(e))return new Oe(e,[t]);{const s=Re.compactValues.get(e);if(s)return s.addReference(t),s;let n=new Oe(null,[t]);return W(e)?n=new Se(e,[t]):q(e)&&(n=$(e)?new be(e,[t]):new fe(e,[t])),n}}static saveButtonText(){return"Save "+(Re.width()>h.MaxExportWidth||Re.height()>h.MaxExportHeight?Math.ceil(Re.width()/h.MaxExportWidth)*Math.ceil(Re.height()/h.MaxExportHeight)+" images":"image")}static handleScrollPosition(e,t){const s=e-Re.invisiblePaddingHorizontal,n=t-Re.invisiblePaddingVertical;this.stageRef.current.container().style.transform="translate("+s+"px, "+n+"px)",this.stageRef.current.x(-s),this.stageRef.current.y(-n)}static draw(){if(0!==Re.key)return Re.prevLayout;{const e=Object(g.jsx)("div",{className:"sa-env-visualizer",children:Object(g.jsx)("div",{id:"scroll-container",ref:Re.scrollContainerRef,onScroll:e=>Re.handleScrollPosition(e.currentTarget.scrollLeft,e.currentTarget.scrollTop),style:{width:Re.visibleWidth,height:Re.visibleHeight,overflow:"auto",margin:"10px"},children:Object(g.jsxs)("div",{id:"large-container",style:{width:Re.width(),height:Re.height(),overflow:"hidden",backgroundColor:Ie.getPrintableMode()?h.PRINT_BACKGROUND.toString():h.SA_BLUE.toString()},children:[Object(g.jsx)("div",{style:{right:40,position:"absolute",display:"flex",alignSelf:"right"},children:Object(g.jsxs)(n.c,{vertical:!0,children:[Object(g.jsx)(n.b,{large:!0,outlined:!0,style:{backgroundColor:Ie.getPrintableMode()?h.PRINT_BACKGROUND.toString():h.SA_BLUE.toString(),opacity:.8,borderColor:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString()},onMouseUp:()=>{Ie.toggleCompactLayout(),Ie.redraw()},children:Object(g.jsx)(n.f,{checked:!Ie.getCompactLayout(),label:"Experimental",style:{marginBottom:"0px",color:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString()}})}),Object(g.jsx)(n.b,{large:!0,outlined:!0,style:{backgroundColor:Ie.getPrintableMode()?h.PRINT_BACKGROUND.toString():h.SA_BLUE.toString(),opacity:.8,borderColor:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString()},onMouseUp:()=>{Ie.togglePrintableMode(),Ie.redraw()},children:Object(g.jsx)(n.f,{checked:Ie.getPrintableMode(),label:"Printable",style:{marginBottom:"0px",color:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString()}})}),Object(g.jsx)(n.b,{outlined:!0,text:Re.saveButtonText(),large:!0,onClick:this.exportImage,style:{color:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString(),backgroundColor:Ie.getPrintableMode()?h.PRINT_BACKGROUND.toString():h.SA_BLUE.toString(),opacity:.8,borderColor:Ie.getPrintableMode()?h.SA_BLUE.toString():h.PRINT_BACKGROUND.toString()}})]})}),Object(g.jsx)(r.j,{width:Re.stageWidth,height:Re.stageHeight,ref:this.stageRef,children:Object(g.jsxs)(r.e,{children:[Object(i.createElement)(r.h,{...p,x:0,y:0,width:Re.width(),height:Re.height(),fill:Ie.getPrintableMode()?h.PRINT_BACKGROUND.toString():h.SA_BLUE.toString(),key:Re.key++,listening:!1}),!Ie.getCompactLayout()&&Re.grid.draw(),Ie.getCompactLayout()&&Re.compactLevels.map((e=>e.draw()))]})})]})})});return Re.prevLayout=e,Ie.getCompactLayout()?Ie.getPrintableMode()?Re.currentCompactLight=e:Re.currentCompactDark=e:Ie.getPrintableMode()?Re.currentLight=e:Re.currentDark=e,e}}}Re.nonCompactHeight=void 0,Re.nonCompactWidth=void 0,Re.compactWidth=void 0,Re.compactHeight=void 0,Re.visibleHeight=window.innerHeight,Re.visibleWidth=window.innerWidth,Re.stageHeight=window.innerHeight,Re.stageWidth=window.innerWidth,Re.key=0,Re.environmentTree=void 0,Re.globalEnvNode=void 0,Re.grid=void 0,Re.compactLevels=[],Re.values=new Map,Re.compactValues=new Map,Re.prevLayout=void 0,Re.currentDark=void 0,Re.currentLight=void 0,Re.currentCompactDark=void 0,Re.currentCompactLight=void 0,Re.stageRef=a.a.createRef(),Re.invisiblePaddingVertical=300,Re.invisiblePaddingHorizontal=300,Re.scrollContainerRef=a.a.createRef(),Re.exportImage=()=>{Re.scrollContainerRef.current.scrollTo({left:0,top:0}),Re.handleScrollPosition(0,0);const e=Re.height(),t=Re.width(),s=Math.ceil(t/h.MaxExportWidth),n=Math.ceil(e/h.MaxExportHeight);(()=>{const i=a=>{if(a>=s*n)return;const r=a%s,o=Math.floor(a/s),c=document.createElement("a");c.style.display="none",c.href=Re.stageRef.current.toDataURL({x:r*h.MaxExportWidth+Re.invisiblePaddingHorizontal,y:o*h.MaxExportHeight+Re.invisiblePaddingVertical,width:Math.min(t-r*h.MaxExportWidth,h.MaxExportWidth),height:Math.min(e-o*h.MaxExportHeight,h.MaxExportHeight),mimeType:"image/jpeg"}),c.download=`diagram_${r}_${o}.jpg`,document.body.appendChild(c),c.click(),document.body.removeChild(c),setTimeout((function(){i(a+1)}),1e3)};i(0)})()};class Ie{static togglePrintableMode(){Ie.printableMode=!Ie.printableMode}static toggleCompactLayout(){Ie.compactLayout=!Ie.compactLayout}static getPrintableMode(){return Ie.printableMode}static getCompactLayout(){return Ie.compactLayout}static init(e,t,s){Re.visibleHeight=s,Re.visibleWidth=t,this.setVis=e}static clear(){Re.values.clear(),Re.compactValues.clear()}static drawEnv(e){if(Ie.environmentTree=le(e.runtime.environmentTree),!this.setVis)throw new Error("env visualizer not initialized");Re.setContext(e.runtime.environmentTree),this.setVis(Re.draw()),Re.updateDimensions(Re.visibleWidth,Re.visibleHeight);const t=document.getElementById("env_visualizer-icon");t&&t.classList.add("side-content-tab-alert")}static redraw(){this.environmentTree&&(Ie.getCompactLayout()&&Ie.getPrintableMode()&&void 0!==Re.currentCompactLight?this.setVis(Re.currentCompactLight):Ie.getCompactLayout()&&!Ie.getPrintableMode()&&void 0!==Re.currentCompactDark?this.setVis(Re.currentCompactDark):!Ie.getCompactLayout()&&Ie.getPrintableMode()&&void 0!==Re.currentLight?this.setVis(Re.currentLight):Ie.getCompactLayout()||Ie.getPrintableMode()||void 0===Re.currentDark?(Re.setContext(Ie.environmentTree),this.setVis(Re.draw())):this.setVis(Re.currentDark),Re.updateDimensions(Re.visibleWidth,Re.visibleHeight))}static updateDimensions(e,t){null!=Re.stageRef&&null!==e&&null!==t&&Re.updateDimensions(e,t)}}Ie.setVis=void 0,Ie.printableMode=!1,Ie.compactLayout=!0,Ie.environmentTree=void 0},18:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"j",(function(){return d})),s.d(t,"k",(function(){return u})),s.d(t,"l",(function(){return h})),s.d(t,"i",(function(){return p})),s.d(t,"g",(function(){return g}));const n="FETCH_ASSESSMENT_OVERVIEWS",i="SUBMIT_ASSESSMENT";let a,r,o,c;!function(e){e.attempting="attempting",e.attempted="attempted",e.not_attempted="not_attempted",e.submitted="submitted"}(a||(a={})),function(e){e.excluded="excluded",e.graded="graded",e.grading="grading",e.none="none"}(r||(r={})),function(e){e.public="public",e.opaque="opaque",e.secret="secret"}(o||(o={})),function(e){e.programming="programming",e.mcq="mcq",e.voting="voting"}(c||(c={}));const l=()=>({external:{name:"NONE",symbols:[]},globals:[]}),d=()=>({type:"Missions",isManuallyGraded:!0,closeAt:"2100-12-01T00:00+08",coverImage:"https://fakeimg.pl/300/",id:-1,maxXp:0,openAt:"2000-01-01T00:00+08",title:"Insert title here",reading:"",shortSummary:"Insert short summary here",status:a.not_attempted,story:"mission",xp:0,gradingStatus:"none"}),u=()=>({autogradingResults:[],answer:"// [Marking Scheme]\n// 1 mark for correct answer",content:"Enter content here",id:0,library:l(),graderLibrary:l(),prepend:"",solutionTemplate:"//This is a mock solution template",postpend:"",testcases:[],testcasesPrivate:[],type:"programming",xp:0,maxXp:0,blocking:!1}),h=()=>({type:o.public,answer:"",score:0,program:""}),p=()=>({answer:3,content:"This is a mock MCQ question",choices:[{content:"A",hint:null},{content:"B",hint:null},{content:"C",hint:null},{content:"D",hint:null}],id:2,library:l(),graderLibrary:l(),type:"mcq",solution:0,xp:0,maxXp:0,blocking:!1}),g=()=>({type:"Missions",globalDeployment:{external:{name:"NONE",symbols:[]},globals:[]},graderDeployment:l(),id:-1,longSummary:"Insert mission briefing here",missionPDF:"www.google.com",questions:[u()],title:"Insert title here"})},188:function(e,t,s){"use strict";s.r(t),s.d(t,"changeDateAssessment",(function(){return a})),s.d(t,"deleteAssessment",(function(){return r})),s.d(t,"publishAssessment",(function(){return o})),s.d(t,"uploadAssessment",(function(){return c}));var n=s(7),i=s(151);const a=(e,t,s)=>Object(n.action)(i.a,{id:e,openAt:t,closeAt:s}),r=e=>Object(n.action)(i.b,e),o=(e,t)=>Object(n.action)(i.c,{id:t,togglePublishTo:e}),c=(e,t,s)=>Object(n.action)(i.d,{file:e,forceUpdate:t,assessmentConfigId:s})},189:function(e,t,s){"use strict";s.d(t,"b",(function(){return u}));var n=s(1),i=s.n(n),a=s(35),r=s(53),o=s.n(r),c=s(24);const l=new Map,d=e=>{if(null==e.context)return[];const t=e.context.moduleContexts;if(null==t)return[];return Object.values(t).flatMap((e=>{var t,s;return null!==(t=null===(s=e.tabs)||void 0===s?void 0:s.map((e=>e(i.a,o.a))))&&void 0!==t?t:[]}))},u=e=>`${e}-icon`;t.a=e=>{const{tabs:t,onChange:s}=e,[n,r]=i.a.useState(t.beforeDynamicTabs.concat(t.afterDynamicTabs)),o=Object(a.f)((t=>e.workspaceLocation&&t.workspaces[e.workspaceLocation].debuggerContext));i.a.useEffect((()=>{const e=t.beforeDynamicTabs.concat((e=>{const t=[...d(e).filter((t=>t.toSpawn(e))).map((t=>({...t,body:t.body(e),id:c.b.module})))];return e.workspaceLocation&&l.set(e.workspaceLocation,t.map((e=>e.label))),t})(o||{})).concat(t.afterDynamicTabs);r(e)}),[t,o]);const h=i.a.useCallback(((e,t,n)=>{const i=e=>{const t=u(e),s=document.getElementById(t);s&&s.classList.remove("side-content-tab-alert")};void 0===s||s(e,t,n),i(t)}),[s]);return e.renderFunction(n,h)}},207:function(e,t,s){"use strict";s.r(t),s.d(t,"saveCanvas",(function(){return a})),s.d(t,"createCourse",(function(){return r})),s.d(t,"addNewUsersToCourse",(function(){return o}));var n=s(7),i=s(127);const a=e=>Object(n.action)(i.c,e),r=e=>Object(n.action)(i.b,e),o=(e,t)=>Object(n.action)(i.a,{users:e,provider:t})},211:function(e,t,s){"use strict";t.a=s.p+"static/media/default_cover_image.e2be0724.jpg"},212:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(122),i=(s(1),s(12)),a=s(0);const r=e=>{let{onClick:t}=e;return Object(a.jsx)(i.a,{label:"Reset",icon:n.a.REPEAT,onClick:t})}},213:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(102),i=s(122),a=(s(1),s(12)),r=s(0);const o=e=>{const t=e.hasUnsavedChanges?{intent:n.a.WARNING,minimal:!1}:{};return Object(r.jsx)(a.a,{label:"Save",icon:i.a.FLOPPY_DISK,onClick:e.onClickSave,options:t})}},214:function(e,t,s){"use strict";s.r(t),s.d(t,"fetchSourcecastIndex",(function(){return a})),s.d(t,"updateSourcecastIndex",(function(){return r}));var n=s(7),i=s(135);const a=e=>Object(n.action)(i.a,{workspaceLocation:e}),r=(e,t)=>Object(n.action)(i.c,{index:e,workspaceLocation:t})},216:function(e,t,s){"use strict";s.d(t,"a",(function(){return V}));var n=s(14);const i=2,a="white",r="white",o=45,c=15,l=30,d=22.5,u=60,h=15,p=4,g=13,m=-5,b=5,f=15,v=15,y=15,x=20;var j=s(374);function O(e){return function(e){return void 0===Array.isArray?e instanceof Array:Array.isArray(e)}(e)&&2===e.length}function C(e){if(O(e))return e[1];throw new Error("tail(xs) expects a pair as argument xs, but encountered "+e)}function S(e){return null===e}function E(e){for(;;e=C(e)){if(S(e))return!0;if(!O(e))return!1}}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return""+e;{const t=typeof e;if("function"!==t&&"object"!==t||null===e){if("string"===t){const t=e+"";return`"${t.substring(0,x)}${t.length>x?"...":""}"`}return`${e}`}return}}var _=s(1),A=s.n(_),k=s(0);class T extends A.a.PureComponent{render(){return Object(k.jsx)(n.a,{points:[this.props.from.x,this.props.from.y,this.props.to.x+g,this.props.to.y+m],pointerWidth:b,pointerLength:b,fill:r,stroke:a,strokeWidth:i,preventDefault:!1},this.props+"")}}class R extends _.PureComponent{render(){const e=this.props.from.y+l/2+v,t=this.props.to.x-y,s=this.props.to.y-f,o=[this.props.from.x,this.props.from.y,this.props.from.x,e,t,e,t,s,this.props.to.x+g,s,this.props.to.x+g,this.props.to.y+m];return Object(k.jsx)(n.a,{points:o,pointerLength:b,pointerWidth:b,fill:r,stroke:a,strokeWidth:i,preventDefault:!1})}}class I{constructor(){this.children=void 0,this.children=null}}class L extends I{constructor(e){super(),this.actualNode=void 0,this.actualNode=e}}class P extends I{constructor(e){super(),this.data=void 0,this.data=e}}class N extends I{constructor(){super(...arguments),this._drawable=void 0,this.drawableX=void 0,this.drawableY=void 0}get drawable(){return this._drawable}}class D extends A.a.PureComponent{render(){return Object(k.jsx)(n.f,{x:this.props.x,y:this.props.y,points:[0,l,o,0],strokeWidth:i-1,stroke:a,preventDefault:!1})}}class M extends A.a.PureComponent{render(){const e=(e,t)=>{const s=e.data;if(E(s)){if(function(e){return null===e}(s)){const e={x:t*o,y:0};return Object(k.jsx)(D,{...e},t)}return null}{const i=w(s),a=null!==i&&void 0!==i?i:"*"+V.displaySpecialContent(e);return Object(k.jsx)(n.l,{text:a,align:"center",width:o,x:o*t,y:Math.floor((l-1.2*12)/2),fontStyle:void 0===i?"italic":"normal",fill:"white",preventDefault:!1},""+s+t)}};return Object(k.jsxs)(n.c,{x:this.props.x,y:this.props.y,children:[Object(k.jsx)(n.h,{width:Math.max(o*this.props.nodes.length,c),height:l,strokeWidth:i,stroke:a,fill:"#17181A",preventDefault:!1}),this.props.nodes.length>1&&Array.from(Array(this.props.nodes.length-1),((e,t)=>Object(k.jsx)(n.f,{points:[o*(t+1),0,o*(t+1),l],strokeWidth:i,stroke:a,preventDefault:!1},"line"+t))),this.props.nodes.map(((t,s)=>t instanceof P&&e(t,s)))]})}}class U extends A.a.PureComponent{render(){return Object(k.jsxs)(n.c,{...this.props,children:[Object(k.jsx)(n.b,{radius:h,strokeWidth:i,stroke:a,x:h,y:h,preventDefault:!1}),Object(k.jsx)(n.b,{radius:h,strokeWidth:i,stroke:a,x:3*h+i,y:h,preventDefault:!1}),Object(k.jsx)(n.b,{radius:p,strokeWidth:i,stroke:r,fill:r,x:h,y:h,preventDefault:!1}),Object(k.jsx)(n.b,{radius:p,strokeWidth:i,stroke:a,fill:r,x:3*h+i,y:h,preventDefault:!1})]})}}class B extends N{createDrawable(e,t,s,i){return this._drawable=Object(k.jsxs)(n.c,{children:[Object(k.jsx)(U,{x:e,y:t}),(s!==e||i!==t)&&Object(k.jsx)(T,{from:{x:s+o/2,y:i+l/2},to:{x:e,y:t}})]},e+", "+t),this.drawableX=e,this.drawableY=t,this._drawable}}class G extends N{createDrawable(e,t,s,i){var a;const r={nodes:null!==(a=this.children)&&void 0!==a?a:[],x:e,y:t},c=Object(k.jsx)(M,{...r});return this._drawable=Object(k.jsxs)(n.c,{children:[c,(s!==e||i!==t)&&Object(k.jsx)(T,{from:{x:s+o/2,y:i+l/2},to:{x:e,y:t}})]},e+", "+t),this.drawableX=e,this.drawableY=t,this._drawable}}class F{constructor(e,t){this._rootNode=void 0,this.nodes=void 0,this._rootNode=e,this.nodes=t}get rootNode(){return this._rootNode}getNodeById(e){return this.nodes[e]}static fromSourceStructure(e){let t=0;function s(e){const a=n.get(e);return void 0!==a?new L(a):(r=e,Array.isArray(r)?function(e){const a=new G;return n.set(e,a),i[t]=a,t++,a.children=e.map(s),a}(e):function(e){return"function"===typeof e}(e)?function(e){const s=new B;return n.set(e,s),i[t]=s,t++,s}(e):function(e){return new P(e)}(e));var r}const n=new Map,i=[],a=s(e);return new F(a,i)}draw(){return new H(this)}}class H{constructor(e){this.tree=void 0,this.drawables=void 0,this.nodeWidths=void 0,this.width=0,this.height=0,this.minX=0,this.minY=0,this.tree=e,this.drawables=[],this.nodeWidths=new Map}draw(e,t){if(this.tree.rootNode instanceof P){const e={text:w(this.tree.rootNode.data),align:"center",fontStyle:"normal",fontSize:20,fill:a},t=new j.a.Text(e);return this.width=t.width(),this.height=t.height(),Object(k.jsx)(n.e,{children:Object(k.jsx)(n.l,{...e})})}return this.drawNode(this.tree.rootNode,e,t,e,t),this.width=this.getNodeWidth(this.tree.rootNode)-this.minX,this.height=this.getNodeHeight(this.tree.rootNode)-this.minY+i,Object(k.jsx)(n.e,{offsetX:this.minX,offsetY:this.minY,children:this.drawables},e+", "+t)}drawNode(e,t,s,n,a){if(e instanceof L){const r=e.actualNode,c={from:{x:n+o/2,y:a+l/2},to:{x:r.drawableX,y:r.drawableY}};let d;c.from.y>=c.to.y?(this.minX=Math.min(this.minX,r.drawableX-y-i/2),this.minY=Math.min(this.minY,r.drawableY-f-i/2),d=Object(k.jsx)(R,{...c},"Arrow (back)"+n+t+a+s)):d=Object(k.jsx)(T,{...c},"Arrow"+n+t+a+s),this.drawables.push(d)}if(e instanceof N)if(e instanceof B){const i=e.createDrawable(t,s,n,a);this.drawables.push(i)}else if(e instanceof G){var r;const i=e.createDrawable(t,s,n,a);this.drawables.push(i);let c=t;null===(r=e.children)||void 0===r||r.forEach(((e,n)=>{const i=e instanceof L?s:s+u;this.drawNode(e,c,i,t+o*n,s);const a=this.getNodeWidth(e);c+=a?a+d:0}))}}getNodeWidth(e){if(e instanceof P||e instanceof L)return 0;if(e instanceof B)return 4*h+2*i;if(e instanceof G){var t;if(this.nodeWidths.has(e))return null!==(t=this.nodeWidths.get(e))&&void 0!==t?t:0;if(null!=e.children){const t=e.children.map((e=>this.getNodeWidth(e))).filter((e=>e>0)),s=t.length>0?t.reduce(((e,t)=>e+t+d)):0,n=Math.max(e.children.length*o+i,s,c+i);return this.nodeWidths.set(e,n),n}return 0}return 0}getNodeHeight(e){return e instanceof P?0:e instanceof B?l:e instanceof L?v:e instanceof G?(null!==(t=e.children)&&void 0!==t?t:[]).map((e=>this.getNodeHeight(e)+(e instanceof N?u/2:0))).filter((e=>e>0)).reduce(((e,t)=>Math.max(e,t)),0)+l:0;var t}}class V{static empty(e){}constructor(){this.steps=[],this.nodeLabel=0,this.nodeToLabelMap=new Map}static init(e){V.setSteps=e}static drawData(e){if(!V.setSteps)throw new Error("Data visualizer not initialized");V._instance.addStep(e),V.setSteps(V._instance.steps)}static clear(){V._instance=new V,V.setSteps(V._instance.steps)}static displaySpecialContent(e){return V._instance.displaySpecialContent(e)}displaySpecialContent(e){var t;return this.nodeToLabelMap.has(e)?null!==(t=this.nodeToLabelMap.get(e))&&void 0!==t?t:0:(console.log("*"+this.nodeLabel+": "+e.data),this.nodeToLabelMap.set(e,this.nodeLabel),this.nodeLabel++)}addStep(e){const t=e.map(this.createDrawing);this.steps.push(t)}createDrawing(e){const t=F.fromSourceStructure(e).draw(),s=i/2,a=i/2,r=t.draw(s,a);return Object(k.jsx)(n.j,{width:t.width+s,height:t.height+a,children:r},e)}}V.setSteps=V.empty,V._instance=new V},22:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"o",(function(){return u})),s.d(t,"n",(function(){return h})),s.d(t,"h",(function(){return p})),s.d(t,"p",(function(){return g})),s.d(t,"m",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"e",(function(){return f})),s.d(t,"f",(function(){return v})),s.d(t,"d",(function(){return y})),s.d(t,"i",(function(){return x})),s.d(t,"g",(function(){return j})),s.d(t,"b",(function(){return O})),s.d(t,"l",(function(){return C})),s.d(t,"j",(function(){return S})),s.d(t,"k",(function(){return E}));var n=s(28),i=s(37),a=s(16),r=s(100),o=s(71);let c,l;!function(e){e.Development="development",e.Production="production",e.Test="test"}(c||(c={})),function(e){e.Student="student",e.Staff="staff",e.Admin="admin"}(l||(l={}));const d=new Map([[n.Variant.DEFAULT,"Clang"]]),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.Variant.DEFAULT;return`Source \xa7${e}${d.has(t)?` ${d.get(t)}`:""}`},h=[{chapter:n.Chapter.CLANG,variant:n.Variant.DEFAULT}].map((e=>({...e,displayName:u(e.chapter,e.variant)}))),p=h.filter((e=>e.variant===n.Variant.DEFAULT)),g=h.filter((e=>e.variant!==n.Variant.DEFAULT)),m=e=>[n.Chapter.CLANG].includes(e),b={gameCanvas:void 0},f={environment:c.Production},v={gradingSummary:{cols:[],rows:[]}},y={achievements:[],goals:[],users:[],assessmentOverviews:[]},x={githubSaveInfo:{repoName:"",filePath:""}},j="1+1",O=e=>({autogradingResults:[],context:Object(r.a)([],e,a.b.defaultSourceVariant),activeEditorTabIndex:0,editorTabs:[{value:["playground","sourcecast","githubAssessments"].includes(e)?j:"",prependValue:"",postpendValue:"",highlightedLines:[],breakpoints:[]}],editorSessionId:"",isEditorReadonly:!1,editorTestcases:[],externalLibrary:o.a.NONE,execTime:1e3,output:[],replHistory:{browseIndex:null,records:[],originalValue:""},replValue:"",sharedbConnected:!1,stepLimit:1e3,globals:[],isEditorAutorun:!1,isRunning:!1,isDebugging:!1,enableDebugging:!0,debuggerContext:{}}),C={assessment:{...O("assessment"),currentAssessment:void 0,currentQuestion:void 0,hasUnsavedChanges:!1},grading:{...O("grading"),currentSubmission:void 0,currentQuestion:void 0,hasUnsavedChanges:!1},playground:{...O("playground"),usingSubst:!1},sourcecast:{...O("sourcecast"),audioUrl:"",codeDeltasToApply:null,currentPlayerTime:0,description:null,inputToApply:null,playbackData:{init:{editorValue:"",chapter:n.Chapter.CLANG,externalLibrary:o.a.NONE},inputs:[]},playbackDuration:0,playbackStatus:i.b.paused,sourcecastIndex:null,title:null,uid:null},sourcereel:{...O("sourcereel"),playbackData:{init:{editorValue:"",chapter:n.Chapter.CLANG,externalLibrary:o.a.NONE},inputs:[]},recordingStatus:i.c.notStarted,timeElapsedBeforePause:0,timeResumed:0},sicp:{...O("sicp"),usingSubst:!1},githubAssessment:{...O("githubAssessment"),hasUnsavedChanges:!1}},S={courses:[],group:null,gameState:{completed_quests:[],collectibles:{}},xp:0,allUserXp:void 0,story:{story:"",playStory:!1},assessments:new Map,assessmentOverviews:void 0,agreedToResearch:void 0,sessionId:Date.now(),githubOctokitObject:{octokit:void 0},gradingOverviews:void 0,gradings:new Map,notifications:[]},E={academy:b,achievement:y,application:f,dashboard:v,playground:x,session:S,workspaces:C}},221:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s(16);const i={"http:":"ws:","https:":"wss:"};function a(e,t){const s=new URL(e,n.b.sharedbBackendUrl);return t&&(s.protocol=i[s.protocol]),s.toString()}async function r(e){const t=await fetch(a(e));return t&&t.ok}async function o(e){const t=await fetch(n.b.sharedbBackendUrl,{method:"POST",body:e,headers:{"Content-Type":"text/plain"}});if(!t||!t.ok)throw new Error(t?`Could not create new session: ${await t.text()}`:"Unknown error creating session");return t.text()}},226:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));const n="SET_EDITOR_SESSION_ID",i="SET_SHAREDB_CONNECTED"},227:function(e,t,s){"use strict";s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n=s(514),i=s(134),a=s(28);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.Variant.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NONE";function n(t,s,n){const i=t("../lib/oop"),r=t("./doc_comment_highlight_rules").DocCommentHighlightRules,o=t("./text_highlight_rules").TextHighlightRules,c="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*";a.Variant.DEFAULT,e.toString();const l=function(e){const t=this.createKeywordMapper({"variable.language":"implements|interface|package|private|protected|public|static|window|document",keyword:"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|isFinite|isNaN|parseFloat|parseInt|Math|this|arguments|prototypeyield|get|set|async|await|enum|eval|true|false|null|Infinity|NaN|undefined|break|case|continue|default|delete|do|else|finally|for|if|in|of|instanceof|new|return|switch|throw|try|typeof|while|with|debugger|escape|with|extends|super|export","storage.type":"const|let|var|function|import|class|catch","support.function":"alert"},"identifier"),s="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[r.getStartRule("doc-start"),u("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+c+")(\\.)(prototype)(\\.)("+c+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+c+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:t,regex:c},{token:"variable.language",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"variable.language",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"variable.language.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:c},{regex:"",token:"empty",next:"no_regex"}],start:[r.getStartRule("doc-start"),u("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:c},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:s},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:s},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,s){if(this.next="{"==e?this.nextState:"","{"==e&&s.length)s.unshift("start",t);else if("}"==e&&s.length&&(s.shift(),this.next=s.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:s},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&0==e.jsx||d.call(this)),this.embedRules(r,"doc-",[r.getEndRule("no_regex")]),this.normalizeRules()};function d(){const e=c.replace("\\d","\\d\\-"),t={onMatch:function(e,t,s){const n="/"==e.charAt(1)?2:1;return 1==n?(t!=this.nextState?s.unshift(this.next,this.nextState,0):s.unshift(this.next),s[2]++):2==n&&t==this.nextState&&(s[1]--,(!s[1]||s[1]<0)&&(s.shift(),s.shift())),[{type:"meta.tag.punctuation."+(1==n?"":"end-")+"tag-open.xml",value:e.slice(0,n)},{type:"meta.tag.tag-name.xml",value:e.substr(n)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);const s={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[s,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,s){return t==s[0]&&s.shift(),2==e.length&&(s[0]==this.nextState&&s[1]--,(!s[1]||s[1]<0)&&s.splice(0,2)),this.next=s[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},s,u("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function u(e){return[{token:"comment",regex:/\/\*/,next:[r.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[r.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}i.inherits(l,o),s.SourceHighlightRules=l}const r=e.toString()+t+s;i.define("ace/mode/source_highlight_rules"+r,["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],n)}var o=s(88),c=s(90),l=s(71);const d={};function u(e){return e.length<=27?e:e.substring(0,24)+"..."}function h(e){return e in o.SourceDocumentation.ext_lib?{caption:u(e),value:e,meta:o.SourceDocumentation.ext_lib[e].meta,docHTML:o.SourceDocumentation.ext_lib[e].description}:{caption:u(e),value:e,meta:"const"}}for(const[f,v]of l.b)d[f]=v.map(h);for(const f of c.h)d[f.deviceLibraryName]=f.internalFunctions.map(h);const p={};Object.entries(o.SourceDocumentation.builtins).forEach((e=>{const[t,s]=e;p[t]=Object.entries(s).map((e=>{const[t,s]=e;return{caption:u(t),value:t,meta:s.meta,docHTML:s.description}}))}));const g={builtins:p,externalLibraries:d},m=(e,t,s)=>{var i;"function"!==typeof(null===(i=ace.define.modules[`ace/mode/${b(e,t,s)}`])||void 0===i?void 0:i.Mode)&&(r(e,t,s,g.externalLibraries[s]),Object(n.ModeSelector)(e,t,s))},b=(e,t,s)=>`source${e}${t}${s}`},24:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));const n="NOTIFY_PROGRAM_EVALUATED";let i;!function(e){e.autograder="autograder",e.briefing="briefing",e.contestVoting="contest_voting",e.contestLeaderboard="contest_leaderboard",e.dataVisualizer="data_visualizer",e.editorGrading="editor_grading",e.editorAutograder="editor_autograder",e.editorBriefing="editor_briefing",e.editorGlobalDeployment="editor_global_deployment",e.editorGlobalGraderDeployment="editor_global_grader_deployment",e.editorLocalDeployment="editor_local_deployment",e.editorLocalGraderDeployment="editor_local_grader_deployment",e.editorManageQuestion="editor_manage_question",e.editorQuestionOverview="editor_question_overview",e.editorQuestionTemplate="editor_question_template",e.envVisualizer="env_visualizer",e.files="files",e.grading="grading",e.introduction="introduction",e.module="module",e.questionOverview="question_overview",e.remoteExecution="remote_execution",e.missionMetadata="mission_metadata",e.mobileEditor="mobile_editor",e.mobileEditorRun="mobile_editor_run",e.sourcereel="sourcereel",e.substVisualizer="subst_visualiser",e.testcases="testcases",e.toneMatrix="tone_matrix",e.htmlDisplay="html_display"}(i||(i={}))},244:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.TrailingCommaError=t.MissingSemicolonError=t.FatalSyntaxError=t.DisallowedConstructError=void 0;const n=s(639),i=s(711),a=s(712),r=s(28),o=s(713);t.DisallowedConstructError=class{constructor(e){this.node=e,this.type=r.ErrorType.SYNTAX,this.severity=r.ErrorSeverity.ERROR,this.nodeType=this.formatNodeType(this.node.type)}get location(){return this.node.loc}explain(){return`${this.nodeType} are not allowed`}elaborate(){return o.stripIndent`
      You are trying to use ${this.nodeType}, which is not allowed (yet).
    `}formatNodeType(e){switch(e){case"ThisExpression":return"'this' expressions";case"Property":return"Properties";default:return e.split(/(?=[A-Z])/).map(((e,t)=>0===t?e:e.toLowerCase())).join(" ")+"s"}}};class c{constructor(e,t){this.location=e,this.message=t,this.type=r.ErrorType.SYNTAX,this.severity=r.ErrorSeverity.ERROR}explain(){return this.message}elaborate(){return"There is a syntax error in your program"}}t.FatalSyntaxError=c;t.MissingSemicolonError=class{constructor(e){this.location=e,this.type=r.ErrorType.SYNTAX,this.severity=r.ErrorSeverity.ERROR}explain(){return"Missing semicolon at the end of statement"}elaborate(){return"Every statement must be terminated by a semicolon."}};t.TrailingCommaError=class{constructor(e){this.location=e}explain(){return"Trailing comma"}elaborate(){return"Please remove the trailing comma"}};class l{visit(e){return e.accept(this)}visitChildren(e){const t=[];for(let s=0;s<e.childCount;s++)t.push(e.getChild(s).accept(this));return{type:"SequenceExpression",expressions:t}}visitTerminal(e){return e.accept(this)}visitErrorNode(e){throw new c({start:{line:e.symbol.line,column:e.symbol.charPositionInLine},end:{line:e.symbol.line,column:e.symbol.charPositionInLine+1}},`invalid syntax ${e.text}`)}}function d(e){const t=new l;return e.accept(t)}t.parse=function(e,t){let s;if("Clang"===t.variant){const l=n.CharStreams.fromString(e),u=new i.ClangLexer(l),h=new n.CommonTokenStream(u),p=new a.ClangParser(h);p.buildParseTree=!0;try{const e=p.expression();s={type:"Program",sourceType:"script",body:[{type:"ExpressionStatement",expression:d(e)}]}}catch(o){if(!(o instanceof c))throw o;t.errors.push(o)}const g=t.errors.find((e=>e.severity===r.ErrorSeverity.ERROR));return s&&!g?s:void 0}}},249:function(e,t,s){"use strict";s.r(t),s.d(t,"setEditorSessionId",(function(){return a})),s.d(t,"setSharedbConnected",(function(){return r}));var n=s(7),i=s(226);const a=(e,t)=>Object(n.action)(i.a,{workspaceLocation:e,editorSessionId:t}),r=(e,t)=>Object(n.action)(i.b,{workspaceLocation:e,connected:t})},256:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base=t.findNodeAfter=t.findNodeAround=t.findNodeAt=t.make=t.fullAncestor=t.full=t.recursive=t.ancestor=t.simple=void 0;const n=s(638);t.simple=n.simple,t.ancestor=n.ancestor,t.recursive=n.recursive,t.full=n.full,t.fullAncestor=n.fullAncestor,t.make=n.make,t.findNodeAt=n.findNodeAt,t.findNodeAround=n.findNodeAround,t.findNodeAfter=n.findNodeAfter,t.base=n.base},26:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return a})),s.d(t,"m",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"i",(function(){return l})),s.d(t,"k",(function(){return d})),s.d(t,"j",(function(){return u})),s.d(t,"n",(function(){return h})),s.d(t,"o",(function(){return p})),s.d(t,"p",(function(){return g})),s.d(t,"q",(function(){return m})),s.d(t,"s",(function(){return b})),s.d(t,"r",(function(){return f})),s.d(t,"t",(function(){return v})),s.d(t,"u",(function(){return y})),s.d(t,"b",(function(){return x})),s.d(t,"f",(function(){return j})),s.d(t,"v",(function(){return O})),s.d(t,"l",(function(){return C})),s.d(t,"e",(function(){return S}));const n="ADD_EVENT",i="BULK_UPDATE_ACHIEVEMENTS",a="BULK_UPDATE_GOALS",r="HANDLE_EVENT",o="GET_ACHIEVEMENTS",c="GET_GOALS",l="GET_OWN_GOALS",d="GET_USER_ASSESSMENT_OVERVIEWS",u="GET_USERS",h="REMOVE_ACHIEVEMENT",p="REMOVE_GOAL",g="SAVE_ACHIEVEMENTS",m="SAVE_GOALS",b="SAVE_USER_ASSESSMENT_OVERVIEWS",f="SAVE_USERS",v="UPDATE_GOAL_PROGRESS",y="UPDATE_OWN_GOAL_PROGRESS";let x,j;!function(e){e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e.EXPIRED="EXPIRED",e.UNRELEASED="UNRELEASED"}(x||(x={})),function(e){e.ALL="ALL",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED"}(j||(j={}));const O={count:0,targetCount:1,completed:!1};let C,S;!function(e){e.MANUAL="Manual",e.EVENT="Event",e.ASSESSMENT="Assessment (unsupported)",e.BINARY="Binary (unsupported)"}(C||(C={})),function(e){e.NONE="None",e.RUN_CODE="Run Code",e.ERROR="Error",e.RUN_TESTCASE="Run Testcase"}(S||(S={}))},279:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureGlobalEnvironmentExist=t.createEmptyContext=t.createGlobalEnvironment=t.EnvTreeNode=t.EnvTree=t.LazyBuiltIn=void 0;const n=s(28);t.LazyBuiltIn=class{constructor(e,t){this.func=e,this.evaluateArgs=t}};class i{constructor(){this._root=null,this.map=new Map}get root(){return this._root}insert(e){const t=e.tail;if(null===t)null===this._root&&(this._root=new a(e,null),this.map.set(e,this._root));else{const s=this.map.get(t);if(s){const t=new a(e,s);s.addChild(t),this.map.set(e,t)}}}getTreeNode(e){return this.map.get(e)}}t.EnvTree=i;class a{constructor(e,t){this.environment=e,this.parent=t,this._children=[]}get children(){return this._children}resetChildren(e){this.clearChildren(),this.addChildren(e),e.forEach((e=>e.parent=this))}clearChildren(){this._children=[]}addChildren(e){this._children.push(...e)}addChild(e){return this._children.push(e),e}}t.EnvTreeNode=a;const r=()=>({break:!1,debuggerOn:!0,isRunning:!1,environmentTree:new i,environments:[],value:void 0,nodes:[]});t.createGlobalEnvironment=()=>({tail:null,name:"global",head:{},id:"-1"});t.createEmptyContext=(e,t,s)=>({externalSymbols:t,errors:[],externalContext:s,runtime:r(),numberOfOuterEnvironments:1,prelude:null,executionMethod:"auto",variant:e,moduleContexts:{},unTypecheckedCode:[],previousCode:[]});t.ensureGlobalEnvironmentExist=e=>{if(e.runtime||(e.runtime=r()),e.runtime.environments||(e.runtime.environments=[]),e.runtime.environmentTree||(e.runtime.environmentTree=new i),0===e.runtime.environments.length){const s=(0,t.createGlobalEnvironment)();e.runtime.environments.push(s),e.runtime.environmentTree.insert(s)}};t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.Variant.DEFAULT,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;const a=(0,t.createEmptyContext)(e,s,i);return a}},28:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disallowedTypes=t.Variant=t.Chapter=t.ErrorSeverity=t.ErrorType=void 0,function(e){e.SYNTAX="Syntax",e.TYPE="Type",e.RUNTIME="Runtime"}(t.ErrorType||(t.ErrorType={})),function(e){e.WARNING="Warning",e.ERROR="Error"}(t.ErrorSeverity||(t.ErrorSeverity={})),function(e){e[e.CLANG=1]="CLANG"}(t.Chapter||(t.Chapter={})),function(e){e.DEFAULT="Clang"}(t.Variant||(t.Variant={})),t.disallowedTypes=["bigint","never","object","symbol","unknown"]},283:function(e,t,s){"use strict";s.r(t),s.d(t,"logOut",(function(){return a}));var n=s(7),i=s(146);const a=()=>Object(n.action)(i.a)},284:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(527);function i(e){return new n.a({auth:e,userAgent:"Source Academy Playground",baseUrl:"https://api.github.com",log:{debug:()=>{},info:()=>{},warn:console.warn,error:console.error},request:{agent:void 0,fetch:void 0,timeout:0}})}},289:function(e,t,s){"use strict";var n=s(3),i=s(20),a=s.n(i),r=(s(1),s(0));t.a=e=>{const t=Object(r.jsx)("div",{className:a()("ControlBar_editor",n.a.BUTTON_GROUP),children:e.editorButtons}),s=e.flowButtons&&Object(r.jsx)("div",{className:a()("ControlBar_flow",n.a.BUTTON_GROUP),children:e.flowButtons}),i=Object(r.jsx)("div",{className:a()("ControlBar_editingWorkspace",n.a.BUTTON_GROUP),children:e.editingWorkspaceButtons});return Object(r.jsxs)("div",{className:"ControlBar",children:[t,s,i]})}},290:function(e,t,s){"use strict";var n=s(102),i=s(42),a=s(1),r=s(45),o=s(10),c=s(0);class l extends a.PureComponent{constructor(){super(...arguments),this.onButtonClickFactory=e=>t=>{e!==this.props.mcq.answer&&this.props.handleMCQSubmit(e);if(null!==this.props.mcq.solution&&this.props.mcq.choices[e].hint){const t=Object(c.jsx)(r.a,{className:"markdown-notification",content:this.props.mcq.choices[e].hint});e===this.props.mcq.solution?Object(o.d)(t,4e3):Object(o.e)(t,4e3)}},this.getButtonIntent=(e,t,s)=>{const i=e===t,a=i&&void 0!==s&&e===s;return void 0===s?n.a.NONE:i&&a?n.a.SUCCESS:i&&!a?n.a.DANGER:n.a.NONE}}render(){const e=this.props.mcq.choices.map(((e,t)=>Object(c.jsx)(i.b,{className:"mcq-option col-xs-12",active:t===this.props.mcq.answer,intent:this.getButtonIntent(t,this.props.mcq.answer,this.props.mcq.solution),onClick:this.onButtonClickFactory(t),minimal:!0,children:Object(c.jsx)(r.a,{content:e.content})},t)));return Object(c.jsx)("div",{className:"MCQChooser row",children:Object(c.jsx)(i.e,{className:"mcq-content-parent col-xs-12 middle-xs",children:Object(c.jsx)("div",{className:"row mcq-options-parent between-xs",children:e})})})}}t.a=l},292:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(33);const i=(e,t)=>n.isEqual(e,t)},293:function(e,t,s){"use strict";var n=s(42),i=s(3),a=s(139),r=s(88),o=s(106),c=s(20),l=s.n(c),d=s(1),u=s(18),h=s(0);t.a=e=>{const{index:t,testcase:s,handleTestcaseEval:c}=e,p=d.useMemo((()=>{const e=void 0!==s.result||s.errors,t=Object(o.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===u.f.secret||s.type===u.f.opaque}}),[s]),g=d.useCallback((()=>{c(t)}),[t,c]);return Object(h.jsx)("div",{className:l()("AutograderCard",p),children:Object(h.jsx)(n.e,{className:i.a.INTERACTIVE,elevation:a.a.ONE,onClick:g,children:s.type===u.f.opaque&&"assessment"===e.workspaceLocation?Object(h.jsx)(n.M,{className:"testcase-placeholder",children:"Hidden testcase"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(n.M,{className:"testcase-program",children:s.program}),Object(h.jsx)(n.M,{className:"testcase-expected",children:s.answer}),Object(h.jsx)(n.M,{className:"testcase-actual",children:s.errors?Object(r.parseError)(s.errors):void 0!==s.result?Object(o.stringify)(s.result):"No Answer"})]})})})}},294:function(e,t,s){"use strict";s.d(t,"b",(function(){return m}));var n=s(42),i=s(382),a=s(1),r=s(40),o=s(10),c=s(0);const l=i.a.ofType(),d=(e,t)=>{let{handleClick:s}=t;return Object(c.jsx)(n.B,{onClick:s,text:e.text},e.uuid)},u=(e,t)=>t.text.toLowerCase().includes(e.toLowerCase()),h=i.a.ofType(),p=(e,t)=>{let{handleClick:s}=t;return Object(c.jsx)(n.B,{onClick:s,text:e.name||e.username},e.courseRegId)},g=(e,t)=>[t.name,t.username,t.group].reduce(((t,s)=>s?t||s.toLowerCase().includes(e.toLowerCase()):t),!1);function m(){Object(o.d)("Goal updated")}t.a=function(e){const{userState:t,hiddenState:s,studio:i,getUsers:m,updateGoalProgress:b}=e,f="Staff"===i?[...e.users].sort(((e,t)=>null!=e.name&&null!=t.name?e.name.localeCompare(t.name):null==e.name?1:-1)):e.users.filter((e=>e.group===i)).sort(((e,t)=>null!=e.name&&null!=t.name?e.name.localeCompare(t.name):null==e.name?1:-1));Object(a.useEffect)(m,[m]);const v=Object(a.useContext)(r.a).getAllGoals().filter((e=>"Manual"===e.meta.type)),[y,x]=Object(a.useState)(void 0),[j,O]=t,[C,S]=Object(a.useState)(0),[E,w]=s;return Object(c.jsxs)("div",{className:"achievement-manual-editor",children:[Object(c.jsx)("h3",{children:"User: "}),Object(c.jsx)(h,{filterable:!0,items:f,itemRenderer:p,itemPredicate:g,onItemSelect:O,noResults:Object(c.jsx)(n.B,{disabled:!0,text:"No matching user"}),children:Object(c.jsx)(n.b,{outlined:!0,text:j?j.name||j.username:"No User Selected",color:"White"})}),Object(c.jsx)("h3",{children:"Goal: "}),Object(c.jsx)(l,{filterable:!0,items:v,itemRenderer:d,itemPredicate:u,onItemSelect:x,noResults:Object(c.jsx)(n.B,{disabled:!0,text:"No matching goal"}),children:Object(c.jsx)(n.b,{outlined:!0,text:y?y.text:"No Goal Selected",color:"White"})}),Object(c.jsx)("h3",{children:"Count: "}),Object(c.jsx)(n.H,{value:C,min:0,allowNumericCharactersOnly:!0,minorStepSize:null,placeholder:"Count",onValueChange:S}),Object(c.jsx)("h3",{children:" "}),Object(c.jsx)(n.b,{outlined:!0,text:"Update Goal",onClick:()=>{if(y&&j){const e={uuid:y.uuid,count:C<0?0:Math.floor(C),targetCount:y.targetCount,completed:C>=y.targetCount};b(j.courseRegId,e)}else!y&&Object(o.e)("Goal not selected"),!j&&Object(o.e)("User not selected")},intent:"primary"}),Object(c.jsx)("h3",{children:" "}),Object(c.jsx)(n.f,{checked:E,label:"View Hidden Achievements",onChange:()=>w(!E)})]})}},295:function(e,t,s){"use strict";s.r(t),s.d(t,"fetchGroupGradingSummary",(function(){return a})),s.d(t,"updateGroupGradingSummary",(function(){return r}));var n=s(7),i=s(158);const a=()=>Object(n.action)(i.a),r=e=>Object(n.action)(i.b,e)},30:function(e,t,s){"use strict";s.d(t,"D",(function(){return u})),s.d(t,"w",(function(){return h})),s.d(t,"r",(function(){return p})),s.d(t,"N",(function(){return g})),s.d(t,"M",(function(){return m})),s.d(t,"E",(function(){return b})),s.d(t,"l",(function(){return f})),s.d(t,"f",(function(){return v})),s.d(t,"n",(function(){return y})),s.d(t,"t",(function(){return x})),s.d(t,"h",(function(){return j})),s.d(t,"a",(function(){return O})),s.d(t,"b",(function(){return C})),s.d(t,"X",(function(){return S})),s.d(t,"W",(function(){return E})),s.d(t,"Q",(function(){return w})),s.d(t,"S",(function(){return _})),s.d(t,"k",(function(){return A})),s.d(t,"v",(function(){return k})),s.d(t,"g",(function(){return T})),s.d(t,"x",(function(){return R})),s.d(t,"i",(function(){return I})),s.d(t,"B",(function(){return L})),s.d(t,"C",(function(){return P})),s.d(t,"p",(function(){return N})),s.d(t,"o",(function(){return D})),s.d(t,"F",(function(){return M})),s.d(t,"H",(function(){return U})),s.d(t,"G",(function(){return B})),s.d(t,"J",(function(){return G})),s.d(t,"s",(function(){return F})),s.d(t,"A",(function(){return H})),s.d(t,"u",(function(){return V})),s.d(t,"I",(function(){return W})),s.d(t,"d",(function(){return q})),s.d(t,"V",(function(){return $})),s.d(t,"c",(function(){return X})),s.d(t,"Y",(function(){return z})),s.d(t,"q",(function(){return Y})),s.d(t,"L",(function(){return K})),s.d(t,"j",(function(){return Q})),s.d(t,"K",(function(){return J})),s.d(t,"R",(function(){return Z})),s.d(t,"y",(function(){return ee})),s.d(t,"O",(function(){return te})),s.d(t,"P",(function(){return se})),s.d(t,"T",(function(){return ne})),s.d(t,"e",(function(){return ie})),s.d(t,"m",(function(){return ae})),s.d(t,"U",(function(){return re})),s.d(t,"z",(function(){return oe}));var n=s(2),i=s(89),a=s(26);const r=e=>({uuid:e.uuid||"",text:e.text||"",achievementUuids:e.achievementUuids,meta:"Event"===e.meta.type?{...e.meta,release:e.meta.release?new Date(e.meta.release):void 0,deadline:e.meta.deadline?new Date(e.meta.deadline):void 0,observeFrom:e.meta.observeFrom?new Date(e.meta.observeFrom):void 0,observeTo:e.meta.observeTo?new Date(e.meta.observeTo):void 0}:e.meta,count:e.count,targetCount:e.targetCount,completed:e.count>=e.targetCount});var o=s(18),c=s(8);var l=s(16),d=s(10);const u=async(e,t,s,n)=>{const i=await re("auth/login","POST",{body:{code:e,provider:t,...s?{client_id:s}:{},...n?{redirect_uri:n}:{}},errorMessage:"Could not login. Please contact the module administrator."});if(!i)return null;const a=await i.json();return{accessToken:a.access_token,refreshToken:a.refresh_token}},h=async e=>{const t=await re("user","GET",{...e,shouldRefresh:!0});return t&&t.ok?await t.json():{user:null,courseRegistration:null,courseConfiguration:null,assessmentConfigurations:null}},p=async e=>{const t=await re("user/latest_viewed_course","GET",{...e,shouldRefresh:!0});return t&&t.ok?await t.json():{courseRegistration:null,courseConfiguration:null,assessmentConfigurations:null}},g=async(e,t)=>await re("user/latest_viewed_course","PUT",{...e,body:{courseId:t},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),m=async(e,t)=>await re(`${le()}/user/research_agreement`,"PUT",{...e,body:{agreedToResearch:t},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),b=async(e,t)=>await re("config/create","POST",{...e,body:{...t},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),f=async e=>{const t=await re(`${le()}/config`,"GET",{...e,shouldRefresh:!0});return t&&t.ok?t.json():null},v=async e=>{const t=await re(`${le()}/achievements`,"GET",{...e,shouldRefresh:!0});if(!t||!t.ok)return null;return(await t.json()).map((e=>(e=>({uuid:e.uuid||"",title:e.title||"",xp:e.xp,isVariableXp:e.isVariableXp,deadline:null===e.deadline?void 0:new Date(e.deadline),release:null===e.release?void 0:new Date(e.release),isTask:e.isTask,position:e.position,prerequisiteUuids:e.prerequisiteUuids,goalUuids:e.goalUuids,cardBackground:e.cardBackground||"",view:{coverImage:e.view.coverImage||"",completionText:e.view.completionText||"",description:e.view.description||""}}))(e)))},y=async(e,t)=>{const s=await re(`${le()}/admin/users/${t}/goals`,"GET",{...e,shouldRefresh:!0});if(!s||!s.ok)return null;return(await s.json()).map((e=>r(e)))},x=async e=>{const t=await re(`${le()}/self/goals`,"GET",{...e,shouldRefresh:!0});if(!t||!t.ok)return null;return(await t.json()).map((e=>r(e)))},j=async e=>{const t=await re(`${le()}/admin/users`,"GET",{...e,shouldRefresh:!0});if(!t||!t.ok)return null;return(await t.json()).map((e=>({name:e.name,courseRegId:e.courseRegId,group:e.group,username:e.username})))};async function O(e,t){return await re(`${le()}/admin/achievements`,"PUT",{accessToken:t.accessToken,body:{achievements:e.map((e=>(e=>({...e,deadline:e.deadline?e.deadline:null,release:e.release?e.release:null}))(e)))},noHeaderAccept:!0,refreshToken:t.refreshToken,shouldAutoLogout:!1,shouldRefresh:!0})}async function C(e,t){return await re(`${le()}/admin/goals`,"PUT",{accessToken:t.accessToken,body:{goals:e.map((e=>(e=>({targetCount:e.meta.type===a.l.ASSESSMENT?1:e.meta.targetCount,meta:e.meta,text:e.text,type:e.meta.type,uuid:e.uuid}))(e)))},noHeaderAccept:!0,refreshToken:t.refreshToken,shouldAutoLogout:!1,shouldRefresh:!0})}const S=async(e,t)=>await re(`${le()}/self/goals/${e.uuid}/progress`,"POST",{...t,body:{progress:e},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),E=async(e,t,s)=>await re(`${le()}/admin/users/${e}/goals/${t.uuid}/progress`,"POST",{...s,body:{progress:t},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),w=async(e,t)=>await re(`${le()}/admin/achievements/${e}`,"DELETE",{...t,body:{uuid:e},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),_=async(e,t)=>await re(`${le()}/admin/goals/${e}`,"DELETE",{...t,body:{uuid:e},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),A=async e=>{const t=await re(`${le()}/assessments`,"GET",{...e,shouldRefresh:!0});if(!t||!t.ok)return null;return(await t.json()).map((e=>(e.gradingStatus=ce(e.isManuallyGraded,e.status,e.gradedCount,e.questionCount),delete e.gradedCount,delete e.questionCount,e)))},k=async(e,t)=>{let s;if(s=void 0!==t?await re(`${le()}/admin/users/${t}/total_xp`,"GET",{...e,shouldRefresh:!0}):await re(`${le()}/user/total_xp`,"GET",{...e,shouldRefresh:!0}),!s||!s.ok)return null;return await s.json()},T=async e=>{const t=await re(`${le()}/admin/users/total_xp`,"GET",{...e,shouldRefresh:!0});if(!t||!t.ok)return null;return await t.json()},R=async(e,t)=>{const s=await re(`${le()}/admin/users/${e}/assessments`,"GET",{...t,shouldRefresh:!0});if(!s||!s.ok)return null;return(await s.json()).map((e=>(e.gradingStatus=ce(e.isManuallyGraded,e.status,e.gradedCount,e.questionCount),delete e.gradedCount,delete e.questionCount,e)))},I=async(e,t,s)=>{let n;for(n=void 0!==s?await re(`${le()}/admin/users/${s}/assessments/${e}`,"GET",{...t,shouldRefresh:!0}):await re(`${le()}/assessments/${e}`,"GET",{...t,shouldAutoLogout:!1,shouldRefresh:!0});n&&403===n.status;){const s=window.prompt("Please enter password.","");if(!s)return n=null,window.history.back(),null;n=await re(`${le()}/assessments/${e}/unlock`,"POST",{...t,body:{password:s},shouldAutoLogout:!1,shouldRefresh:!0})}if(!n||!n.ok)return null;const i=await n.json();return i.questions=i.questions.map((e=>{if(e.type===o.d.programming){const t=e;t.autogradingResults=t.autogradingResults||[],t.prepend=t.prepend||"",t.postpend=t.postpend||"",t.testcases=t.testcases||[],e=t}if(e.type===o.d.voting){const t=e;t.prepend=t.prepend||"",t.postpend=t.postpend||""}return null===e.grader&&(delete e.grader,delete e.gradedAt),e.library.external.name=e.library.external.name.toUpperCase(),e.library.globals=Object.entries(e.library.globals).map((e=>{try{e[1]=window.eval(e[1])}catch(t){}return e})),e})),i},L=async(e,t,s)=>await re(`${le()}/assessments/question/${e}/answer`,"POST",{...s,body:"object"==typeof t?{answer:t}:{answer:`${t}`},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),P=async(e,t)=>await re(`${le()}/assessments/${e}/submit`,"POST",{...t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),N=async(e,t)=>{const s=await re(`${le()}/admin/grading?group=${t}`,"GET",{...e,shouldRefresh:!0});if(!s)return null;return(await s.json()).map((e=>{const t={assessmentId:e.assessment.id,assessmentName:e.assessment.title,assessmentType:e.assessment.type,studentId:e.student.id,studentName:e.student.name,submissionId:e.id,submissionStatus:e.status,groupName:e.student.groupName,groupLeaderId:e.student.groupLeaderId,gradingStatus:"none",questionCount:e.assessment.questionCount,gradedCount:e.gradedCount,initialXp:e.xp,xpAdjustment:e.xpAdjustment,currentXp:e.xp+e.xpAdjustment,maxXp:e.assessment.maxXp,xpBonus:e.xpBonus};return t.gradingStatus=ce(e.assessment.isManuallyGraded,t.submissionStatus,t.gradedCount,t.questionCount),t})).sort(((e,t)=>e.assessmentId!==t.assessmentId?t.assessmentId-e.assessmentId:t.submissionId-e.submissionId))},D=async(e,t)=>{const s=await re(`${le()}/admin/grading/${e}`,"GET",{...t,shouldRefresh:!0});if(!s)return null;return(await s.json()).map((e=>{const{student:t,question:s,grade:n}=e,i={question:{answer:s.answer,autogradingResults:s.autogradingResults||[],choices:s.choices,content:s.content,id:s.id,library:(a=s.library,{external:{name:a.external.name.toUpperCase(),symbols:a.external.symbols},execTimeMs:null==a.execTimeMs?void 0:a.execTimeMs,variant:null==a.variant?void 0:a.variant,globals:Object.entries(a.globals).map((e=>{try{e[1]=window.eval(e[1])}catch(t){}return e}))}),solution:e.solution||s.solution||null,solutionTemplate:s.solutionTemplate,prepend:s.prepend||"",postpend:s.postpend||"",testcases:s.testcases||[],type:s.type,maxXp:s.maxXp},student:t,grade:{xp:n.xp,xpAdjustment:n.xpAdjustment,comments:n.comments}};var a;return null!==e.grade.grader&&(i.grade.grader=e.grade.grader,i.grade.gradedAt=e.grade.gradedAt),i}))},M=async(e,t,s,n,i)=>await re(`${le()}/admin/grading/${e}/${t}`,"POST",{...n,body:{grading:{xpAdjustment:s,comments:i}},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),U=async(e,t)=>await re(`${le()}/admin/grading/${e}/autograde`,"POST",{...t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),B=async(e,t,s)=>await re(`${le()}/admin/grading/${e}/${t}/autograde`,"POST",{...s,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),G=async(e,t)=>await re(`${le()}/admin/grading/${e}/unsubmit`,"POST",{...t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),F=async e=>{const t=await re(`${le()}/notifications`,"GET",{...e,shouldAutoLogout:!1});let s=[];if(!t||!t.ok)return s;return s=(await t.json()).map((e=>({id:e.id,type:e.type,assessment_id:e.assessment_id||void 0,assessment_type:e.assessment?e.assessment.type:void 0,assessment_title:e.assessment?e.assessment.title:void 0,submission_id:e.submission_id||void 0}))),s},H=async(e,t)=>await re(`${le()}/notifications/acknowledge`,"POST",{...e,body:{notificationIds:t},shouldAutoLogout:!1}),V=async e=>{const t=await re(`${le()}/sourcecast`,"GET",{...e,shouldAutoLogout:!1,shouldRefresh:!0});return t&&t.ok?await t.json():null},W=async(e,t,s,n,i,a)=>{const r=new FormData,o=Date.now().toString()+".wav";r.append("sourcecast[title]",e),r.append("sourcecast[description]",t),r.append("sourcecast[uid]",s),r.append("sourcecast[audio]",n,o),r.append("sourcecast[playbackData]",JSON.stringify(i));return await re(`${le()}/admin/sourcecast`,"POST",{...a,body:r,noContentType:!0,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0})},q=async(e,t)=>await re(`${le()}/admin/sourcecast/${e}`,"DELETE",{...t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),$=async(e,t,s)=>await re(`${le()}/admin/assessments/${e}`,"POST",{...s,body:t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),X=async(e,t)=>await re(`${le()}/admin/assessments/${e}`,"DELETE",{...t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),z=async(e,t,s,n)=>{const i=new FormData;i.append("assessment[file]",e),i.append("forceUpdate",String(s)),i.append("assessmentConfigId",String(n));return await re(`${le()}/admin/assessments`,"POST",{...t,body:i,noContentType:!0,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0})},Y=async e=>{const t=await re(`${le()}/admin/grading/summary`,"GET",{...e,shouldRefresh:!0});return t&&t.ok?await t.json():null},K=async(e,t)=>await re(`${le()}/admin/config`,"PUT",{...e,body:t,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),Q=async e=>{const t=await re(`${le()}/admin/config/assessment_configs`,"GET",{...e,shouldRefresh:!0});return t&&t.ok?await t.json():null},J=async(e,t,s)=>await re(`${null!=s?`courses/${s}`:le()}/admin/config/assessment_configs`,"PUT",{...e,body:{assessmentConfigs:t},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),Z=async(e,t)=>await re(`${le()}/admin/config/assessment_config/${t.assessmentConfigId}`,"DELETE",{...e,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),ee=async e=>{const t=await re(`${le()}/admin/users`,"GET",{...e,shouldRefresh:!0});return t&&t.ok?await t.json():null},te=async(e,t,s)=>await re(`${le()}/admin/users`,"PUT",{...e,body:{users:t,provider:s},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),se=async(e,t,s)=>await re(`${le()}/admin/users/${t}/role`,"PUT",{...e,body:{role:s},noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0}),ne=async(e,t)=>await re(`${le()}/admin/users/${t}`,"DELETE",{...e,noHeaderAccept:!0,shouldAutoLogout:!1,shouldRefresh:!0});async function ie(e){const t=await re("devices","GET",{accessToken:e.accessToken,refreshToken:e.refreshToken,shouldRefresh:!0});return t&&t.ok?t.json():null}async function ae(e,t){const s=await re(`devices/${e.id}/ws_endpoint`,"GET",{accessToken:t.accessToken,refreshToken:t.refreshToken,shouldRefresh:!0,shouldAutoLogout:!1});return s&&s.ok?s.json():null}const re=async(e,t,s)=>{const n=new Headers;s.noHeaderAccept||n.append("Accept","application/json"),s.accessToken&&n.append("Authorization",`Bearer ${s.accessToken}`);const a={method:t,headers:n};s.body&&(s.noContentType?a.body=s.body:(n.append("Content-Type","application/json"),a.body=JSON.stringify(s.body)));try{const n=await fetch(`${l.b.backendUrl}/v2/${e}`,a);if(s.shouldRefresh&&n&&401===n.status){const n=await(async e=>{const t=await re("auth/refresh","POST",{body:{refresh_token:e}});if(!t)return null;const s=await t.json();return{accessToken:s.access_token,refreshToken:s.refresh_token}})(s.refreshToken);i.a.dispatch(c.a.setTokens(n));const a={...s,accessToken:n.accessToken,shouldRefresh:!1};return re(e,t,a)}return n&&!n.ok&&!1===s.shouldAutoLogout||n.ok?n:(Object(d.e)(s.errorMessage?s.errorMessage:`Error while communicating with backend: ${n.status} ${n.statusText}${401===n.status||403===n.status?"; try logging in again, after manually saving any work.":""}`),null)}catch(r){return Object(d.e)(s.errorMessage?s.errorMessage:"Error while communicating with backend; check your network?"),null}};function*oe(e){if(!e)return void(yield Object(n.a)(d.e,"Couldn't reach our servers. Are you online?"));let t=yield e.text();t.length>100&&e.status&&(t=`Something went wrong (got ${e.status} response)`),yield Object(n.a)(d.e,t)}const ce=(e,t,s,n)=>e&&"submitted"===t?0===s?"none":s===n?"graded":"grading":"excluded",le=()=>{const e=i.a.getState().session.courseId;if(e)return`courses/${e}`;throw Object(d.e)("No course selected!",1e3),new Error("No course selected")}},300:function(e,t,s){"use strict";var n=s(106);const i={log:e=>function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];e(s.map((e=>"string"===typeof e?e:Object(n.stringify)(e))).join(" "))}};const a=new class{constructor(){this.buffer=void 0,this.workspaceLocation=void 0,this.buffer=[]}dump(){const e=[...this.buffer];return this.resetBuffer(),e}push(e,t){this.handleWorkspaceChange(t),this.buffer.push(e)}attachConsole(e){const t=t=>this.push(t,e),s={};return Object.entries(i).forEach((e=>{let[n,i]=e;s[n]=console[n],console[n]=i(t)})),()=>{Object.entries(i).forEach((e=>{let[t]=e;console[t]=s[t]}))}}handleWorkspaceChange(e){this.hasWorkspace()&&e===this.workspaceLocation||(this.workspaceLocation=e,this.resetBuffer())}hasWorkspace(){return Boolean(this.workspaceLocation)}resetBuffer(){this.buffer=[]}};t.a=a},301:function(e,t,s){"use strict";var n=s(3),i=s(42),a=s(88),r=s(20),o=s.n(r),c=s(1),l=s(136),d=s(148),u=s.n(d),h=s(208),p=s.n(h),g=s(227),m=s(0);const b=e=>{const{onFocus:t,onBlur:s}=e,i=c.useRef(null),a=c.useRef(null),r=e.handleBrowseHistoryDown,l=e.handleBrowseHistoryUp;c.useEffect((()=>{if(!i.current)return;const e=i.current.editor;t&&e.on("focus",(()=>t(e))),s&&e.on("blur",s)})),c.useEffect((()=>{a.current&&!e.disableScrolling&&(a.current.clientWidth>=window.innerWidth-50||a.current.scrollIntoView())})),Object(g.b)(e.sourceChapter,e.sourceVariant,e.externalLibrary);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{className:"repl-react-ace react-ace",mode:Object(g.a)(e.sourceChapter,e.sourceVariant,e.externalLibrary),theme:"source",height:"1px",width:"100%",value:e.replValue,onChange:e.handleReplValueChange,commands:[{name:"browseHistoryDown",bindKey:{win:"Down",mac:"Down"},exec:r},{name:"browseHistoryUp",bindKey:{win:"Up",mac:"Up"},exec:l},{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:()=>{e.handleReplEval(),a.current&&!e.disableScrolling&&a.current.scrollIntoView()}}],minLines:1,maxLines:20,fontSize:17,highlightActiveLine:!1,showGutter:!1,showPrintMargin:!1,setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"},ref:i}),Object(m.jsx)("div",{className:o()(n.a.BUTTON_GROUP,n.a.DARK),children:e.replButtons}),Object(m.jsx)(p.a,{minWidth:769,children:Object(m.jsx)("div",{ref:a})})]})},f=e=>{switch(e.output.type){case"code":return Object(m.jsx)(i.e,{children:Object(m.jsx)(i.M,{className:"code-output",children:e.output.value})});case"running":return Object(m.jsx)(i.e,{children:Object(m.jsx)(i.M,{className:"log-output",children:e.output.consoleLogs.join("\n")})});case"result":return e.usingSubst&&e.output.value instanceof Array?Object(m.jsx)(i.e,{children:Object(m.jsx)(i.M,{className:"log-output",children:"Check out the Stepper tab!"})}):0===e.output.consoleLogs.length?Object(m.jsx)(i.e,{children:Object(m.jsx)(i.M,{className:"result-output",children:e.output.value})}):Object(m.jsxs)(i.e,{children:[Object(m.jsx)(i.M,{className:"log-output",children:e.output.consoleLogs.join("\n")}),Object(m.jsx)(i.M,{className:"result-output",children:e.output.value})]});case"errors":return 0===e.output.consoleLogs.length?Object(m.jsx)(i.e,{children:Object(m.jsx)(i.M,{className:"error-output",children:Object(a.parseError)(e.output.errors)})}):Object(m.jsxs)(i.e,{children:[Object(m.jsx)(i.M,{className:"log-output",children:e.output.consoleLogs.join("\n")}),Object(m.jsx)("br",{}),Object(m.jsx)(i.M,{className:"error-output",children:Object(a.parseError)(e.output.errors)})]});default:return Object(m.jsx)(i.e,{children:"''"})}},v={goGreen:()=>{}};t.a=e=>{const t=e.output.map(((t,s)=>{var n;return Object(m.jsx)(f,{output:t,usingSubst:null!==(n=e.usingSubst)&&void 0!==n&&n},s)}));return Object(m.jsx)("div",{className:"Repl",style:{display:e.hidden?"none":void 0},children:Object(m.jsxs)("div",{className:"repl-output-parent",children:[t,!e.inputHidden&&Object(m.jsx)(l.HotKeys,{className:o()("repl-input-parent","row",n.a.CARD,n.a.ELEVATION_0),handlers:v,children:Object(m.jsx)(b,{...e})})]})})}},31:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"h",(function(){return d})),s.d(t,"j",(function(){return u})),s.d(t,"k",(function(){return h})),s.d(t,"l",(function(){return p})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return m})),s.d(t,"o",(function(){return b})),s.d(t,"q",(function(){return f})),s.d(t,"w",(function(){return v})),s.d(t,"r",(function(){return y})),s.d(t,"s",(function(){return x})),s.d(t,"p",(function(){return j})),s.d(t,"t",(function(){return O})),s.d(t,"u",(function(){return C})),s.d(t,"v",(function(){return S})),s.d(t,"x",(function(){return E})),s.d(t,"y",(function(){return w})),s.d(t,"z",(function(){return _})),s.d(t,"A",(function(){return A})),s.d(t,"B",(function(){return k})),s.d(t,"D",(function(){return T})),s.d(t,"E",(function(){return R})),s.d(t,"C",(function(){return I})),s.d(t,"G",(function(){return L})),s.d(t,"F",(function(){return P})),s.d(t,"H",(function(){return N})),s.d(t,"I",(function(){return D})),s.d(t,"K",(function(){return M})),s.d(t,"J",(function(){return U})),s.d(t,"i",(function(){return B}));const n="ADD_HTML_CONSOLE_ERROR",i="BEGIN_CLEAR_CONTEXT",a="BROWSE_REPL_HISTORY_DOWN",r="BROWSE_REPL_HISTORY_UP",o="CHANGE_EXEC_TIME",c="CHANGE_EXTERNAL_LIBRARY",l="CHANGE_SIDE_CONTENT_HEIGHT",d="CHANGE_STEP_LIMIT",u="CHAPTER_SELECT",h="CLEAR_REPL_INPUT",p="CLEAR_REPL_OUTPUT",g="CLEAR_REPL_OUTPUT_LAST",m="END_CLEAR_CONTEXT",b="EVAL_EDITOR",f="EVAL_REPL",v="PROMPT_AUTOCOMPLETE",y="EVAL_SILENT",x="EVAL_TESTCASE",j="EVAL_EDITOR_AND_TESTCASES",O="MOVE_CURSOR",C="NAV_DECLARATION",S="PLAYGROUND_EXTERNAL_SELECT ",E="RESET_TESTCASE",w="RESET_WORKSPACE",_="SEND_REPL_INPUT_TO_OUTPUT",A="TOGGLE_EDITOR_AUTORUN",k="TOGGLE_USING_SUBST",T="UPDATE_CURRENT_ASSESSMENT_ID",R="UPDATE_CURRENT_SUBMISSION_ID",I="UPDATE_ACTIVE_EDITOR_TAB",L="UPDATE_EDITOR_VALUE",P="UPDATE_EDITOR_BREAKPOINTS",N="UPDATE_HAS_UNSAVED_CHANGES",D="UPDATE_REPL_VALUE",M="UPDATE_WORKSPACE",U="UPDATE_SUBLANGUAGE",B="CHANGE_SUBLANGUAGE"},310:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ACORN_PARSE_OPTIONS=t.sourceLanguages=t.JSSLANG_PROPERTIES=t.UNKNOWN_LOCATION=t.MAX_LIST_DISPLAY_LENGTH=t.MODULE_CONTEXTS_ID=t.MODULE_PARAMS_ID=t.NATIVE_STORAGE_ID=t.GLOBAL=t.TRY_AGAIN=t.CUT=void 0;const n=s(28);t.CUT="cut",t.TRY_AGAIN="retry",t.GLOBAL="undefined"===typeof window?e:window,t.NATIVE_STORAGE_ID="nativeStorage",t.MODULE_PARAMS_ID="moduleParams",t.MODULE_CONTEXTS_ID="moduleContexts",t.MAX_LIST_DISPLAY_LENGTH=100,t.UNKNOWN_LOCATION={start:{line:-1,column:-1},end:{line:-1,column:-1}},t.JSSLANG_PROPERTIES={maxExecTime:1e3,factorToIncreaseBy:10},t.sourceLanguages=[{chapter:n.Chapter.CLANG,variant:n.Variant.DEFAULT}],t.ACORN_PARSE_OPTIONS={ecmaVersion:2015}}).call(this,s(61))},311:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeSourceError=void 0;const n=s(310),i=s(28);t.RuntimeSourceError=class{constructor(e){this.type=i.ErrorType.RUNTIME,this.severity=i.ErrorSeverity.ERROR,this.location=e?e.loc:n.UNKNOWN_LOCATION}explain(){return""}elaborate(){return this.explain()}}},312:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whileStatement=t.ifStatement=t.variableDeclarator=t.variableDeclaration=t.arrowFunctionExpression=t.blockExpression=t.functionDeclaration=t.functionDeclarationExpression=t.primitive=t.unaryExpression=t.binaryExpression=t.assignmentExpression=t.arrayExpression=t.conditionalExpression=t.mutateToConditionalExpression=t.logicalExpression=t.mutateToMemberExpression=t.mutateToReturnStatement=t.mutateToExpressionStatement=t.mutateToAssignmentExpression=t.mutateToCallExpression=t.objectExpression=t.property=t.returnStatement=t.program=t.blockStatement=t.functionExpression=t.blockArrowFunction=t.expressionStatement=t.callExpression=t.constantDeclaration=t.declaration=t.memberExpression=t.literal=t.identifier=t.locationDummyNode=t.getVariableDecarationName=void 0;t.getVariableDecarationName=e=>e.declarations[0].id.name;t.locationDummyNode=(e,s)=>(0,t.literal)("Dummy",{start:{line:e,column:s},end:{line:e,column:s}});t.identifier=(e,t)=>({type:"Identifier",name:e,loc:t});t.literal=(e,t)=>({type:"Literal",value:e,loc:t});t.memberExpression=(e,s)=>({type:"MemberExpression",object:e,computed:"number"===typeof s,optional:!1,property:"number"===typeof s?(0,t.literal)(s):(0,t.identifier)(s)});t.declaration=(e,s,n,i)=>({type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:(0,t.identifier)(e),init:n}],kind:s,loc:i});t.constantDeclaration=(e,s,n)=>(0,t.declaration)(e,"const",s,n);t.callExpression=(e,t,s)=>({type:"CallExpression",callee:e,arguments:t,optional:!1,loc:s});t.expressionStatement=e=>({type:"ExpressionStatement",expression:e});t.blockArrowFunction=(e,s,n)=>({type:"ArrowFunctionExpression",expression:!1,generator:!1,params:e,body:Array.isArray(s)?(0,t.blockStatement)(s):s,loc:n});t.functionExpression=(e,s,n)=>({type:"FunctionExpression",id:null,async:!1,generator:!1,params:e,body:Array.isArray(s)?(0,t.blockStatement)(s):s,loc:n});t.blockStatement=e=>({type:"BlockStatement",body:e});t.program=e=>({type:"Program",sourceType:"module",body:e});t.returnStatement=(e,t)=>({type:"ReturnStatement",argument:e,loc:t});t.property=(e,s)=>({type:"Property",method:!1,shorthand:!1,computed:!1,key:(0,t.identifier)(e),value:s,kind:"init"});t.objectExpression=e=>({type:"ObjectExpression",properties:e});t.mutateToCallExpression=(e,t,s)=>{e.type="CallExpression",(e=e).callee=t,e.arguments=s};t.mutateToAssignmentExpression=(e,t,s)=>{e.type="AssignmentExpression",(e=e).operator="=",e.left=t,e.right=s};t.mutateToExpressionStatement=(e,t)=>{e.type="ExpressionStatement",(e=e).expression=t};t.mutateToReturnStatement=(e,t)=>{e.type="ReturnStatement",(e=e).argument=t};t.mutateToMemberExpression=(e,t,s)=>{e.type="MemberExpression",(e=e).object=t,e.property=s,e.computed=!1};t.logicalExpression=(e,t,s,n)=>({type:"LogicalExpression",operator:e,left:t,right:s,loc:n});t.mutateToConditionalExpression=(e,t,s,n)=>{e.type="ConditionalExpression",(e=e).test=t,e.consequent=s,e.alternate=n};t.conditionalExpression=(e,t,s,n)=>({type:"ConditionalExpression",test:e,consequent:t,alternate:s,loc:n});t.arrayExpression=e=>({type:"ArrayExpression",elements:e});t.assignmentExpression=(e,t)=>({type:"AssignmentExpression",operator:"=",left:e,right:t});t.binaryExpression=(e,t,s,n)=>({type:"BinaryExpression",operator:e,left:t,right:s,loc:n});t.unaryExpression=(e,t,s)=>({type:"UnaryExpression",operator:e,prefix:!0,argument:t,loc:s});t.primitive=e=>void 0===e?(0,t.identifier)("undefined"):(0,t.literal)(e);t.functionDeclarationExpression=(e,t,s,n)=>({type:"FunctionExpression",id:e,params:t,body:s,loc:n});t.functionDeclaration=(e,t,s,n)=>({type:"FunctionDeclaration",id:e,params:t,body:s,loc:n});t.blockExpression=(e,t)=>({type:"BlockExpression",body:e,loc:t});t.arrowFunctionExpression=(e,t,s)=>({type:"ArrowFunctionExpression",expression:"BlockStatement"!==t.type,generator:!1,params:e,body:t,loc:s});t.variableDeclaration=(e,t)=>({type:"VariableDeclaration",kind:"const",declarations:e,loc:t});t.variableDeclarator=(e,t,s)=>({type:"VariableDeclarator",id:e,init:t,loc:s});t.ifStatement=(e,t,s,n)=>({type:"IfStatement",test:e,consequent:t,alternate:s,loc:n});t.whileStatement=(e,t,s)=>({type:"WhileStatement",test:t,body:e,loc:s})},333:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularImportError=t.CannotFindModuleError=t.ConsecutiveSlashesInFilePathError=t.IllegalCharInFilePathError=t.InvalidFilePathError=void 0;const n=s(310),i=s(334),a=s(28);class r{constructor(e){this.filePath=e,this.type=a.ErrorType.TYPE,this.severity=a.ErrorSeverity.ERROR,this.location=n.UNKNOWN_LOCATION}}t.InvalidFilePathError=r;t.IllegalCharInFilePathError=class extends r{explain(){const e=Object.keys(i.nonAlphanumericCharEncoding).map((e=>`'${e}'`)).join(", ");return`File path '${this.filePath}' must only contain alphanumeric chars and/or ${e}.`}elaborate(){return"Rename the offending file path to only use valid chars."}};t.ConsecutiveSlashesInFilePathError=class extends r{explain(){return`File path '${this.filePath}' cannot contain consecutive slashes '//'.`}elaborate(){return"Remove consecutive slashes from the offending file path."}};t.CannotFindModuleError=class{constructor(e){this.moduleFilePath=e,this.type=a.ErrorType.TYPE,this.severity=a.ErrorSeverity.ERROR,this.location=n.UNKNOWN_LOCATION}explain(){return`Cannot find module '${this.moduleFilePath}'.`}elaborate(){return"Check that the module file path resolves to an existing file."}};t.CircularImportError=class{constructor(e){this.filePathsInCycle=e,this.type=a.ErrorType.TYPE,this.severity=a.ErrorSeverity.ERROR,this.location=n.UNKNOWN_LOCATION}explain(){return`Circular import detected: ${this.filePathsInCycle.map((e=>`'${e}'`)).reverse().join(" -> ")}.`}elaborate(){return"Break the circular import cycle by removing imports from any of the offending files."}}},334:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFilePath=t.validateFilePath=t.transformFunctionNameToInvokedFunctionResultVariableName=t.transformFilePathToValidFunctionName=t.nonAlphanumericCharEncoding=void 0;const n=s(333);t.nonAlphanumericCharEncoding={_:"_","/":"$",".":"$$$$dot$$$$","-":"$$$$dash$$$$"};t.transformFilePathToValidFunctionName=e=>{const s=Object.entries(t.nonAlphanumericCharEncoding).reduce(((e,t)=>{let[s,n]=t;return t=>e(t).replaceAll(s,n)}),(e=>e));return`__${s(e)}__`};t.transformFunctionNameToInvokedFunctionResultVariableName=e=>`_${e}_`;const i=e=>null!==/[a-zA-Z0-9]/i.exec(e);t.validateFilePath=e=>{if(e.includes("//"))return new n.ConsecutiveSlashesInFilePathError(e);for(const s of e)if(!i(s)&&!(s in t.nonAlphanumericCharEncoding))return new n.IllegalCharInFilePathError(e);return null};t.isFilePath=e=>e.includes("/")},35:function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return d})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return h})),s.d(t,"e",(function(){return p}));var n=s(1),i=s.n(n),a=s(34),r=s(208),o=s(16);function c(e,t){const[s,n]=i.a.useState(t);return i.a.useEffect((()=>{(async()=>{const t=await e();n(t)})()}),[e]),{value:s,setValue:n}}function l(e){const[t,s]=i.a.useState(e);return{value:t,setValue:s,inputProps:{value:t,onChange:e=>{s(e.target.value)}}}}function d(e,t){const[s,n]=i.a.useState(((e,t)=>{const s=window.localStorage.getItem(e);return s?JSON.parse(s):t})(e,t));return i.a.useEffect((()=>{((e,t)=>{window.localStorage.setItem(e,JSON.stringify(t))})(e,s)}),[e,s]),[s,n]}const u=a.d,h=e=>{const[t,s]=i.a.useState(0),[n,a]=i.a.useState(0),r=i.a.useMemo((()=>new ResizeObserver(((e,t)=>{if(1!==e.length)throw new Error("Expected only a single HTML element to be observed by the ResizeObserver.");const n=e[0].contentRect;s(n.width),a(n.height)}))),[]);return i.a.useEffect((()=>{const t=e.current;if(null!==t)return r.observe(t),()=>r.disconnect()}),[e,r]),[t,n]},p=()=>({isMobileBreakpoint:Object(r.useMediaQuery)({maxWidth:o.b.mobileBreakpoint})})},37:function(e,t,s){"use strict";s.d(t,"d",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"e",(function(){return a})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"j",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return h}));const n="SAVE_SOURCECAST_DATA",i="SET_CURRENT_PLAYER_TIME",a="SET_CODE_DELTAS_TO_APPLY",r="SET_INPUT_TO_APPLY",o="SET_SOURCECAST_DATA",c="SET_SOURCECAST_PLAYBACK_DURATION",l="SET_SOURCECAST_PLAYBACK_STATUS";let d,u,h;!function(e){e.run="run"}(d||(d={})),function(e){e.forcedPaused="forcedPaused",e.playing="playing",e.paused="paused"}(u||(u={})),function(e){e.notStarted="notStarted",e.recording="recording",e.paused="paused",e.finished="finished"}(h||(h={}))},38:function(e,t,s){"use strict";s.r(t),s.d(t,"fetchAuth",(function(){return r})),s.d(t,"fetchUserAndCourse",(function(){return o})),s.d(t,"fetchCourseConfig",(function(){return c})),s.d(t,"fetchAssessment",(function(){return l})),s.d(t,"fetchAssessmentAdmin",(function(){return d})),s.d(t,"fetchAssessmentOverviews",(function(){return u})),s.d(t,"fetchTotalXp",(function(){return h})),s.d(t,"fetchTotalXpAdmin",(function(){return p})),s.d(t,"fetchAllUserXp",(function(){return g})),s.d(t,"fetchGrading",(function(){return m})),s.d(t,"fetchGradingOverviews",(function(){return b})),s.d(t,"login",(function(){return f})),s.d(t,"logoutGoogle",(function(){return v})),s.d(t,"loginGitHub",(function(){return y})),s.d(t,"logoutGitHub",(function(){return x})),s.d(t,"setTokens",(function(){return j})),s.d(t,"setUser",(function(){return O})),s.d(t,"setCourseConfiguration",(function(){return C})),s.d(t,"setCourseRegistration",(function(){return S})),s.d(t,"setAssessmentConfigurations",(function(){return E})),s.d(t,"setAdminPanelCourseRegistrations",(function(){return w})),s.d(t,"setGoogleUser",(function(){return _})),s.d(t,"setGitHubAssessment",(function(){return A})),s.d(t,"setGitHubOctokitObject",(function(){return k})),s.d(t,"setGitHubAccessToken",(function(){return T})),s.d(t,"removeGitHubOctokitObjectAndAccessToken",(function(){return R})),s.d(t,"submitAnswer",(function(){return I})),s.d(t,"submitAssessment",(function(){return L})),s.d(t,"submitGrading",(function(){return P})),s.d(t,"submitGradingAndContinue",(function(){return N})),s.d(t,"reautogradeSubmission",(function(){return D})),s.d(t,"reautogradeAnswer",(function(){return M})),s.d(t,"updateAssessmentOverviews",(function(){return U})),s.d(t,"updateTotalXp",(function(){return B})),s.d(t,"updateAllUserXp",(function(){return G})),s.d(t,"updateAssessment",(function(){return F})),s.d(t,"updateGradingOverviews",(function(){return H})),s.d(t,"updateGrading",(function(){return V})),s.d(t,"unsubmitSubmission",(function(){return W})),s.d(t,"fetchNotifications",(function(){return q})),s.d(t,"acknowledgeNotifications",(function(){return $})),s.d(t,"updateNotifications",(function(){return X})),s.d(t,"updateLatestViewedCourse",(function(){return z})),s.d(t,"updateCourseConfig",(function(){return Y})),s.d(t,"fetchAssessmentConfigs",(function(){return K})),s.d(t,"updateAssessmentConfigs",(function(){return Q})),s.d(t,"deleteAssessmentConfig",(function(){return J})),s.d(t,"fetchAdminPanelCourseRegistrations",(function(){return Z})),s.d(t,"updateUserRole",(function(){return ee})),s.d(t,"deleteUserCourseRegistration",(function(){return te})),s.d(t,"updateCourseResearchAgreement",(function(){return se}));var n=s(7),i=s(284),a=s(15);const r=(e,t)=>Object(n.action)(a.j,{code:e,providerId:t}),o=()=>Object(n.action)(a.q),c=()=>Object(n.action)(a.k),l=e=>Object(n.action)(a.f,e),d=(e,t)=>Object(n.action)(a.g,{assessmentId:e,courseRegId:t}),u=()=>Object(n.action)(a.i),h=()=>Object(n.action)(a.o),p=e=>Object(n.action)(a.p,e),g=()=>Object(n.action)(a.e),m=e=>Object(n.action)(a.l,e),b=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Object(n.action)(a.m,e)},f=e=>Object(n.action)(a.r,e),v=()=>Object(n.action)(a.u),y=()=>Object(n.action)(a.s),x=()=>Object(n.action)(a.t),j=e=>{let{accessToken:t,refreshToken:s}=e;return Object(n.action)(a.G,{accessToken:t,refreshToken:s})},O=e=>Object(n.action)(a.H,e),C=e=>Object(n.action)(a.A,e),S=e=>Object(n.action)(a.B,e),E=e=>Object(n.action)(a.z,e),w=e=>Object(n.action)(a.y,e),_=e=>Object(n.action)(a.F,e),A=e=>Object(n.action)(a.D,e),k=e=>Object(n.action)(a.E,Object(i.a)(e||"")),T=e=>Object(n.action)(a.C,e),R=()=>Object(n.action)(a.x),I=(e,t)=>Object(n.action)(a.I,{id:e,answer:t}),L=e=>Object(n.action)(a.J,e),P=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return Object(n.action)(a.K,{submissionId:e,questionId:t,xpAdjustment:s,comments:i})},N=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;return Object(n.action)(a.L,{submissionId:e,questionId:t,xpAdjustment:s,comments:i})},D=e=>Object(n.action)(a.w,e),M=(e,t)=>Object(n.action)(a.v,{submissionId:e,questionId:t}),U=e=>Object(n.action)(a.Q,e),B=e=>Object(n.action)(a.X,e),G=e=>Object(n.action)(a.N,e),F=e=>Object(n.action)(a.O,e),H=e=>Object(n.action)(a.U,e),V=(e,t)=>Object(n.action)(a.T,{submissionId:e,grading:t}),W=e=>Object(n.action)(a.M,{submissionId:e}),q=()=>Object(n.action)(a.n),$=e=>Object(n.action)(a.a,{withFilter:e}),X=e=>Object(n.action)(a.W,e),z=e=>Object(n.action)(a.V,{courseId:e}),Y=e=>Object(n.action)(a.R,e),K=()=>Object(n.action)(a.h),Q=e=>Object(n.action)(a.P,e),J=e=>Object(n.action)(a.b,e),Z=()=>Object(n.action)(a.d),ee=(e,t)=>Object(n.action)(a.Y,{courseRegId:e,role:t}),te=e=>Object(n.action)(a.c,{courseRegId:e}),se=e=>Object(n.action)(a.S,{agreedToResearch:e})},383:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProp=t.setProp=t.evaluateBinaryExpression=t.binaryOp=t.evaluateUnaryExpression=t.unaryOp=t.boolOrErr=t.callIfFuncAndRightArgs=t.makeLazyFunction=t.wrapLazyCallee=t.forceIt=void 0;const n=s(279),i=s(157),a=s(311),r=s(312),o=s(312),c=s(574),l=s(384);function d(e){if(void 0!==e&&null!==e&&void 0!==e.isMemoized){if(e.isMemoized)return e.memoizedValue;const t=d(e.f());return e.isMemoized=!0,e.memoizedValue=t,t}return e}function u(e,t){return"!"===e?!t:"-"===e?-t:"typeof"===e?typeof t:+t}function h(e,t,s){switch(e){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"/":return t/s;case"%":return t%s;case"===":return t===s;case"!==":return t!==s;case"<=":return t<=s;case"<":return t<s;case">":return t>s;case">=":return t>=s;default:return}}t.forceIt=d,t.wrapLazyCallee=function(e){if("function"===typeof(e=d(e))){const t=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e(...s.map(d))};return(0,c.makeWrapper)(e,t),t[Symbol.toStringTag]=()=>e.toString(),t.toString=()=>e.toString(),t}if(e instanceof n.LazyBuiltIn){if(e.evaluateArgs){const t=function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e.func(...s.map(d))};return(0,c.makeWrapper)(e.func,t),t[Symbol.toStringTag]=()=>e.toString(),t.toString=()=>e.toString(),t}return e}return e},t.makeLazyFunction=function(e){return new n.LazyBuiltIn(e,!1)},t.callIfFuncAndRightArgs=function(e,t,s){for(var r=arguments.length,c=new Array(r>3?r-3:0),l=3;l<r;l++)c[l-3]=arguments[l];const u=o.callExpression(o.locationDummyNode(t,s),c,{start:{line:t,column:s},end:{line:t,column:s}});if("function"===typeof e){const t=e;void 0!==e.transformedFunction&&(e=e.transformedFunction);const s=e.length,n=c.length,r=void 0!==e.minArgsNeeded;if(r?e.minArgsNeeded>n:s!==n)throw new i.InvalidNumberOfArguments(u,r?e.minArgsNeeded:s,n,r);try{return t(...c.map(d))}catch(h){throw h instanceof a.RuntimeSourceError||h instanceof i.ExceptionError?h:new i.ExceptionError(h,u.loc)}}else{if(!(e instanceof n.LazyBuiltIn))throw new i.CallingNonFunctionValue(e,u);try{return e.evaluateArgs&&(c=c.map(d)),e.func(...c)}catch(h){throw h instanceof a.RuntimeSourceError||h instanceof i.ExceptionError?h:new i.ExceptionError(h,u.loc)}}},t.boolOrErr=function(e,t,s){e=d(e);const n=l.checkIfStatement(o.locationDummyNode(t,s),e);if(void 0===n)return e;throw n},t.unaryOp=function(e,t,s,n){t=d(t);const i=l.checkUnaryExpression(o.locationDummyNode(s,n),e,t);if(void 0===i)return u(e,t);throw i},t.evaluateUnaryExpression=u,t.binaryOp=function(e,t,s,n,i){t=d(t),s=d(s);const a=l.checkBinaryExpression(o.locationDummyNode(n,i),e,t,s);if(void 0===a)return h(e,t,s);throw a},t.evaluateBinaryExpression=h;t.setProp=(e,t,s,n,i)=>{const a=(0,r.locationDummyNode)(n,i),o=l.checkMemberAccess(a,e,t);if(void 0===o)return e[t]=s;throw o};t.getProp=(e,t,s,n)=>{const a=(0,r.locationDummyNode)(s,n),o=l.checkMemberAccess(a,e,t);if(void 0===o){if(void 0===e[t]||e.hasOwnProperty(t))return e[t];throw new i.GetInheritedPropertyError(a,e,t)}throw o}},384:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIdentifier=t.checkMemberAccess=t.checkIfStatement=t.checkBinaryExpression=t.checkUnaryExpression=t.TypeError=void 0;const n=s(311),i=s(28),a=" on left hand side of operation",r=" on right hand side of operation";class o extends n.RuntimeSourceError{constructor(e,t,s,n){super(e),this.side=t,this.expected=s,this.got=n,this.type=i.ErrorType.RUNTIME,this.severity=i.ErrorSeverity.ERROR}explain(){return`Expected ${this.expected}${this.side}, got ${this.got}.`}elaborate(){return this.explain()}}t.TypeError=o;const c=e=>null===e?"null":Array.isArray(e)?"array":typeof e,l=e=>"number"===c(e),d=e=>"string"===c(e),u=e=>"boolean"===c(e);t.checkUnaryExpression=(e,t,s)=>"+"!==t&&"-"!==t||l(s)?"!"!==t||u(s)?void 0:new o(e,"","boolean",c(s)):new o(e,"","number",c(s));t.checkBinaryExpression=(e,t,s,n)=>{switch(t){case"-":case"*":case"/":case"%":return l(s)?l(n)?void 0:new o(e,r,"number",c(n)):new o(e,a,"number",c(s));case"+":case"<":case"<=":case">":case">=":case"!==":case"===":return l(s)?l(n)?void 0:new o(e,r,"number",c(n)):d(s)?d(n)?void 0:new o(e,r,"string",c(n)):new o(e,a,"string or number",c(s));default:return}};t.checkIfStatement=(e,t)=>u(t)?void 0:new o(e," as condition","boolean",c(t));t.checkMemberAccess=(e,t,s)=>"object"===c(t)?d(s)?void 0:new o(e," as prop","string",c(s)):(e=>"array"===c(e))(t)?(e=>l(e)&&e>>>0===e&&e<2**32-1)(s)?void 0:l(s)?new o(e," as prop","array index","other number"):new o(e," as prop","array index",c(s)):new o(e,"","object or array",c(t));t.isIdentifier=e=>void 0!==e.name},40:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return p})),s.d(t,"e",(function(){return g})),s.d(t,"f",(function(){return m})),s.d(t,"g",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return v})),s.d(t,"j",(function(){return y}));var n=s(1),i=s.n(n),a=s(171),r=s(16);const o=i.a.createContext(new a.a([],[]));let c,l;!function(e){e.RED="#f00",e.BLACK="#000"}(c||(c={})),function(e){e.BLUE="#4df",e.WHITE="#fff"}(l||(l={}));const d=`${r.a.sourceAcademyAssets}achievement`,u=`${d}/view-background`,h=`${d}/card-background`,p=`${d}/cover-image`,g=()=>({background:`url(${u}/exploration.png) no-repeat center/cover`}),m=()=>"#9ce",b=()=>({border:`1px solid ${m()}`,boxShadow:`0 0 10px ${m()}`}),f=(e,t)=>e===t?l.BLUE:l.WHITE,v=(e,t)=>e===t?b():void 0,y=1e3},401:function(e,t){ace.define("ace/theme/source",["require","exports","module","ace/lib/dom"],(function(e,t,s){t.isDark=!0,t.cssClass="ace-source",t.cssText=".ace-source .ace_gutter {                        background: #011e3a;                        color: rgb(128,145,160)                        }                        .ace-source .ace_print-margin {                        width: 1px;                        background: #555555                        }                        .ace-source {                        background-color: #002240;                        color: #FFFFFF                        }                        .ace-source .ace_cursor {                        color: #FFFFFF                        }                        .ace-source .ace_marker-layer .ace_selection {                        background: rgba(179, 101, 57, 0.75)                        }                        .ace-source.ace_multiselect .ace_selection.ace_start {                        box-shadow: 0 0 3px 0px #002240;                        }                        .ace-source .ace_marker-layer .ace_step {                        background: rgb(127, 111, 19)                        }                        .ace-source .ace_marker-layer .ace_bracket {                        background: #090;                        }                        .ace-terminal-theme .ace_marker-layer .ace_bracket-start {                        background: #090;                        }                        .ace-terminal-theme .ace_marker-layer .ace_bracket-unmatched {                        margin: -1px 0 0 -1px;                        border: 1px solid #900                        }                        .ace-source .ace_marker-layer .ace_active-line {                        background: rgba(0, 0, 0, 0.35)                        }                        .ace-source .ace_gutter-active-line {                        background-color: rgba(0, 0, 0, 0.35)                        }                        .ace-source .ace_marker-layer .ace_selected-word {                        border: 1px solid rgba(179, 101, 57, 0.75)                        }                        .ace-source .ace_invisible {                        color: rgba(255, 255, 255, 0.15)                        }                        .ace-source .ace_keyword,                        .ace-source .ace_meta {                        color: #FF9D00                        }                        .ace-source .ace_constant,                        .ace-source .ace_constant.ace_character,                        .ace-source .ace_constant.ace_other,                        .ace-source .ace_string,                        .ace-source .ace_string.ace_regexp {                        color: #FF628C                        }                        .ace-source .ace_constant.ace_character.ace_escape {                        color: #FFFFFF                        }                        .ace-source .ace_invalid {                        color: #F8F8F8;                        background-color: #800F00                        }                        .ace-source .ace_support {                        color: #80FFBB                        }                        .ace-source .ace_support.ace_constant {                        color: #EB939A                        }                        .ace-source .ace_fold {                        background-color: #FF9D00;                        border-color: #FFFFFF                        }                        .ace-source .ace_support.ace_function {                        color: #FFFFFF                        }                        .ace-source .ace_builtinconsts {                        color: #FFFFFF                        }                        .ace-source .ace_storage {                        color: #FFEE80                        }                        .ace-source .ace_entity {                        color: #FFDD00                        }                        .ace-source .ace_comment {                        font-style: italic;                        color: #0088FF                        }                        .ace-source .ace_heading,                        .ace-source .ace_markup.ace_heading {                        color: #C8E4FD;                        background-color: #001221                        }                        .ace-source .ace_list,                        .ace-source .ace_markup.ace_list {                        background-color: #130D26                        }                        .ace-source .ace_variable {                        color: #CCCCCC                        }                        .ace-source .ace_variable.ace_language {                        color: #FF80E1                        }                        .ace-source .ace_meta.ace_tag {                        color: #9EFFFF                        }                        .ace-source .ace_indent-guide {                        background: url(data:image/png;base64,                        iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbY                        nAAAAEklEQVQImWNgYGBgYHCLSvkPAAP3AgSDTRd4AAAAAElFTkSuQmCC) right repeat-y                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete {                        background-color: #2c3e50;                        border-color: #555555;                        color: white;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_completion-highlight {                        color: #FF9D00;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content .ace_marker-layer .ace_active-line {                        border-color: #555555;                        background-color: #495a6b;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content .ace_marker-layer .ace_line-hover {                        border-color: #555555;                        background-color: #6b839a;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content.ace_text-layer .ace_rightAlignedText {                        color: #ced9e0;                        }                        .ace_tooltip.ace_doc-tooltip {                        width: 400px;                        max-height: 40vh;                        white-space: normal;                        overflow: auto;                        background-color: #495a6b;                        color: white;                        border-color:#555555;                        }                        .ace_tooltip.ace_doc-tooltip h4 {                        color: white;                        margin: 0 0 1em;                        }                        .ace_tooltip.ace_doc-tooltip a {                        color: #48aff0;                        }                        ",e("../lib/dom").importCssString(t.cssText,t.cssClass)}))},413:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceDocumentation=void 0;const n=s(627);t.SourceDocumentation={builtins:{},ext_lib:n}},444:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImportNamespaceSpecifier=t.createImportDefaultSpecifier=t.createImportSpecifier=t.createImportDeclaration=t.createFunctionDeclaration=t.createReturnStatement=t.createVariableDeclaration=t.createVariableDeclarator=t.createCallExpression=t.createIdentifier=t.createLiteral=void 0;t.createLiteral=(e,t)=>({type:"Literal",value:e,raw:(null!==t&&void 0!==t?t:"string"===typeof e)?`"${e}"`:String(e)});t.createIdentifier=e=>({type:"Identifier",name:e});t.createCallExpression=(e,s)=>({type:"CallExpression",callee:(0,t.createIdentifier)(e),arguments:s});t.createVariableDeclarator=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"VariableDeclarator",id:e,init:t}};t.createVariableDeclaration=(e,t)=>({type:"VariableDeclaration",declarations:e,kind:t});t.createReturnStatement=e=>({type:"ReturnStatement",argument:e});t.createFunctionDeclaration=(e,t,s)=>({type:"FunctionDeclaration",expression:!1,generator:!1,id:{type:"Identifier",name:e},params:t,body:{type:"BlockStatement",body:s}});t.createImportDeclaration=(e,t)=>({type:"ImportDeclaration",specifiers:e,source:t});t.createImportSpecifier=(e,t)=>({type:"ImportSpecifier",local:e,imported:t});t.createImportDefaultSpecifier=e=>({type:"ImportDefaultSpecifier",local:e});t.createImportNamespaceSpecifier=e=>({type:"ImportNamespaceSpecifier",local:e})},445:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImportDeclaration=t.isDeclaration=t.isStatement=t.isModuleDeclaration=t.isDirective=void 0;t.isDirective=e=>"directive"in e;t.isModuleDeclaration=e=>["ImportDeclaration","ExportNamedDeclaration","ExportDefaultDeclaration","ExportAllDeclaration"].includes(e.type);t.isStatement=e=>!(0,t.isDirective)(e)&&!(0,t.isModuleDeclaration)(e),t.isDeclaration=function(e){return"VariableDeclaration"===e.type||"FunctionDeclaration"===e.type||"ClassDeclaration"===e.type},t.isImportDeclaration=function(e){return"ImportDeclaration"===e.type}},446:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvedErrorPromise=t.determineVariant=void 0,t.determineVariant=function(e,t){return t.variant?t.variant:e.variant},t.resolvedErrorPromise=Promise.resolve({status:"error"})},45:function(e,t,s){"use strict";var n=s(3),i=s(20),a=s.n(i),r=s(1),o=s(515),c=s(0);const l=e=>{const t=new o.Converter({tables:!0,simplifiedAutoLink:e.simplifiedAutoLink,strikethrough:e.strikethrough,tasklists:e.tasklists,openLinksInNewWindow:e.openLinksInNewWindow});return Object(c.jsx)("div",{className:a()(e.className?e.className:"md",n.a.RUNNING_TEXT),dangerouslySetInnerHTML:{__html:t.makeHtml(e.content)}})};t.a=r.memo(l)},481:function(e,t){},514:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeSelector=t.HighlightRulesSelector=void 0;const n=s(28),i=s(413);t.HighlightRulesSelector=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NONE",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];function a(s,a,r){const o=s("../lib/oop"),c=s("./doc_comment_highlight_rules").DocCommentHighlightRules,l=s("./text_highlight_rules").TextHighlightRules,d="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*",u=e.toString()+"_"+t,h=i.SourceDocumentation.builtins[u];function p(e){const t=function(e){if(null===h)return"";let t="";for(const s in h)h[s].meta===e&&(t+="|"+s);return t}(e)+function(e){if(null===n)return"";let t="";return n.forEach((s=>{s.meta===e&&(t+="|"+s.caption)})),t}(e);return t.substr(1)}const g=()=>{const t=[];return e>=1&&t.push("import","const","else","if","return","function","debugger"),e>=3&&t.push("while","for","break","continue","let"),t.join("|")},m=function(e){const t=this.createKeywordMapper({builtinconsts:p("const"),"constant.language.boolean":"true|false","constant.language.null":"null",keyword:g(),"storage.type":"const|let|function","support.function":p("func"),"variable.language":"this|arguments|var|yield|async|await|with|switch|throw|try|eval|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|in|of|instanceof|new|case|catch|default|delete|do|finally|"},"identifier"),s="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[c.getStartRule("doc-start"),f("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+d+")(\\.)(prototype)(\\.)("+d+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+d+")(\\.)("+d+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+d+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+d+")(\\.)("+d+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+d+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+d+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"},{token:"keyword",regex:"(?:else|return)\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["variable.language"],regex:/\.{3}|--+|\+\++|\^|(==|!=)[^=]|[$%&*+\-~\/^]=+|[^&]*&[^&]|[^\|]*\|[^\|]/},{token:t,regex:d},{token:"variable.language",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/===|=|!==|<+=?|>+=?|!|&&|\|\||[%*+-\/]/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+d+")(\\.)("+d+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"variable.language",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"variable.language.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:d},{regex:"",token:"empty",next:"no_regex"}],start:[c.getStartRule("doc-start"),f("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:d},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:s},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:s},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,s){if(this.next="{"==e?this.nextState:"","{"==e&&s.length)s.unshift("start",t);else if("}"==e&&s.length&&(s.shift(),this.next=s.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx")))return"paren.quasi.end";return"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:s},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&0==e.jsx||b.call(this)),this.embedRules(c,"doc-",[c.getEndRule("no_regex")]),this.normalizeRules()};function b(){const e=d.replace("\\d","\\d\\-"),t={onMatch:function(e,t,s){const n="/"==e.charAt(1)?2:1;return 1==n?(t!=this.nextState?s.unshift(this.next,this.nextState,0):s.unshift(this.next),s[2]++):2==n&&t==this.nextState&&(s[1]--,(!s[1]||s[1]<0)&&(s.shift(),s.shift())),[{type:"meta.tag.punctuation."+(1==n?"":"end-")+"tag-open.xml",value:e.slice(0,n)},{type:"meta.tag.tag-name.xml",value:e.substr(n)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);const s={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[s,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,s){return t==s[0]&&s.shift(),2==e.length&&(s[0]==this.nextState&&s[1]--,(!s[1]||s[1]<0)&&s.splice(0,2)),this.next=s[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},s,f("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},t],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function f(e){return[{token:"comment",regex:/\/\*/,next:[c.getTagRule(),{token:"comment",regex:"\\*\\/",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[c.getTagRule(),{token:"comment",regex:"$|^",next:e||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}o.inherits(m,l),a.SourceHighlightRules=m}const r=e.toString()+t+s;ace.define("ace/mode/source_highlight_rules"+r,["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],a)},t.ModeSelector=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.Variant.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NONE";const i=e.toString()+t+s;function a(e,t,s){const n=e("../lib/oop"),a=e("./text").Mode,r=e("./source_highlight_rules"+i).SourceHighlightRules,o=e("./matching_brace_outdent").MatchingBraceOutdent,c=e("./behaviour/cstyle").CstyleBehaviour,l=e("./folding/cstyle").FoldMode,d=function(){this.HighlightRules=r,this.$outdent=new o,this.$behaviour=new c,this.foldingRules=new l};n.inherits(d,a),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(e,t,s){let n=this.$getIndent(t);const i=this.getTokenizer().getLineTokens(t,e),a=i.tokens,r=i.state;if(a.length&&"comment"==a[a.length-1].type)return n;if("start"==e||"no_regex"==e){t.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/)&&(n+=s)}else if("doc-start"==e){if("start"==r||"no_regex"==r)return"";const e=t.match(/^\s*(\/?)\*/);e&&(e[1]&&(n+=" "),n+="* ")}return n},this.checkOutdent=function(e,t,s){return this.$outdent.checkOutdent(t,s)},this.autoOutdent=function(e,t,s){this.$outdent.autoOutdent(t,s)},this.$id="ace/mode/source"+i}.call(d.prototype),t.Mode=d}ace.define("ace/mode/source"+i,["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/source_highlight_rules1","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],a)}},52:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(107);const i=Object(n.a)()},523:function(e,t,s){"use strict";(function(e){var n=s(42),i=s(122),a=s(1),r=s(25),o=s(35),c=s(93),l=s(532),d=s(10),u=s(55),h=s(524),p=s(528),g=s(525),m=s(0);async function b(t,s,n){const i=(await t.users.getAuthenticated()).data.login,a="source-academy-course-".concat(s),r=(await t.repos.listForAuthenticatedUser({per_page:100})).data,o=r.filter((e=>e.owner.login===a)).find((e=>e.name.includes("course-info")));if(void 0===o)return void Object(d.e)("The course-info repository cannot be located.",2e3);const c=(await t.repos.getContent({owner:o.owner.login,repo:o.name,path:""})).data;if(Array.isArray(c)){if(!c.find((e=>"course-info.json"===e.name)))return void Object(d.e)("The course-info.json file cannot be located.",2e3);{const s=await t.repos.getContent({owner:o.owner.login,repo:o.name,path:"course-info.json"}),a=JSON.parse(e.from(s.data.content,"base64").toString());a.types.forEach((e=>{const t=[];e.assessments.forEach((e=>{if(!e.published)return;const s=e.repoPrefix+"-"+i,n=r.find((e=>e.name===s));let a,c=new Date;void 0===n?a=e.acceptLink:null!==n.created_at&&(c=new Date(n.created_at)),t.push({title:e.title,coverImage:e.coverImage,webSummary:e.shortSummary,missionRepoData:{repoOwner:o.owner.login,repoName:s,dateOfCreation:c},dueDate:new Date(e.closeAt),link:a}),t.sort(((e,t)=>e.dueDate<=t.dueDate?-1:1))})),e.assessments=t})),n(a.types)}}}t.a=e=>{var t,s,d;const f=Object(r.i)(),v=Object(o.f)((e=>e.session.githubOctokitObject)).octokit,[y,x]=Object(a.useState)(null===(t=f.state)||void 0===t?void 0:t.courses),[j,O]=Object(a.useState)((null===(s=f.state)||void 0===s?void 0:s.selectedCourse)||""),[C,S]=Object(a.useState)(null===(d=f.state)||void 0===d?void 0:d.assessmentTypeOverviews),E=null===C||void 0===C?void 0:C.map((e=>e.typeName));Object(a.useEffect)((()=>{void 0!==v&&(y||async function(e,t,s,n){const i=[],a=(await e.orgs.listForAuthenticatedUser({per_page:100})).data;a.filter((e=>e.login.includes("source-academy-course"))).forEach((e=>{i.push(e.login.replace("source-academy-course-",""))})),t(i),i.length>0&&(s(i[0]),b(e,i[0],n))}(v,x,O,S))}),[y,v]);const w=a.useCallback((e=>{void 0!==v&&(b(v,e.target.innerText,S),O(e.target.innerText))}),[v,O,S]),_=()=>{void 0!==v&&b(v,j,S)},A=()=>Object(m.jsx)(r.b,{to:"/githubassessments/login"}),k=()=>Object(m.jsx)(r.b,{to:{pathname:`/githubassessments/${Object(u.a)(E?E[0]:"welcome")}`,state:{courses:y,assessmentTypeOverviews:C,selectedCourse:j}}});return Object(m.jsxs)("div",{className:"Academy",style:{overflow:"hidden"},children:[Object(m.jsx)(l.a,{changeCourseHandler:w,handleGitHubLogIn:e.handleGitHubLogIn,handleGitHubLogOut:()=>{e.handleGitHubLogOut(),x(void 0),S(void 0),O("")},octokit:v,courses:y,selectedCourse:j,types:E,assessmentTypeOverviews:C}),Object(m.jsxs)(r.e,{children:[Object(m.jsx)(r.c,{path:"/githubassessments/login",render:()=>v&&(!y||y.length>0&&!C)?Object(m.jsx)(c.a,{display:Object(m.jsx)(n.G,{description:"Loading...",icon:Object(m.jsx)(n.R,{})}),loadContentDispatch:()=>{}}):v&&y&&0===y.length?Object(m.jsx)(r.b,{to:"/githubassessments/welcome"}):v?k():Object(m.jsx)(c.a,{display:Object(m.jsx)(n.G,{description:"Please sign in to GitHub.",icon:i.a.WARNING_SIGN}),loadContentDispatch:()=>{}})}),Object(m.jsx)(r.c,{path:"/githubassessments/welcome",component:()=>v?Object(m.jsx)(g.a,{}):A()}),Object(m.jsx)(r.c,{path:"/githubassessments/editor",component:p.a}),v?null===E||void 0===E?void 0:E.map(((e,t)=>{const s=C?C[t].assessments:void 0;return Object(m.jsx)(r.c,{path:`/githubassessments/${Object(u.a)(e)}`,render:()=>Object(m.jsx)(h.a,{assessmentOverviews:s,refreshAssessmentOverviews:_})},t)})):null,Object(m.jsx)(r.c,{render:v&&y&&y.length>0?k:A})]})]})}}).call(this,s(74).Buffer)},524:function(e,t,s){"use strict";var n=s(42),i=s(139),a=s(122),r=s(1),o=s(35),c=s(211),l=s(93),d=s(45),u=s(52),h=s(0);t.a=e=>{const{isMobileBreakpoint:t}=Object(o.e)();let s;const p=Object(r.useMemo)((()=>Object(h.jsx)(n.b,{icon:a.a.ADD,onClick:()=>u.a.push("/githubassessments/editor"),children:"Create a New Assessment!"})),[]),g=Object(r.useMemo)((()=>Object(h.jsx)(n.b,{icon:a.a.REFRESH,onClick:e.refreshAssessmentOverviews,children:"Refresh Assessments"})),[e.refreshAssessmentOverviews]);if(e.assessmentOverviews)if(0===e.assessmentOverviews.length)s=Object(h.jsxs)(h.Fragment,{children:[p,g,Object(h.jsx)(n.G,{title:"There are no assessments.",icon:a.a.FLAME})]});else{const r=e.assessmentOverviews.map((e=>function(e,t){const s=t?5:3,r=e.missionRepoData.repoOwner+"/"+e.missionRepoData.repoName,o=e.dueDate.toDateString(),l=new Date(864e13)>e.dueDate,p=new Date>e.dueDate,g=void 0!==e.link;let m="Open",b=()=>u.a.push("/githubassessments/editor",e);g?(m="Accept",b=()=>window.open(e.link)):p&&(m="Review Answers");return Object(h.jsx)("div",{children:Object(h.jsxs)(n.e,{className:"row listing",elevation:i.a.ONE,children:[Object(h.jsx)("div",{className:`col-xs-${String(s)} listing-picture`,children:Object(h.jsx)("img",{alt:"Assessment",className:`cover-image-${e.title}`,src:e.coverImage?e.coverImage:c.a})}),Object(h.jsxs)("div",{className:`col-xs-${String(12-s)} listing-text`,children:[Object(h.jsx)("div",{className:"listing-header",children:Object(h.jsxs)(n.Y,{ellipsize:!0,children:[Object(h.jsx)(n.r,{className:"listing-title",children:e.title}),Object(h.jsx)(n.t,{children:r})]})}),Object(h.jsx)("div",{className:"listing-description",children:Object(h.jsx)(d.a,{content:e.webSummary})}),Object(h.jsxs)("div",{className:"listing-footer",children:[Object(h.jsxs)(n.Y,{className:"listing-due-date",children:[Object(h.jsx)(n.w,{className:"listing-due-icon",iconSize:12,icon:a.a.TIME}),l?"Due: "+o:"No due date"]}),Object(h.jsx)("div",{className:"listing-button",children:Object(h.jsx)(n.b,{icon:a.a.PLAY,minimal:!0,onClick:b,children:Object(h.jsx)("span",{className:"custom-hidden-xxxs",children:m})})})]})]})]})},r)}(e,t)));s=Object(h.jsxs)(h.Fragment,{children:[p,g,r]})}else s=Object(h.jsxs)(h.Fragment,{children:[p,Object(h.jsx)(n.G,{description:"Fetching assessment...",icon:Object(h.jsx)(n.R,{})})]});return Object(h.jsx)("div",{className:"Assessment",style:{overflow:"auto"},children:Object(h.jsx)(l.a,{display:s,loadContentDispatch:()=>{}})})}},525:function(e,t,s){"use strict";var n=s(42),i=s(0);t.a=()=>Object(i.jsx)("div",{className:"github-welcome",children:Object(i.jsx)(n.e,{className:"github-welcome-content",children:Object(i.jsx)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:Object(i.jsxs)("div",{children:[Object(i.jsx)(n.p,{children:"Welcome to Source Academy with GitHub Classroom!"}),Object(i.jsx)("br",{}),Object(i.jsx)(n.r,{children:"Source Academy does not find any course information for this account."}),Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(i.jsxs)(n.cb,{style:{textAlign:"justify"},children:[Object(i.jsx)("li",{children:"If you are enrolled in a Source Academy course that uses GitHub Classroom, check with the course staff to make sure your account is added to the course."}),Object(i.jsxs)("li",{children:["If you are looking for a course to join, check"," ",Object(i.jsx)("a",{href:"https://about.sourceacademy.org/learner/README.html",children:"here"})," to find a course that suits your needs."]})]})})]})})})})},528:function(e,t,s){"use strict";var n=s(28),i=s(34),a=s(25),r=s(44),o=s(13),c=s(42),l=s(3),d=s(122),u=s(20),h=s.n(u),p=s(33),g=s(1),m=s.n(g),b=s(35),f=s(71),v=s(126),y=s(110),x=s(111),j=s(173),O=s(169),C=s(170),S=s(212),E=s(147),w=s(213),_=s(12),A=s(0);const k=e=>{const t=e.mcqDisplayed?"Show MCQ Text":"Hide MCQ Text",s=e.mcqDisplayed?e.displayTextInEditor:e.displayMCQInEditor;return Object(A.jsx)(_.a,{label:t,icon:d.a.REFRESH,onClick:s})};var T=s(153),R=s(10);const I=e=>Object(A.jsx)(_.a,{label:"Add Task",icon:d.a.ADD,onClick:function(){e.numberOfTasks!==T.f?e.addNewQuestion():Object(R.e)("Cannot have more than "+T.f+" Tasks in a Mission!")}});var L=s(69);const P=e=>Object(A.jsx)(_.a,{label:"Delete Current Task",icon:d.a.DELETE,onClick:async function(){if(e.numberOfTasks<=1)return void Object(R.e)("Cannot delete the only remaining task!");await Object(L.b)({contents:Object(A.jsxs)("div",{children:[Object(A.jsx)("p",{children:"Warning: you are about to delete a task."}),Object(A.jsx)("p",{children:"This action cannot be undone."}),Object(A.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&e.deleteCurrentQuestion()}});var N=s(97),D=s(102);const M=e=>{const[t,s]=Object(g.useState)("sa-new-mission-repository");return Object(A.jsxs)(c.h,{className:"missionBrowser",isOpen:!0,children:[Object(A.jsx)("div",{className:h()("githubDialogHeader",l.a.DIALOG_HEADER),children:Object(A.jsx)("h3",{children:"Please confirm your save"})}),Object(A.jsxs)("div",{className:h()("githubDialogBody",l.a.DIALOG_BODY),children:[Object(A.jsxs)("div",{children:[Object(A.jsxs)("h4",{children:["This will create a repository owned by ",e.userLogin," with the title:"]}),Object(A.jsx)(c.y,{onChange:function(e){s(e.target.value)},placeholder:"Enter Repository Title",value:t})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("h4",{children:"This repository will be created with following files:"}),e.filesToCreate.map((e=>Object(A.jsx)("li",{children:e},e)))]})]}),Object(A.jsx)("div",{className:h()(l.a.DIALOG_FOOTER),children:Object(A.jsxs)("div",{className:h()(l.a.DIALOG_FOOTER_ACTIONS),children:[Object(A.jsx)(c.b,{onClick:function(){e.resolveDialog({confirmSave:!1,repoName:""})},children:"Close"}),Object(A.jsx)(c.a,{onClick:function(){if(""===t)return void Object(R.e)("Cannot create repository without title!",2e3);e.resolveDialog({confirmSave:!0,repoName:t})},intent:D.a.PRIMARY,children:"Confirm"})]})})]})};var U=s(45),B=s(172);var G=e=>{const[t,s]=m.a.useState(!1),n=e.allowEdits,i=m.a.useRef();return Object(g.useEffect)((()=>{function e(e){n&&(i.current&&!i.current.contains(e.target)&&s(!1),i.current&&i.current.contains(e.target)&&s(!0))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]),Object(A.jsx)("div",{ref:i,children:t?Object(A.jsx)(c.Z,{onChange:function(t){e.setContent(t.target.value)},fill:!0,growVertically:!0,defaultValue:e.content}):Object(A.jsx)(U.a,{content:e.content,openLinksInNewWindow:!0})})},F=s(16);var H=e=>Object(A.jsx)("div",{className:"SideContentMissionEditor",children:Object(A.jsxs)("div",{className:"SideContentMissionEditorRow",children:[Object(A.jsx)("div",{className:"SideContentMissionEditorLabelColumn",children:Object(A.jsx)(c.z,{children:"Source Version"})}),Object(A.jsx)("div",{className:"SideContentMissionEditorOptionColumn",children:Object(A.jsx)(v.a,{sourceChapter:e.missionMetadata.sourceVersion,sourceVariant:F.b.defaultSourceVariant,disabled:!1,handleChapterSelect:function(t,s){!function(t,s){const n=Object.assign({},e.missionMetadata);n[t]=s,e.setMissionMetadata(n)}("sourceVersion",t.chapter)}},"chapter")})]})});var V=e=>{const t=e.currentTaskNumber-1,s=e.taskDescriptions,n=e.setTaskDescriptions,i=t<0||t>=s.length||0===s.length,a=i?"Welcome to Mission Mode! This is where the Task Briefing for each question will appear!":s[t],r=m.a.useCallback((e=>{if(i)return;const a=s.map((e=>e));a[t]=e,n(a)}),[n,s,t,i]);return Object(A.jsx)("div",{children:Object(A.jsx)(G,{allowEdits:e.allowEdits,content:a,setContent:r})})},W=s(304),q=s(148),$=s.n(q),X=s(293),z=s(139),Y=s(88),K=s(106),Q=s(18);var J=e=>{const{index:t,testcase:s,setTestcaseProgram:n,setTestcaseExpectedResult:i,handleTestcaseEval:a,deleteTestcase:r}=e,o=g.useMemo((()=>{const e=void 0!==s.result||s.errors,t=Object(K.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===Q.f.secret||s.type===Q.f.opaque}}),[s]),u=g.useCallback((()=>{a(t)}),[t,a]),p=s.program,m=s.answer,b=Object(A.jsx)(c.b,{className:"testcase-button",icon:d.a.PLAY,onClick:u}),f=Object(A.jsx)(c.b,{className:"testcase-button",icon:d.a.DELETE,onClick:()=>r(t)}),v=g.useMemo((()=>{let e="No Answer";return s.errors?e=Object(Y.parseError)(s.errors):void 0!==s.result&&(e=Object(K.stringify)(s.result)),e}),[s]);return Object(A.jsx)("div",{className:h()("EditableAutograderCard",o),children:Object(A.jsxs)(c.e,{className:l.a.INTERACTIVE,elevation:z.a.ONE,children:[Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(c.y,{className:"testcase-program",value:p,onChange:e=>n(e.target.value)}),Object(A.jsx)(c.y,{className:"testcase-expected",value:m,onChange:e=>i(e.target.value)}),Object(A.jsx)(c.y,{className:"testcase-actual",value:v,readOnly:!0})]}),b,f]})})};function Z(e,t){return Object(A.jsx)($.a,{className:"react-ace",fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:t,theme:"source",value:e,width:"100%",height:"16rem"})}const ee=Object(A.jsxs)("div",{className:"autograder-help-tooltip",children:[Object(A.jsx)("p",{children:"Click on each testcase below to execute it with the program in the editor."}),Object(A.jsx)("p",{children:"To execute all testcases at once, evaluate the program in the editor with this tab active."}),Object(A.jsx)("p",{children:"A green or red background indicates a passed or failed testcase respectively."}),Object(A.jsx)("p",{children:"Private testcases (only visible to staff when grading) have a grey background."})]}),te=(e,t)=>Object(A.jsxs)("div",{className:e,children:[t,Object(A.jsx)(c.w,{icon:d.a.CARET_DOWN})]}),se=Object(A.jsxs)("div",{className:"testcases-header",children:[te("header-fn","Testcase"),te("header-expected","Expected result"),te("header-actual","Actual result")]}),ne=(e,t,s)=>Object(A.jsx)(_.a,{label:e,icon:t?d.a.CARET_DOWN:d.a.CARET_RIGHT,onClick:s,options:{className:"collapse-button",minimal:!0}});var ie=e=>{const[t,s]=g.useState(!0),[n,i]=g.useState(!0),[a,r]=g.useState(!0),{testcases:o,testPrepend:l,testPostpend:u,allowEdits:h,handleTestcaseEval:p,setTaskTestcases:m,setTestPrepend:b,setTestPostpend:f}=e,v=g.useCallback((e=>t=>{const s=o.map((e=>Object.assign({},e)));s[e].program=t,delete s[e].result,m(s)}),[m,o]),y=g.useCallback((e=>t=>{const s=o.map((e=>Object.assign({},e)));s[e].answer=t,delete s[e].result,m(s)}),[m,o]),x=g.useCallback((()=>{const e=[...o];e.push({answer:"",program:"",score:0,type:"public"}),m(e)}),[o,m]),j=g.useCallback((async e=>{if(!await Object(L.b)({title:"confirm testcase deletion",contents:"Are you sure you want to delete this testcase? This cannot be undone.",positiveLabel:"Confirm",negativeLabel:"Cancel"}))return;const t=o.slice(0,e).concat(o.slice(e+1));m(t)}),[o,m]),O=g.useCallback(((e,t)=>h?Object(A.jsx)(J,{index:t,testcase:e,setTestcaseProgram:v(t),setTestcaseExpectedResult:y(t),deleteTestcase:j,handleTestcaseEval:p},t):Object(A.jsx)(X.a,{index:t,testcase:e,handleTestcaseEval:p,workspaceLocation:"githubAssessment"},t)),[h,j,p,v,y]),C=g.useMemo((()=>o.length>0?Object(A.jsxs)("div",{className:"testcaseCards",children:[se,o.map(((e,t)=>O(e,t)))]}):Object(A.jsx)("div",{className:"noResults",children:"There are no testcases provided for this question."})),[o,O]),S=g.useMemo((()=>Object(A.jsx)(c.b,{className:"collapse-button",icon:d.a.ADD,minimal:!0,text:"Add a new testcase",onClick:x})),[x]),E=g.useCallback((()=>{s(!t)}),[t]),w=g.useCallback((()=>{i(!n)}),[n]),_=g.useCallback((()=>{r(!a)}),[a]);return Object(A.jsxs)("div",{className:"Autograder",children:[Object(A.jsxs)(c.b,{className:"collapse-button",icon:a?d.a.CARET_DOWN:d.a.CARET_RIGHT,minimal:!0,onClick:_,children:[Object(A.jsx)("span",{children:"Testcases"}),Object(A.jsx)(W.a,{content:ee,placement:c.L.LEFT,children:Object(A.jsx)(c.w,{icon:d.a.HELP})})]}),Object(A.jsx)(c.g,{isOpen:a,keepChildrenMounted:!0,children:Object(A.jsxs)("div",{className:"testcaseeditor-subcomponent",children:[C,h&&S]})}),h&&ne("Testcase Prepend",t,E),h&&Object(A.jsx)(c.g,{isOpen:t,keepChildrenMounted:!0,children:Object(A.jsx)("div",{className:"testcaseeditor-subcomponent",children:Z(l,(e=>b(e)))})}),h&&ne("Testcase Postpend",n,w),h&&Object(A.jsx)(c.g,{isOpen:n,keepChildrenMounted:!0,children:Object(A.jsx)("div",{className:"testcaseeditor-subcomponent",children:Z(u,(e=>f(e)))})})]})},ae=s(24),re=s(52),oe=s(112),ce=s(72);const le="### Assignment Briefing (Click to Edit!)\nWelcome to Assignment Creator! This is where the Briefing for each assignment will appear.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nThe text written here will show up as the `README.md` file on the GitHub repository.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github) to learn more about how to use this website.\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",de="// Your program here!\n",ue={sourceVersion:n.Chapter.CLANG},he={questionNumber:0,taskDescription:"### Problem Description (Click to Edit!)\nWelcome to the Assignment Creator! This is where the problem description specific to each problem should be written.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nIf you would like to add new questions outside of the website, simply duplicate this folder, and edit the `Problem.md` and `StarterCode.js` files accordingly. Make sure that the folders are named 'Q1', 'Q2', 'Q3' and so on.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github).\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",starterCode:de,savedCode:de,testPrepend:"",testPostpend:"",testCases:[]},pe={answer:-1,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:n.Chapter.CLANG,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},ge="githubAssessment";var me=e=>{const t=Object(i.c)(),s=Object(ce.f)();void 0===s&&re.a.push("/githubassessments/login");const[a,r]=m.a.useState(ue),[u,_]=m.a.useState(ue),[D,W]=m.a.useState(!1),[q,$]=m.a.useState(le),[X,z]=m.a.useState(le),[Y,K]=m.a.useState(!1),[Q,J]=m.a.useState([]),[Z,ee]=m.a.useState([]),[te,se]=m.a.useState(!1),[ne,de]=m.a.useState(""),[me,be]=m.a.useState(0),[fe,ve]=m.a.useState(!1),[ye,xe]=m.a.useState(!0),[je,Oe]=m.a.useState(!1),[Ce,Se]=m.a.useState(!0),[Ee,we]=m.a.useState(pe),[_e,Ae]=m.a.useState(void 0),ke=e.location.state,[Te,Re]=m.a.useState(!1),[Ie,Le]=m.a.useState(ae.b.questionOverview),{isMobileBreakpoint:Pe}=Object(b.e)(),Ne=e.hasUnsavedChanges,De=e.editorTestcases,Me=e.handleEditorValueChange,Ue=e.handleUpdateWorkspace,Be=e.handleUpdateHasUnsavedChanges,Ge=e.handleReplOutputClear,Fe=Object(g.useCallback)(((e,t)=>{be(e);const s=e-1;Ue({editorTabs:[{value:t[s].savedCode,prependValue:t[s].testPrepend,postpendValue:t[s].testPostpend,highlightedLines:[],breakpoints:[]}],editorTestcases:t[s].testCases}),Ge();const[n,i]=Object(T.b)(t[s].savedCode);Oe(n),we(i)}),[Ue,Ge]),He=Object(g.useCallback)((e=>{$(e),K(e!==X)}),[X]),Ve=Object(g.useCallback)((e=>{r(e),W(!Object(p.isEqual)(e,u))}),[u]),We=Object(g.useCallback)((e=>{ee(e),se(!Object(p.isEqual)(e,Q))}),[Q]),qe=Object(g.useCallback)((e=>{if(e){const[e,t]=Object(T.b)(Z[me-1].savedCode);Oe(e),we(t)}Se(e)}),[Z,me]),$e=Object(g.useMemo)((()=>D||Y||te),[D,Y,te]);Object(g.useEffect)((()=>{$e!==Ne&&Be($e)}),[$e,Ne,Be]);const Xe=Object(g.useCallback)((async()=>{if(void 0===s)return;const e=ke.missionRepoData,t=[Object(T.e)(e,s),s.users.getAuthenticated().then((t=>t.data.login===e.repoOwner))];Promise.all(t).then((t=>{Ae(e),se(!1),K(!1),W(!1),Be(!1);const s=t[0];de(s.missionBriefing),r(s.missionMetadata),_(s.missionMetadata),$(s.missionBriefing),z(s.missionBriefing),ee(s.tasksData),J(s.tasksData.map((e=>Object.assign({},e)))),Fe(1,s.tasksData);const n=t[1];ve(n),xe(!1)}))}),[ke,s,Fe,Be]),ze=Object(g.useCallback)((()=>{de(le),r(ue),_(ue),$(le),z(le),ee([he]),J([he]),Se(!1),Fe(1,[he]),se(!1),K(!1),W(!1),Be(!1),ve(!0),xe(!1)}),[Fe,Be]);Object(g.useEffect)((()=>{void 0===ke?ze():Xe()}),[ke,Xe,ze]);const Ye=Object(A.jsx)(c.h,{className:"assessment-briefing",isOpen:Te,children:Object(A.jsxs)(c.e,{children:[Object(A.jsx)(U.a,{content:ne}),Object(A.jsx)(c.b,{className:"assessment-briefing-button",onClick:()=>Re(!1),text:"Continue"})]})}),Ke=Object(g.useCallback)(((e,t)=>{if(e>Z.length)return;const s=Z.map((e=>Object.assign({},e)));s[e-1]={...s[e-1],savedCode:t},We(s)}),[Z,We]),Qe=Object(g.useCallback)((()=>{const e=Z[me-1].starterCode;Me(e),Ke(me,e)}),[me,Ke,Me,Z]),Je=Object(g.useCallback)((async(e,t,n,i,a)=>{const r=_e,{saveType:o}=await Object(ce.b)(s,r.repoOwner,r.repoName,e);"Overwrite"===o&&await Object(ce.j)(s,r.repoOwner,r.repoName,e,n,i,a,t),"Create"===o&&await Object(ce.h)(s,r.repoOwner,r.repoName,e,n,i,a,t)}),[_e,s]),Ze=Object(g.useCallback)((async(e,t,n,i)=>{const a=_e;await Object(ce.i)(s,a.repoOwner,a.repoName,e,t,n,i)}),[_e,s]),et=Object(g.useCallback)((async()=>{if(void 0===s)return void Object(R.e)("Please sign in with GitHub!",2e3);const[e,t]=Object(T.c)(a,u,q,X,Z,Q,fe),n=Object.keys(e),i=await s.users.getAuthenticated(),r=i.data.name,o=i.data.email;for(let s=0;s<t.length;s++)await Ze(t[s],r,o,"");for(let s=0;s<n.length;s++){const t=n[s],i=e[t];await Je(t,i,r,o,"")}J(Z),z(q),_(a),se(!1),K(!1),W(!1)}),[s,fe,q,a,Z,Q,X,u,Je,Ze]),tt=Object(g.useCallback)((async()=>{if(void 0===s)return void Object(R.e)("Please sign in with GitHub!",2e3);const e=Object(T.d)(a,q,Z),t=Object.keys(e).sort(),n=await s.users.getAuthenticated(),i=await Object(L.a)(M,(e=>({filesToCreate:t,userLogin:n.data.login,resolveDialog:t=>e(t)})));if(!i.confirmSave)return;const r=n.data.name,o=n.data.email,c=i.repoName,l=n.data.login;try{await s.repos.createForAuthenticatedUser({name:c});for(let n=0;n<t.length;n++){const i=t[n],a=e[i];await Object(ce.h)(s,l,c,i,r,o,"Repository created from Source Academy",a)}J(Z),z(q),_(a),se(!1),K(!1),W(!1),Ae({repoOwner:l,repoName:c,dateOfCreation:new Date})}catch(d){console.error(d),Object(R.e)("Something went wrong while creating the repository!",2e3)}}),[q,a,s,Z]),st=Object(g.useCallback)((()=>{void 0!==ke&&new Date>ke.dueDate?Object(R.e)("It is past the due date for this assessment!"):void 0!==_e?et():tt()}),[ke,_e,et,tt]),nt=Object(g.useCallback)((async()=>{await Object(L.b)({contents:Object(A.jsxs)("div",{className:l.a.DIALOG_BODY,children:[Object(A.jsx)(U.a,{content:"Are you sure you want to reset the template?"}),Object(A.jsx)(U.a,{content:"*Note this will not affect the saved copy of your program, unless you save over it.*"})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&Qe()}),[Qe]),it=Object(g.useCallback)(((e,t,s,n)=>{if(void 0===n)return!0;const i=e-1;return!!Object(p.isEqual)(t[i],s[i])||window.confirm("You have unsaved changes to the current question. Are you sure you want to continue?")}),[]),at=Object(g.useCallback)((()=>{if(it(me,Z,Q,_e)){let e=Z;void 0!==_e&&(e=Q.map((e=>Object.assign({},e))),We(e));Fe(me-1,e)}}),[me,Z,Q,_e,We,it,Fe]),rt=Object(g.useCallback)((()=>{if(it(me,Z,Q,_e)){let e=Z;void 0!==_e&&(e=Q.map((e=>Object.assign({},e))),We(e));Fe(me+1,e)}}),[me,Z,Q,_e,We,it,Fe]),ot=Object(g.useCallback)((()=>{re.a.push("/githubassessments/missions")}),[]);m.a.useEffect((()=>{Pe||Ie!==ae.b.mobileEditor&&Ie!==ae.b.mobileEditorRun||Le(ae.b.questionOverview)}),[Pe,e,Ie]);const ct=m.a.useCallback((e=>{Me(e),Ke(me,e)}),[me,Ke,Me]),lt=(e,t,s)=>{e!==t&&Le(e)},dt=m.a.useRef(Ie);dt.current=Ie;const ut=()=>{e.handleEditorEval(),dt.current===ae.b.testcases&&t(Object(o.runAllTestcases)(ge))},ht=Object(g.useCallback)((e=>{const t=[];for(let s=0;s<Z.length;s++){const n=Object.assign({},Z[s]);n.taskDescription=e[s],t.push(n)}We(t)}),[Z,We]),pt=Object(g.useCallback)((e=>{const t=Z.map((e=>Object.assign({},e)));t[me-1]={...t[me-1],testCases:e},Ue({editorTestcases:t[me-1].testCases}),We(t)}),[me,Z,Ue,We]),gt=Object(g.useCallback)((e=>{const t=Z.map((e=>Object.assign({},e)));t[me-1]={...t[me-1],testPrepend:e},We(t)}),[me,Z,We]),mt=Object(g.useCallback)((e=>{const t=Z.map((e=>Object.assign({},e)));t[me-1]={...t[me-1],testPostpend:e},We(t)}),[me,Z,We]),bt=e=>{const s=[{label:"Task",iconName:d.a.NINJA,body:Object(A.jsx)(V,{allowEdits:fe,currentTaskNumber:me,taskDescriptions:Z.map((e=>e.taskDescription)),setTaskDescriptions:ht}),id:ae.b.questionOverview},{label:"Briefing",iconName:d.a.BRIEFCASE,body:Object(A.jsx)(G,{allowEdits:fe,content:q,setContent:He}),id:ae.b.briefing}],n=me-1,i=Z[n]?Z[n].testPrepend:"",r=Z[n]?Z[n].testPostpend:"";return s.push({label:"Testcases",iconName:d.a.AIRPLANE,body:Object(A.jsx)(ie,{allowEdits:fe,testcases:De,testPrepend:i,testPostpend:r,setTaskTestcases:pt,setTestPrepend:gt,setTestPostpend:mt,handleTestcaseEval:e=>t(Object(o.evalTestcase)(ge,e))}),id:ae.b.testcases}),fe&&s.push({label:"Mission Metadata",iconName:d.a.BUILD,body:Object(A.jsx)(H,{missionMetadata:a,setMissionMetadata:Ve}),id:ae.b.missionMetadata}),{selectedTabId:Ie,tabs:{beforeDynamicTabs:s,afterDynamicTabs:[]},onChange:lt,workspaceLocation:"githubAssessment"}},ft=()=>{const e=Z.slice(0,me).concat([he]).concat(Z.slice(me,Z.length));We(e);Fe(me+1,e)},vt=()=>{const e=me-1,t=Z.slice(0,e).concat(Z.slice(me,Z.length));We(t);Fe(1===me?me:me-1,t)},yt=()=>{const e=Object(A.jsx)(E.a,{handleEditorEval:ut},"run"),t=Object(A.jsx)(w.a,{hasUnsavedChanges:Ne,onClickSave:st},"save"),s=Object(A.jsx)(S.a,{onClick:nt},"reset"),n=Object(A.jsx)(v.a,{handleChapterSelect:()=>{},sourceChapter:a.sourceVersion,sourceVariant:F.b.defaultSourceVariant,disabled:!0},"chapter"),i=Object(A.jsx)(j.a,{onClickNext:rt,onClickReturn:ot,questionProgress:[me,Z.length]},"next_question"),r=Object(A.jsx)(O.a,{onClick:at,questionProgress:[me,Z.length]},"previous_question"),o=Object(A.jsx)(C.a,{questionProgress:[me,Z.length]},"task_view"),c=Pe?[t,s]:[e,t,s,n];if(fe){const e=Object(A.jsx)(I,{addNewQuestion:ft,numberOfTasks:Z.length},"add_task"),t=Object(A.jsx)(P,{deleteCurrentQuestion:vt,numberOfTasks:Z.length},"delete_task"),s=Object(A.jsx)(k,{displayMCQInEditor:()=>qe(!0),displayTextInEditor:()=>qe(!1),mcqDisplayed:Ce},"display MCQ");c.push(e,t,s)}return{editorButtons:c,flowButtons:[r,o,i]}},xt=Object(g.useCallback)((e=>{if(!je)return;const t=Object.assign({},Ee);t.answer=e,we(t),Ke(me,Object(T.a)(t))}),[je,me,Ke,Ee]),jt=Object(g.useMemo)((()=>je&&Ce?{mcq:Ee,handleMCQSubmit:xt}:void 0),[je,Ce,Ee,xt]),Ot={editorVariant:"normal",editorTabs:e.editorTabs.map(N.a),editorSessionId:"",handleDeclarationNavigate:e=>t(Object(o.navigateToDeclaration)(ge,e)),handleEditorEval:ut,handleEditorValueChange:ct,handleUpdateHasUnsavedChanges:Be,handleEditorUpdateBreakpoints:e=>t(Object(o.setEditorBreakpoint)(e,ge)),handlePromptAutocomplete:(e,s,n)=>t(Object(o.promptAutocomplete)(ge,e,s,n)),isEditorAutorun:!1},Ct={handleBrowseHistoryDown:()=>t(Object(o.browseReplHistoryDown)(ge)),handleBrowseHistoryUp:()=>t(Object(o.browseReplHistoryUp)(ge)),handleReplEval:e.handleReplEval,handleReplValueChange:e=>t(Object(o.updateReplValue)(e,ge)),output:e.output,replValue:e.replValue,sourceChapter:a.sourceVersion||n.Chapter.CLANG,sourceVariant:n.Variant.DEFAULT,externalLibrary:f.a.NONE,replButtons:(()=>{const t=Object(A.jsx)(y.a,{handleReplOutputClear:Ge},"clear_repl");return[Object(A.jsx)(x.a,{handleReplEval:e.handleReplEval,isRunning:e.isRunning},"eval_repl"),t]})()},St={tabs:[]},Et={controlBarProps:yt(),editorContainerProps:je&&Ce?void 0:Ot,handleSideContentHeightChange:e=>t(Object(o.changeSideContentHeight)(e,ge)),hasUnsavedChanges:Ne,mcqProps:jt,sideBarProps:St,sideContentHeight:e.sideContentHeight,sideContentProps:bt(),replProps:Ct},wt={editorContainerProps:je&&Ce?void 0:Ot,replProps:Ct,sideBarProps:St,hasUnsavedChanges:Ne,mcqProps:jt,mobileSideContentProps:(()=>{const e=bt();return{mobileControlBarProps:{...yt()},...e,onChange:(e,t,s)=>{e!==t&&(t===ae.b.testcases&&e===ae.b.mobileEditorRun||Le(e))},selectedTabId:Ie,handleEditorEval:ut}})()};return ye?Object(A.jsx)("div",{className:h()("missionLoading",l.a.DARK),children:Object(A.jsx)(c.G,{description:"Loading",icon:Object(A.jsx)(c.R,{size:c.S.LARGE})})}):Object(A.jsxs)("div",{className:h()("WorkspaceParent",l.a.DARK),children:[Ye,Pe?Object(A.jsx)(B.a,{...wt}):Object(A.jsx)(oe.a,{...Et})]})};const be="githubAssessment",fe=Object(a.l)(Object(i.b)((e=>({activeEditorTabIndex:e.workspaces.githubAssessment.activeEditorTabIndex,editorTabs:e.workspaces.githubAssessment.editorTabs,editorTestcases:e.workspaces.githubAssessment.editorTestcases,hasUnsavedChanges:e.workspaces.githubAssessment.hasUnsavedChanges,isRunning:e.workspaces.githubAssessment.isRunning,isDebugging:e.workspaces.githubAssessment.isDebugging,enableDebugging:e.workspaces.githubAssessment.enableDebugging,output:e.workspaces.githubAssessment.output,replValue:e.workspaces.githubAssessment.replValue,sideContentHeight:e.workspaces.githubAssessment.sideContentHeight,sourceChapter:n.Chapter.CLANG})),(e=>Object(r.b)({handleChapterSelect:e=>Object(o.chapterSelect)(e,n.Variant.DEFAULT,be),handleEditorEval:()=>Object(o.evalEditor)(be),handleEditorValueChange:e=>Object(o.updateEditorValue)(e,be),handleReplEval:()=>Object(o.evalRepl)(be),handleReplOutputClear:()=>Object(o.clearReplOutput)(be),handleUpdateHasUnsavedChanges:e=>Object(o.updateHasUnsavedChanges)(be,e),handleUpdateWorkspace:e=>Object(o.updateWorkspace)(be,e)},e)))(me));t.a=fe},532:function(e,t,s){"use strict";var n=s(42),i=s(242),a=s(3),r=s(122),o=s(380),c=s(20),l=s.n(c),d=(s(1),s(47)),u=s(35),h=s(12),p=s(0);const g=e=>{const{isMobileBreakpoint:t}=Object(u.e)(),s=void 0!==Object(u.f)((e=>e.session.githubOctokitObject)).octokit?Object(p.jsx)(h.a,{label:"Log Out",icon:r.a.GIT_BRANCH,onClick:e.onClickLogOut}):Object(p.jsx)(h.a,{label:"Log In",icon:r.a.GIT_BRANCH,onClick:e.onClickLogIn});return Object(p.jsx)(n.c,{large:!t,children:s})};var m=s(55);const b=[r.a.FLAME,r.a.LIGHTBULB,r.a.PREDICTIVE_ANALYSIS,r.a.COMPARISON,r.a.MANUAL];t.a=e=>{var t,s;const r=t=>{e.changeCourseHandler(t)};return Object(p.jsxs)(n.C,{className:"NavigationBar secondary-navbar",children:[Object(p.jsx)(n.E,{align:i.a.LEFT,children:null===(t=e.types)||void 0===t?void 0:t.map(((t,s)=>Object(p.jsxs)(d.b,{to:{pathname:`/githubassessments/${Object(m.a)(t)}`,state:{courses:e.courses,assessmentTypeOverviews:e.assessmentTypeOverviews,selectedCourse:e.selectedCourse}},activeClassName:a.a.ACTIVE,className:l()("NavigationBar__link",a.a.BUTTON,a.a.MINIMAL),children:[Object(p.jsx)(n.w,{icon:s<5?b[s]:b[0]}),Object(p.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:t})]},t)))}),Object(p.jsxs)(n.E,{align:i.a.RIGHT,children:[void 0!==e.octokit&&e.types&&e.types.length>0&&Object(p.jsx)(n.y,{disabled:!0,leftElement:Object(p.jsx)(o.a,{content:Object(p.jsx)(n.A,{children:null===(s=e.courses)||void 0===s?void 0:s.map((e=>Object(p.jsx)(n.B,{onClick:r,text:e},e)))}),placement:"bottom-end",children:Object(p.jsx)(n.b,{minimal:!0,rightIcon:"caret-down","aria-label":"choose"})}),placeholder:"Select Course",onChange:e.changeCourseHandler,value:e.selectedCourse},"courseselect"),Object(p.jsx)(g,{onClickLogIn:e.handleGitHubLogIn,onClickLogOut:e.handleGitHubLogOut},"loginlogout")]})]})}},55:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));const n=e=>e.toLowerCase().replace(/\W+/g,"_"),i=e=>{if(void 0===e)return null;const t=parseInt(e,10);return Number.isInteger(t)?t:null}},560:function(e,t,s){},574:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeWrapper=void 0,t.makeWrapper=function(e,t){for(const s in e)e.hasOwnProperty(s)&&Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s));for(const s of["length","name"])e.hasOwnProperty(s)&&Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}},59:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"g",(function(){return a})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),s.d(t,"j",(function(){return c})),s.d(t,"k",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return h})),s.d(t,"c",(function(){return p})),s.d(t,"l",(function(){return g}));const n="BEGIN_INTERRUPT_EXECUTION",i="END_INTERRUPT_EXECUTION",a="EVAL_INTERPRETER_ERROR",r="EVAL_INTERPRETER_SUCCESS",o="EVAL_TESTCASE_FAILURE",c="EVAL_TESTCASE_SUCCESS",l="HANDLE_CONSOLE_LOG",d="BEGIN_DEBUG_PAUSE",u="END_DEBUG_PAUSE",h="DEBUG_RESUME",p="DEBUG_RESET",g="HIGHLIGHT_LINE"},627:function(e){e.exports=JSON.parse('{"blank":{"title":"blank","description":"<div><h4>blank</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a blank square\\n</div></div>","meta":"const"},"circle":{"title":"circle","description":"<div><h4>circle</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a circle\\n</div></div>","meta":"const"},"corner":{"title":"corner","description":"<div><h4>corner</h4><div class=\\"description\\">\\n    primitive Rune with black triangle,\\nfilling upper right corner\\n</div></div>","meta":"const"},"heart":{"title":"heart","description":"<div><h4>heart</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a heart\\n</div></div>","meta":"const"},"nova":{"title":"nova","description":"<div><h4>nova</h4><div class=\\"description\\">\\n    primitive Rune in the rune of two overlapping\\ntriangles, residing in the upper half\\nof\\n</div></div>","meta":"const"},"pentagram":{"title":"pentagram","description":"<div><h4>pentagram</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a pentagram\\n</div></div>","meta":"const"},"rcross":{"title":"rcross","description":"<div><h4>rcross</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a \\nsmallsquare inside a large square,\\neach diagonally split into a\\nblack and white half\\n</div></div>","meta":"const"},"ribbon":{"title":"ribbon","description":"<div><h4>ribbon</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a ribbon\\nwinding outwards in an anticlockwise spiral\\n</div></div>","meta":"const"},"sail":{"title":"sail","description":"<div><h4>sail</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a sail\\n</div></div>","meta":"const"},"square":{"title":"square","description":"<div><h4>square</h4><div class=\\"description\\">\\n    primitive Rune in the rune of a full square\\n</div></div>","meta":"const"},"add":{"title":"add(obj)","description":"<div><h4>add(obj)</h4><div class=\\"description\\">\\n    Add the object to the scene. Only objects added to the scene\\nwill appear.\\n</div></div>","meta":"func"},"add_keyboard_listener":{"title":"add_keyboard_listener(key, event, callback) \u2192 {Phaser.Input.Keyboard.Key}","description":"<div><h4>add_keyboard_listener(key, event, callback) \u2192 {Phaser.Input.Keyboard.Key}</h4><div class=\\"description\\">\\n    Attach a listener to the object. The callback will be executed\\nwhen the event is emitted.\\nMutate the object.\\n\\nFor all available events, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Input.Events.html\\n\\nFor list of keycodes, see:\\nhttps://github.com/photonstorm/phaser/blob/v3.22.0/src/input/keyboard/keys/KeyCodes.js\\n</div></div>","meta":"func"},"add_listener":{"title":"add_listener(obj, event, callback) \u2192 {Phaser.Input.InputPlugin}","description":"<div><h4>add_listener(obj, event, callback) \u2192 {Phaser.Input.InputPlugin}</h4><div class=\\"description\\">\\n    Attach a listener to the object. The callback will be executed\\nwhen the event is emitted.\\nMutate the object.\\n\\nFor all available events, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Input.Events.html\\n</div></div>","meta":"func"},"add_to_container":{"title":"add_to_container(container, objs) \u2192 {Phaser.GameObject.Container}","description":"<div><h4>add_to_container(container, objs) \u2192 {Phaser.GameObject.Container}</h4><div class=\\"description\\">\\n    Add the given game object to the container.\\nMutates the container.\\n</div></div>","meta":"func"},"add_tween":{"title":"(async) add_tween(obj, config) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>(async) add_tween(obj, config) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Create a tween to the object and plays it.\\nMutate the object.\\n</div></div>","meta":"func"},"adsr":{"title":"adsr(attack_ratio, decay_ratio, sustain_level, release_ratio) \u2192 {function}","description":"<div><h4>adsr(attack_ratio, decay_ratio, sustain_level, release_ratio) \u2192 {function}</h4><div class=\\"description\\">\\n    Returns an envelope: a function from Sound to Sound.\\nWhen the envelope is applied to a Sound, it returns\\na new Sound that results from applying ADSR to\\nthe given Sound. The Attack, Sustain and\\nRelease ratios are given in the first, second and fourth\\narguments, and the Sustain level is given in \\nthe third argument as a fraction between 0 and 1.\\n</div></div>","meta":"func"},"alpha_of":{"title":"alpha_of(px) \u2192 {Number}","description":"<div><h4>alpha_of(px) \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the alpha component of a given Pixel <code>px</code>\\n</div></div>","meta":"func"},"anaglyph":{"title":"anaglyph(rune) \u2192 {Picture}","description":"<div><h4>anaglyph(rune) \u2192 {Picture}</h4><div class=\\"description\\">\\n    turns a given Rune into an anaglyph Picture\\n</div></div>","meta":"func"},"arc":{"title":"arc(t) \u2192 {Point}","description":"<div><h4>arc(t) \u2192 {Point}</h4><div class=\\"description\\">\\n    this function is a curve: a function from a\\nfraction t to a point. The points lie on the\\nright half of the unit circle. They start at Point (0,1) when\\nt is 0. When t is 0.5, they reach Point (1,0),\\nwhen t is 1, they reach Point (0, -1).\\n</div></div>","meta":"func"},"b_of":{"title":"b_of(p) \u2192 {Number}","description":"<div><h4>b_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the blue component of a given Point\\n</div></div>","meta":"func"},"bell":{"title":"bell(note, duration) \u2192 {Sound}","description":"<div><h4>bell(note, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    returns a Sound that is reminiscent of a bell, playing\\na given note for a given <code>duration</code> of seconds\\n</div></div>","meta":"func"},"beside":{"title":"beside(rune1, rune2) \u2192 {Rune}","description":"<div><h4>beside(rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from two given Runes by\\nplacing the first on the left of the second,\\nboth occupying equal portions of the width \\nof the result\\n</div></div>","meta":"func"},"beside_frac":{"title":"beside_frac(frac, rune1, rune2) \u2192 {Rune}","description":"<div><h4>beside_frac(frac, rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from two given Runes by\\nplacing the first on the left of the second\\nsuch that the first one occupies frac \\nportion of the width of the result and \\nthe second the rest\\n</div></div>","meta":"func"},"black":{"title":"black(rune) \u2192 {Rune}","description":"<div><h4>black(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune black.\\n</div></div>","meta":"func"},"blue":{"title":"blue(rune) \u2192 {Rune}","description":"<div><h4>blue(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune blue.\\n</div></div>","meta":"func"},"blue_of":{"title":"blue_of(px) \u2192 {Number}","description":"<div><h4>blue_of(px) \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the blue component of a given Pixel <code>px</code>\\n</div></div>","meta":"func"},"brown":{"title":"brown(rune) \u2192 {Rune}","description":"<div><h4>brown(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune brown.\\n</div></div>","meta":"func"},"cello":{"title":"cello(note, duration) \u2192 {Sound}","description":"<div><h4>cello(note, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    returns a Sound that is reminiscent of a cello, playing\\na given note for a given <code>duration</code> of seconds\\n</div></div>","meta":"func"},"color":{"title":"color(rune, r, g, b) \u2192 {Rune}","description":"<div><h4>color(rune, r, g, b) \u2192 {Rune}</h4><div class=\\"description\\">\\n    adds color to rune by specifying \\nthe red, green, blue (RGB) value, ranging from 0.0 to 1.0.\\nRGB is additive: if all values are 1, the color is white,\\nand if all values are 0, the color is black.\\n</div></div>","meta":"func"},"connect_ends":{"title":"connect_ends(curve1, curve2) \u2192 {Curve}","description":"<div><h4>connect_ends(curve1, curve2) \u2192 {Curve}</h4><div class=\\"description\\">\\n    this function is a binary Curve operator: It\\ntakes two Curves as arguments and returns\\na new Curve. The two Curves are combined\\nby using the full first Curve for the first portion\\nof the result and by using the full second Curve for the second\\nportion of the result.\\nThe second Curve is translated such that its point\\nat fraction 0 is the same as the Point of the first\\nCurve at fraction 1.\\n</div></div>","meta":"func"},"connect_rigidly":{"title":"connect_rigidly(curve1, curve2) \u2192 {Curve}","description":"<div><h4>connect_rigidly(curve1, curve2) \u2192 {Curve}</h4><div class=\\"description\\">\\n    this function is a binary Curve operator: It\\ntakes two Curves as arguments and returns\\na new Curve. The two Curves are combined\\nby using the full first Curve for the first portion\\nof the result and by using the full second Curve for the \\nsecond portion of the result.\\nThe second Curve is not changed, and therefore\\nthere might be a big jump in the middle of the\\nresult Curve.\\n</div></div>","meta":"func"},"consecutively":{"title":"consecutively(sounds) \u2192 {Sound}","description":"<div><h4>consecutively(sounds) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a new sound by combining the sounds in a given\\nlist so that\\nthey are arranged consecutively. Let us say the durations\\nof the sounds are <code>d1</code>, ..., <code>dn</code> and the wave \\nfunctions are <code>w1</code>, ..., <code>wn</code>. Then the resulting\\nsound has the duration of the sum of <code>d1</code>, ..., <code>dn</code>.\\nThe wave function <code>w</code> of the resulting sound uses <code>w1</code> for the first\\n<code>d1</code> seconds, <code>w2</code> for the next \\n<code>d2</code> seconds etc. We specify that <code>w(d1) = w2(0)</code>,\\n<code>w(d1+d2) = w3(0)</code>, etc\\n</div></div>","meta":"func"},"copy_image":{"title":"copy_image(src, dst) \u2192 {undefined}","description":"<div><h4>copy_image(src, dst) \u2192 {undefined}</h4><div class=\\"description\\">\\n    Filter that copies all Pixels faithfully from the\\nsource Image <code>src</code> to the destination Image <code>dst</code>\\n</div></div>","meta":"func"},"create_anim":{"title":"create_anim(anim_config) \u2192 {boolean}","description":"<div><h4>create_anim(anim_config) \u2192 {boolean}</h4><div class=\\"description\\">\\n    Create a new animation and add it to the available animations.\\nAnimations are global i.e. once created, it can be used anytime, anywhere.\\n\\nNOTE: Anims DO NOT need to be added into the scene to be used.\\nIt is automatically added to the scene when it is created.\\n\\nWIll return true if the animation key is valid\\n(key is specified within the anim_config); false if the key\\nis already in use.\\n</div></div>","meta":"func"},"create_anim_config":{"title":"create_anim_config(anims_key, anim_frames, frame_rate, duration, repeat, yoyo, show_on_start, hide_on_complete) \u2192 {config}","description":"<div><h4>create_anim_config(anims_key, anim_frames, frame_rate, duration, repeat, yoyo, show_on_start, hide_on_complete) \u2192 {config}</h4><div class=\\"description\\">\\n    Create anims config, can be used to configure anims\\n\\nFor more details about the config object, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Types.Animations.html#.Animation\\n</div></div>","meta":"func"},"create_anim_frame_config":{"title":"create_anim_frame_config(key, frame, duration, visible) \u2192 {config}","description":"<div><h4>create_anim_frame_config(key, frame, duration, visible) \u2192 {config}</h4><div class=\\"description\\">\\n    Create animation frame config, can be used to configure a specific frame\\nwithin an animation.\\n\\nThe key should refer to an image that is already loaded.\\nTo make frame_config from spritesheet based on its frames,\\nuse create_anim_spritesheet_frame_configs instead.\\n</div></div>","meta":"func"},"create_anim_spritesheet_frame_configs":{"title":"create_anim_spritesheet_frame_configs(key) \u2192 {list_of_configs}","description":"<div><h4>create_anim_spritesheet_frame_configs(key) \u2192 {list_of_configs}</h4><div class=\\"description\\">\\n    Create list of animation frame config, can be used directly as part of \\nanim_config\'s `frames` parameter.\\n\\nThis function will generate list of frame configs based on the \\nspritesheet_config attached to the associated spritesheet.\\nThis function requires that the given key is a spritesheet key\\ni.e. a key associated with loaded spritesheet, loaded in using\\nload_spritesheet function.\\n\\nWill return empty frame configs if key is not associated with\\na spritesheet.\\n</div></div>","meta":"func"},"create_award":{"title":"create_award(x, y, award_key) \u2192 {Phaser.GameObject.Sprite}","description":"<div><h4>create_award(x, y, award_key) \u2192 {Phaser.GameObject.Sprite}</h4><div class=\\"description\\">\\n    Create an award using the key associated with the award.\\nThe award key can be obtained from the Awards Hall or\\nAwards menu, after attaining the award.\\n\\nValid award will have an on-hover VERIFIED tag to distinguish\\nit from images created by create_image.\\n\\nIf student does not possess the award, this function will\\nreturn a untagged, default image.\\n</div></div>","meta":"func"},"create_config":{"title":"create_config(lst) \u2192 {config}","description":"<div><h4>create_config(lst) \u2192 {config}</h4><div class=\\"description\\">\\n    Transforms the given list into config object. The list follows\\nthe format of list([key1, value1], [key2, value2]).\\n\\ne.g list([\\"alpha\\", 0], [\\"duration\\", 1000])\\n</div></div>","meta":"func"},"create_container":{"title":"create_container(x, y) \u2192 {Phaser.GameObjects.Container}","description":"<div><h4>create_container(x, y) \u2192 {Phaser.GameObjects.Container}</h4><div class=\\"description\\">\\n    Create a container object. Container is able to contain any other game object,\\nand the positions of contained game object will be relative to the container.\\n\\nRendering the container as visible or invisible will also affect the contained\\ngame object.\\n\\nContainer can also contain another container.\\n\\n0, 0 is located at the top, left hand side.\\n\\nFor more details about container object, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.GameObjects.Container.html\\n</div></div>","meta":"func"},"create_ellipse":{"title":"create_ellipse(x, y, width, height, fill, alpha) \u2192 {Phaser.GameObjects.Ellipse}","description":"<div><h4>create_ellipse(x, y, width, height, fill, alpha) \u2192 {Phaser.GameObjects.Ellipse}</h4><div class=\\"description\\">\\n    Create an ellipse object.\\n</div></div>","meta":"func"},"create_image":{"title":"create_image(x, y, asset_key) \u2192 {Phaser.GameObjects.Sprite}","description":"<div><h4>create_image(x, y, asset_key) \u2192 {Phaser.GameObjects.Sprite}</h4><div class=\\"description\\">\\n    Create an image using the key associated with a loaded image.\\nIf key is not associated with any loaded image, throws error.\\n\\n0, 0 is located at the top, left hand side.\\n</div></div>","meta":"func"},"create_interactive_config":{"title":"create_interactive_config(draggable, use_hand_cursor, pixel_perfect, alpha_tolerance) \u2192 {config}","description":"<div><h4>create_interactive_config(draggable, use_hand_cursor, pixel_perfect, alpha_tolerance) \u2192 {config}</h4><div class=\\"description\\">\\n    Create interactive config object, can be used to configure interactive settings.\\n\\nFor more details about interactive config object, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Types.Input.html#.InputConfiguration\\n</div></div>","meta":"func"},"create_rect":{"title":"create_rect(x, y, width, height, fill, alpha) \u2192 {Phaser.GameObjects.Rectangle}","description":"<div><h4>create_rect(x, y, width, height, fill, alpha) \u2192 {Phaser.GameObjects.Rectangle}</h4><div class=\\"description\\">\\n    Create a rectangle object.\\n\\n0, 0 is located at the top, left hand side.\\n</div></div>","meta":"func"},"create_sound_config":{"title":"create_sound_config(mute, volume, rate, detune, seek, loop, delay) \u2192 {config}","description":"<div><h4>create_sound_config(mute, volume, rate, detune, seek, loop, delay) \u2192 {config}</h4><div class=\\"description\\">\\n    Create sound config object, can be used to configure sound settings.\\n\\nFor more details about sound config object, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Types.Sound.html#.SoundConfig\\n</div></div>","meta":"func"},"create_spritesheet_config":{"title":"create_spritesheet_config(frame_width, frame_height, start_frame, margin, spacing) \u2192 {config}","description":"<div><h4>create_spritesheet_config(frame_width, frame_height, start_frame, margin, spacing) \u2192 {config}</h4><div class=\\"description\\">\\n    Create spritesheet config, can be used to configure the frames within the\\nspritesheet. Can be used as config at load_spritesheet.\\n</div></div>","meta":"func"},"create_text":{"title":"create_text(x, y, text, config) \u2192 {Phaser.GameObjects.Text}","description":"<div><h4>create_text(x, y, text, config) \u2192 {Phaser.GameObjects.Text}</h4><div class=\\"description\\">\\n    Create a text object.\\n\\n0, 0 is located at the top, left hand side.\\n</div></div>","meta":"func"},"create_text_config":{"title":"create_text_config(font_family, font_size, color, stroke, stroke_thickness, align) \u2192 {config}","description":"<div><h4>create_text_config(font_family, font_size, color, stroke, stroke_thickness, align) \u2192 {config}</h4><div class=\\"description\\">\\n    Create text config object, can be used to stylise text object.\\n\\nfont_family: for available font_family, see:\\nhttps://developer.mozilla.org/en-US/docs/Web/CSS/font-family#Valid_family_names\\n\\nalign: must be either \'left\', \'right\', \'center\', or \'justify\'\\n\\nFor more details about text config, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Types.GameObjects.Text.html#.TextStyle\\n</div></div>","meta":"func"},"create_tween_config":{"title":"create_tween_config(target_prop, target_value, delay, duration, ease, on_complete, yoyo, loop, loop_delay, on_loop) \u2192 {config}","description":"<div><h4>create_tween_config(target_prop, target_value, delay, duration, ease, on_complete, yoyo, loop, loop_delay, on_loop) \u2192 {config}</h4><div class=\\"description\\">\\n    Create tween config object, can be used to configure tween settings.\\n\\nFor more details about tween config object, see:\\nhttps://photonstorm.github.io/phaser3-docs/Phaser.Types.Tweens.html#.TweenBuilderConfig\\n</div></div>","meta":"func"},"destroy_obj":{"title":"destroy_obj(obj)","description":"<div><h4>destroy_obj(obj)</h4><div class=\\"description\\">\\n    Destroy the given game object. Destroyed game object\\nis removed from the scene, and all of its listeners\\nis also removed.\\n</div></div>","meta":"func"},"draw_3D_connected":{"title":"draw_3D_connected(num) \u2192 {function}","description":"<div><h4>draw_3D_connected(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given 3D Curve into a Drawing, \\nby sampling the 3D Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system \\ndisplays it graphically, in a window, instead of textually. \\nThe parts between (0,0,0) and (1,1,1) of the resulting \\nDrawing are shown within the unit cube.\\n</div></div>","meta":"func"},"draw_3D_connected_full_view":{"title":"draw_3D_connected_full_view(num) \u2192 {function}","description":"<div><h4>draw_3D_connected_full_view(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given 3D Curve into a Drawing, \\nby sampling the 3D Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system \\ndisplays it graphically, in a window, instead of textually. \\nThe Drawing is stretched or shrunk \\nto show the full curve \\nand maximize its width, height and depth within the cube.\\n</div></div>","meta":"func"},"draw_3D_connected_full_view_proportional":{"title":"draw_3D_connected_full_view_proportional(num) \u2192 {function}","description":"<div><h4>draw_3D_connected_full_view_proportional(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given 3D Curve into a Drawing, \\nby sampling the 3D Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system \\ndisplays it graphically, in a window, instead of textually. \\nThe Drawing is scaled proportionally with its size maximized \\nto fit entirely inside the cube.\\n</div></div>","meta":"func"},"draw_3D_points_full_view_proportional":{"title":"draw_3D_points_full_view_proportional(num) \u2192 {function}","description":"<div><h4>draw_3D_points_full_view_proportional(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given 3D Curve into a Drawing, \\nby sampling the 3D Curve at <code>num</code> sample points. \\nThe Drawing consists of isolated points, and does not connect them. \\nWhen a program evaluates to a Drawing, the Source system \\ndisplays it graphically, in a window, instead of textually. \\nThe Drawing is scaled proportionally with its size maximized \\nto fit entirely inside the cube.\\n</div></div>","meta":"func"},"draw_3D_points_on":{"title":"draw_3D_points_on(num) \u2192 {function}","description":"<div><h4>draw_3D_points_on(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given 3D Curve into a Drawing, \\nby sampling the 3D Curve at <code>num</code> sample points. \\nThe Drawing consists of isolated points, and does not connect them. \\nWhen a program evaluates to a Drawing, the Source system \\ndisplays it graphically, in a window, instead of textually. \\nThe parts between (0,0,0) and (1,1,1) of the resulting \\nDrawing are shown within the unit cube.\\n</div></div>","meta":"func"},"draw_connected":{"title":"draw_connected(num) \u2192 {function}","description":"<div><h4>draw_connected(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given Curve into a Drawing, \\nby sampling the Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system\\ndisplays it graphically, in a window, instead of textually.\\nThe parts between (0,0) and (1,1) of the resulting Drawing \\nare shown in the window.\\n</div></div>","meta":"func"},"draw_connected_full_view":{"title":"draw_connected_full_view(num) \u2192 {function}","description":"<div><h4>draw_connected_full_view(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given Curve into a Drawing, \\nby sampling the Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system\\ndisplays it graphically, in a window, instead of textually.\\nThe Drawing is stretched or shrunk\\nto show the full curve\\nand maximize its width and height, with some padding.\\n</div></div>","meta":"func"},"draw_connected_full_view_proportional":{"title":"draw_connected_full_view_proportional(num) \u2192 {function}","description":"<div><h4>draw_connected_full_view_proportional(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given Curve into a Drawing, \\nby sampling the Curve at <code>num</code> sample points \\nand connecting each pair with a line. \\nWhen a program evaluates to a Drawing, the Source system\\ndisplays it graphically, in a window, instead of textually.\\nThe Drawing is scaled proportionally to show the full curve\\nand maximize its size, with some padding.\\n</div></div>","meta":"func"},"draw_points_full_view_proportional":{"title":"draw_points_full_view_proportional(num) \u2192 {function}","description":"<div><h4>draw_points_full_view_proportional(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given Curve into a Drawing, \\nby sampling the Curve at <code>num</code> sample points.\\nThe Drawing consists of isolated points, and does not connect them.\\nWhen a program evaluates to a Drawing, the Source system\\ndisplays it graphically, in a window, instead of textually.\\nThe Drawing is scaled proportionally with its size maximized \\nto fit entirely inside the window, with some padding.\\n</div></div>","meta":"func"},"draw_points_on":{"title":"draw_points_on(num) \u2192 {function}","description":"<div><h4>draw_points_on(num) \u2192 {function}</h4><div class=\\"description\\">\\n    returns a function that turns a given Curve into a Drawing, \\nby sampling the Curve at <code>num</code> sample points.\\nThe Drawing consists of isolated points, and does not connect them.\\nWhen a program evaluates to a Drawing, the Source system\\ndisplays it graphically, in a window, instead of textually.\\nThe parts between (0,0) and (1,1) of the resulting Drawing \\nare shown in the window.\\n</div></div>","meta":"func"},"ev3_ambientLightIntensity":{"title":"ev3_ambientLightIntensity(colorSensor) \u2192 {number}","description":"<div><h4>ev3_ambientLightIntensity(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the ambient light intensity seen by the colour sensor.\\n</div></div>","meta":"func"},"ev3_colorSensor":{"title":"ev3_colorSensor() \u2192 {peripheral}","description":"<div><h4>ev3_colorSensor() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the colour sensor connected any of ports 1, 2, 3 or 4.\\n</div></div>","meta":"func"},"ev3_colorSensorBlue":{"title":"ev3_colorSensorBlue(colorSensor) \u2192 {number}","description":"<div><h4>ev3_colorSensorBlue(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the amount of blue seen by the colour sensor.\\n</div></div>","meta":"func"},"ev3_colorSensorGetColor":{"title":"ev3_colorSensorGetColor(colorSensor) \u2192 {number}","description":"<div><h4>ev3_colorSensorGetColor(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the colour as seen by the colour sensor.\\n\\nPossible colour return values are:\\n<ul><li>0 none</li>\\n<li>1 black</li>\\n<li>2 blue</li>\\n<li>3 green</li>\\n<li>4 yellow</li>\\n<li>5 red</li>\\n<li>6 white</li>\\n<li>7 brown</li></ul>\\n</div></div>","meta":"func"},"ev3_colorSensorGreen":{"title":"ev3_colorSensorGreen(colorSensor) \u2192 {number}","description":"<div><h4>ev3_colorSensorGreen(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the amount of green seen by the colour sensor.\\n</div></div>","meta":"func"},"ev3_colorSensorRed":{"title":"ev3_colorSensorRed(colorSensor) \u2192 {number}","description":"<div><h4>ev3_colorSensorRed(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the amount of red seen by the colour sensor.\\n</div></div>","meta":"func"},"ev3_connected":{"title":"ev3_connected(obj) \u2192 {boolean}","description":"<div><h4>ev3_connected(obj) \u2192 {boolean}</h4><div class=\\"description\\">\\n    Checks if the peripheral is connected.\\n</div></div>","meta":"func"},"ev3_gyroSensor":{"title":"ev3_gyroSensor() \u2192 {peripheral}","description":"<div><h4>ev3_gyroSensor() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the gyro sensor connected any of ports 1, 2, 3 or 4.\\n</div></div>","meta":"func"},"ev3_gyroSensorAngle":{"title":"ev3_gyroSensorAngle(gyroSensor) \u2192 {number}","description":"<div><h4>ev3_gyroSensorAngle(gyroSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the absolute angle detected by the gyro sensor, measured from when\\nthe sensor was last switched to angle mode from sensor rate mode.\\n</div></div>","meta":"func"},"ev3_gyroSensorRate":{"title":"ev3_gyroSensorRate(gyroSensor) \u2192 {number}","description":"<div><h4>ev3_gyroSensorRate(gyroSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the rate of rotation detected by the gyro sensor.\\n</div></div>","meta":"func"},"ev3_hello":{"title":"ev3_hello() \u2192 {string}","description":"<div><h4>ev3_hello() \u2192 {string}</h4><div class=\\"description\\">\\n    Returns a hello world message.\\n</div></div>","meta":"func"},"ev3_ledGetBrightness":{"title":"ev3_ledGetBrightness(led) \u2192 {number}","description":"<div><h4>ev3_ledGetBrightness(led) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the brightness of the given LED.\\n\\nThe brightness is a number ranging from 0 (off) to 255 (maximum).\\n</div></div>","meta":"func"},"ev3_ledLeftGreen":{"title":"ev3_ledLeftGreen() \u2192 {peripheral}","description":"<div><h4>ev3_ledLeftGreen() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the left green LED.\\n\\nNote that the four LEDs on the EV3 are laid out in two pairs of green and\\nred. If both in a pair are turned on, you can vary the colours in a small\\nspectrum between red and green.\\n</div></div>","meta":"func"},"ev3_ledLeftRed":{"title":"ev3_ledLeftRed() \u2192 {peripheral}","description":"<div><h4>ev3_ledLeftRed() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the left red LED.\\n\\nNote that the four LEDs on the EV3 are laid out in two pairs of green and\\nred. If both in a pair are turned on, you can vary the colours in a small\\nspectrum between red and green.\\n</div></div>","meta":"func"},"ev3_ledRightGreen":{"title":"ev3_ledRightGreen() \u2192 {peripheral}","description":"<div><h4>ev3_ledRightGreen() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the right green LED.\\n\\nNote that the four LEDs on the EV3 are laid out in two pairs of green and\\nred. If both in a pair are turned on, you can vary the colours in a small\\nspectrum between red and green.\\n</div></div>","meta":"func"},"ev3_ledRightRed":{"title":"ev3_ledRightRed() \u2192 {peripheral}","description":"<div><h4>ev3_ledRightRed() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the right red LED.\\n\\nNote that the four LEDs on the EV3 are laid out in two pairs of green and\\nred. If both in a pair are turned on, you can vary the colours in a small\\nspectrum between red and green.\\n</div></div>","meta":"func"},"ev3_ledSetBrightness":{"title":"ev3_ledSetBrightness(led, brightness)","description":"<div><h4>ev3_ledSetBrightness(led, brightness)</h4><div class=\\"description\\">\\n    Sets the brightness of the given LED.\\n\\nThe brightness is a number ranging from 0 (off) to 255 (maximum).\\n</div></div>","meta":"func"},"ev3_motorA":{"title":"ev3_motorA() \u2192 {peripheral}","description":"<div><h4>ev3_motorA() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the motor connected to port A.\\n</div></div>","meta":"func"},"ev3_motorB":{"title":"ev3_motorB() \u2192 {peripheral}","description":"<div><h4>ev3_motorB() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the motor connected to port B.\\n</div></div>","meta":"func"},"ev3_motorC":{"title":"ev3_motorC() \u2192 {peripheral}","description":"<div><h4>ev3_motorC() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the motor connected to port C.\\n</div></div>","meta":"func"},"ev3_motorD":{"title":"ev3_motorD() \u2192 {peripheral}","description":"<div><h4>ev3_motorD() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the motor connected to port D.\\n</div></div>","meta":"func"},"ev3_motorGetPosition":{"title":"ev3_motorGetPosition(motor) \u2192 {number}","description":"<div><h4>ev3_motorGetPosition(motor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the motor\'s current position, in pulses of the rotary encoder.\\n</div></div>","meta":"func"},"ev3_motorGetSpeed":{"title":"ev3_motorGetSpeed(motor) \u2192 {number}","description":"<div><h4>ev3_motorGetSpeed(motor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the motor\'s current speed, in tacho counts per second.\\n</div></div>","meta":"func"},"ev3_motorSetSpeed":{"title":"ev3_motorSetSpeed(motor, speed)","description":"<div><h4>ev3_motorSetSpeed(motor, speed)</h4><div class=\\"description\\">\\n    Sets the speed the motor will run at the next time <a href=\\"global.html#ev3_motorStart\\">ev3_motorStart</a>\\nis called.\\n</div></div>","meta":"func"},"ev3_motorSetStopAction":{"title":"ev3_motorSetStopAction(motor, stopAction)","description":"<div><h4>ev3_motorSetStopAction(motor, stopAction)</h4><div class=\\"description\\">\\n    Sets the stop action of the motor.\\n\\nPossible stop actions are:\\n\\n<ul><li><code>\\"coast\\"</code>: power will be removed from the motor and it will freely coast to a stop.</li>\\n<li><code>\\"brake\\"</code>: power will be removed from the motor and a passive electrical load will be placed on the motor. This load will absorb the energy from the rotation of the motors and cause the motor to stop more quickly than coasting.</li>\\n<li><code>\\"hold\\"</code>: actively try to hold the motor at the current position. If an external force tries to turn the motor, the motor will \u2018push back\u2019 to maintain its position.</li></ul>\\n</div></div>","meta":"func"},"ev3_motorStart":{"title":"ev3_motorStart(motor)","description":"<div><h4>ev3_motorStart(motor)</h4><div class=\\"description\\">\\n    Causes the motor to start with the previously set speed and stop action\\n(see motorSetSpeed and motorSetStopAction).\\n</div></div>","meta":"func"},"ev3_motorStop":{"title":"ev3_motorStop(motor)","description":"<div><h4>ev3_motorStop(motor)</h4><div class=\\"description\\">\\n    Causes the motor to stop using the previously set stop action.\\n</div></div>","meta":"func"},"ev3_pause":{"title":"ev3_pause(time)","description":"<div><h4>ev3_pause(time)</h4><div class=\\"description\\">\\n    Pauses for a period of time.\\n</div></div>","meta":"func"},"ev3_playSequence":{"title":"ev3_playSequence(beeps)","description":"<div><h4>ev3_playSequence(beeps)</h4><div class=\\"description\\">\\n    Causes the robot to emit a sequence of beeps. Returns after the beeps are\\nemitted.\\n\\nThe beep sequence is an array of <code>[frequency, length (ms), delay (ms),\\n...]</code>. For example, <code>[1000, 500, 500, 250, 500, 0]</code> will\\ncause the robot to emit a 1000 Hz beep for 500 ms, wait 500 ms, then emit a\\n250 Hz beep for 500 ms.\\n</div></div>","meta":"func"},"ev3_reflectedLightIntensity":{"title":"ev3_reflectedLightIntensity(colorSensor) \u2192 {number}","description":"<div><h4>ev3_reflectedLightIntensity(colorSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the reflected light intensity seen by the colour sensor.\\n</div></div>","meta":"func"},"ev3_runForTime":{"title":"ev3_runForTime(motor, time, speed)","description":"<div><h4>ev3_runForTime(motor, time, speed)</h4><div class=\\"description\\">\\n    Causes the motor to rotate for a specified duration at the specified speed.\\n\\nNote: this works by sending instructions to the motors. This will return almost immediately, without waiting for the motor to actually run for the specified duration. If you wish to wait, use <a href=\\"global.html#ev3_pause\\">ev3_pause</a>.\\n</div></div>","meta":"func"},"ev3_runToAbsolutePosition":{"title":"ev3_runToAbsolutePosition(motor, position, speed)","description":"<div><h4>ev3_runToAbsolutePosition(motor, position, speed)</h4><div class=\\"description\\">\\n    Causes the motor to rotate to the given absolute position (as reported by\\n<a href=\\"global.html#ev3_motorGetPosition\\">ev3_motorGetPosition</a>) with the given speed.\\n\\nNote: this works by sending instructions to the motors. This will return almost immediately, without waiting for the motor to reach the given absolute position. If you wish to wait, use <a href=\\"global.html#ev3_pause\\">ev3_pause</a>.\\n</div></div>","meta":"func"},"ev3_runToRelativePosition":{"title":"ev3_runToRelativePosition(motor, position, speed)","description":"<div><h4>ev3_runToRelativePosition(motor, position, speed)</h4><div class=\\"description\\">\\n    Causes the motor to rotate until the position reaches <code><a href=\\"global.html#ev3_motorGetPosition\\">ev3_motorGetPosition</a>()\\n + position</code> with the given speed.\\n\\nNote: this works by sending instructions to the motors. This will return almost immediately, without waiting for the motor to reach the given absolute position. If you wish to wait, use <a href=\\"global.html#ev3_pause\\">ev3_pause</a>.\\n</div></div>","meta":"func"},"ev3_speak":{"title":"ev3_speak(words)","description":"<div><h4>ev3_speak(words)</h4><div class=\\"description\\">\\n    Makes the robot speak the given words through its speaker. Returns after the\\nwords are spoken.\\n</div></div>","meta":"func"},"ev3_touchSensor1":{"title":"ev3_touchSensor1() \u2192 {peripheral}","description":"<div><h4>ev3_touchSensor1() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the touch sensor connected to port 1.\\n</div></div>","meta":"func"},"ev3_touchSensor2":{"title":"ev3_touchSensor2() \u2192 {peripheral}","description":"<div><h4>ev3_touchSensor2() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the touch sensor connected to port 2.\\n</div></div>","meta":"func"},"ev3_touchSensor3":{"title":"ev3_touchSensor3() \u2192 {peripheral}","description":"<div><h4>ev3_touchSensor3() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the touch sensor connected to port 3.\\n</div></div>","meta":"func"},"ev3_touchSensor4":{"title":"ev3_touchSensor4() \u2192 {peripheral}","description":"<div><h4>ev3_touchSensor4() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the touch sensor connected to port 4.\\n</div></div>","meta":"func"},"ev3_touchSensorPressed":{"title":"ev3_touchSensorPressed(touchSensor) \u2192 {boolean}","description":"<div><h4>ev3_touchSensorPressed(touchSensor) \u2192 {boolean}</h4><div class=\\"description\\">\\n    Gets whether the touch sensor is pressed.\\n</div></div>","meta":"func"},"ev3_ultrasonicSensor":{"title":"ev3_ultrasonicSensor() \u2192 {peripheral}","description":"<div><h4>ev3_ultrasonicSensor() \u2192 {peripheral}</h4><div class=\\"description\\">\\n    Gets the ultrasonic sensor connected any of ports 1, 2, 3 or 4.\\n</div></div>","meta":"func"},"ev3_ultrasonicSensorDistance":{"title":"ev3_ultrasonicSensorDistance(ultrasonicSensor) \u2192 {number}","description":"<div><h4>ev3_ultrasonicSensorDistance(ultrasonicSensor) \u2192 {number}</h4><div class=\\"description\\">\\n    Gets the distance read by the ultrasonic sensor in centimeters.\\n</div></div>","meta":"func"},"ev3_waitForButtonPress":{"title":"ev3_waitForButtonPress() \u2192 {number}","description":"<div><h4>ev3_waitForButtonPress() \u2192 {number}</h4><div class=\\"description\\">\\n    Waits for one of the buttons on the EV3\'s control face to be pressed, then\\nreturns a value corresponding to the button that was pressed:\\n\\n<ul><li>0 enter (the middle button)</li>\\n<li>1 back (the top left button)</li>\\n<li>2 left</li>\\n<li>3 right</li>\\n<li>4 up</li>\\n<li>5 down</li></ul>\\n</div></div>","meta":"func"},"flip_horiz":{"title":"flip_horiz(rune) \u2192 {Rune}","description":"<div><h4>flip_horiz(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune by\\nflipping it around a vertical axis,\\ncreating a mirror image\\n</div></div>","meta":"func"},"flip_vert":{"title":"flip_vert(rune) \u2192 {Rune}","description":"<div><h4>flip_vert(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune by\\nflipping it around a horizontal axis,\\nturning it upside down\\n</div></div>","meta":"func"},"g_of":{"title":"g_of(p) \u2192 {Number}","description":"<div><h4>g_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the green component of a given Point\\n</div></div>","meta":"func"},"get_duration":{"title":"get_duration(sound) \u2192 {Number}","description":"<div><h4>get_duration(sound) \u2192 {Number}</h4><div class=\\"description\\">\\n    Accesses the duration of a Sound, in seconds.\\n</div></div>","meta":"func"},"get_screen_display_height":{"title":"get_screen_display_height() \u2192 {number}","description":"<div><h4>get_screen_display_height() \u2192 {number}</h4><div class=\\"description\\">\\n    Get game screen display height (accounting window size).\\n</div></div>","meta":"func"},"get_screen_display_width":{"title":"get_screen_display_width() \u2192 {number}","description":"<div><h4>get_screen_display_width() \u2192 {number}</h4><div class=\\"description\\">\\n    Get game screen display width (accounting window size).\\n</div></div>","meta":"func"},"get_screen_height":{"title":"get_screen_height() \u2192 {number}","description":"<div><h4>get_screen_height() \u2192 {number}</h4><div class=\\"description\\">\\n    Get in-game screen height.\\n</div></div>","meta":"func"},"get_screen_width":{"title":"get_screen_width() \u2192 {number}","description":"<div><h4>get_screen_width() \u2192 {number}</h4><div class=\\"description\\">\\n    Get in-game screen width.\\n</div></div>","meta":"func"},"get_wave":{"title":"get_wave(sound) \u2192 {function}","description":"<div><h4>get_wave(sound) \u2192 {function}</h4><div class=\\"description\\">\\n    Accesses the wave of a Sound.\\nThe wave is a function from a nonnegative time (in seconds)\\nto an amplitude value that should lie between\\n-1 and 1.\\n</div></div>","meta":"func"},"green":{"title":"green(rune) \u2192 {Rune}","description":"<div><h4>green(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune green.\\n</div></div>","meta":"func"},"green_of":{"title":"green_of(px) \u2192 {Number}","description":"<div><h4>green_of(px) \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the green component of a given Pixel <code>px</code>\\n</div></div>","meta":"func"},"hollusion":{"title":"hollusion(rune) \u2192 {Picture}","description":"<div><h4>hollusion(rune) \u2192 {Picture}</h4><div class=\\"description\\">\\n    turns a given Rune into Hollusion\\n</div></div>","meta":"func"},"indigo":{"title":"indigo(rune) \u2192 {Rune}","description":"<div><h4>indigo(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune indigo.\\n</div></div>","meta":"func"},"init_record":{"title":"init_record() \u2192 {undefined}","description":"<div><h4>init_record() \u2192 {undefined}</h4><div class=\\"description\\">\\n    Initialize recording by obtaining permission\\nto use the default device microphone\\n</div></div>","meta":"func"},"install_filter":{"title":"install_filter(f) \u2192 {undefined}","description":"<div><h4>install_filter(f) \u2192 {undefined}</h4><div class=\\"description\\">\\n    Installs a given Filter to be used to transform\\nthe Images that the camera captures into Images\\ndisplayed on the screen. A Filter is a function\\nthat is applied to two Images (2-D arrays\\nof Pixels): the source Image and the destination\\nImage.\\n</div></div>","meta":"func"},"invert":{"title":"invert(original) \u2192 {Curve}","description":"<div><h4>invert(original) \u2192 {Curve}</h4><div class=\\"description\\">\\n    this function is a Curve transformation: a function from a\\nCurve to a Curve. The points of the result Curve are\\nthe same points as the points of the original Curve, but\\nin reverse: The result Curve applied to 0 is the original Curve\\napplied to 1 and vice versa.\\n</div></div>","meta":"func"},"is_sound":{"title":"is_sound(x) \u2192 {boolean}","description":"<div><h4>is_sound(x) \u2192 {boolean}</h4><div class=\\"description\\">\\n    Checks if a given value is a Sound\\n</div></div>","meta":"func"},"letter_name_to_frequency":{"title":"letter_name_to_frequency(str) \u2192 {Number}","description":"<div><h4>letter_name_to_frequency(str) \u2192 {Number}</h4><div class=\\"description\\">\\n    converts a letter name <code>str</code> to corresponding frequency.\\nFirst converts <code>str</code> to a note using <code>letter_name_to_midi_note</code>\\nand then to a frequency using <code>midi_note_to_frequency</code>\\n</div></div>","meta":"func"},"letter_name_to_midi_note":{"title":"letter_name_to_midi_note(str) \u2192 {Number}","description":"<div><h4>letter_name_to_midi_note(str) \u2192 {Number}</h4><div class=\\"description\\">\\n    converts a letter name <code>str</code> to corresponding midi note.\\nExamples for letter names are <code>\\"A5\\"</code>, <code>\\"B3\\"</code>, <code>\\"D#4\\"</code>.\\nSee <a href=\\"https://i.imgur.com/qGQgmYr.png\\">mapping from\\nletter name to midi notes</a>\\n</div></div>","meta":"func"},"load_image":{"title":"load_image(key, url)","description":"<div><h4>load_image(key, url)</h4><div class=\\"description\\">\\n    Load the image asset into the scene for use. All images\\nmust be loaded before used in create_image.\\n</div></div>","meta":"func"},"load_sound":{"title":"load_sound(key, url)","description":"<div><h4>load_sound(key, url)</h4><div class=\\"description\\">\\n    Load the sound asset into the scene for use. All sound\\nmust be loaded before used in play_sound.\\n</div></div>","meta":"func"},"load_spritesheet":{"title":"load_spritesheet(key, url, spritesheet_config)","description":"<div><h4>load_spritesheet(key, url, spritesheet_config)</h4><div class=\\"description\\">\\n    Load the spritesheet into the scene for use. All spritesheet must\\nbe loaded before used in create_image.\\n</div></div>","meta":"func"},"make_3D_color_point":{"title":"make_3D_color_point(x, y, z, r, g, b) \u2192 {Point}","description":"<div><h4>make_3D_color_point(x, y, z, r, g, b) \u2192 {Point}</h4><div class=\\"description\\">\\n    makes a 3D color Point with given x, y and z coordinates, \\nand RGB values ranging from 0 to 255. \\nAny input lower than 0 for RGB will be rounded up to 0, \\nand any input higher than 255 will be rounded down to 255.\\n</div></div>","meta":"func"},"make_3D_point":{"title":"make_3D_point(x, y, z) \u2192 {Point}","description":"<div><h4>make_3D_point(x, y, z) \u2192 {Point}</h4><div class=\\"description\\">\\n    makes a 3D Point with given x, y and z coordinates\\n</div></div>","meta":"func"},"make_color_point":{"title":"make_color_point(x, y, r, g, b) \u2192 {Point}","description":"<div><h4>make_color_point(x, y, r, g, b) \u2192 {Point}</h4><div class=\\"description\\">\\n    makes a color Point with given x and y coordinates, \\nand RGB values ranging from 0 to 255. \\nAny input lower than 0 for RGB will be rounded up to 0, \\nand any input higher than 255 will be rounded down to 255.\\n</div></div>","meta":"func"},"make_cross":{"title":"make_cross(rune) \u2192 {Rune}","description":"<div><h4>make_cross(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune by\\narranging into a square for copies of the \\ngiven Rune in different orientations\\n</div></div>","meta":"func"},"make_point":{"title":"make_point(x, y) \u2192 {Point}","description":"<div><h4>make_point(x, y) \u2192 {Point}</h4><div class=\\"description\\">\\n    makes a Point with given x and y coordinates\\n</div></div>","meta":"func"},"make_sound":{"title":"make_sound(wave, duration) \u2192 {Sound}","description":"<div><h4>make_sound(wave, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    Makes a Sound from a wave and a duration.\\nThe wave is a function from a nonnegative time (in seconds)\\nto an amplitude value that should lie between\\n-1 and 1. The duration is given in seconds.\\n</div></div>","meta":"func"},"midi_note_to_frequency":{"title":"midi_note_to_frequency(n) \u2192 {Number}","description":"<div><h4>midi_note_to_frequency(n) \u2192 {Number}</h4><div class=\\"description\\">\\n    converts a midi note <code>n</code> to corresponding frequency.\\nThe note is given as an integer Number.\\n</div></div>","meta":"func"},"noise_sound":{"title":"noise_sound(duration) \u2192 {Sound}","description":"<div><h4>noise_sound(duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a Sound of a given duration by randomly\\ngenerating amplitude values\\n</div></div>","meta":"func"},"orange":{"title":"orange(rune) \u2192 {Rune}","description":"<div><h4>orange(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune orange.\\n</div></div>","meta":"func"},"overlay":{"title":"overlay(rune1, rune2) \u2192 {Rune}","description":"<div><h4>overlay(rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a 3D-Rune from two given Runes by\\noverlaying the first with the second, each\\noccupying equal parts of the depth of the\\nresult\\n</div></div>","meta":"func"},"overlay_frac":{"title":"overlay_frac(frac, rune1, rune2) \u2192 {Rune}","description":"<div><h4>overlay_frac(frac, rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a 3D-Rune from two given Runes by\\noverlaying the first with the second\\nsuch that the first one occupies frac \\nportion of the depth of the 3D result \\nand the second the rest\\n</div></div>","meta":"func"},"piano":{"title":"piano(note, duration) \u2192 {Sound}","description":"<div><h4>piano(note, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    returns a Sound that is reminiscent of a piano, playing\\na given note for a given <code>duration</code> of seconds\\n</div></div>","meta":"func"},"pink":{"title":"pink(rune) \u2192 {Rune}","description":"<div><h4>pink(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune pink.\\n</div></div>","meta":"func"},"play":{"title":"play(sound) \u2192 {Sound}","description":"<div><h4>play(sound) \u2192 {Sound}</h4><div class=\\"description\\">\\n    plays a given Sound using your computer\'s sound device\\n</div></div>","meta":"func"},"play_anim_on_image":{"title":"play_anim_on_image(image, anims_key)","description":"<div><h4>play_anim_on_image(image, anims_key)</h4><div class=\\"description\\">\\n    Start playing the given animation on image game object.\\n</div></div>","meta":"func"},"play_concurrently":{"title":"play_concurrently(sound) \u2192 {undefined}","description":"<div><h4>play_concurrently(sound) \u2192 {undefined}</h4><div class=\\"description\\">\\n    plays a given sound without regard if a sound is already playing\\n</div></div>","meta":"func"},"play_sound":{"title":"play_sound(key, config)","description":"<div><h4>play_sound(key, config)</h4><div class=\\"description\\">\\n    Play the sound associated with the key.\\nThrows error if key is nonexistent.\\n</div></div>","meta":"func"},"purple":{"title":"purple(rune) \u2192 {Rune}","description":"<div><h4>purple(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune purple.\\n</div></div>","meta":"func"},"put_in_standard_position":{"title":"put_in_standard_position(curve) \u2192 {Curve}","description":"<div><h4>put_in_standard_position(curve) \u2192 {Curve}</h4><div class=\\"description\\">\\n    this function is a Curve transformation: It\\ntakes a Curve as argument and returns\\na new Curve, as follows.\\nA Curve is in <em>standard position</em> if it starts at (0,0) ends at (1,0).\\nThis function puts the given Curve in standard position by \\nrigidly translating it so its\\nstart Point is at the origin (0,0), then rotating it about the origin to put\\nits endpoint on the x axis, then scaling it to put the endpoint at (1,0).\\nBehavior is unspecified on closed Curves where start-point equal end-point.\\n</div></div>","meta":"func"},"quarter_turn_left":{"title":"quarter_turn_left(rune) \u2192 {Rune}","description":"<div><h4>quarter_turn_left(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune\\nby turning it a quarter-turn in\\nanti-clockwise direction.\\n</div></div>","meta":"func"},"quarter_turn_right":{"title":"quarter_turn_right(rune) \u2192 {Rune}","description":"<div><h4>quarter_turn_right(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune\\nby turning it a quarter-turn around the centre in\\nclockwise direction.\\n</div></div>","meta":"func"},"r_of":{"title":"r_of(p) \u2192 {Number}","description":"<div><h4>r_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the red component of a given Point\\n</div></div>","meta":"func"},"random_color":{"title":"random_color(rune) \u2192 {Rune}","description":"<div><h4>random_color(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    Gives random color to the given rune.\\nThe color is chosen randomly from the following nine \\ncolors: red, pink, purple, indigo, blue, green, yellow, orange, brown\\n</div></div>","meta":"func"},"record":{"title":"record(buffer) \u2192 {function}","description":"<div><h4>record(buffer) \u2192 {function}</h4><div class=\\"description\\">\\n    takes a <code>buffer</code> duration (in seconds) as argument, and\\nreturns a nullary stop function <code>stop</code>. A call\\n<code>stop()</code> returns a sound promise: a nullary function\\nthat returns a sound. Example: <pre><code>init_record();\\nconst stop = record(0.5);\\n// record after 0.5 seconds. Then in next query:\\nconst promise = stop();\\n// In next query, you can play the promised sound, by\\n// applying the promise:\\nplay(promise());</code></pre>\\n</div></div>","meta":"func"},"record_for":{"title":"record_for(duration, buffer) \u2192 {function}","description":"<div><h4>record_for(duration, buffer) \u2192 {function}</h4><div class=\\"description\\">\\n    Records a sound of given <code>duration</code> in seconds, after\\na <code>buffer</code> also in seconds, and\\nreturns a sound promise: a nullary function\\nthat returns a sound. Example: <pre><code>init_record();\\nconst promise = record_for(2, 0.5);\\n// In next query, you can play the promised sound, by\\n// applying the promise:\\nplay(promise());</code></pre>\\n</div></div>","meta":"func"},"red":{"title":"red(rune) \u2192 {Rune}","description":"<div><h4>red(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune red.\\n</div></div>","meta":"func"},"red_of":{"title":"red_of(px) \u2192 {Number}","description":"<div><h4>red_of(px) \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the red component of a given Pixel <code>px</code>\\n</div></div>","meta":"func"},"remove_listener":{"title":"remove_listener(listener)","description":"<div><h4>remove_listener(listener)</h4><div class=\\"description\\">\\n    Deactivate and remove listener.\\n</div></div>","meta":"func"},"repeat_pattern":{"title":"repeat_pattern(n, f, initial) \u2192 {t}","description":"<div><h4>repeat_pattern(n, f, initial) \u2192 {t}</h4><div class=\\"description\\">\\n    applies a given function n times to an initial value\\n</div></div>","meta":"func"},"reset_filter":{"title":"reset_filter() \u2192 {undefined}","description":"<div><h4>reset_filter() \u2192 {undefined}</h4><div class=\\"description\\">\\n    Resets the installed Filter back to the default Filter\\n</div></div>","meta":"func"},"rotate":{"title":"rotate(rad, rune) \u2192 {Rune}","description":"<div><h4>rotate(rad, rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    rotates a given Rune by a given angle,\\ngiven in radians, in anti-clockwise direction.\\nNote that parts of the Rune\\nmay be cropped as a result.\\n</div></div>","meta":"func"},"rotate_around_origin":{"title":"rotate_around_origin(a, b, c) \u2192 {unary_Curve_operator}","description":"<div><h4>rotate_around_origin(a, b, c) \u2192 {unary_Curve_operator}</h4><div class=\\"description\\">\\n    this function \\ntakes either 1 or 3 angles, a, b and c in radians as parameter and \\nreturns a Curve transformation: \\na function that takes a Curve as argument and returns\\na new Curve, which is the original Curve rotated by the given angle\\naround the z-axis (1 parameter) in counter-clockwise direction, or \\nthe original Curve rotated extrinsically with Euler angles (a, b, c) \\nabout x, y, and z axes (3 parameters).\\n</div></div>","meta":"func"},"sawtooth_sound":{"title":"sawtooth_sound(freq, duration) \u2192 {Sound}","description":"<div><h4>sawtooth_sound(freq, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a sawtooth wave Sound with given frequency and a given duration\\n</div></div>","meta":"func"},"scale":{"title":"scale(ratio, rune) \u2192 {Rune}","description":"<div><h4>scale(ratio, rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    scales a given Rune by a given factor in both x and y direction\\n</div></div>","meta":"func"},"scale_curve":{"title":"scale_curve(a, b, c) \u2192 {unary_Curve_operator}","description":"<div><h4>scale_curve(a, b, c) \u2192 {unary_Curve_operator}</h4><div class=\\"description\\">\\n    this function takes scaling factors <code>a</code>, <code>b</code> \\nand <code>c</code>, each with default value of 1, as arguments and \\nreturns a Curve transformation that \\nscales a given Curve by <code>a</code> in x-direction, <code>b</code> \\nin y-direction and <code>c</code> in z-direction.\\n</div></div>","meta":"func"},"scale_independent":{"title":"scale_independent(ratio_x, ratio_y, rune) \u2192 {Rune}","description":"<div><h4>scale_independent(ratio_x, ratio_y, rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    scales a given Rune by separate factors in x and y direction\\n</div></div>","meta":"func"},"scale_proportional":{"title":"scale_proportional(s) \u2192 {unary_Curve_operator}","description":"<div><h4>scale_proportional(s) \u2192 {unary_Curve_operator}</h4><div class=\\"description\\">\\n    this function takes a scaling factor s argument and returns a\\nCurve transformation that\\nscales a given Curve by s in x, y and z direction.\\n</div></div>","meta":"func"},"set_alpha":{"title":"set_alpha(obj, alpha) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_alpha(obj, alpha) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the alpha of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"set_display_size":{"title":"set_display_size(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_display_size(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the display size of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"set_flip":{"title":"set_flip(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_flip(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Sets the horizontal and flipped state of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"set_interactive":{"title":"set_interactive(obj, config) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_interactive(obj, config) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the interactivity of the object.\\nMutate the object.\\n\\nRectangle and Ellipse are not able to receive configs, only boolean\\ni.e. set_interactive(rect, true); set_interactive(ellipse, false)\\n</div></div>","meta":"func"},"set_origin":{"title":"set_origin(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_origin(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the origin in which all position related will be relative to.\\nIn other words, the anchor of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"set_position":{"title":"set_position(obj, x, y) \u2192 {Phaser.GameObjects.Container}","description":"<div><h4>set_position(obj, x, y) \u2192 {Phaser.GameObjects.Container}</h4><div class=\\"description\\">\\n    Set the position of the game object\\nMutate the object\\n</div></div>","meta":"func"},"set_rgba":{"title":"set_rgba(px, r, g, b, a) \u2192 {undefined}","description":"<div><h4>set_rgba(px, r, g, b, a) \u2192 {undefined}</h4><div class=\\"description\\">\\n    Assigns the red, green, blue and alpha components of a Pixel \\n<code>px</code> to given values\\n</div></div>","meta":"func"},"set_rotation":{"title":"set_rotation(obj, rad) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_rotation(obj, rad) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the rotation of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"set_scale":{"title":"set_scale(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}","description":"<div><h4>set_scale(obj, x, y) \u2192 {Phaser.GameObjects.GameObject}</h4><div class=\\"description\\">\\n    Set the scale of the object.\\nMutate the object.\\n</div></div>","meta":"func"},"show":{"title":"show(rune) \u2192 {Picture}","description":"<div><h4>show(rune) \u2192 {Picture}</h4><div class=\\"description\\">\\n    turns a given Rune into a two-dimensional Picture\\n</div></div>","meta":"func"},"silence_sound":{"title":"silence_sound(duration) \u2192 {Sound}","description":"<div><h4>silence_sound(duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a silence Sound with a given duration\\n</div></div>","meta":"func"},"simultaneously":{"title":"simultaneously(sounds) \u2192 {Sound}","description":"<div><h4>simultaneously(sounds) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a new sound by combining the sounds in a given\\nlist so that\\nthey play simutaneously, all starting at the beginning of the \\nresulting sound\\n</div></div>","meta":"func"},"sine_sound":{"title":"sine_sound(freq, duration) \u2192 {Sound}","description":"<div><h4>sine_sound(freq, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a sine wave Sound with given frequency and a given duration\\n</div></div>","meta":"func"},"square_sound":{"title":"square_sound(freq, duration) \u2192 {Sound}","description":"<div><h4>square_sound(freq, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a square wave Sound with given frequency and a given duration\\n</div></div>","meta":"func"},"stack":{"title":"stack(rune1, rune2) \u2192 {Rune}","description":"<div><h4>stack(rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from two given Runes by\\nplacing the first on top of the second, each\\noccupying equal parts of the height of the \\nresult\\n</div></div>","meta":"func"},"stack_frac":{"title":"stack_frac(frac, rune1, rune2) \u2192 {Rune}","description":"<div><h4>stack_frac(frac, rune1, rune2) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from two given Runes by\\nplacing the first on top of the second\\nsuch that the first one occupies frac \\nportion of the height of the result and \\nthe second the rest\\n</div></div>","meta":"func"},"stacking_adsr":{"title":"stacking_adsr(waveform, base_frequency, duration, envelopes) \u2192 {Sound}","description":"<div><h4>stacking_adsr(waveform, base_frequency, duration, envelopes) \u2192 {Sound}</h4><div class=\\"description\\">\\n    Returns a Sound that results from applying a list of envelopes\\nto a given wave form. The wave form should be a Sound generator that\\ntakes a frequency and a duration as arguments and produces a\\nSound with the given frequency and duration. Each envelope is\\napplied to a harmonic: the first harmonic has the given frequency,\\nthe second has twice the frequency, the third three times the\\nfrequency etc.\\n</div></div>","meta":"func"},"stackn":{"title":"stackn(n, rune) \u2192 {Rune}","description":"<div><h4>stackn(n, rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune\\nby vertically stacking n copies of it\\n</div></div>","meta":"func"},"stop":{"title":"stop() \u2192 {undefined}","description":"<div><h4>stop() \u2192 {undefined}</h4><div class=\\"description\\">\\n    Stops playing the current sound\\n</div></div>","meta":"func"},"translate":{"title":"translate(x, y, rune) \u2192 {Rune}","description":"<div><h4>translate(x, y, rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    translates a given Rune by given values in x and y direction\\n</div></div>","meta":"func"},"translate_curve":{"title":"translate_curve(x0, y0, z0) \u2192 {function}","description":"<div><h4>translate_curve(x0, y0, z0) \u2192 {function}</h4><div class=\\"description\\">\\n    this function returns a Curve transformation: \\nIt takes an x-value x0, a y-value y0 and a z-value z0, \\neach with default value of 0, as arguments \\nand returns a Curve transformation that\\ntakes a Curve as argument and returns\\na new Curve, by translating the original by x0 in x-direction, \\ny0 in y-direction and z0 in z-direction.\\n</div></div>","meta":"func"},"triangle_sound":{"title":"triangle_sound(freq, duration) \u2192 {Sound}","description":"<div><h4>triangle_sound(freq, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    makes a triangle wave Sound with given frequency and a given duration\\n</div></div>","meta":"func"},"trombone":{"title":"trombone(note, duration) \u2192 {Sound}","description":"<div><h4>trombone(note, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    returns a Sound that is reminiscent of a trombone, playing\\na given note for a given <code>duration</code> of seconds\\n</div></div>","meta":"func"},"turn_upside_down":{"title":"turn_upside_down(rune) \u2192 {Rune}","description":"<div><h4>turn_upside_down(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    makes a new Rune from a given Rune\\nby turning it upside-down\\n</div></div>","meta":"func"},"unit_circle":{"title":"unit_circle(t) \u2192 {Point}","description":"<div><h4>unit_circle(t) \u2192 {Point}</h4><div class=\\"description\\">\\n    this function is a curve: a function from a\\nfraction t to a point. The points lie on the\\nunit circle. They start at Point (1,0) when\\nt is 0. When t is 0.25, they reach Point (0,1),\\nwhen t is 0.5, they reach Point (-1, 0), etc.\\n</div></div>","meta":"func"},"unit_line":{"title":"unit_line(t) \u2192 {Point}","description":"<div><h4>unit_line(t) \u2192 {Point}</h4><div class=\\"description\\">\\n    this function is a curve: a function from a\\nfraction t to a point. The x-coordinate at\\nfranction t is t, and the y-coordinate is 0.\\n</div></div>","meta":"func"},"unit_line_at":{"title":"unit_line_at(t) \u2192 {Curve}","description":"<div><h4>unit_line_at(t) \u2192 {Curve}</h4><div class=\\"description\\">\\n    this function is a Curve generator: it takes\\na number and returns a horizontal curve. The number\\nis a y-coordinate, and the Curve generates\\nonly points with the given y-coordinate.\\n</div></div>","meta":"func"},"video_height":{"title":"video_height() \u2192 {Number}","description":"<div><h4>video_height() \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the current height of the output video display in\\npixels, i.e. the number of pixels in vertical direction\\n</div></div>","meta":"func"},"video_width":{"title":"video_width() \u2192 {Number}","description":"<div><h4>video_width() \u2192 {Number}</h4><div class=\\"description\\">\\n    Returns the current width of the output video display in\\npixels, i.e. the number of pixels in horizontal direction\\n</div></div>","meta":"func"},"violin":{"title":"violin(note, duration) \u2192 {Sound}","description":"<div><h4>violin(note, duration) \u2192 {Sound}</h4><div class=\\"description\\">\\n    returns a Sound that is reminiscent of a violin, playing\\na given note for a given <code>duration</code> of seconds\\n</div></div>","meta":"func"},"white":{"title":"white(rune) \u2192 {Rune}","description":"<div><h4>white(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune white.\\n</div></div>","meta":"func"},"x_of":{"title":"x_of(p) \u2192 {Number}","description":"<div><h4>x_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the x-coordinate of a given Point\\n</div></div>","meta":"func"},"y_of":{"title":"y_of(p) \u2192 {Number}","description":"<div><h4>y_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the y-coordinate of a given Point\\n</div></div>","meta":"func"},"yellow":{"title":"yellow(rune) \u2192 {Rune}","description":"<div><h4>yellow(rune) \u2192 {Rune}</h4><div class=\\"description\\">\\n    colors the given rune yellow.\\n</div></div>","meta":"func"},"z_of":{"title":"z_of(p) \u2192 {Number}","description":"<div><h4>z_of(p) \u2192 {Number}</h4><div class=\\"description\\">\\n    retrieves the z-coordinate of a given Point\\n</div></div>","meta":"func"}}')},637:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAncestors=t.isInLoc=t.findDeclarationNode=t.findIdentifierNode=void 0;const n=s(256);function i(e,t){const s=e.loc,n=t.loc;return null!=s&&null!=n&&a(n.start.line,n.start.column,s)&&a(n.end.line,n.end.column,s)}function a(e,t,s){return null!=s&&(s.start.line<e&&s.end.line>e||(s.start.line===e&&s.end.line>e?s.start.column<=t:s.start.line<e&&s.end.line===e?s.end.column>=t:s.start.line===e&&s.end.line===e&&(s.start.column<=t&&s.end.column>=t)))}function r(e,t){let s=[];return(0,n.ancestor)(e,{Identifier:(e,n)=>{t.name===e.name&&t.loc===e.loc&&(s=Object.assign([],n).reverse(),s.shift())},VariablePattern:(e,n)=>{t.name===e.name&&t.loc===e.loc&&(s=Object.assign([],n).reverse())}},o),s}t.findIdentifierNode=function(e,t,s){const i=(0,n.findNodeAt)(e,void 0,void 0,(function(e,t){const n=t.loc,i=t.type;return!(!i||!n)&&("Identifier"===i&&n.start.line===s.line&&n.start.column<=s.column&&n.end.column>=s.column)}),o);return null===i||void 0===i?void 0:i.node},t.findDeclarationNode=function(e,t){const s=r(e,t);if(!s)return;const a=[];for(const r of s)if((0,n.recursive)(r,void 0,{BlockStatement(e,s,n){i(e,t)&&e.body.map((e=>n(e,s)))},ForStatement(e,s,n){i(e,t)&&(n(e.init,s),n(e.body,s))},FunctionDeclaration(e,s,n){if(e.id&&e.id.name===t.name)a.push(e.id);else if(i(e,t)){const i=e.params.find((e=>e.name===t.name));i?a.push(i):n(e.body,s)}},ArrowFunctionExpression(e,s,n){if(i(e,t)){const i=e.params.find((e=>e.name===t.name));i?a.push(i):n(e.body,s)}},VariableDeclarator(e,s,n){e.id.name===t.name&&a.push(e.id)},ImportSpecifier(e,s,n){e.imported.name===t.name&&a.push(e.imported)}}),a.length>0)return a.shift()},t.isInLoc=a,t.findAncestors=r;const o=Object.assign(Object.assign({},n.base),{ImportSpecifier(e,t,s){s(e.imported,t,"Expression")}})},68:function(e,t,s){"use strict";s.r(t),s.d(t,"handleConsoleLog",(function(){return a})),s.d(t,"evalInterpreterSuccess",(function(){return r})),s.d(t,"evalTestcaseSuccess",(function(){return o})),s.d(t,"evalTestcaseFailure",(function(){return c})),s.d(t,"evalInterpreterError",(function(){return l})),s.d(t,"beginInterruptExecution",(function(){return d})),s.d(t,"endInterruptExecution",(function(){return u})),s.d(t,"beginDebuggerPause",(function(){return h})),s.d(t,"endDebuggerPause",(function(){return p})),s.d(t,"debuggerResume",(function(){return g})),s.d(t,"debuggerReset",(function(){return m}));var n=s(7),i=s(59);const a=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return Object(n.action)(i.k,{logString:s,workspaceLocation:e})},r=(e,t)=>Object(n.action)(i.h,{type:"result",value:e,workspaceLocation:t}),o=(e,t,s)=>Object(n.action)(i.j,{type:"result",value:e,workspaceLocation:t,index:s}),c=(e,t,s)=>Object(n.action)(i.i,{type:"errors",value:e,workspaceLocation:t,index:s}),l=(e,t)=>Object(n.action)(i.g,{type:"errors",errors:e,workspaceLocation:t}),d=e=>Object(n.action)(i.b,{workspaceLocation:e}),u=e=>Object(n.action)(i.f,{workspaceLocation:e}),h=e=>Object(n.action)(i.a,{workspaceLocation:e}),p=e=>Object(n.action)(i.e,{workspaceLocation:e}),g=e=>Object(n.action)(i.d,{workspaceLocation:e}),m=e=>Object(n.action)(i.c,{workspaceLocation:e})},69:function(e,t,s){"use strict";s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return v})),s.d(t,"c",(function(){return y}));var n=s(102),i=s(1),a=s(53),r=s(42),o=s(3),c=s(20),l=s.n(c),d=s(0);function u(e){const t=e.choices.map(((t,s)=>Object(d.jsx)(r.b,{onClick:()=>e.onResponse&&e.onResponse(t.key),intent:t.intent,fill:e.largeButtons,className:l()(e.largeButtons&&"large-button"),...t.props,children:t.label},s))),{escapeResponse:s}=e,n="undefined"===typeof s?void 0:()=>e.onResponse&&e.onResponse(s);return Object(d.jsxs)(r.h,{className:l()(o.a.DARK,"ConfirmDialog"),title:e.title,isCloseButtonShown:"undefined"===typeof e.title&&void 0,canEscapeKeyClose:!!n,onClose:n,isOpen:e.isOpen,icon:e.icon,...e.props,children:[Object(d.jsx)("div",{className:o.a.DIALOG_BODY,children:e.contents}),Object(d.jsxs)("div",{className:o.a.DIALOG_FOOTER,children:[e.largeButtons&&t,!e.largeButtons&&Object(d.jsx)("div",{className:o.a.DIALOG_FOOTER_ACTIONS,children:t})]})]})}function h(e){const{enterResponse:t,validationFunction:s}=e,a=i.useRef(null),[o,c]=i.useState(!s||s(e.defaultValue||""));i.useEffect((()=>{a.current&&c(!s||s(a.current.value))}),[s]);const l=t=>{var n;t!==e.escapeResponse&&s&&!s(a.current.value)||e.onResponse(t,(null===(n=a.current)||void 0===n?void 0:n.value)||"")},h=e.choices.map((e=>({...e,props:{...e.props,disabled:e.disableOnInvalid&&!o}}))),p=t?e=>{13===e.keyCode&&l(t)}:void 0,g=s?e=>{s(e.target.value)!==o&&c(!o)}:void 0;return Object(d.jsx)(u,{...e,onResponse:l,choices:h,contents:Object(d.jsxs)(d.Fragment,{children:[e.contents,Object(d.jsx)(r.y,{autoFocus:!0,defaultValue:e.defaultValue,inputRef:a,onKeyDown:p,onChange:g,intent:o?n.a.NONE:n.a.DANGER})]})})}class p extends i.PureComponent{constructor(){super(...arguments),this.state={dialog:null,dialogOnClose:null}}static create(){const e=document.createElement("div");document.body.appendChild(e);const t=a.render(Object(d.jsx)(p,{}),e);if(null==t)throw new Error("Could not create DialogHelper - are you in a React lifecycle method?");return t}show(e,t){this.setState((()=>({dialog:e,dialogOnClose:t||null})))}close(){this.state.dialogOnClose&&this.state.dialogOnClose(),this.setState((()=>({dialog:null,dialogOnClose:null})))}render(){return this.state.dialog}}const g=p.create();function m(){g.close()}function b(e,t){return new Promise(((s,n)=>{var i,a;i=Object(d.jsx)(e,{...t(s)}),a=n,g.show(i,a)})).finally(m)}function f(e){return b(u,(t=>({...e,onResponse:t,isOpen:!0})))}function v(e){return f({title:e.title,contents:e.contents,choices:[{key:!1,label:e.negativeLabel||"No"},{key:!0,label:e.positiveLabel||"Yes",intent:e.positiveIntent||n.a.SUCCESS,props:{type:"submit"}}],escapeResponse:!1,icon:e.icon,...e.props})}function y(e){return b(h,(t=>({title:e.title,contents:e.contents,choices:[{key:!1,label:e.negativeLabel||"Cancel"},{key:!0,label:e.positiveLabel||"Accept",intent:n.a.SUCCESS,disableOnInvalid:!0}],escapeResponse:!1,enterResponse:!0,onResponse:(e,s)=>t({buttonResponse:e,value:s}),isOpen:!0,...e.props})))}},71:function(e,t,s){"use strict";let n;s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),function(e){e.NONE="NONE",e.SOUNDS="SOUNDS",e.EV3="EV3"}(n||(n={}));const i=[[n.NONE,[]],[n.SOUNDS,[]]],a=new Map(i)},711:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClangLexer=void 0;const n=s(266),i=s(165),a=s(260),r=s(167),o=s(142);class c extends i.Lexer{constructor(e){super(e),this._interp=new a.LexerATNSimulator(c._ATN,this)}get vocabulary(){return c.VOCABULARY}get grammarFileName(){return"Clang.g4"}get ruleNames(){return c.ruleNames}get serializedATN(){return c._serializedATN}get channelNames(){return c.channelNames}get modeNames(){return c.modeNames}static get _ATN(){return c.__ATN||(c.__ATN=(new n.ATNDeserializer).deserialize(o.toCharArray(c._serializedATN))),c.__ATN}}t.ClangLexer=c,c.T__0=1,c.T__1=2,c.Break=3,c.Char=4,c.Continue=5,c.Const=6,c.Do=7,c.Else=8,c.Float=9,c.For=10,c.If=11,c.Int=12,c.Long=13,c.Return=14,c.Signed=15,c.Struct=16,c.Unsigned=17,c.Void=18,c.While=19,c.LeftParen=20,c.RightParen=21,c.LeftBracket=22,c.RightBracket=23,c.LeftBrace=24,c.RightBrace=25,c.Less=26,c.LessEqual=27,c.Greater=28,c.GreaterEqual=29,c.LeftShift=30,c.RightShift=31,c.Plus=32,c.PlusPlus=33,c.Minus=34,c.MinusMinus=35,c.Star=36,c.Div=37,c.Mod=38,c.And=39,c.Or=40,c.AndAnd=41,c.OrOr=42,c.Caret=43,c.Not=44,c.Tilde=45,c.Question=46,c.Colon=47,c.Semi=48,c.Comma=49,c.Assign=50,c.StarAssign=51,c.DivAssign=52,c.ModAssign=53,c.PlusAssign=54,c.MinusAssign=55,c.LeftShiftAssign=56,c.RightShiftAssign=57,c.AndAssign=58,c.XorAssign=59,c.OrAssign=60,c.Equal=61,c.NotEqual=62,c.Arrow=63,c.Dot=64,c.Identifier=65,c.Constant=66,c.DigitSequence=67,c.StringLiteral=68,c.Whitespace=69,c.Newline=70,c.BlockComment=71,c.LineComment=72,c.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],c.modeNames=["DEFAULT_MODE"],c.ruleNames=["T__0","T__1","Break","Char","Continue","Const","Do","Else","Float","For","If","Int","Long","Return","Signed","Struct","Unsigned","Void","While","LeftParen","RightParen","LeftBracket","RightBracket","LeftBrace","RightBrace","Less","LessEqual","Greater","GreaterEqual","LeftShift","RightShift","Plus","PlusPlus","Minus","MinusMinus","Star","Div","Mod","And","Or","AndAnd","OrOr","Caret","Not","Tilde","Question","Colon","Semi","Comma","Assign","StarAssign","DivAssign","ModAssign","PlusAssign","MinusAssign","LeftShiftAssign","RightShiftAssign","AndAssign","XorAssign","OrAssign","Equal","NotEqual","Arrow","Dot","Identifier","IdentifierCharacters","Characters","Digit","Constant","IntegerConstant","BinaryConstant","DecimalConstant","NonzeroDigit","UnsignedSuffix","FloatingConstant","DecimalFloatingConstant","FractionalConstant","ExponentPart","Sign","DigitSequence","BinaryExponentPart","FloatingSuffix","CharacterConstant","CCharSequence","CChar","EscapeSequence","SimpleEscapeSequence","StringLiteral","EncodingPrefix","SCharSequence","SChar","Whitespace","Newline","BlockComment","LineComment"],c._LITERAL_NAMES=[void 0,"'__extension__'","'inline'","'break'","'char'","'continue'","'const'","'do'","'else'","'float'","'for'","'if'","'int'","'long'","'return'","'signed'","'struct'","'unsigned'","'void'","'while'","'('","')'","'['","']'","'{'","'}'","'<'","'<='","'>'","'>='","'<<'","'>>'","'+'","'++'","'-'","'--'","'*'","'/'","'%'","'&'","'|'","'&&'","'||'","'^'","'!'","'~'","'?'","':'","';'","','","'='","'*='","'/='","'%='","'+='","'-='","'<<='","'>>='","'&='","'^='","'|='","'=='","'!='","'->'","'.'"],c._SYMBOLIC_NAMES=[void 0,void 0,void 0,"Break","Char","Continue","Const","Do","Else","Float","For","If","Int","Long","Return","Signed","Struct","Unsigned","Void","While","LeftParen","RightParen","LeftBracket","RightBracket","LeftBrace","RightBrace","Less","LessEqual","Greater","GreaterEqual","LeftShift","RightShift","Plus","PlusPlus","Minus","MinusMinus","Star","Div","Mod","And","Or","AndAnd","OrOr","Caret","Not","Tilde","Question","Colon","Semi","Comma","Assign","StarAssign","DivAssign","ModAssign","PlusAssign","MinusAssign","LeftShiftAssign","RightShiftAssign","AndAssign","XorAssign","OrAssign","Equal","NotEqual","Arrow","Dot","Identifier","Constant","DigitSequence","StringLiteral","Whitespace","Newline","BlockComment","LineComment"],c.VOCABULARY=new r.VocabularyImpl(c._LITERAL_NAMES,c._SYMBOLIC_NAMES,[]),c._serializedATNSegments=2,c._serializedATNSegment0="\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x02J\u0269\b\x01\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x04\x14\t\x14\x04\x15\t\x15\x04\x16\t\x16\x04\x17\t\x17\x04\x18\t\x18\x04\x19\t\x19\x04\x1a\t\x1a\x04\x1b\t\x1b\x04\x1c\t\x1c\x04\x1d\t\x1d\x04\x1e\t\x1e\x04\x1f\t\x1f\x04 \t \x04!\t!\x04\"\t\"\x04#\t#\x04$\t$\x04%\t%\x04&\t&\x04'\t'\x04(\t(\x04)\t)\x04*\t*\x04+\t+\x04,\t,\x04-\t-\x04.\t.\x04/\t/\x040\t0\x041\t1\x042\t2\x043\t3\x044\t4\x045\t5\x046\t6\x047\t7\x048\t8\x049\t9\x04:\t:\x04;\t;\x04<\t<\x04=\t=\x04>\t>\x04?\t?\x04@\t@\x04A\tA\x04B\tB\x04C\tC\x04D\tD\x04E\tE\x04F\tF\x04G\tG\x04H\tH\x04I\tI\x04J\tJ\x04K\tK\x04L\tL\x04M\tM\x04N\tN\x04O\tO\x04P\tP\x04Q\tQ\x04R\tR\x04S\tS\x04T\tT\x04U\tU\x04V\tV\x04W\tW\x04X\tX\x04Y\tY\x04Z\tZ\x04[\t[\x04\\\t\\\x04]\t]\x04^\t^\x04_\t_\x04`\t`\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x03\x05\x03\x05\x03\x05\x03\x05\x03\x05\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x06\x03\x07\x03\x07\x03\x07\x03\x07\x03\x07\x03\x07\x03\b\x03\b\x03\b\x03\t\x03\t\x03\t\x03\t\x03\t\x03\n\x03\n\x03\n\x03\n\x03\n\x03\n\x03\v\x03\v\x03\v\x03\v\x03\f\x03\f\x03\f\x03\r\x03\r\x03\r\x03\r\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0e\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x0f\x03\x10\x03\x10\x03\x10\x03\x10\x03\x10\x03\x10\x03\x10\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03\x11\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03\x12\x03\x13\x03\x13\x03\x13\x03\x13\x03\x13\x03\x14\x03\x14\x03\x14\x03\x14\x03\x14\x03\x14\x03\x15\x03\x15\x03\x16\x03\x16\x03\x17\x03\x17\x03\x18\x03\x18\x03\x19\x03\x19\x03\x1a\x03\x1a\x03\x1b\x03\x1b\x03\x1c\x03\x1c\x03\x1c\x03\x1d\x03\x1d\x03\x1e\x03\x1e\x03\x1e\x03\x1f\x03\x1f\x03\x1f\x03 \x03 \x03 \x03!\x03!\x03\"\x03\"\x03\"\x03#\x03#\x03$\x03$\x03$\x03%\x03%\x03&\x03&\x03'\x03'\x03(\x03(\x03)\x03)\x03*\x03*\x03*\x03+\x03+\x03+\x03,\x03,\x03-\x03-\x03.\x03.\x03/\x03/\x030\x030\x031\x031\x032\x032\x033\x033\x034\x034\x034\x035\x035\x035\x036\x036\x036\x037\x037\x037\x038\x038\x038\x039\x039\x039\x039\x03:\x03:\x03:\x03:\x03;\x03;\x03;\x03<\x03<\x03<\x03=\x03=\x03=\x03>\x03>\x03>\x03?\x03?\x03?\x03@\x03@\x03@\x03A\x03A\x03B\x03B\x03B\x07B\u01ac\nB\fB\x0eB\u01af\vB\x03C\x03C\x03D\x03D\x03E\x03E\x03F\x03F\x03F\x05F\u01ba\nF\x03G\x03G\x03H\x03H\x03H\x06H\u01c1\nH\rH\x0eH\u01c2\x03I\x03I\x07I\u01c7\nI\fI\x0eI\u01ca\vI\x03J\x03J\x03K\x03K\x03L\x03L\x03M\x03M\x05M\u01d4\nM\x03M\x05M\u01d7\nM\x03M\x03M\x03M\x05M\u01dc\nM\x05M\u01de\nM\x03N\x05N\u01e1\nN\x03N\x03N\x03N\x03N\x03N\x05N\u01e8\nN\x03O\x03O\x05O\u01ec\nO\x03O\x03O\x03P\x03P\x03Q\x06Q\u01f3\nQ\rQ\x0eQ\u01f4\x03R\x03R\x05R\u01f9\nR\x03R\x03R\x03S\x03S\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x03T\x05T\u0215\nT\x03U\x06U\u0218\nU\rU\x0eU\u0219\x03V\x03V\x05V\u021e\nV\x03W\x03W\x03X\x03X\x03X\x03Y\x05Y\u0226\nY\x03Y\x03Y\x05Y\u022a\nY\x03Y\x03Y\x03Z\x03Z\x03Z\x05Z\u0231\nZ\x03[\x06[\u0234\n[\r[\x0e[\u0235\x03\\\x03\\\x03\\\x03\\\x03\\\x03\\\x03\\\x05\\\u023f\n\\\x03]\x06]\u0242\n]\r]\x0e]\u0243\x03]\x03]\x03^\x03^\x05^\u024a\n^\x03^\x05^\u024d\n^\x03^\x03^\x03_\x03_\x03_\x03_\x07_\u0255\n_\f_\x0e_\u0258\v_\x03_\x03_\x03_\x03_\x03_\x03`\x03`\x03`\x03`\x07`\u0263\n`\f`\x0e`\u0266\v`\x03`\x03`\x03\u0256\x02\x02a\x03\x02\x03\x05\x02\x04\x07\x02\x05\t\x02\x06\v\x02\x07\r\x02\b\x0f\x02\t\x11\x02\n\x13\x02\v\x15\x02\f\x17\x02\r\x19\x02\x0e\x1b\x02\x0f\x1d\x02\x10\x1f\x02\x11!\x02\x12#\x02\x13%\x02\x14'\x02\x15)\x02\x16+\x02\x17-\x02\x18/\x02\x191\x02\x1a3\x02\x1b5\x02\x1c7\x02\x1d9\x02\x1e;\x02\x1f=\x02 ?\x02!A\x02\"C\x02#E\x02$G\x02%I\x02&K\x02'M\x02(O\x02)Q\x02*S\x02+U\x02,W\x02-Y\x02.[\x02/]\x020_\x021a\x022c\x023e\x024g\x025i\x026k\x027m\x028o\x029q\x02:s\x02;u\x02<w\x02=y\x02>{\x02?}\x02@\x7f\x02A\x81\x02B\x83\x02C\x85\x02\x02\x87\x02\x02\x89\x02\x02\x8b\x02D\x8d\x02\x02\x8f\x02\x02\x91\x02\x02\x93\x02\x02\x95\x02\x02\x97\x02\x02\x99\x02\x02\x9b\x02\x02\x9d\x02\x02\x9f\x02\x02\xa1\x02E\xa3\x02\x02\xa5\x02\x02\xa7\x02\x02\xa9\x02\x02\xab\x02\x02\xad\x02\x02\xaf\x02\x02\xb1\x02F\xb3\x02\x02\xb5\x02\x02\xb7\x02\x02\xb9\x02G\xbb\x02H\xbd\x02I\xbf\x02J\x03\x02\x12\x05\x02C\\aac|\x03\x022;\x04\x02DDdd\x03\x0223\x03\x023;\x04\x02WWww\x04\x02GGgg\x04\x02--//\x04\x02RRrr\x06\x02HHNNhhnn\x06\x02\f\f\x0f\x0f))^^\f\x02$$))AA^^cdhhppttvvxx\x05\x02NNWWww\x06\x02\f\f\x0f\x0f$$^^\x04\x02\v\v\"\"\x04\x02\f\f\x0f\x0f\x02\u0271\x02\x03\x03\x02\x02\x02\x02\x05\x03\x02\x02\x02\x02\x07\x03\x02\x02\x02\x02\t\x03\x02\x02\x02\x02\v\x03\x02\x02\x02\x02\r\x03\x02\x02\x02\x02\x0f\x03\x02\x02\x02\x02\x11\x03\x02\x02\x02\x02\x13\x03\x02\x02\x02\x02\x15\x03\x02\x02\x02\x02\x17\x03\x02\x02\x02\x02\x19\x03\x02\x02\x02\x02\x1b\x03\x02\x02\x02\x02\x1d\x03\x02\x02\x02\x02\x1f\x03\x02\x02\x02\x02!\x03\x02\x02\x02\x02#\x03\x02\x02\x02\x02%\x03\x02\x02\x02\x02'\x03\x02\x02\x02\x02)\x03\x02\x02\x02\x02+\x03\x02\x02\x02\x02-\x03\x02\x02\x02\x02/\x03\x02\x02\x02\x021\x03\x02\x02\x02\x023\x03\x02\x02\x02\x025\x03\x02\x02\x02\x027\x03\x02\x02\x02\x029\x03\x02\x02\x02\x02;\x03\x02\x02\x02\x02=\x03\x02\x02\x02\x02?\x03\x02\x02\x02\x02A\x03\x02\x02\x02\x02C\x03\x02\x02\x02\x02E\x03\x02\x02\x02\x02G\x03\x02\x02\x02\x02I\x03\x02\x02\x02\x02K\x03\x02\x02\x02\x02M\x03\x02\x02\x02\x02O\x03\x02\x02\x02\x02Q\x03\x02\x02\x02\x02S\x03\x02\x02\x02\x02U\x03\x02\x02\x02\x02W\x03\x02\x02\x02\x02Y\x03\x02\x02\x02\x02[\x03\x02\x02\x02\x02]\x03\x02\x02\x02\x02_\x03\x02\x02\x02\x02a\x03\x02\x02\x02\x02c\x03\x02\x02\x02\x02e\x03\x02\x02\x02\x02g\x03\x02\x02\x02\x02i\x03\x02\x02\x02\x02k\x03\x02\x02\x02\x02m\x03\x02\x02\x02\x02o\x03\x02\x02\x02\x02q\x03\x02\x02\x02\x02s\x03\x02\x02\x02\x02u\x03\x02\x02\x02\x02w\x03\x02\x02\x02\x02y\x03\x02\x02\x02\x02{\x03\x02\x02\x02\x02}\x03\x02\x02\x02\x02\x7f\x03\x02\x02\x02\x02\x81\x03\x02\x02\x02\x02\x83\x03\x02\x02\x02\x02\x8b\x03\x02\x02\x02\x02\xa1\x03\x02\x02\x02\x02\xb1\x03\x02\x02\x02\x02\xb9\x03\x02\x02\x02\x02\xbb\x03\x02\x02\x02\x02\xbd\x03\x02\x02\x02\x02\xbf\x03\x02\x02\x02\x03\xc1\x03\x02\x02\x02\x05\xcf\x03\x02\x02\x02\x07\xd6\x03\x02\x02\x02\t\xdc\x03\x02\x02\x02\v\xe1\x03\x02\x02\x02\r\xea\x03\x02\x02\x02\x0f\xf0\x03\x02\x02\x02\x11\xf3\x03\x02\x02\x02\x13\xf8\x03\x02\x02\x02\x15\xfe\x03\x02\x02\x02\x17\u0102\x03\x02\x02\x02\x19\u0105\x03\x02\x02\x02\x1b\u0109\x03\x02\x02\x02\x1d\u010e\x03\x02\x02\x02\x1f\u0115\x03\x02\x02\x02!\u011c\x03\x02\x02\x02#\u0123\x03\x02\x02\x02%\u012c\x03\x02\x02\x02'\u0131\x03\x02\x02\x02)\u0137\x03\x02\x02\x02+\u0139\x03\x02\x02\x02-\u013b\x03\x02\x02\x02/\u013d\x03\x02\x02\x021\u013f\x03\x02\x02\x023\u0141\x03\x02\x02\x025\u0143\x03\x02\x02\x027\u0145\x03\x02\x02\x029\u0148\x03\x02\x02\x02;\u014a\x03\x02\x02\x02=\u014d\x03\x02\x02\x02?\u0150\x03\x02\x02\x02A\u0153\x03\x02\x02\x02C\u0155\x03\x02\x02\x02E\u0158\x03\x02\x02\x02G\u015a\x03\x02\x02\x02I\u015d\x03\x02\x02\x02K\u015f\x03\x02\x02\x02M\u0161\x03\x02\x02\x02O\u0163\x03\x02\x02\x02Q\u0165\x03\x02\x02\x02S\u0167\x03\x02\x02\x02U\u016a\x03\x02\x02\x02W\u016d\x03\x02\x02\x02Y\u016f\x03\x02\x02\x02[\u0171\x03\x02\x02\x02]\u0173\x03\x02\x02\x02_\u0175\x03\x02\x02\x02a\u0177\x03\x02\x02\x02c\u0179\x03\x02\x02\x02e\u017b\x03\x02\x02\x02g\u017d\x03\x02\x02\x02i\u0180\x03\x02\x02\x02k\u0183\x03\x02\x02\x02m\u0186\x03\x02\x02\x02o\u0189\x03\x02\x02\x02q\u018c\x03\x02\x02\x02s\u0190\x03\x02\x02\x02u\u0194\x03\x02\x02\x02w\u0197\x03\x02\x02\x02y\u019a\x03\x02\x02\x02{\u019d\x03\x02\x02\x02}\u01a0\x03\x02\x02\x02\x7f\u01a3\x03\x02\x02\x02\x81\u01a6\x03\x02\x02\x02\x83\u01a8\x03\x02\x02\x02\x85\u01b0\x03\x02\x02\x02\x87\u01b2\x03\x02\x02\x02\x89\u01b4\x03\x02\x02\x02\x8b\u01b9\x03\x02\x02\x02\x8d\u01bb\x03\x02\x02\x02\x8f\u01bd\x03\x02\x02\x02\x91\u01c4\x03\x02\x02\x02\x93\u01cb\x03\x02\x02\x02\x95\u01cd\x03\x02\x02\x02\x97\u01cf\x03\x02\x02\x02\x99\u01dd\x03\x02\x02\x02\x9b\u01e7\x03\x02\x02\x02\x9d\u01e9\x03\x02\x02\x02\x9f\u01ef\x03\x02\x02\x02\xa1\u01f2\x03\x02\x02\x02\xa3\u01f6\x03\x02\x02\x02\xa5\u01fc\x03\x02\x02\x02\xa7\u0214\x03\x02\x02\x02\xa9\u0217\x03\x02\x02\x02\xab\u021d\x03\x02\x02\x02\xad\u021f\x03\x02\x02\x02\xaf\u0221\x03\x02\x02\x02\xb1\u0225\x03\x02\x02\x02\xb3\u0230\x03\x02\x02\x02\xb5\u0233\x03\x02\x02\x02\xb7\u023e\x03\x02\x02\x02\xb9\u0241\x03\x02\x02\x02\xbb\u024c\x03\x02\x02\x02\xbd\u0250\x03\x02\x02\x02\xbf\u025e\x03\x02\x02\x02\xc1\xc2\x07a\x02\x02\xc2\xc3\x07a\x02\x02\xc3\xc4\x07g\x02\x02\xc4\xc5\x07z\x02\x02\xc5\xc6\x07v\x02\x02\xc6\xc7\x07g\x02\x02\xc7\xc8\x07p\x02\x02\xc8\xc9\x07u\x02\x02\xc9\xca\x07k\x02\x02\xca\xcb\x07q\x02\x02\xcb\xcc\x07p\x02\x02\xcc\xcd\x07a\x02\x02\xcd\xce\x07a\x02\x02\xce\x04\x03\x02\x02\x02\xcf\xd0\x07k\x02\x02\xd0\xd1\x07p\x02\x02\xd1\xd2\x07n\x02\x02\xd2\xd3\x07k\x02\x02\xd3\xd4\x07p\x02\x02\xd4\xd5\x07g\x02\x02\xd5\x06\x03\x02\x02\x02\xd6\xd7\x07d\x02\x02\xd7\xd8\x07t\x02\x02\xd8\xd9\x07g\x02\x02\xd9\xda\x07c\x02\x02\xda\xdb\x07m\x02\x02\xdb\b\x03\x02\x02\x02\xdc\xdd\x07e\x02\x02\xdd\xde\x07j\x02\x02\xde\xdf\x07c\x02\x02\xdf\xe0\x07t\x02\x02\xe0\n\x03\x02\x02\x02\xe1\xe2\x07e\x02\x02\xe2\xe3\x07q\x02\x02\xe3\xe4\x07p\x02\x02\xe4\xe5\x07v\x02\x02\xe5\xe6\x07k\x02\x02\xe6\xe7\x07p\x02\x02\xe7\xe8\x07w\x02\x02\xe8\xe9\x07g\x02\x02\xe9\f\x03\x02\x02\x02\xea\xeb\x07e\x02\x02\xeb\xec\x07q\x02\x02\xec\xed\x07p\x02\x02\xed\xee\x07u\x02\x02\xee\xef\x07v\x02\x02\xef\x0e\x03\x02\x02\x02\xf0\xf1\x07f\x02\x02\xf1\xf2\x07q\x02\x02\xf2\x10\x03\x02\x02\x02\xf3\xf4\x07g\x02\x02\xf4\xf5\x07n\x02\x02\xf5\xf6\x07u\x02\x02\xf6\xf7\x07g\x02\x02\xf7\x12\x03\x02\x02\x02\xf8\xf9\x07h\x02\x02\xf9\xfa\x07n\x02\x02\xfa\xfb\x07q\x02\x02\xfb\xfc\x07c\x02\x02\xfc\xfd\x07v\x02\x02\xfd\x14\x03\x02\x02\x02\xfe\xff\x07h\x02\x02\xff\u0100\x07q\x02\x02\u0100\u0101\x07t\x02\x02\u0101\x16\x03\x02\x02\x02\u0102\u0103\x07k\x02\x02\u0103\u0104\x07h\x02\x02\u0104\x18\x03\x02\x02\x02\u0105\u0106\x07k\x02\x02\u0106\u0107\x07p\x02\x02\u0107\u0108\x07v\x02\x02\u0108\x1a\x03\x02\x02\x02\u0109\u010a\x07n\x02\x02\u010a\u010b\x07q\x02\x02\u010b\u010c\x07p\x02\x02\u010c\u010d\x07i\x02\x02\u010d\x1c\x03\x02\x02\x02\u010e\u010f\x07t\x02\x02\u010f\u0110\x07g\x02\x02\u0110\u0111\x07v\x02\x02\u0111\u0112\x07w\x02\x02\u0112\u0113\x07t\x02\x02\u0113\u0114\x07p\x02\x02\u0114\x1e\x03\x02\x02\x02\u0115\u0116\x07u\x02\x02\u0116\u0117\x07k\x02\x02\u0117\u0118\x07i\x02\x02\u0118\u0119\x07p\x02\x02\u0119\u011a\x07g\x02\x02\u011a\u011b\x07f\x02\x02\u011b \x03\x02\x02\x02\u011c\u011d\x07u\x02\x02\u011d\u011e\x07v\x02\x02\u011e\u011f\x07t\x02\x02\u011f\u0120\x07w\x02\x02\u0120\u0121\x07e\x02\x02\u0121\u0122\x07v\x02\x02\u0122\"\x03\x02\x02\x02\u0123\u0124\x07w\x02\x02\u0124\u0125\x07p\x02\x02\u0125\u0126\x07u\x02\x02\u0126\u0127\x07k\x02\x02\u0127\u0128\x07i\x02\x02\u0128\u0129\x07p\x02\x02\u0129\u012a\x07g\x02\x02\u012a\u012b\x07f\x02\x02\u012b$\x03\x02\x02\x02\u012c\u012d\x07x\x02\x02\u012d\u012e\x07q\x02\x02\u012e\u012f\x07k\x02\x02\u012f\u0130\x07f\x02\x02\u0130&\x03\x02\x02\x02\u0131\u0132\x07y\x02\x02\u0132\u0133\x07j\x02\x02\u0133\u0134\x07k\x02\x02\u0134\u0135\x07n\x02\x02\u0135\u0136\x07g\x02\x02\u0136(\x03\x02\x02\x02\u0137\u0138\x07*\x02\x02\u0138*\x03\x02\x02\x02\u0139\u013a\x07+\x02\x02\u013a,\x03\x02\x02\x02\u013b\u013c\x07]\x02\x02\u013c.\x03\x02\x02\x02\u013d\u013e\x07_\x02\x02\u013e0\x03\x02\x02\x02\u013f\u0140\x07}\x02\x02\u01402\x03\x02\x02\x02\u0141\u0142\x07\x7f\x02\x02\u01424\x03\x02\x02\x02\u0143\u0144\x07>\x02\x02\u01446\x03\x02\x02\x02\u0145\u0146\x07>\x02\x02\u0146\u0147\x07?\x02\x02\u01478\x03\x02\x02\x02\u0148\u0149\x07@\x02\x02\u0149:\x03\x02\x02\x02\u014a\u014b\x07@\x02\x02\u014b\u014c\x07?\x02\x02\u014c<\x03\x02\x02\x02\u014d\u014e\x07>\x02\x02\u014e\u014f\x07>\x02\x02\u014f>\x03\x02\x02\x02\u0150\u0151\x07@\x02\x02\u0151\u0152\x07@\x02\x02\u0152@\x03\x02\x02\x02\u0153\u0154\x07-\x02\x02\u0154B\x03\x02\x02\x02\u0155\u0156\x07-\x02\x02\u0156\u0157\x07-\x02\x02\u0157D\x03\x02\x02\x02\u0158\u0159\x07/\x02\x02\u0159F\x03\x02\x02\x02\u015a\u015b\x07/\x02\x02\u015b\u015c\x07/\x02\x02\u015cH\x03\x02\x02\x02\u015d\u015e\x07,\x02\x02\u015eJ\x03\x02\x02\x02\u015f\u0160\x071\x02\x02\u0160L\x03\x02\x02\x02\u0161\u0162\x07'\x02\x02\u0162N\x03\x02\x02\x02\u0163\u0164\x07(\x02\x02\u0164P\x03\x02\x02\x02\u0165\u0166\x07~\x02\x02\u0166R\x03\x02\x02\x02\u0167\u0168\x07(\x02\x02\u0168\u0169\x07(\x02\x02\u0169T\x03\x02\x02\x02\u016a\u016b\x07~\x02\x02\u016b\u016c\x07~\x02\x02\u016cV\x03\x02\x02\x02\u016d\u016e\x07`\x02\x02\u016eX\x03\x02\x02\x02\u016f\u0170\x07#\x02\x02\u0170Z\x03\x02\x02\x02\u0171\u0172\x07\x80\x02\x02\u0172\\\x03\x02\x02\x02\u0173\u0174\x07A\x02\x02\u0174^\x03\x02\x02\x02\u0175\u0176\x07<\x02\x02\u0176`\x03\x02\x02\x02\u0177\u0178\x07=\x02\x02\u0178b\x03\x02\x02\x02\u0179\u017a\x07.\x02\x02\u017ad\x03\x02\x02\x02\u017b\u017c\x07?\x02\x02\u017cf\x03\x02\x02\x02\u017d\u017e\x07,\x02\x02\u017e\u017f\x07?\x02\x02\u017fh\x03\x02\x02\x02\u0180\u0181\x071\x02\x02\u0181\u0182\x07?\x02\x02\u0182j\x03\x02\x02\x02\u0183\u0184\x07'\x02\x02\u0184\u0185\x07?\x02\x02\u0185l\x03\x02\x02\x02\u0186\u0187\x07-\x02\x02\u0187\u0188\x07?\x02\x02\u0188n\x03\x02\x02\x02\u0189\u018a\x07/\x02\x02\u018a\u018b\x07?\x02\x02\u018bp\x03\x02\x02\x02\u018c\u018d\x07>\x02\x02\u018d\u018e\x07>\x02\x02\u018e\u018f\x07?\x02\x02\u018fr\x03\x02\x02\x02\u0190\u0191\x07@\x02\x02\u0191\u0192\x07@\x02\x02\u0192\u0193\x07?\x02\x02\u0193t\x03\x02\x02\x02\u0194\u0195\x07(\x02\x02\u0195\u0196\x07?\x02\x02\u0196v\x03\x02\x02\x02\u0197\u0198\x07`\x02\x02\u0198\u0199\x07?\x02\x02\u0199x\x03\x02\x02\x02\u019a\u019b\x07~\x02\x02\u019b\u019c\x07?\x02\x02\u019cz\x03\x02\x02\x02\u019d\u019e\x07?\x02\x02\u019e\u019f\x07?\x02\x02\u019f|\x03\x02\x02\x02\u01a0\u01a1\x07#\x02\x02\u01a1\u01a2\x07?\x02\x02\u01a2~\x03\x02\x02\x02\u01a3\u01a4\x07/\x02\x02\u01a4\u01a5\x07@\x02\x02\u01a5\x80\x03\x02\x02\x02\u01a6\u01a7\x070\x02\x02\u01a7\x82\x03\x02\x02\x02\u01a8\u01ad\x05\x85C\x02\u01a9\u01ac\x05\x85C\x02\u01aa\u01ac\x05\x89E\x02\u01ab\u01a9\x03\x02\x02\x02\u01ab\u01aa\x03\x02\x02\x02\u01ac\u01af\x03\x02\x02\x02\u01ad\u01ab\x03\x02\x02\x02\u01ad\u01ae\x03\x02\x02\x02\u01ae\x84\x03\x02\x02\x02\u01af\u01ad\x03\x02\x02\x02\u01b0\u01b1\x05\x87D\x02\u01b1\x86\x03\x02\x02\x02\u01b2\u01b3\t\x02\x02\x02\u01b3\x88\x03\x02\x02\x02\u01b4\u01b5\t\x03\x02\x02\u01b5\x8a\x03\x02\x02\x02\u01b6\u01ba\x05\x8dG\x02\u01b7\u01ba\x05\x97L\x02\u01b8\u01ba\x05\xa7T\x02\u01b9\u01b6\x03\x02\x02\x02\u01b9\u01b7\x03\x02\x02\x02\u01b9\u01b8\x03\x02\x02\x02\u01ba\x8c\x03\x02\x02\x02\u01bb\u01bc\x05\x8fH\x02\u01bc\x8e\x03\x02\x02\x02\u01bd\u01be\x072\x02\x02\u01be\u01c0\t\x04\x02\x02\u01bf\u01c1\t\x05\x02\x02\u01c0\u01bf\x03\x02\x02\x02\u01c1\u01c2\x03\x02\x02\x02\u01c2\u01c0\x03\x02\x02\x02\u01c2\u01c3\x03\x02\x02\x02\u01c3\x90\x03\x02\x02\x02\u01c4\u01c8\x05\x93J\x02\u01c5\u01c7\x05\x89E\x02\u01c6\u01c5\x03\x02\x02\x02\u01c7\u01ca\x03\x02\x02\x02\u01c8\u01c6\x03\x02\x02\x02\u01c8\u01c9\x03\x02\x02\x02\u01c9\x92\x03\x02\x02\x02\u01ca\u01c8\x03\x02\x02\x02\u01cb\u01cc\t\x06\x02\x02\u01cc\x94\x03\x02\x02\x02\u01cd\u01ce\t\x07\x02\x02\u01ce\x96\x03\x02\x02\x02\u01cf\u01d0\x05\x99M\x02\u01d0\x98\x03\x02\x02\x02\u01d1\u01d3\x05\x9bN\x02\u01d2\u01d4\x05\x9dO\x02\u01d3\u01d2\x03\x02\x02\x02\u01d3\u01d4\x03\x02\x02\x02\u01d4\u01d6\x03\x02\x02\x02\u01d5\u01d7\x05\xa5S\x02\u01d6\u01d5\x03\x02\x02\x02\u01d6\u01d7\x03\x02\x02\x02\u01d7\u01de\x03\x02\x02\x02\u01d8\u01d9\x05\xa1Q\x02\u01d9\u01db\x05\x9dO\x02\u01da\u01dc\x05\xa5S\x02\u01db\u01da\x03\x02\x02\x02\u01db\u01dc\x03\x02\x02\x02\u01dc\u01de\x03\x02\x02\x02\u01dd\u01d1\x03\x02\x02\x02\u01dd\u01d8\x03\x02\x02\x02\u01de\x9a\x03\x02\x02\x02\u01df\u01e1\x05\xa1Q\x02\u01e0\u01df\x03\x02\x02\x02\u01e0\u01e1\x03\x02\x02\x02\u01e1\u01e2\x03\x02\x02\x02\u01e2\u01e3\x070\x02\x02\u01e3\u01e8\x05\xa1Q\x02\u01e4\u01e5\x05\xa1Q\x02\u01e5\u01e6\x070\x02\x02\u01e6\u01e8\x03\x02\x02\x02\u01e7\u01e0\x03\x02\x02\x02\u01e7\u01e4\x03\x02\x02\x02\u01e8\x9c\x03\x02\x02\x02\u01e9\u01eb\t\b\x02\x02\u01ea\u01ec\x05\x9fP\x02\u01eb\u01ea\x03\x02\x02\x02\u01eb\u01ec\x03\x02\x02\x02\u01ec\u01ed\x03\x02\x02\x02\u01ed\u01ee\x05\xa1Q\x02\u01ee\x9e\x03\x02\x02\x02\u01ef\u01f0\t\t\x02\x02\u01f0\xa0\x03\x02\x02\x02\u01f1\u01f3\x05\x89E\x02\u01f2\u01f1\x03\x02\x02\x02\u01f3\u01f4\x03\x02\x02\x02\u01f4\u01f2\x03\x02\x02\x02\u01f4\u01f5\x03\x02\x02\x02\u01f5\xa2\x03\x02\x02\x02\u01f6\u01f8\t\n\x02\x02\u01f7\u01f9\x05\x9fP\x02\u01f8\u01f7\x03\x02\x02\x02\u01f8\u01f9\x03\x02\x02\x02\u01f9\u01fa\x03\x02\x02\x02\u01fa\u01fb\x05\xa1Q\x02\u01fb\xa4\x03\x02\x02\x02\u01fc\u01fd\t\v\x02\x02\u01fd\xa6\x03\x02\x02\x02\u01fe\u01ff\x07)\x02\x02\u01ff\u0200\x05\xa9U\x02\u0200\u0201\x07)\x02\x02\u0201\u0215\x03\x02\x02\x02\u0202\u0203\x07N\x02\x02\u0203\u0204\x07)\x02\x02\u0204\u0205\x03\x02\x02\x02\u0205\u0206\x05\xa9U\x02\u0206\u0207\x07)\x02\x02\u0207\u0215\x03\x02\x02\x02\u0208\u0209\x07w\x02\x02\u0209\u020a\x07)\x02\x02\u020a\u020b\x03\x02\x02\x02\u020b\u020c\x05\xa9U\x02\u020c\u020d\x07)\x02\x02\u020d\u0215\x03\x02\x02\x02\u020e\u020f\x07W\x02\x02\u020f\u0210\x07)\x02\x02\u0210\u0211\x03\x02\x02\x02\u0211\u0212\x05\xa9U\x02\u0212\u0213\x07)\x02\x02\u0213\u0215\x03\x02\x02\x02\u0214\u01fe\x03\x02\x02\x02\u0214\u0202\x03\x02\x02\x02\u0214\u0208\x03\x02\x02\x02\u0214\u020e\x03\x02\x02\x02\u0215\xa8\x03\x02\x02\x02\u0216\u0218\x05\xabV\x02\u0217\u0216\x03\x02\x02\x02\u0218\u0219\x03\x02\x02\x02\u0219\u0217\x03\x02\x02\x02\u0219\u021a\x03\x02\x02\x02\u021a\xaa\x03\x02\x02\x02\u021b\u021e\n\f\x02\x02\u021c\u021e\x05\xadW\x02\u021d\u021b\x03\x02\x02\x02\u021d\u021c\x03\x02\x02\x02\u021e\xac\x03\x02\x02\x02\u021f\u0220\x05\xafX\x02\u0220\xae\x03\x02\x02\x02\u0221\u0222\x07^\x02\x02\u0222\u0223\t\r\x02\x02\u0223\xb0\x03\x02\x02\x02\u0224\u0226\x05\xb3Z\x02\u0225\u0224\x03\x02\x02\x02\u0225\u0226\x03\x02\x02\x02\u0226\u0227\x03\x02\x02\x02\u0227\u0229\x07$\x02\x02\u0228\u022a\x05\xb5[\x02\u0229\u0228\x03\x02\x02\x02\u0229\u022a\x03\x02\x02\x02\u022a\u022b\x03\x02\x02\x02",c._serializedATNSegment1="\u022b\u022c\x07$\x02\x02\u022c\xb2\x03\x02\x02\x02\u022d\u022e\x07w\x02\x02\u022e\u0231\x07:\x02\x02\u022f\u0231\t\x0e\x02\x02\u0230\u022d\x03\x02\x02\x02\u0230\u022f\x03\x02\x02\x02\u0231\xb4\x03\x02\x02\x02\u0232\u0234\x05\xb7\\\x02\u0233\u0232\x03\x02\x02\x02\u0234\u0235\x03\x02\x02\x02\u0235\u0233\x03\x02\x02\x02\u0235\u0236\x03\x02\x02\x02\u0236\xb6\x03\x02\x02\x02\u0237\u023f\n\x0f\x02\x02\u0238\u023f\x05\xadW\x02\u0239\u023a\x07^\x02\x02\u023a\u023f\x07\f\x02\x02\u023b\u023c\x07^\x02\x02\u023c\u023d\x07\x0f\x02\x02\u023d\u023f\x07\f\x02\x02\u023e\u0237\x03\x02\x02\x02\u023e\u0238\x03\x02\x02\x02\u023e\u0239\x03\x02\x02\x02\u023e\u023b\x03\x02\x02\x02\u023f\xb8\x03\x02\x02\x02\u0240\u0242\t\x10\x02\x02\u0241\u0240\x03\x02\x02\x02\u0242\u0243\x03\x02\x02\x02\u0243\u0241\x03\x02\x02\x02\u0243\u0244\x03\x02\x02\x02\u0244\u0245\x03\x02\x02\x02\u0245\u0246\b]\x02\x02\u0246\xba\x03\x02\x02\x02\u0247\u0249\x07\x0f\x02\x02\u0248\u024a\x07\f\x02\x02\u0249\u0248\x03\x02\x02\x02\u0249\u024a\x03\x02\x02\x02\u024a\u024d\x03\x02\x02\x02\u024b\u024d\x07\f\x02\x02\u024c\u0247\x03\x02\x02\x02\u024c\u024b\x03\x02\x02\x02\u024d\u024e\x03\x02\x02\x02\u024e\u024f\b^\x02\x02\u024f\xbc\x03\x02\x02\x02\u0250\u0251\x071\x02\x02\u0251\u0252\x07,\x02\x02\u0252\u0256\x03\x02\x02\x02\u0253\u0255\v\x02\x02\x02\u0254\u0253\x03\x02\x02\x02\u0255\u0258\x03\x02\x02\x02\u0256\u0257\x03\x02\x02\x02\u0256\u0254\x03\x02\x02\x02\u0257\u0259\x03\x02\x02\x02\u0258\u0256\x03\x02\x02\x02\u0259\u025a\x07,\x02\x02\u025a\u025b\x071\x02\x02\u025b\u025c\x03\x02\x02\x02\u025c\u025d\b_\x02\x02\u025d\xbe\x03\x02\x02\x02\u025e\u025f\x071\x02\x02\u025f\u0260\x071\x02\x02\u0260\u0264\x03\x02\x02\x02\u0261\u0263\n\x11\x02\x02\u0262\u0261\x03\x02\x02\x02\u0263\u0266\x03\x02\x02\x02\u0264\u0262\x03\x02\x02\x02\u0264\u0265\x03\x02\x02\x02\u0265\u0267\x03\x02\x02\x02\u0266\u0264\x03\x02\x02\x02\u0267\u0268\b`\x02\x02\u0268\xc0\x03\x02\x02\x02\x1e\x02\u01ab\u01ad\u01b9\u01c2\u01c8\u01d3\u01d6\u01db\u01dd\u01e0\u01e7\u01eb\u01f4\u01f8\u0214\u0219\u021d\u0225\u0229\u0230\u0235\u023e\u0243\u0249\u024c\u0256\u0264\x03\b\x02\x02",c._serializedATN=o.join([c._serializedATNSegment0,c._serializedATNSegment1],"")},712:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectAbstractDeclaratorContext=t.AbstractDeclaratorContext=t.TypeNameContext=t.IdentifierListContext=t.ParameterDeclarationContext=t.ParameterListContext=t.ParameterTypeListContext=t.TypeQualifierListContext=t.PointerContext=t.NestedParenthesesBlockContext=t.DirectDeclaratorContext=t.DeclaratorContext=t.FunctionSpecifierContext=t.TypeQualifierContext=t.StructDeclaratorContext=t.StructDeclaratorListContext=t.SpecifierQualifierListContext=t.StructDeclarationContext=t.StructDeclarationListContext=t.StructSpecifierContext=t.TypeSpecifierContext=t.InitDeclaratorContext=t.InitDeclaratorListContext=t.DeclarationSpecifierContext=t.DeclarationSpecifiers2Context=t.DeclarationSpecifiersContext=t.DeclarationContext=t.ConstantExpressionContext=t.ExpressionContext=t.AssignmentOperatorContext=t.AssignmentExpressionContext=t.ConditionalExpressionContext=t.LogicalOrExpressionContext=t.LogicalAndExpressionContext=t.InclusiveOrExpressionContext=t.ExclusiveOrExpressionContext=t.AndExpressionContext=t.EqualityExpressionContext=t.RelationalExpressionContext=t.ShiftExpressionContext=t.AdditiveExpressionContext=t.MultiplicativeExpressionContext=t.CastExpressionContext=t.UnaryOperatorContext=t.UnaryExpressionContext=t.ArgumentExpressionListContext=t.PostfixExpressionContext=t.PrimaryExpressionContext=t.StartContext=t.ClangParser=void 0,t.DeclarationListContext=t.FunctionDefinitionContext=t.ExternalDeclarationContext=t.TranslationUnitContext=t.CompilationUnitContext=t.ForExpressionContext=t.ForDeclarationContext=t.ForConditionContext=t.IterationStatementContext=t.SelectionStatementContext=t.ExpressionStatementContext=t.BlockItemContext=t.BlockItemListContext=t.CompoundStatementContext=t.StatementContext=t.DesignatorContext=t.DesignatorListContext=t.DesignationContext=t.InitializerListContext=t.InitializerContext=t.TypedefNameContext=void 0;const n=s(143),i=s(266),a=s(257),r=s(265),o=s(235),c=s(132),l=s(236),d=s(162),u=s(70),h=s(167),p=s(142);class g extends o.Parser{constructor(e){super(e),this._interp=new l.ParserATNSimulator(g._ATN,this)}get vocabulary(){return g.VOCABULARY}get grammarFileName(){return"Clang.g4"}get ruleNames(){return g.ruleNames}get serializedATN(){return g._serializedATN}createFailedPredicateException(e,t){return new a.FailedPredicateException(this,e,t)}start(){let e=new m(this._ctx,this.state);this.enterRule(e,0,g.RULE_start);try{this.enterOuterAlt(e,1),this.state=140,this.primaryExpression()}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}primaryExpression(){let e,t=new b(this._ctx,this.state);this.enterRule(t,2,g.RULE_primaryExpression);try{switch(this.state=153,this._errHandler.sync(this),this._input.LA(1)){case g.Identifier:this.enterOuterAlt(t,1),this.state=142,this.match(g.Identifier);break;case g.Constant:this.enterOuterAlt(t,2),this.state=143,this.match(g.Constant);break;case g.StringLiteral:this.enterOuterAlt(t,3),this.state=145,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=144,this.match(g.StringLiteral),this.state=147,this._errHandler.sync(this),e=this._input.LA(1)}while(e===g.StringLiteral);break;case g.LeftParen:this.enterOuterAlt(t,4),this.state=149,this.match(g.LeftParen),this.state=150,this.expression(),this.state=151,this.match(g.RightParen);break;default:throw new r.NoViableAltException(this)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}postfixExpression(){let e,t=new f(this._ctx,this.state);this.enterRule(t,4,g.RULE_postfixExpression);try{for(this.enterOuterAlt(t,1),this.state=155,this.primaryExpression(),this.state=170,this._errHandler.sync(this),e=this._input.LA(1);e===g.LeftParen||e===g.LeftBracket||0===(e-33&-32)&&0!==(1<<e-33&(1<<g.PlusPlus-33|1<<g.MinusMinus-33|1<<g.Arrow-33|1<<g.Dot-33));){switch(this.state=168,this._errHandler.sync(this),this._input.LA(1)){case g.LeftBracket:this.state=156,this.match(g.LeftBracket),this.state=157,this.expression(),this.state=158,this.match(g.RightBracket);break;case g.LeftParen:this.state=160,this.match(g.LeftParen),this.state=162,this._errHandler.sync(this),e=this._input.LA(1),(e===g.T__0||e===g.LeftParen||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=161,this.argumentExpressionList()),this.state=164,this.match(g.RightParen);break;case g.Arrow:case g.Dot:this.state=165,e=this._input.LA(1),e!==g.Arrow&&e!==g.Dot?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=166,this.match(g.Identifier);break;case g.PlusPlus:case g.MinusMinus:this.state=167,e=this._input.LA(1),e!==g.PlusPlus&&e!==g.MinusMinus?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume());break;default:throw new r.NoViableAltException(this)}this.state=172,this._errHandler.sync(this),e=this._input.LA(1)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}argumentExpressionList(){let e,t=new v(this._ctx,this.state);this.enterRule(t,6,g.RULE_argumentExpressionList);try{for(this.enterOuterAlt(t,1),this.state=173,this.assignmentExpression(),this.state=178,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=174,this.match(g.Comma),this.state=175,this.assignmentExpression(),this.state=180,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}unaryExpression(){let e,t=new y(this._ctx,this.state);this.enterRule(t,8,g.RULE_unaryExpression);try{for(this.enterOuterAlt(t,1),this.state=184,this._errHandler.sync(this),e=this._input.LA(1);e===g.PlusPlus||e===g.MinusMinus;)this.state=181,e=this._input.LA(1),e!==g.PlusPlus&&e!==g.MinusMinus?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=186,this._errHandler.sync(this),e=this._input.LA(1);switch(this.state=191,this._errHandler.sync(this),this._input.LA(1)){case g.LeftParen:case g.Identifier:case g.Constant:case g.StringLiteral:this.state=187,this.postfixExpression();break;case g.Plus:case g.Minus:case g.Star:case g.And:case g.Not:this.state=188,this.unaryOperator(),this.state=189,this.castExpression();break;default:throw new r.NoViableAltException(this)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}unaryOperator(){let e,t=new x(this._ctx,this.state);this.enterRule(t,10,g.RULE_unaryOperator);try{this.enterOuterAlt(t,1),this.state=193,e=this._input.LA(1),0!==(e-32&-32)||0===(1<<e-32&(1<<g.Plus-32|1<<g.Minus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}castExpression(){let e,t=new j(this._ctx,this.state);this.enterRule(t,12,g.RULE_castExpression);try{switch(this.state=205,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,9,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=196,this._errHandler.sync(this),e=this._input.LA(1),e===g.T__0&&(this.state=195,this.match(g.T__0)),this.state=198,this.match(g.LeftParen),this.state=199,this.typeName(),this.state=200,this.match(g.RightParen),this.state=201,this.castExpression();break;case 2:this.enterOuterAlt(t,2),this.state=203,this.unaryExpression();break;case 3:this.enterOuterAlt(t,3),this.state=204,this.match(g.DigitSequence)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}multiplicativeExpression(){let e,t=new O(this._ctx,this.state);this.enterRule(t,14,g.RULE_multiplicativeExpression);try{for(this.enterOuterAlt(t,1),this.state=207,this.castExpression(),this.state=212,this._errHandler.sync(this),e=this._input.LA(1);0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Div-36|1<<g.Mod-36));)this.state=208,e=this._input.LA(1),0!==(e-36&-32)||0===(1<<e-36&(1<<g.Star-36|1<<g.Div-36|1<<g.Mod-36))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=209,this.castExpression(),this.state=214,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}additiveExpression(){let e,t=new C(this._ctx,this.state);this.enterRule(t,16,g.RULE_additiveExpression);try{for(this.enterOuterAlt(t,1),this.state=215,this.multiplicativeExpression(),this.state=220,this._errHandler.sync(this),e=this._input.LA(1);e===g.Plus||e===g.Minus;)this.state=216,e=this._input.LA(1),e!==g.Plus&&e!==g.Minus?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=217,this.multiplicativeExpression(),this.state=222,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}shiftExpression(){let e,t=new S(this._ctx,this.state);this.enterRule(t,18,g.RULE_shiftExpression);try{for(this.enterOuterAlt(t,1),this.state=223,this.additiveExpression(),this.state=228,this._errHandler.sync(this),e=this._input.LA(1);e===g.LeftShift||e===g.RightShift;)this.state=224,e=this._input.LA(1),e!==g.LeftShift&&e!==g.RightShift?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=225,this.additiveExpression(),this.state=230,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}relationalExpression(){let e,t=new E(this._ctx,this.state);this.enterRule(t,20,g.RULE_relationalExpression);try{for(this.enterOuterAlt(t,1),this.state=231,this.shiftExpression(),this.state=236,this._errHandler.sync(this),e=this._input.LA(1);0===(-32&e)&&0!==(1<<e&(1<<g.Less|1<<g.LessEqual|1<<g.Greater|1<<g.GreaterEqual));)this.state=232,e=this._input.LA(1),0!==(-32&e)||0===(1<<e&(1<<g.Less|1<<g.LessEqual|1<<g.Greater|1<<g.GreaterEqual))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=233,this.shiftExpression(),this.state=238,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}equalityExpression(){let e,t=new w(this._ctx,this.state);this.enterRule(t,22,g.RULE_equalityExpression);try{for(this.enterOuterAlt(t,1),this.state=239,this.relationalExpression(),this.state=244,this._errHandler.sync(this),e=this._input.LA(1);e===g.Equal||e===g.NotEqual;)this.state=240,e=this._input.LA(1),e!==g.Equal&&e!==g.NotEqual?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=241,this.relationalExpression(),this.state=246,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}andExpression(){let e,t=new _(this._ctx,this.state);this.enterRule(t,24,g.RULE_andExpression);try{for(this.enterOuterAlt(t,1),this.state=247,this.equalityExpression(),this.state=252,this._errHandler.sync(this),e=this._input.LA(1);e===g.And;)this.state=248,this.match(g.And),this.state=249,this.equalityExpression(),this.state=254,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}exclusiveOrExpression(){let e,t=new A(this._ctx,this.state);this.enterRule(t,26,g.RULE_exclusiveOrExpression);try{for(this.enterOuterAlt(t,1),this.state=255,this.andExpression(),this.state=260,this._errHandler.sync(this),e=this._input.LA(1);e===g.Caret;)this.state=256,this.match(g.Caret),this.state=257,this.andExpression(),this.state=262,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}inclusiveOrExpression(){let e,t=new k(this._ctx,this.state);this.enterRule(t,28,g.RULE_inclusiveOrExpression);try{for(this.enterOuterAlt(t,1),this.state=263,this.exclusiveOrExpression(),this.state=268,this._errHandler.sync(this),e=this._input.LA(1);e===g.Or;)this.state=264,this.match(g.Or),this.state=265,this.exclusiveOrExpression(),this.state=270,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}logicalAndExpression(){let e,t=new T(this._ctx,this.state);this.enterRule(t,30,g.RULE_logicalAndExpression);try{for(this.enterOuterAlt(t,1),this.state=271,this.inclusiveOrExpression(),this.state=276,this._errHandler.sync(this),e=this._input.LA(1);e===g.AndAnd;)this.state=272,this.match(g.AndAnd),this.state=273,this.inclusiveOrExpression(),this.state=278,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}logicalOrExpression(){let e,t=new R(this._ctx,this.state);this.enterRule(t,32,g.RULE_logicalOrExpression);try{for(this.enterOuterAlt(t,1),this.state=279,this.logicalAndExpression(),this.state=284,this._errHandler.sync(this),e=this._input.LA(1);e===g.OrOr;)this.state=280,this.match(g.OrOr),this.state=281,this.logicalAndExpression(),this.state=286,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}conditionalExpression(){let e,t=new I(this._ctx,this.state);this.enterRule(t,34,g.RULE_conditionalExpression);try{this.enterOuterAlt(t,1),this.state=287,this.logicalOrExpression(),this.state=293,this._errHandler.sync(this),e=this._input.LA(1),e===g.Question&&(this.state=288,this.match(g.Question),this.state=289,this.expression(),this.state=290,this.match(g.Colon),this.state=291,this.conditionalExpression())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}assignmentExpression(){let e=new L(this._ctx,this.state);this.enterRule(e,36,g.RULE_assignmentExpression);try{switch(this.state=301,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,21,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=295,this.conditionalExpression();break;case 2:this.enterOuterAlt(e,2),this.state=296,this.unaryExpression(),this.state=297,this.assignmentOperator(),this.state=298,this.assignmentExpression();break;case 3:this.enterOuterAlt(e,3),this.state=300,this.match(g.DigitSequence)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}assignmentOperator(){let e,t=new P(this._ctx,this.state);this.enterRule(t,38,g.RULE_assignmentOperator);try{this.enterOuterAlt(t,1),this.state=303,e=this._input.LA(1),0!==(e-50&-32)||0===(1<<e-50&(1<<g.Assign-50|1<<g.StarAssign-50|1<<g.DivAssign-50|1<<g.ModAssign-50|1<<g.PlusAssign-50|1<<g.MinusAssign-50|1<<g.LeftShiftAssign-50|1<<g.RightShiftAssign-50|1<<g.AndAssign-50|1<<g.XorAssign-50|1<<g.OrAssign-50))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}expression(){let e,t=new N(this._ctx,this.state);this.enterRule(t,40,g.RULE_expression);try{for(this.enterOuterAlt(t,1),this.state=305,this.assignmentExpression(),this.state=310,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=306,this.match(g.Comma),this.state=307,this.assignmentExpression(),this.state=312,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}constantExpression(){let e=new D(this._ctx,this.state);this.enterRule(e,42,g.RULE_constantExpression);try{this.enterOuterAlt(e,1),this.state=313,this.conditionalExpression()}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}declaration(){let e,t=new M(this._ctx,this.state);this.enterRule(t,44,g.RULE_declaration);try{this.enterOuterAlt(t,1),this.state=315,this.declarationSpecifiers(),this.state=317,this._errHandler.sync(this),e=this._input.LA(1),(e===g.LeftParen||0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Caret-36|1<<g.Identifier-36)))&&(this.state=316,this.initDeclaratorList()),this.state=319,this.match(g.Semi)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}declarationSpecifiers(){let e=new U(this._ctx,this.state);this.enterRule(e,46,g.RULE_declarationSpecifiers);try{let t;this.enterOuterAlt(e,1),this.state=322,this._errHandler.sync(this),t=1;do{if(1!==t)throw new r.NoViableAltException(this);this.state=321,this.declarationSpecifier(),this.state=324,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,24,this._ctx)}while(2!==t&&t!==n.ATN.INVALID_ALT_NUMBER)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}declarationSpecifiers2(){let e,t=new B(this._ctx,this.state);this.enterRule(t,48,g.RULE_declarationSpecifiers2);try{this.enterOuterAlt(t,1),this.state=327,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=326,this.declarationSpecifier(),this.state=329,this._errHandler.sync(this),e=this._input.LA(1)}while(0===(-32&e)&&0!==(1<<e&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||e===g.Identifier)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}declarationSpecifier(){let e=new G(this._ctx,this.state);this.enterRule(e,50,g.RULE_declarationSpecifier);try{switch(this.state=334,this._errHandler.sync(this),this._input.LA(1)){case g.Char:case g.Float:case g.Int:case g.Signed:case g.Struct:case g.Unsigned:case g.Void:case g.Identifier:this.enterOuterAlt(e,1),this.state=331,this.typeSpecifier();break;case g.Const:this.enterOuterAlt(e,2),this.state=332,this.typeQualifier();break;case g.T__1:this.enterOuterAlt(e,3),this.state=333,this.functionSpecifier();break;default:throw new r.NoViableAltException(this)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}initDeclaratorList(){let e,t=new F(this._ctx,this.state);this.enterRule(t,52,g.RULE_initDeclaratorList);try{for(this.enterOuterAlt(t,1),this.state=336,this.initDeclarator(),this.state=341,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=337,this.match(g.Comma),this.state=338,this.initDeclarator(),this.state=343,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}initDeclarator(){let e,t=new H(this._ctx,this.state);this.enterRule(t,54,g.RULE_initDeclarator);try{this.enterOuterAlt(t,1),this.state=344,this.declarator(),this.state=347,this._errHandler.sync(this),e=this._input.LA(1),e===g.Assign&&(this.state=345,this.match(g.Assign),this.state=346,this.initializer())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}typeSpecifier(){let e,t=new V(this._ctx,this.state);this.enterRule(t,56,g.RULE_typeSpecifier);try{switch(this.state=352,this._errHandler.sync(this),this._input.LA(1)){case g.Char:case g.Float:case g.Int:case g.Signed:case g.Unsigned:case g.Void:this.enterOuterAlt(t,1),this.state=349,e=this._input.LA(1),0!==(-32&e)||0===(1<<e&(1<<g.Char|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Unsigned|1<<g.Void))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume());break;case g.Struct:this.enterOuterAlt(t,2),this.state=350,this.structSpecifier();break;case g.Identifier:this.enterOuterAlt(t,3),this.state=351,this.typedefName();break;default:throw new r.NoViableAltException(this)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}structSpecifier(){let e,t=new W(this._ctx,this.state);this.enterRule(t,58,g.RULE_structSpecifier);try{switch(this.state=364,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,31,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=354,this.match(g.Struct),this.state=356,this._errHandler.sync(this),e=this._input.LA(1),e===g.Identifier&&(this.state=355,this.match(g.Identifier)),this.state=358,this.match(g.LeftBrace),this.state=359,this.structDeclarationList(),this.state=360,this.match(g.RightBrace);break;case 2:this.enterOuterAlt(t,2),this.state=362,this.match(g.Struct),this.state=363,this.match(g.Identifier)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}structDeclarationList(){let e,t=new q(this._ctx,this.state);this.enterRule(t,60,g.RULE_structDeclarationList);try{this.enterOuterAlt(t,1),this.state=367,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=366,this.structDeclaration(),this.state=369,this._errHandler.sync(this),e=this._input.LA(1)}while(0===(-32&e)&&0!==(1<<e&(1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||e===g.Identifier)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}structDeclaration(){let e=new $(this._ctx,this.state);this.enterRule(e,62,g.RULE_structDeclaration);try{switch(this.state=378,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,33,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=371,this.specifierQualifierList(),this.state=372,this.structDeclaratorList(),this.state=373,this.match(g.Semi);break;case 2:this.enterOuterAlt(e,2),this.state=375,this.specifierQualifierList(),this.state=376,this.match(g.Semi)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}specifierQualifierList(){let e=new X(this._ctx,this.state);this.enterRule(e,64,g.RULE_specifierQualifierList);try{switch(this.enterOuterAlt(e,1),this.state=382,this._errHandler.sync(this),this._input.LA(1)){case g.Char:case g.Float:case g.Int:case g.Signed:case g.Struct:case g.Unsigned:case g.Void:case g.Identifier:this.state=380,this.typeSpecifier();break;case g.Const:this.state=381,this.typeQualifier();break;default:throw new r.NoViableAltException(this)}if(this.state=385,this._errHandler.sync(this),1===this.interpreter.adaptivePredict(this._input,35,this._ctx))this.state=384,this.specifierQualifierList()}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}structDeclaratorList(){let e,t=new z(this._ctx,this.state);this.enterRule(t,66,g.RULE_structDeclaratorList);try{for(this.enterOuterAlt(t,1),this.state=387,this.structDeclarator(),this.state=392,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=388,this.match(g.Comma),this.state=389,this.structDeclarator(),this.state=394,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}structDeclarator(){let e,t=new Y(this._ctx,this.state);this.enterRule(t,68,g.RULE_structDeclarator);try{switch(this.state=401,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,38,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=395,this.declarator();break;case 2:this.enterOuterAlt(t,2),this.state=397,this._errHandler.sync(this),e=this._input.LA(1),(e===g.LeftParen||0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Caret-36|1<<g.Identifier-36)))&&(this.state=396,this.declarator()),this.state=399,this.match(g.Colon),this.state=400,this.constantExpression()}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}typeQualifier(){let e=new K(this._ctx,this.state);this.enterRule(e,70,g.RULE_typeQualifier);try{this.enterOuterAlt(e,1),this.state=403,this.match(g.Const)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}functionSpecifier(){let e=new Q(this._ctx,this.state);this.enterRule(e,72,g.RULE_functionSpecifier);try{this.enterOuterAlt(e,1),this.state=405,this.match(g.T__1)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}declarator(){let e,t=new J(this._ctx,this.state);this.enterRule(t,74,g.RULE_declarator);try{this.enterOuterAlt(t,1),this.state=408,this._errHandler.sync(this),e=this._input.LA(1),e!==g.Star&&e!==g.Caret||(this.state=407,this.pointer()),this.state=410,this.directDeclarator(0)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}directDeclarator(e){void 0===e&&(e=0);let t,s=this._ctx,i=this.state,a=new Z(this._ctx,i),r=a;this.enterRecursionRule(a,76,g.RULE_directDeclarator,e);try{let e;switch(this.enterOuterAlt(a,1),this.state=421,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,40,this._ctx)){case 1:this.state=413,this.match(g.Identifier);break;case 2:this.state=414,this.match(g.LeftParen),this.state=415,this.declarator(),this.state=416,this.match(g.RightParen);break;case 3:this.state=418,this.match(g.Identifier),this.state=419,this.match(g.Colon),this.state=420,this.match(g.DigitSequence)}for(this._ctx._stop=this._input.tryLT(-1),this.state=452,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,46,this._ctx);2!==e&&e!==n.ATN.INVALID_ALT_NUMBER;){if(1===e)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=a,this.state=450,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,45,this._ctx)){case 1:if(a=new Z(s,i),this.pushNewRecursionContext(a,76,g.RULE_directDeclarator),this.state=423,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=424,this.match(g.LeftBracket),this.state=426,this._errHandler.sync(this),t=this._input.LA(1),t===g.Const&&(this.state=425,this.typeQualifierList()),this.state=429,this._errHandler.sync(this),t=this._input.LA(1),(t===g.T__0||t===g.LeftParen||0===(t-32&-32)&&0!==(1<<t-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(t-65&-32)&&0!==(1<<t-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=428,this.assignmentExpression()),this.state=431,this.match(g.RightBracket);break;case 2:if(a=new Z(s,i),this.pushNewRecursionContext(a,76,g.RULE_directDeclarator),this.state=432,!this.precpred(this._ctx,4))throw this.createFailedPredicateException("this.precpred(this._ctx, 4)");this.state=433,this.match(g.LeftBracket),this.state=435,this._errHandler.sync(this),t=this._input.LA(1),t===g.Const&&(this.state=434,this.typeQualifierList()),this.state=437,this.match(g.Star),this.state=438,this.match(g.RightBracket);break;case 3:if(a=new Z(s,i),this.pushNewRecursionContext(a,76,g.RULE_directDeclarator),this.state=439,!this.precpred(this._ctx,3))throw this.createFailedPredicateException("this.precpred(this._ctx, 3)");this.state=440,this.match(g.LeftParen),this.state=441,this.parameterTypeList(),this.state=442,this.match(g.RightParen);break;case 4:if(a=new Z(s,i),this.pushNewRecursionContext(a,76,g.RULE_directDeclarator),this.state=444,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");this.state=445,this.match(g.LeftParen),this.state=447,this._errHandler.sync(this),t=this._input.LA(1),t===g.Identifier&&(this.state=446,this.identifierList()),this.state=449,this.match(g.RightParen)}this.state=454,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,46,this._ctx)}}catch(o){if(!(o instanceof d.RecognitionException))throw o;a.exception=o,this._errHandler.reportError(this,o),this._errHandler.recover(this,o)}finally{this.unrollRecursionContexts(s)}return a}nestedParenthesesBlock(){let e,t=new ee(this._ctx,this.state);this.enterRule(t,78,g.RULE_nestedParenthesesBlock);try{for(this.enterOuterAlt(t,1),this.state=462,this._errHandler.sync(this),e=this._input.LA(1);0===(-32&e)&&0!==(1<<e&(1<<g.T__0|1<<g.T__1|1<<g.Break|1<<g.Char|1<<g.Continue|1<<g.Const|1<<g.Do|1<<g.Else|1<<g.Float|1<<g.For|1<<g.If|1<<g.Int|1<<g.Long|1<<g.Return|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void|1<<g.While|1<<g.LeftParen|1<<g.LeftBracket|1<<g.RightBracket|1<<g.LeftBrace|1<<g.RightBrace|1<<g.Less|1<<g.LessEqual|1<<g.Greater|1<<g.GreaterEqual|1<<g.LeftShift|1<<g.RightShift))||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.Div-32|1<<g.Mod-32|1<<g.And-32|1<<g.Or-32|1<<g.AndAnd-32|1<<g.OrOr-32|1<<g.Caret-32|1<<g.Not-32|1<<g.Tilde-32|1<<g.Question-32|1<<g.Colon-32|1<<g.Semi-32|1<<g.Comma-32|1<<g.Assign-32|1<<g.StarAssign-32|1<<g.DivAssign-32|1<<g.ModAssign-32|1<<g.PlusAssign-32|1<<g.MinusAssign-32|1<<g.LeftShiftAssign-32|1<<g.RightShiftAssign-32|1<<g.AndAssign-32|1<<g.XorAssign-32|1<<g.OrAssign-32|1<<g.Equal-32|1<<g.NotEqual-32|1<<g.Arrow-32))||0===(e-64&-32)&&0!==(1<<e-64&(1<<g.Dot-64|1<<g.Identifier-64|1<<g.Constant-64|1<<g.DigitSequence-64|1<<g.StringLiteral-64|1<<g.Whitespace-64|1<<g.Newline-64|1<<g.BlockComment-64|1<<g.LineComment-64));){switch(this.state=460,this._errHandler.sync(this),this._input.LA(1)){case g.T__0:case g.T__1:case g.Break:case g.Char:case g.Continue:case g.Const:case g.Do:case g.Else:case g.Float:case g.For:case g.If:case g.Int:case g.Long:case g.Return:case g.Signed:case g.Struct:case g.Unsigned:case g.Void:case g.While:case g.LeftBracket:case g.RightBracket:case g.LeftBrace:case g.RightBrace:case g.Less:case g.LessEqual:case g.Greater:case g.GreaterEqual:case g.LeftShift:case g.RightShift:case g.Plus:case g.PlusPlus:case g.Minus:case g.MinusMinus:case g.Star:case g.Div:case g.Mod:case g.And:case g.Or:case g.AndAnd:case g.OrOr:case g.Caret:case g.Not:case g.Tilde:case g.Question:case g.Colon:case g.Semi:case g.Comma:case g.Assign:case g.StarAssign:case g.DivAssign:case g.ModAssign:case g.PlusAssign:case g.MinusAssign:case g.LeftShiftAssign:case g.RightShiftAssign:case g.AndAssign:case g.XorAssign:case g.OrAssign:case g.Equal:case g.NotEqual:case g.Arrow:case g.Dot:case g.Identifier:case g.Constant:case g.DigitSequence:case g.StringLiteral:case g.Whitespace:case g.Newline:case g.BlockComment:case g.LineComment:this.state=455,e=this._input.LA(1),e<=0||e===g.LeftParen||e===g.RightParen?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume());break;case g.LeftParen:this.state=456,this.match(g.LeftParen),this.state=457,this.nestedParenthesesBlock(),this.state=458,this.match(g.RightParen);break;default:throw new r.NoViableAltException(this)}this.state=464,this._errHandler.sync(this),e=this._input.LA(1)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}pointer(){let e,t=new te(this._ctx,this.state);this.enterRule(t,80,g.RULE_pointer);try{this.enterOuterAlt(t,1),this.state=469,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=465,e=this._input.LA(1),e!==g.Star&&e!==g.Caret?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=467,this._errHandler.sync(this),e=this._input.LA(1),e===g.Const&&(this.state=466,this.typeQualifierList()),this.state=471,this._errHandler.sync(this),e=this._input.LA(1)}while(e===g.Star||e===g.Caret)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}typeQualifierList(){let e,t=new se(this._ctx,this.state);this.enterRule(t,82,g.RULE_typeQualifierList);try{this.enterOuterAlt(t,1),this.state=474,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=473,this.typeQualifier(),this.state=476,this._errHandler.sync(this),e=this._input.LA(1)}while(e===g.Const)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}parameterTypeList(){let e,t=new ne(this._ctx,this.state);this.enterRule(t,84,g.RULE_parameterTypeList);try{this.enterOuterAlt(t,1),this.state=478,this.parameterList(),this.state=480,this._errHandler.sync(this),e=this._input.LA(1),e===g.Comma&&(this.state=479,this.match(g.Comma))}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}parameterList(){let e=new ie(this._ctx,this.state);this.enterRule(e,86,g.RULE_parameterList);try{let t;for(this.enterOuterAlt(e,1),this.state=482,this.parameterDeclaration(),this.state=487,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,53,this._ctx);2!==t&&t!==n.ATN.INVALID_ALT_NUMBER;)1===t&&(this.state=483,this.match(g.Comma),this.state=484,this.parameterDeclaration()),this.state=489,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,53,this._ctx)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}parameterDeclaration(){let e,t=new ae(this._ctx,this.state);this.enterRule(t,88,g.RULE_parameterDeclaration);try{switch(this.state=497,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,55,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=490,this.declarationSpecifiers(),this.state=491,this.declarator();break;case 2:this.enterOuterAlt(t,2),this.state=493,this.declarationSpecifiers2(),this.state=495,this._errHandler.sync(this),e=this._input.LA(1),0===(e-20&-32)&&0!==(1<<e-20&(1<<g.LeftParen-20|1<<g.LeftBracket-20|1<<g.Star-20|1<<g.Caret-20))&&(this.state=494,this.abstractDeclarator())}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}identifierList(){let e,t=new re(this._ctx,this.state);this.enterRule(t,90,g.RULE_identifierList);try{for(this.enterOuterAlt(t,1),this.state=499,this.match(g.Identifier),this.state=504,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=500,this.match(g.Comma),this.state=501,this.match(g.Identifier),this.state=506,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}typeName(){let e,t=new oe(this._ctx,this.state);this.enterRule(t,92,g.RULE_typeName);try{this.enterOuterAlt(t,1),this.state=507,this.specifierQualifierList(),this.state=509,this._errHandler.sync(this),e=this._input.LA(1),0===(e-20&-32)&&0!==(1<<e-20&(1<<g.LeftParen-20|1<<g.LeftBracket-20|1<<g.Star-20|1<<g.Caret-20))&&(this.state=508,this.abstractDeclarator())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}abstractDeclarator(){let e,t=new ce(this._ctx,this.state);this.enterRule(t,94,g.RULE_abstractDeclarator);try{switch(this.state=516,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,59,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=511,this.pointer();break;case 2:this.enterOuterAlt(t,2),this.state=513,this._errHandler.sync(this),e=this._input.LA(1),e!==g.Star&&e!==g.Caret||(this.state=512,this.pointer()),this.state=515,this.directAbstractDeclarator(0)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}directAbstractDeclarator(e){void 0===e&&(e=0);let t,s=this._ctx,i=this.state,a=new le(this._ctx,i),r=a;this.enterRecursionRule(a,96,g.RULE_directAbstractDeclarator,e);try{let e;switch(this.enterOuterAlt(a,1),this.state=539,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,63,this._ctx)){case 1:this.state=519,this.match(g.LeftParen),this.state=520,this.abstractDeclarator(),this.state=521,this.match(g.RightParen);break;case 2:this.state=523,this.match(g.LeftBracket),this.state=525,this._errHandler.sync(this),t=this._input.LA(1),t===g.Const&&(this.state=524,this.typeQualifierList()),this.state=528,this._errHandler.sync(this),t=this._input.LA(1),(t===g.T__0||t===g.LeftParen||0===(t-32&-32)&&0!==(1<<t-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(t-65&-32)&&0!==(1<<t-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=527,this.assignmentExpression()),this.state=530,this.match(g.RightBracket);break;case 3:this.state=531,this.match(g.LeftBracket),this.state=532,this.match(g.Star),this.state=533,this.match(g.RightBracket);break;case 4:this.state=534,this.match(g.LeftParen),this.state=536,this._errHandler.sync(this),t=this._input.LA(1),(0===(-32&t)&&0!==(1<<t&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||t===g.Identifier)&&(this.state=535,this.parameterTypeList()),this.state=538,this.match(g.RightParen)}for(this._ctx._stop=this._input.tryLT(-1),this.state=562,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,68,this._ctx);2!==e&&e!==n.ATN.INVALID_ALT_NUMBER;){if(1===e)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),r=a,this.state=560,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,67,this._ctx)){case 1:if(a=new le(s,i),this.pushNewRecursionContext(a,96,g.RULE_directAbstractDeclarator),this.state=541,!this.precpred(this._ctx,3))throw this.createFailedPredicateException("this.precpred(this._ctx, 3)");this.state=542,this.match(g.LeftBracket),this.state=544,this._errHandler.sync(this),t=this._input.LA(1),t===g.Const&&(this.state=543,this.typeQualifierList()),this.state=547,this._errHandler.sync(this),t=this._input.LA(1),(t===g.T__0||t===g.LeftParen||0===(t-32&-32)&&0!==(1<<t-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(t-65&-32)&&0!==(1<<t-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=546,this.assignmentExpression()),this.state=549,this.match(g.RightBracket);break;case 2:if(a=new le(s,i),this.pushNewRecursionContext(a,96,g.RULE_directAbstractDeclarator),this.state=550,!this.precpred(this._ctx,2))throw this.createFailedPredicateException("this.precpred(this._ctx, 2)");this.state=551,this.match(g.LeftBracket),this.state=552,this.match(g.Star),this.state=553,this.match(g.RightBracket);break;case 3:if(a=new le(s,i),this.pushNewRecursionContext(a,96,g.RULE_directAbstractDeclarator),this.state=554,!this.precpred(this._ctx,1))throw this.createFailedPredicateException("this.precpred(this._ctx, 1)");this.state=555,this.match(g.LeftParen),this.state=557,this._errHandler.sync(this),t=this._input.LA(1),(0===(-32&t)&&0!==(1<<t&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||t===g.Identifier)&&(this.state=556,this.parameterTypeList()),this.state=559,this.match(g.RightParen)}this.state=564,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,68,this._ctx)}}catch(o){if(!(o instanceof d.RecognitionException))throw o;a.exception=o,this._errHandler.reportError(this,o),this._errHandler.recover(this,o)}finally{this.unrollRecursionContexts(s)}return a}typedefName(){let e=new de(this._ctx,this.state);this.enterRule(e,98,g.RULE_typedefName);try{this.enterOuterAlt(e,1),this.state=565,this.match(g.Identifier)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}initializer(){let e,t=new ue(this._ctx,this.state);this.enterRule(t,100,g.RULE_initializer);try{switch(this.state=575,this._errHandler.sync(this),this._input.LA(1)){case g.T__0:case g.LeftParen:case g.Plus:case g.PlusPlus:case g.Minus:case g.MinusMinus:case g.Star:case g.And:case g.Not:case g.Identifier:case g.Constant:case g.DigitSequence:case g.StringLiteral:this.enterOuterAlt(t,1),this.state=567,this.assignmentExpression();break;case g.LeftBrace:this.enterOuterAlt(t,2),this.state=568,this.match(g.LeftBrace),this.state=569,this.initializerList(),this.state=571,this._errHandler.sync(this),e=this._input.LA(1),e===g.Comma&&(this.state=570,this.match(g.Comma)),this.state=573,this.match(g.RightBrace);break;default:throw new r.NoViableAltException(this)}}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}initializerList(){let e,t=new he(this._ctx,this.state);this.enterRule(t,102,g.RULE_initializerList);try{let s;for(this.enterOuterAlt(t,1),this.state=578,this._errHandler.sync(this),e=this._input.LA(1),e!==g.LeftBracket&&e!==g.Dot||(this.state=577,this.designation()),this.state=580,this.initializer(),this.state=588,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,73,this._ctx);2!==s&&s!==n.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=581,this.match(g.Comma),this.state=583,this._errHandler.sync(this),e=this._input.LA(1),e!==g.LeftBracket&&e!==g.Dot||(this.state=582,this.designation()),this.state=585,this.initializer()),this.state=590,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,73,this._ctx)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}designation(){let e=new pe(this._ctx,this.state);this.enterRule(e,104,g.RULE_designation);try{this.enterOuterAlt(e,1),this.state=591,this.designatorList(),this.state=592,this.match(g.Assign)}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}designatorList(){let e,t=new ge(this._ctx,this.state);this.enterRule(t,106,g.RULE_designatorList);try{this.enterOuterAlt(t,1),this.state=595,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=594,this.designator(),this.state=597,this._errHandler.sync(this),e=this._input.LA(1)}while(e===g.LeftBracket||e===g.Dot)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}designator(){let e=new me(this._ctx,this.state);this.enterRule(e,108,g.RULE_designator);try{switch(this.state=605,this._errHandler.sync(this),this._input.LA(1)){case g.LeftBracket:this.enterOuterAlt(e,1),this.state=599,this.match(g.LeftBracket),this.state=600,this.constantExpression(),this.state=601,this.match(g.RightBracket);break;case g.Dot:this.enterOuterAlt(e,2),this.state=603,this.match(g.Dot),this.state=604,this.match(g.Identifier);break;default:throw new r.NoViableAltException(this)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}statement(){let e=new be(this._ctx,this.state);this.enterRule(e,110,g.RULE_statement);try{switch(this.state=611,this._errHandler.sync(this),this._input.LA(1)){case g.LeftBrace:this.enterOuterAlt(e,1),this.state=607,this.compoundStatement();break;case g.T__0:case g.LeftParen:case g.Plus:case g.PlusPlus:case g.Minus:case g.MinusMinus:case g.Star:case g.And:case g.Not:case g.Semi:case g.Identifier:case g.Constant:case g.DigitSequence:case g.StringLiteral:this.enterOuterAlt(e,2),this.state=608,this.expressionStatement();break;case g.If:this.enterOuterAlt(e,3),this.state=609,this.selectionStatement();break;case g.Do:case g.For:case g.While:this.enterOuterAlt(e,4),this.state=610,this.iterationStatement();break;default:throw new r.NoViableAltException(this)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}compoundStatement(){let e,t=new fe(this._ctx,this.state);this.enterRule(t,112,g.RULE_compoundStatement);try{this.enterOuterAlt(t,1),this.state=613,this.match(g.LeftBrace),this.state=615,this._errHandler.sync(this),e=this._input.LA(1),(0===(-32&e)&&0!==(1<<e&(1<<g.T__0|1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Do|1<<g.Float|1<<g.For|1<<g.If|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void|1<<g.While|1<<g.LeftParen|1<<g.LeftBrace))||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32|1<<g.Semi-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=614,this.blockItemList()),this.state=617,this.match(g.RightBrace)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}blockItemList(){let e,t=new ve(this._ctx,this.state);this.enterRule(t,114,g.RULE_blockItemList);try{this.enterOuterAlt(t,1),this.state=620,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=619,this.blockItem(),this.state=622,this._errHandler.sync(this),e=this._input.LA(1)}while(0===(-32&e)&&0!==(1<<e&(1<<g.T__0|1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Do|1<<g.Float|1<<g.For|1<<g.If|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void|1<<g.While|1<<g.LeftParen|1<<g.LeftBrace))||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32|1<<g.Semi-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}blockItem(){let e=new ye(this._ctx,this.state);this.enterRule(e,116,g.RULE_blockItem);try{switch(this.state=626,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,79,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=624,this.statement();break;case 2:this.enterOuterAlt(e,2),this.state=625,this.declaration()}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}expressionStatement(){let e,t=new xe(this._ctx,this.state);this.enterRule(t,118,g.RULE_expressionStatement);try{this.enterOuterAlt(t,1),this.state=629,this._errHandler.sync(this),e=this._input.LA(1),(e===g.T__0||e===g.LeftParen||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=628,this.expression()),this.state=631,this.match(g.Semi)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}selectionStatement(){let e=new je(this._ctx,this.state);this.enterRule(e,120,g.RULE_selectionStatement);try{if(this.enterOuterAlt(e,1),this.state=633,this.match(g.If),this.state=634,this.match(g.LeftParen),this.state=635,this.expression(),this.state=636,this.match(g.RightParen),this.state=637,this.statement(),this.state=640,this._errHandler.sync(this),1===this.interpreter.adaptivePredict(this._input,81,this._ctx))this.state=638,this.match(g.Else),this.state=639,this.statement()}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}iterationStatement(){let e=new Oe(this._ctx,this.state);this.enterRule(e,122,g.RULE_iterationStatement);try{switch(this.state=662,this._errHandler.sync(this),this._input.LA(1)){case g.While:this.enterOuterAlt(e,1),this.state=642,this.match(g.While),this.state=643,this.match(g.LeftParen),this.state=644,this.expression(),this.state=645,this.match(g.RightParen),this.state=646,this.statement();break;case g.Do:this.enterOuterAlt(e,2),this.state=648,this.match(g.Do),this.state=649,this.statement(),this.state=650,this.match(g.While),this.state=651,this.match(g.LeftParen),this.state=652,this.expression(),this.state=653,this.match(g.RightParen),this.state=654,this.match(g.Semi);break;case g.For:this.enterOuterAlt(e,3),this.state=656,this.match(g.For),this.state=657,this.match(g.LeftParen),this.state=658,this.forCondition(),this.state=659,this.match(g.RightParen),this.state=660,this.statement();break;default:throw new r.NoViableAltException(this)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}forCondition(){let e,t=new Ce(this._ctx,this.state);this.enterRule(t,124,g.RULE_forCondition);try{switch(this.enterOuterAlt(t,1),this.state=668,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,84,this._ctx)){case 1:this.state=664,this.forDeclaration();break;case 2:this.state=666,this._errHandler.sync(this),e=this._input.LA(1),(e===g.T__0||e===g.LeftParen||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=665,this.expression())}this.state=670,this.match(g.Semi),this.state=672,this._errHandler.sync(this),e=this._input.LA(1),(e===g.T__0||e===g.LeftParen||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=671,this.forExpression()),this.state=674,this.match(g.Semi),this.state=676,this._errHandler.sync(this),e=this._input.LA(1),(e===g.T__0||e===g.LeftParen||0===(e-32&-32)&&0!==(1<<e-32&(1<<g.Plus-32|1<<g.PlusPlus-32|1<<g.Minus-32|1<<g.MinusMinus-32|1<<g.Star-32|1<<g.And-32|1<<g.Not-32))||0===(e-65&-32)&&0!==(1<<e-65&(1<<g.Identifier-65|1<<g.Constant-65|1<<g.DigitSequence-65|1<<g.StringLiteral-65)))&&(this.state=675,this.forExpression())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}forDeclaration(){let e,t=new Se(this._ctx,this.state);this.enterRule(t,126,g.RULE_forDeclaration);try{this.enterOuterAlt(t,1),this.state=678,this.declarationSpecifiers(),this.state=680,this._errHandler.sync(this),e=this._input.LA(1),(e===g.LeftParen||0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Caret-36|1<<g.Identifier-36)))&&(this.state=679,this.initDeclaratorList())}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}forExpression(){let e,t=new Ee(this._ctx,this.state);this.enterRule(t,128,g.RULE_forExpression);try{for(this.enterOuterAlt(t,1),this.state=682,this.assignmentExpression(),this.state=687,this._errHandler.sync(this),e=this._input.LA(1);e===g.Comma;)this.state=683,this.match(g.Comma),this.state=684,this.assignmentExpression(),this.state=689,this._errHandler.sync(this),e=this._input.LA(1)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}compilationUnit(){let e,t=new we(this._ctx,this.state);this.enterRule(t,130,g.RULE_compilationUnit);try{this.enterOuterAlt(t,1),this.state=691,this._errHandler.sync(this),e=this._input.LA(1),(0===(-32&e)&&0!==(1<<e&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void|1<<g.LeftParen))||0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Caret-36|1<<g.Semi-36|1<<g.Identifier-36)))&&(this.state=690,this.translationUnit()),this.state=693,this.match(g.EOF)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}translationUnit(){let e,t=new _e(this._ctx,this.state);this.enterRule(t,132,g.RULE_translationUnit);try{this.enterOuterAlt(t,1),this.state=696,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=695,this.externalDeclaration(),this.state=698,this._errHandler.sync(this),e=this._input.LA(1)}while(0===(-32&e)&&0!==(1<<e&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void|1<<g.LeftParen))||0===(e-36&-32)&&0!==(1<<e-36&(1<<g.Star-36|1<<g.Caret-36|1<<g.Semi-36|1<<g.Identifier-36)))}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}externalDeclaration(){let e=new Ae(this._ctx,this.state);this.enterRule(e,134,g.RULE_externalDeclaration);try{switch(this.state=703,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,91,this._ctx)){case 1:this.enterOuterAlt(e,1),this.state=700,this.functionDefinition();break;case 2:this.enterOuterAlt(e,2),this.state=701,this.declaration();break;case 3:this.enterOuterAlt(e,3),this.state=702,this.match(g.Semi)}}catch(t){if(!(t instanceof d.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}functionDefinition(){let e,t=new ke(this._ctx,this.state);this.enterRule(t,136,g.RULE_functionDefinition);try{if(this.enterOuterAlt(t,1),this.state=706,this._errHandler.sync(this),1===this.interpreter.adaptivePredict(this._input,92,this._ctx))this.state=705,this.declarationSpecifiers();this.state=708,this.declarator(),this.state=710,this._errHandler.sync(this),e=this._input.LA(1),(0===(-32&e)&&0!==(1<<e&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||e===g.Identifier)&&(this.state=709,this.declarationList()),this.state=712,this.compoundStatement()}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}declarationList(){let e,t=new Te(this._ctx,this.state);this.enterRule(t,138,g.RULE_declarationList);try{this.enterOuterAlt(t,1),this.state=715,this._errHandler.sync(this),e=this._input.LA(1);do{this.state=714,this.declaration(),this.state=717,this._errHandler.sync(this),e=this._input.LA(1)}while(0===(-32&e)&&0!==(1<<e&(1<<g.T__1|1<<g.Char|1<<g.Const|1<<g.Float|1<<g.Int|1<<g.Signed|1<<g.Struct|1<<g.Unsigned|1<<g.Void))||e===g.Identifier)}catch(s){if(!(s instanceof d.RecognitionException))throw s;t.exception=s,this._errHandler.reportError(this,s),this._errHandler.recover(this,s)}finally{this.exitRule()}return t}sempred(e,t,s){switch(t){case 38:return this.directDeclarator_sempred(e,s);case 48:return this.directAbstractDeclarator_sempred(e,s)}return!0}directDeclarator_sempred(e,t){switch(t){case 0:return this.precpred(this._ctx,5);case 1:return this.precpred(this._ctx,4);case 2:return this.precpred(this._ctx,3);case 3:return this.precpred(this._ctx,2)}return!0}directAbstractDeclarator_sempred(e,t){switch(t){case 4:return this.precpred(this._ctx,3);case 5:return this.precpred(this._ctx,2);case 6:return this.precpred(this._ctx,1)}return!0}static get _ATN(){return g.__ATN||(g.__ATN=(new i.ATNDeserializer).deserialize(p.toCharArray(g._serializedATN))),g.__ATN}}t.ClangParser=g,g.T__0=1,g.T__1=2,g.Break=3,g.Char=4,g.Continue=5,g.Const=6,g.Do=7,g.Else=8,g.Float=9,g.For=10,g.If=11,g.Int=12,g.Long=13,g.Return=14,g.Signed=15,g.Struct=16,g.Unsigned=17,g.Void=18,g.While=19,g.LeftParen=20,g.RightParen=21,g.LeftBracket=22,g.RightBracket=23,g.LeftBrace=24,g.RightBrace=25,g.Less=26,g.LessEqual=27,g.Greater=28,g.GreaterEqual=29,g.LeftShift=30,g.RightShift=31,g.Plus=32,g.PlusPlus=33,g.Minus=34,g.MinusMinus=35,g.Star=36,g.Div=37,g.Mod=38,g.And=39,g.Or=40,g.AndAnd=41,g.OrOr=42,g.Caret=43,g.Not=44,g.Tilde=45,g.Question=46,g.Colon=47,g.Semi=48,g.Comma=49,g.Assign=50,g.StarAssign=51,g.DivAssign=52,g.ModAssign=53,g.PlusAssign=54,g.MinusAssign=55,g.LeftShiftAssign=56,g.RightShiftAssign=57,g.AndAssign=58,g.XorAssign=59,g.OrAssign=60,g.Equal=61,g.NotEqual=62,g.Arrow=63,g.Dot=64,g.Identifier=65,g.Constant=66,g.DigitSequence=67,g.StringLiteral=68,g.Whitespace=69,g.Newline=70,g.BlockComment=71,g.LineComment=72,g.RULE_start=0,g.RULE_primaryExpression=1,g.RULE_postfixExpression=2,g.RULE_argumentExpressionList=3,g.RULE_unaryExpression=4,g.RULE_unaryOperator=5,g.RULE_castExpression=6,g.RULE_multiplicativeExpression=7,g.RULE_additiveExpression=8,g.RULE_shiftExpression=9,g.RULE_relationalExpression=10,g.RULE_equalityExpression=11,g.RULE_andExpression=12,g.RULE_exclusiveOrExpression=13,g.RULE_inclusiveOrExpression=14,g.RULE_logicalAndExpression=15,g.RULE_logicalOrExpression=16,g.RULE_conditionalExpression=17,g.RULE_assignmentExpression=18,g.RULE_assignmentOperator=19,g.RULE_expression=20,g.RULE_constantExpression=21,g.RULE_declaration=22,g.RULE_declarationSpecifiers=23,g.RULE_declarationSpecifiers2=24,g.RULE_declarationSpecifier=25,g.RULE_initDeclaratorList=26,g.RULE_initDeclarator=27,g.RULE_typeSpecifier=28,g.RULE_structSpecifier=29,g.RULE_structDeclarationList=30,g.RULE_structDeclaration=31,g.RULE_specifierQualifierList=32,g.RULE_structDeclaratorList=33,g.RULE_structDeclarator=34,g.RULE_typeQualifier=35,g.RULE_functionSpecifier=36,g.RULE_declarator=37,g.RULE_directDeclarator=38,g.RULE_nestedParenthesesBlock=39,g.RULE_pointer=40,g.RULE_typeQualifierList=41,g.RULE_parameterTypeList=42,g.RULE_parameterList=43,g.RULE_parameterDeclaration=44,g.RULE_identifierList=45,g.RULE_typeName=46,g.RULE_abstractDeclarator=47,g.RULE_directAbstractDeclarator=48,g.RULE_typedefName=49,g.RULE_initializer=50,g.RULE_initializerList=51,g.RULE_designation=52,g.RULE_designatorList=53,g.RULE_designator=54,g.RULE_statement=55,g.RULE_compoundStatement=56,g.RULE_blockItemList=57,g.RULE_blockItem=58,g.RULE_expressionStatement=59,g.RULE_selectionStatement=60,g.RULE_iterationStatement=61,g.RULE_forCondition=62,g.RULE_forDeclaration=63,g.RULE_forExpression=64,g.RULE_compilationUnit=65,g.RULE_translationUnit=66,g.RULE_externalDeclaration=67,g.RULE_functionDefinition=68,g.RULE_declarationList=69,g.ruleNames=["start","primaryExpression","postfixExpression","argumentExpressionList","unaryExpression","unaryOperator","castExpression","multiplicativeExpression","additiveExpression","shiftExpression","relationalExpression","equalityExpression","andExpression","exclusiveOrExpression","inclusiveOrExpression","logicalAndExpression","logicalOrExpression","conditionalExpression","assignmentExpression","assignmentOperator","expression","constantExpression","declaration","declarationSpecifiers","declarationSpecifiers2","declarationSpecifier","initDeclaratorList","initDeclarator","typeSpecifier","structSpecifier","structDeclarationList","structDeclaration","specifierQualifierList","structDeclaratorList","structDeclarator","typeQualifier","functionSpecifier","declarator","directDeclarator","nestedParenthesesBlock","pointer","typeQualifierList","parameterTypeList","parameterList","parameterDeclaration","identifierList","typeName","abstractDeclarator","directAbstractDeclarator","typedefName","initializer","initializerList","designation","designatorList","designator","statement","compoundStatement","blockItemList","blockItem","expressionStatement","selectionStatement","iterationStatement","forCondition","forDeclaration","forExpression","compilationUnit","translationUnit","externalDeclaration","functionDefinition","declarationList"],g._LITERAL_NAMES=[void 0,"'__extension__'","'inline'","'break'","'char'","'continue'","'const'","'do'","'else'","'float'","'for'","'if'","'int'","'long'","'return'","'signed'","'struct'","'unsigned'","'void'","'while'","'('","')'","'['","']'","'{'","'}'","'<'","'<='","'>'","'>='","'<<'","'>>'","'+'","'++'","'-'","'--'","'*'","'/'","'%'","'&'","'|'","'&&'","'||'","'^'","'!'","'~'","'?'","':'","';'","','","'='","'*='","'/='","'%='","'+='","'-='","'<<='","'>>='","'&='","'^='","'|='","'=='","'!='","'->'","'.'"],g._SYMBOLIC_NAMES=[void 0,void 0,void 0,"Break","Char","Continue","Const","Do","Else","Float","For","If","Int","Long","Return","Signed","Struct","Unsigned","Void","While","LeftParen","RightParen","LeftBracket","RightBracket","LeftBrace","RightBrace","Less","LessEqual","Greater","GreaterEqual","LeftShift","RightShift","Plus","PlusPlus","Minus","MinusMinus","Star","Div","Mod","And","Or","AndAnd","OrOr","Caret","Not","Tilde","Question","Colon","Semi","Comma","Assign","StarAssign","DivAssign","ModAssign","PlusAssign","MinusAssign","LeftShiftAssign","RightShiftAssign","AndAssign","XorAssign","OrAssign","Equal","NotEqual","Arrow","Dot","Identifier","Constant","DigitSequence","StringLiteral","Whitespace","Newline","BlockComment","LineComment"],g.VOCABULARY=new h.VocabularyImpl(g._LITERAL_NAMES,g._SYMBOLIC_NAMES,[]),g._serializedATNSegments=2,g._serializedATNSegment0='\x03\uc91d\ucaba\u058d\uafba\u4f53\u0607\uea8b\uc241\x03J\u02d2\x04\x02\t\x02\x04\x03\t\x03\x04\x04\t\x04\x04\x05\t\x05\x04\x06\t\x06\x04\x07\t\x07\x04\b\t\b\x04\t\t\t\x04\n\t\n\x04\v\t\v\x04\f\t\f\x04\r\t\r\x04\x0e\t\x0e\x04\x0f\t\x0f\x04\x10\t\x10\x04\x11\t\x11\x04\x12\t\x12\x04\x13\t\x13\x04\x14\t\x14\x04\x15\t\x15\x04\x16\t\x16\x04\x17\t\x17\x04\x18\t\x18\x04\x19\t\x19\x04\x1a\t\x1a\x04\x1b\t\x1b\x04\x1c\t\x1c\x04\x1d\t\x1d\x04\x1e\t\x1e\x04\x1f\t\x1f\x04 \t \x04!\t!\x04"\t"\x04#\t#\x04$\t$\x04%\t%\x04&\t&\x04\'\t\'\x04(\t(\x04)\t)\x04*\t*\x04+\t+\x04,\t,\x04-\t-\x04.\t.\x04/\t/\x040\t0\x041\t1\x042\t2\x043\t3\x044\t4\x045\t5\x046\t6\x047\t7\x048\t8\x049\t9\x04:\t:\x04;\t;\x04<\t<\x04=\t=\x04>\t>\x04?\t?\x04@\t@\x04A\tA\x04B\tB\x04C\tC\x04D\tD\x04E\tE\x04F\tF\x04G\tG\x03\x02\x03\x02\x03\x03\x03\x03\x03\x03\x06\x03\x94\n\x03\r\x03\x0e\x03\x95\x03\x03\x03\x03\x03\x03\x03\x03\x05\x03\x9c\n\x03\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x03\x04\x05\x04\xa5\n\x04\x03\x04\x03\x04\x03\x04\x03\x04\x07\x04\xab\n\x04\f\x04\x0e\x04\xae\v\x04\x03\x05\x03\x05\x03\x05\x07\x05\xb3\n\x05\f\x05\x0e\x05\xb6\v\x05\x03\x06\x07\x06\xb9\n\x06\f\x06\x0e\x06\xbc\v\x06\x03\x06\x03\x06\x03\x06\x03\x06\x05\x06\xc2\n\x06\x03\x07\x03\x07\x03\b\x05\b\xc7\n\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x03\b\x05\b\xd0\n\b\x03\t\x03\t\x03\t\x07\t\xd5\n\t\f\t\x0e\t\xd8\v\t\x03\n\x03\n\x03\n\x07\n\xdd\n\n\f\n\x0e\n\xe0\v\n\x03\v\x03\v\x03\v\x07\v\xe5\n\v\f\v\x0e\v\xe8\v\v\x03\f\x03\f\x03\f\x07\f\xed\n\f\f\f\x0e\f\xf0\v\f\x03\r\x03\r\x03\r\x07\r\xf5\n\r\f\r\x0e\r\xf8\v\r\x03\x0e\x03\x0e\x03\x0e\x07\x0e\xfd\n\x0e\f\x0e\x0e\x0e\u0100\v\x0e\x03\x0f\x03\x0f\x03\x0f\x07\x0f\u0105\n\x0f\f\x0f\x0e\x0f\u0108\v\x0f\x03\x10\x03\x10\x03\x10\x07\x10\u010d\n\x10\f\x10\x0e\x10\u0110\v\x10\x03\x11\x03\x11\x03\x11\x07\x11\u0115\n\x11\f\x11\x0e\x11\u0118\v\x11\x03\x12\x03\x12\x03\x12\x07\x12\u011d\n\x12\f\x12\x0e\x12\u0120\v\x12\x03\x13\x03\x13\x03\x13\x03\x13\x03\x13\x03\x13\x05\x13\u0128\n\x13\x03\x14\x03\x14\x03\x14\x03\x14\x03\x14\x03\x14\x05\x14\u0130\n\x14\x03\x15\x03\x15\x03\x16\x03\x16\x03\x16\x07\x16\u0137\n\x16\f\x16\x0e\x16\u013a\v\x16\x03\x17\x03\x17\x03\x18\x03\x18\x05\x18\u0140\n\x18\x03\x18\x03\x18\x03\x19\x06\x19\u0145\n\x19\r\x19\x0e\x19\u0146\x03\x1a\x06\x1a\u014a\n\x1a\r\x1a\x0e\x1a\u014b\x03\x1b\x03\x1b\x03\x1b\x05\x1b\u0151\n\x1b\x03\x1c\x03\x1c\x03\x1c\x07\x1c\u0156\n\x1c\f\x1c\x0e\x1c\u0159\v\x1c\x03\x1d\x03\x1d\x03\x1d\x05\x1d\u015e\n\x1d\x03\x1e\x03\x1e\x03\x1e\x05\x1e\u0163\n\x1e\x03\x1f\x03\x1f\x05\x1f\u0167\n\x1f\x03\x1f\x03\x1f\x03\x1f\x03\x1f\x03\x1f\x03\x1f\x05\x1f\u016f\n\x1f\x03 \x06 \u0172\n \r \x0e \u0173\x03!\x03!\x03!\x03!\x03!\x03!\x03!\x05!\u017d\n!\x03"\x03"\x05"\u0181\n"\x03"\x05"\u0184\n"\x03#\x03#\x03#\x07#\u0189\n#\f#\x0e#\u018c\v#\x03$\x03$\x05$\u0190\n$\x03$\x03$\x05$\u0194\n$\x03%\x03%\x03&\x03&\x03\'\x05\'\u019b\n\'\x03\'\x03\'\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x05(\u01a8\n(\x03(\x03(\x03(\x05(\u01ad\n(\x03(\x05(\u01b0\n(\x03(\x03(\x03(\x03(\x05(\u01b6\n(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x03(\x05(\u01c2\n(\x03(\x07(\u01c5\n(\f(\x0e(\u01c8\v(\x03)\x03)\x03)\x03)\x03)\x07)\u01cf\n)\f)\x0e)\u01d2\v)\x03*\x03*\x05*\u01d6\n*\x06*\u01d8\n*\r*\x0e*\u01d9\x03+\x06+\u01dd\n+\r+\x0e+\u01de\x03,\x03,\x05,\u01e3\n,\x03-\x03-\x03-\x07-\u01e8\n-\f-\x0e-\u01eb\v-\x03.\x03.\x03.\x03.\x03.\x05.\u01f2\n.\x05.\u01f4\n.\x03/\x03/\x03/\x07/\u01f9\n/\f/\x0e/\u01fc\v/\x030\x030\x050\u0200\n0\x031\x031\x051\u0204\n1\x031\x051\u0207\n1\x032\x032\x032\x032\x032\x032\x032\x052\u0210\n2\x032\x052\u0213\n2\x032\x032\x032\x032\x032\x032\x052\u021b\n2\x032\x052\u021e\n2\x032\x032\x032\x052\u0223\n2\x032\x052\u0226\n2\x032\x032\x032\x032\x032\x032\x032\x032\x052\u0230\n2\x032\x072\u0233\n2\f2\x0e2\u0236\v2\x033\x033\x034\x034\x034\x034\x054\u023e\n4\x034\x034\x054\u0242\n4\x035\x055\u0245\n5\x035\x035\x035\x055\u024a\n5\x035\x075\u024d\n5\f5\x0e5\u0250\v5\x036\x036\x036\x037\x067\u0256\n7\r7\x0e7\u0257\x038\x038\x038\x038\x038\x038\x058\u0260\n8\x039\x039\x039\x039\x059\u0266\n9\x03:\x03:\x05:\u026a\n:\x03:\x03:\x03;\x06;\u026f\n;\r;\x0e;\u0270\x03<\x03<\x05<\u0275\n<\x03=\x05=\u0278\n=\x03=\x03=\x03>\x03>\x03>\x03>\x03>\x03>\x03>\x05>\u0283\n>\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x03?\x05?\u0299\n?\x03@\x03@\x05@\u029d\n@\x05@\u029f\n@\x03@\x03@\x05@\u02a3\n@\x03@\x03@\x05@\u02a7\n@\x03A\x03A\x05A\u02ab\nA\x03B\x03B\x03B\x07B\u02b0\nB\fB\x0eB\u02b3\vB\x03C\x05C\u02b6\nC\x03C\x03C\x03D\x06D\u02bb\nD\rD\x0eD\u02bc\x03E\x03E\x03E\x05E\u02c2\nE\x03F\x05F\u02c5\nF\x03F\x03F\x05F\u02c9\nF\x03F\x03F\x03G\x06G\u02ce\nG\rG\x0eG\u02cf\x03G\x02\x02\x04NbH\x02\x02\x04\x02\x06\x02\b\x02\n\x02\f\x02\x0e\x02\x10\x02\x12\x02\x14\x02\x16\x02\x18\x02\x1a\x02\x1c\x02\x1e\x02 \x02"\x02$\x02&\x02(\x02*\x02,\x02.\x020\x022\x024\x026\x028\x02:\x02<\x02>\x02@\x02B\x02D\x02F\x02H\x02J\x02L\x02N\x02P\x02R\x02T\x02V\x02X\x02Z\x02\\\x02^\x02`\x02b\x02d\x02f\x02h\x02j\x02l\x02n\x02p\x02r\x02t\x02v\x02x\x02z\x02|\x02~\x02\x80\x02\x82\x02\x84\x02\x86\x02\x88\x02\x8a\x02\x8c\x02\x02\x0e\x03\x02AB\x04\x02##%%\x07\x02""$$&&))..\x03\x02&(\x04\x02""$$\x03\x02 !\x03\x02\x1c\x1f\x03\x02?@\x03\x024>\x07\x02\x06\x06\v\v\x0e\x0e\x11\x11\x13\x14\x03\x02\x16\x17\x04\x02&&--\x02\u02fc\x02\x8e\x03\x02\x02\x02\x04\x9b\x03\x02\x02\x02\x06\x9d\x03\x02\x02\x02\b\xaf\x03\x02\x02\x02\n\xba\x03\x02\x02\x02\f\xc3\x03\x02\x02\x02\x0e\xcf\x03\x02\x02\x02\x10\xd1\x03\x02\x02\x02\x12\xd9\x03\x02\x02\x02\x14\xe1\x03\x02\x02\x02\x16\xe9\x03\x02\x02\x02\x18\xf1\x03\x02\x02\x02\x1a\xf9\x03\x02\x02\x02\x1c\u0101\x03\x02\x02\x02\x1e\u0109\x03\x02\x02\x02 \u0111\x03\x02\x02\x02"\u0119\x03\x02\x02\x02$\u0121\x03\x02\x02\x02&\u012f\x03\x02\x02\x02(\u0131\x03\x02\x02\x02*\u0133\x03\x02\x02\x02,\u013b\x03\x02\x02\x02.\u013d\x03\x02\x02\x020\u0144\x03\x02\x02\x022\u0149\x03\x02\x02\x024\u0150\x03\x02\x02\x026\u0152\x03\x02\x02\x028\u015a\x03\x02\x02\x02:\u0162\x03\x02\x02\x02<\u016e\x03\x02\x02\x02>\u0171\x03\x02\x02\x02@\u017c\x03\x02\x02\x02B\u0180\x03\x02\x02\x02D\u0185\x03\x02\x02\x02F\u0193\x03\x02\x02\x02H\u0195\x03\x02\x02\x02J\u0197\x03\x02\x02\x02L\u019a\x03\x02\x02\x02N\u01a7\x03\x02\x02\x02P\u01d0\x03\x02\x02\x02R\u01d7\x03\x02\x02\x02T\u01dc\x03\x02\x02\x02V\u01e0\x03\x02\x02\x02X\u01e4\x03\x02\x02\x02Z\u01f3\x03\x02\x02\x02\\\u01f5\x03\x02\x02\x02^\u01fd\x03\x02\x02\x02`\u0206\x03\x02\x02\x02b\u021d\x03\x02\x02\x02d\u0237\x03\x02\x02\x02f\u0241\x03\x02\x02\x02h\u0244\x03\x02\x02\x02j\u0251\x03\x02\x02\x02l\u0255\x03\x02\x02\x02n\u025f\x03\x02\x02\x02p\u0265\x03\x02\x02\x02r\u0267\x03\x02\x02\x02t\u026e\x03\x02\x02\x02v\u0274\x03\x02\x02\x02x\u0277\x03\x02\x02\x02z\u027b\x03\x02\x02\x02|\u0298\x03\x02\x02\x02~\u029e\x03\x02\x02\x02\x80\u02a8\x03\x02\x02\x02\x82\u02ac\x03\x02\x02\x02\x84\u02b5\x03\x02\x02\x02\x86\u02ba\x03\x02\x02\x02\x88\u02c1\x03\x02\x02\x02\x8a\u02c4\x03\x02\x02\x02\x8c\u02cd\x03\x02\x02\x02\x8e\x8f\x05\x04\x03\x02\x8f\x03\x03\x02\x02\x02\x90\x9c\x07C\x02\x02\x91\x9c\x07D\x02\x02\x92\x94\x07F\x02\x02\x93\x92\x03\x02\x02\x02\x94\x95\x03\x02\x02\x02\x95\x93\x03\x02\x02\x02\x95\x96\x03\x02\x02\x02\x96\x9c\x03\x02\x02\x02\x97\x98\x07\x16\x02\x02\x98\x99\x05*\x16\x02\x99\x9a\x07\x17\x02\x02\x9a\x9c\x03\x02\x02\x02\x9b\x90\x03\x02\x02\x02\x9b\x91\x03\x02\x02\x02\x9b\x93\x03\x02\x02\x02\x9b\x97\x03\x02\x02\x02\x9c\x05\x03\x02\x02\x02\x9d\xac\x05\x04\x03\x02\x9e\x9f\x07\x18\x02\x02\x9f\xa0\x05*\x16\x02\xa0\xa1\x07\x19\x02\x02\xa1\xab\x03\x02\x02\x02\xa2\xa4\x07\x16\x02\x02\xa3\xa5\x05\b\x05\x02\xa4\xa3\x03\x02\x02\x02\xa4\xa5\x03\x02\x02\x02\xa5\xa6\x03\x02\x02\x02\xa6\xab\x07\x17\x02\x02\xa7\xa8\t\x02\x02\x02\xa8\xab\x07C\x02\x02\xa9\xab\t\x03\x02\x02\xaa\x9e\x03\x02\x02\x02\xaa\xa2\x03\x02\x02\x02\xaa\xa7\x03\x02\x02\x02\xaa\xa9\x03\x02\x02\x02\xab\xae\x03\x02\x02\x02\xac\xaa\x03\x02\x02\x02\xac\xad\x03\x02\x02\x02\xad\x07\x03\x02\x02\x02\xae\xac\x03\x02\x02\x02\xaf\xb4\x05&\x14\x02\xb0\xb1\x073\x02\x02\xb1\xb3\x05&\x14\x02\xb2\xb0\x03\x02\x02\x02\xb3\xb6\x03\x02\x02\x02\xb4\xb2\x03\x02\x02\x02\xb4\xb5\x03\x02\x02\x02\xb5\t\x03\x02\x02\x02\xb6\xb4\x03\x02\x02\x02\xb7\xb9\t\x03\x02\x02\xb8\xb7\x03\x02\x02\x02\xb9\xbc\x03\x02\x02\x02\xba\xb8\x03\x02\x02\x02\xba\xbb\x03\x02\x02\x02\xbb\xc1\x03\x02\x02\x02\xbc\xba\x03\x02\x02\x02\xbd\xc2\x05\x06\x04\x02\xbe\xbf\x05\f\x07\x02\xbf\xc0\x05\x0e\b\x02\xc0\xc2\x03\x02\x02\x02\xc1\xbd\x03\x02\x02\x02\xc1\xbe\x03\x02\x02\x02\xc2\v\x03\x02\x02\x02\xc3\xc4\t\x04\x02\x02\xc4\r\x03\x02\x02\x02\xc5\xc7\x07\x03\x02\x02\xc6\xc5\x03\x02\x02\x02\xc6\xc7\x03\x02\x02\x02\xc7\xc8\x03\x02\x02\x02\xc8\xc9\x07\x16\x02\x02\xc9\xca\x05^0\x02\xca\xcb\x07\x17\x02\x02\xcb\xcc\x05\x0e\b\x02\xcc\xd0\x03\x02\x02\x02\xcd\xd0\x05\n\x06\x02\xce\xd0\x07E\x02\x02\xcf\xc6\x03\x02\x02\x02\xcf\xcd\x03\x02\x02\x02\xcf\xce\x03\x02\x02\x02\xd0\x0f\x03\x02\x02\x02\xd1\xd6\x05\x0e\b\x02\xd2\xd3\t\x05\x02\x02\xd3\xd5\x05\x0e\b\x02\xd4\xd2\x03\x02\x02\x02\xd5\xd8\x03\x02\x02\x02\xd6\xd4\x03\x02\x02\x02\xd6\xd7\x03\x02\x02\x02\xd7\x11\x03\x02\x02\x02\xd8\xd6\x03\x02\x02\x02\xd9\xde\x05\x10\t\x02\xda\xdb\t\x06\x02\x02\xdb\xdd\x05\x10\t\x02\xdc\xda\x03\x02\x02\x02\xdd\xe0\x03\x02\x02\x02\xde\xdc\x03\x02\x02\x02\xde\xdf\x03\x02\x02\x02\xdf\x13\x03\x02\x02\x02\xe0\xde\x03\x02\x02\x02\xe1\xe6\x05\x12\n\x02\xe2\xe3\t\x07\x02\x02\xe3\xe5\x05\x12\n\x02\xe4\xe2\x03\x02\x02\x02\xe5\xe8\x03\x02\x02\x02\xe6\xe4\x03\x02\x02\x02\xe6\xe7\x03\x02\x02\x02\xe7\x15\x03\x02\x02\x02\xe8\xe6\x03\x02\x02\x02\xe9\xee\x05\x14\v\x02\xea\xeb\t\b\x02\x02\xeb\xed\x05\x14\v\x02\xec\xea\x03\x02\x02\x02\xed\xf0\x03\x02\x02\x02\xee\xec\x03\x02\x02\x02\xee\xef\x03\x02\x02\x02\xef\x17\x03\x02\x02\x02\xf0\xee\x03\x02\x02\x02\xf1\xf6\x05\x16\f\x02\xf2\xf3\t\t\x02\x02\xf3\xf5\x05\x16\f\x02\xf4\xf2\x03\x02\x02\x02\xf5\xf8\x03\x02\x02\x02\xf6\xf4\x03\x02\x02\x02\xf6\xf7\x03\x02\x02\x02\xf7\x19\x03\x02\x02\x02\xf8\xf6\x03\x02\x02\x02\xf9\xfe\x05\x18\r\x02\xfa\xfb\x07)\x02\x02\xfb\xfd\x05\x18\r\x02\xfc\xfa\x03\x02\x02\x02\xfd\u0100\x03\x02\x02\x02\xfe\xfc\x03\x02\x02\x02\xfe\xff\x03\x02\x02\x02\xff\x1b\x03\x02\x02\x02\u0100\xfe\x03\x02\x02\x02\u0101\u0106\x05\x1a\x0e\x02\u0102\u0103\x07-\x02\x02\u0103\u0105\x05\x1a\x0e\x02\u0104\u0102\x03\x02\x02\x02\u0105\u0108\x03\x02\x02\x02\u0106\u0104\x03\x02\x02\x02\u0106\u0107\x03\x02\x02\x02\u0107\x1d\x03\x02\x02\x02\u0108\u0106\x03\x02\x02\x02\u0109\u010e\x05\x1c\x0f\x02\u010a\u010b\x07*\x02\x02\u010b\u010d\x05\x1c\x0f\x02\u010c\u010a\x03\x02\x02\x02\u010d\u0110\x03\x02\x02\x02\u010e\u010c\x03\x02\x02\x02\u010e\u010f\x03\x02\x02\x02\u010f\x1f\x03\x02\x02\x02\u0110\u010e\x03\x02\x02\x02\u0111\u0116\x05\x1e\x10\x02\u0112\u0113\x07+\x02\x02\u0113\u0115\x05\x1e\x10\x02\u0114\u0112\x03\x02\x02\x02\u0115\u0118\x03\x02\x02\x02\u0116\u0114\x03\x02\x02\x02\u0116\u0117\x03\x02\x02\x02\u0117!\x03\x02\x02\x02\u0118\u0116\x03\x02\x02\x02\u0119\u011e\x05 \x11\x02\u011a\u011b\x07,\x02\x02\u011b\u011d\x05 \x11\x02\u011c\u011a\x03\x02\x02\x02\u011d\u0120\x03\x02\x02\x02\u011e\u011c\x03\x02\x02\x02\u011e\u011f\x03\x02\x02\x02\u011f#\x03\x02\x02\x02\u0120\u011e\x03\x02\x02\x02\u0121\u0127\x05"\x12\x02\u0122\u0123\x070\x02\x02\u0123\u0124\x05*\x16\x02\u0124\u0125\x071\x02\x02\u0125\u0126\x05$\x13\x02\u0126\u0128\x03\x02\x02\x02\u0127\u0122\x03\x02\x02\x02\u0127\u0128\x03\x02\x02\x02\u0128%\x03\x02\x02\x02\u0129\u0130\x05$\x13\x02\u012a\u012b\x05\n\x06\x02\u012b\u012c\x05(\x15\x02\u012c\u012d\x05&\x14\x02\u012d\u0130\x03\x02\x02\x02\u012e\u0130\x07E\x02\x02\u012f\u0129\x03\x02\x02\x02\u012f\u012a\x03\x02\x02\x02\u012f\u012e\x03\x02\x02\x02\u0130\'\x03\x02\x02\x02\u0131\u0132\t\n\x02\x02\u0132)\x03\x02\x02\x02\u0133\u0138\x05&\x14\x02\u0134\u0135\x073\x02\x02\u0135\u0137\x05&\x14\x02\u0136\u0134\x03\x02\x02\x02\u0137\u013a\x03\x02\x02\x02\u0138\u0136\x03\x02\x02\x02\u0138\u0139\x03\x02\x02\x02\u0139+\x03\x02\x02\x02\u013a\u0138\x03\x02\x02\x02\u013b\u013c\x05$\x13\x02\u013c-\x03\x02\x02\x02\u013d\u013f\x050\x19\x02\u013e\u0140\x056\x1c\x02\u013f\u013e\x03\x02\x02\x02\u013f\u0140\x03\x02\x02\x02\u0140\u0141\x03\x02\x02\x02\u0141\u0142\x072\x02\x02\u0142/\x03\x02\x02\x02\u0143\u0145\x054\x1b\x02\u0144\u0143\x03\x02\x02\x02\u0145\u0146\x03\x02\x02\x02\u0146\u0144\x03\x02\x02\x02\u0146\u0147\x03\x02\x02\x02\u01471\x03\x02\x02\x02\u0148\u014a\x054\x1b\x02\u0149\u0148\x03\x02\x02\x02\u014a\u014b\x03\x02\x02\x02\u014b\u0149\x03\x02\x02\x02\u014b\u014c\x03\x02\x02\x02\u014c3\x03\x02\x02\x02\u014d\u0151\x05:\x1e\x02\u014e\u0151\x05H%\x02\u014f\u0151\x05J&\x02\u0150\u014d\x03\x02\x02\x02\u0150\u014e\x03\x02\x02\x02\u0150\u014f\x03\x02\x02\x02\u01515\x03\x02\x02\x02\u0152\u0157\x058\x1d\x02\u0153\u0154\x073\x02\x02\u0154\u0156\x058\x1d\x02\u0155\u0153\x03\x02\x02\x02\u0156\u0159\x03\x02\x02\x02\u0157\u0155\x03\x02\x02\x02\u0157\u0158\x03\x02\x02\x02\u01587\x03\x02\x02\x02\u0159\u0157\x03\x02\x02\x02\u015a\u015d\x05L\'\x02\u015b\u015c\x074\x02\x02\u015c\u015e\x05f4\x02\u015d\u015b\x03\x02\x02\x02\u015d\u015e\x03\x02\x02\x02\u015e9\x03\x02\x02\x02\u015f\u0163\t\v\x02\x02\u0160\u0163\x05<\x1f\x02\u0161\u0163\x05d3\x02\u0162\u015f\x03\x02\x02\x02\u0162\u0160\x03\x02\x02\x02\u0162\u0161\x03\x02\x02\x02\u0163;\x03\x02\x02\x02\u0164\u0166\x07\x12\x02\x02\u0165\u0167\x07C\x02\x02\u0166\u0165\x03\x02\x02\x02\u0166\u0167\x03\x02\x02\x02\u0167\u0168\x03\x02\x02\x02\u0168\u0169\x07\x1a\x02\x02\u0169\u016a\x05> \x02\u016a\u016b\x07\x1b\x02\x02\u016b\u016f\x03\x02\x02\x02\u016c\u016d\x07\x12\x02\x02\u016d\u016f\x07C\x02\x02\u016e\u0164\x03\x02\x02\x02\u016e\u016c\x03\x02\x02\x02\u016f=\x03\x02\x02\x02\u0170\u0172\x05@!\x02\u0171\u0170\x03\x02\x02\x02\u0172\u0173\x03\x02\x02\x02\u0173\u0171\x03\x02\x02\x02\u0173\u0174\x03\x02\x02\x02\u0174?\x03\x02\x02\x02\u0175\u0176\x05B"\x02\u0176\u0177\x05D#\x02\u0177\u0178\x072\x02\x02\u0178\u017d\x03\x02\x02\x02\u0179\u017a\x05B"\x02\u017a\u017b\x072\x02\x02\u017b\u017d\x03\x02\x02\x02\u017c\u0175\x03\x02\x02\x02\u017c\u0179\x03\x02\x02\x02\u017dA\x03\x02\x02\x02\u017e\u0181\x05:\x1e\x02\u017f\u0181\x05H%\x02\u0180\u017e\x03\x02\x02\x02\u0180\u017f\x03\x02\x02\x02\u0181\u0183\x03\x02\x02\x02\u0182\u0184\x05B"\x02\u0183\u0182\x03\x02\x02\x02\u0183\u0184\x03\x02\x02\x02\u0184C\x03\x02\x02\x02\u0185\u018a\x05F$\x02\u0186\u0187\x073\x02\x02\u0187\u0189\x05F$\x02\u0188\u0186\x03\x02\x02\x02\u0189\u018c\x03\x02\x02\x02\u018a\u0188\x03\x02\x02\x02\u018a\u018b\x03\x02\x02\x02\u018bE\x03\x02\x02\x02\u018c\u018a\x03\x02\x02\x02\u018d\u0194\x05L\'\x02\u018e\u0190\x05L\'\x02\u018f\u018e\x03\x02\x02\x02\u018f\u0190\x03\x02\x02\x02\u0190\u0191\x03\x02\x02\x02\u0191\u0192\x071\x02\x02\u0192\u0194\x05,\x17\x02\u0193\u018d\x03\x02\x02\x02\u0193\u018f\x03\x02\x02\x02\u0194G\x03\x02\x02\x02\u0195\u0196\x07\b\x02\x02\u0196I\x03\x02\x02\x02\u0197\u0198\x07\x04\x02\x02\u0198K\x03\x02\x02\x02\u0199\u019b\x05R*\x02\u019a\u0199\x03\x02\x02\x02\u019a\u019b\x03\x02\x02\x02\u019b\u019c\x03\x02\x02\x02\u019c\u019d\x05N(\x02\u019dM\x03\x02\x02\x02\u019e\u019f\b(\x01\x02\u019f\u01a8\x07C\x02\x02\u01a0\u01a1\x07\x16\x02\x02\u01a1\u01a2\x05L\'\x02\u01a2\u01a3\x07\x17\x02\x02\u01a3\u01a8\x03\x02\x02\x02\u01a4\u01a5\x07C\x02\x02\u01a5\u01a6\x071\x02\x02\u01a6\u01a8\x07E\x02\x02\u01a7\u019e\x03\x02\x02\x02\u01a7\u01a0\x03\x02\x02\x02\u01a7\u01a4\x03\x02\x02\x02\u01a8\u01c6\x03\x02\x02\x02\u01a9\u01aa\f\x07\x02\x02\u01aa\u01ac\x07\x18\x02\x02\u01ab\u01ad\x05T+\x02\u01ac\u01ab\x03\x02\x02\x02\u01ac\u01ad\x03\x02\x02\x02\u01ad\u01af\x03\x02\x02\x02\u01ae\u01b0\x05&\x14\x02\u01af\u01ae\x03\x02\x02\x02\u01af\u01b0\x03\x02\x02\x02\u01b0\u01b1\x03\x02\x02\x02\u01b1\u01c5\x07\x19\x02\x02\u01b2\u01b3\f\x06\x02\x02\u01b3\u01b5\x07\x18\x02\x02\u01b4\u01b6\x05T+\x02\u01b5\u01b4\x03\x02\x02\x02\u01b5\u01b6\x03\x02\x02\x02\u01b6\u01b7\x03\x02\x02\x02\u01b7\u01b8\x07&\x02\x02\u01b8\u01c5\x07\x19\x02\x02\u01b9\u01ba\f\x05\x02\x02\u01ba\u01bb\x07\x16\x02\x02\u01bb\u01bc\x05V,\x02\u01bc\u01bd\x07\x17\x02\x02\u01bd\u01c5\x03\x02\x02\x02\u01be\u01bf\f\x04\x02\x02\u01bf\u01c1\x07\x16\x02\x02\u01c0\u01c2\x05\\/\x02\u01c1\u01c0\x03\x02\x02\x02\u01c1\u01c2\x03\x02\x02\x02\u01c2\u01c3\x03\x02\x02\x02\u01c3\u01c5\x07\x17\x02\x02\u01c4\u01a9\x03\x02\x02\x02\u01c4\u01b2\x03\x02\x02\x02\u01c4\u01b9\x03\x02\x02\x02\u01c4\u01be\x03\x02\x02\x02\u01c5\u01c8\x03\x02\x02\x02\u01c6\u01c4\x03\x02\x02\x02\u01c6\u01c7\x03\x02\x02\x02\u01c7O\x03\x02\x02\x02\u01c8\u01c6\x03\x02\x02\x02\u01c9\u01cf\n\f\x02\x02\u01ca\u01cb\x07\x16\x02\x02\u01cb\u01cc\x05P)\x02\u01cc\u01cd\x07\x17\x02\x02\u01cd\u01cf\x03\x02\x02\x02\u01ce\u01c9\x03\x02\x02\x02\u01ce\u01ca\x03\x02\x02\x02\u01cf\u01d2\x03\x02\x02\x02\u01d0\u01ce\x03\x02\x02\x02\u01d0\u01d1\x03\x02\x02\x02\u01d1Q\x03\x02\x02\x02\u01d2\u01d0\x03\x02\x02\x02\u01d3\u01d5\t\r\x02\x02\u01d4\u01d6\x05T+\x02\u01d5\u01d4\x03\x02\x02\x02\u01d5\u01d6\x03\x02\x02\x02\u01d6\u01d8\x03\x02\x02\x02\u01d7\u01d3\x03\x02\x02\x02\u01d8\u01d9\x03\x02\x02\x02\u01d9\u01d7\x03\x02\x02\x02\u01d9\u01da\x03\x02\x02\x02\u01daS\x03\x02\x02\x02\u01db\u01dd\x05H%\x02\u01dc\u01db\x03\x02\x02\x02\u01dd\u01de\x03\x02\x02\x02\u01de\u01dc\x03\x02\x02\x02\u01de\u01df\x03\x02\x02\x02\u01dfU\x03\x02\x02\x02\u01e0\u01e2\x05X-\x02\u01e1\u01e3\x073\x02\x02\u01e2\u01e1\x03\x02\x02\x02\u01e2\u01e3\x03\x02\x02\x02\u01e3W\x03\x02\x02\x02\u01e4\u01e9\x05Z.\x02\u01e5\u01e6\x073\x02\x02\u01e6\u01e8\x05Z.\x02\u01e7\u01e5\x03\x02\x02\x02\u01e8\u01eb\x03\x02\x02\x02\u01e9\u01e7\x03\x02\x02\x02\u01e9\u01ea\x03\x02\x02\x02\u01eaY\x03\x02\x02\x02\u01eb\u01e9\x03\x02\x02\x02\u01ec\u01ed\x050\x19\x02\u01ed\u01ee\x05L\'\x02\u01ee\u01f4\x03\x02\x02\x02\u01ef\u01f1\x052\x1a\x02\u01f0\u01f2\x05`1\x02\u01f1\u01f0\x03\x02\x02\x02\u01f1\u01f2\x03\x02\x02\x02\u01f2\u01f4\x03\x02\x02\x02\u01f3\u01ec\x03\x02\x02\x02\u01f3\u01ef\x03\x02\x02\x02\u01f4[\x03\x02\x02\x02\u01f5\u01fa\x07C\x02\x02\u01f6\u01f7\x073\x02\x02\u01f7\u01f9\x07C\x02\x02\u01f8\u01f6\x03\x02\x02\x02\u01f9\u01fc\x03\x02\x02\x02\u01fa\u01f8\x03\x02\x02\x02\u01fa\u01fb\x03\x02\x02\x02\u01fb]\x03\x02\x02\x02\u01fc\u01fa\x03\x02\x02\x02\u01fd\u01ff\x05B"\x02\u01fe\u0200\x05`1\x02\u01ff\u01fe\x03\x02\x02\x02\u01ff\u0200\x03\x02\x02\x02\u0200_\x03\x02\x02\x02\u0201\u0207\x05R*\x02\u0202\u0204\x05R*\x02\u0203\u0202\x03\x02\x02\x02\u0203\u0204\x03\x02\x02\x02\u0204\u0205\x03\x02\x02\x02\u0205\u0207\x05b2\x02\u0206\u0201\x03\x02\x02\x02\u0206\u0203\x03\x02\x02\x02\u0207a\x03\x02\x02\x02\u0208\u0209\b2\x01\x02\u0209\u020a\x07\x16\x02\x02\u020a\u020b\x05`1\x02\u020b\u020c\x07\x17\x02\x02\u020c\u021e\x03\x02\x02\x02\u020d\u020f\x07\x18\x02\x02\u020e\u0210\x05T+\x02\u020f\u020e\x03\x02\x02\x02\u020f\u0210\x03\x02\x02\x02\u0210\u0212\x03\x02\x02\x02\u0211\u0213\x05&\x14\x02\u0212\u0211\x03\x02\x02\x02\u0212\u0213\x03\x02\x02\x02\u0213\u0214\x03\x02\x02\x02\u0214\u021e\x07\x19\x02\x02',g._serializedATNSegment1="\u0215\u0216\x07\x18\x02\x02\u0216\u0217\x07&\x02\x02\u0217\u021e\x07\x19\x02\x02\u0218\u021a\x07\x16\x02\x02\u0219\u021b\x05V,\x02\u021a\u0219\x03\x02\x02\x02\u021a\u021b\x03\x02\x02\x02\u021b\u021c\x03\x02\x02\x02\u021c\u021e\x07\x17\x02\x02\u021d\u0208\x03\x02\x02\x02\u021d\u020d\x03\x02\x02\x02\u021d\u0215\x03\x02\x02\x02\u021d\u0218\x03\x02\x02\x02\u021e\u0234\x03\x02\x02\x02\u021f\u0220\f\x05\x02\x02\u0220\u0222\x07\x18\x02\x02\u0221\u0223\x05T+\x02\u0222\u0221\x03\x02\x02\x02\u0222\u0223\x03\x02\x02\x02\u0223\u0225\x03\x02\x02\x02\u0224\u0226\x05&\x14\x02\u0225\u0224\x03\x02\x02\x02\u0225\u0226\x03\x02\x02\x02\u0226\u0227\x03\x02\x02\x02\u0227\u0233\x07\x19\x02\x02\u0228\u0229\f\x04\x02\x02\u0229\u022a\x07\x18\x02\x02\u022a\u022b\x07&\x02\x02\u022b\u0233\x07\x19\x02\x02\u022c\u022d\f\x03\x02\x02\u022d\u022f\x07\x16\x02\x02\u022e\u0230\x05V,\x02\u022f\u022e\x03\x02\x02\x02\u022f\u0230\x03\x02\x02\x02\u0230\u0231\x03\x02\x02\x02\u0231\u0233\x07\x17\x02\x02\u0232\u021f\x03\x02\x02\x02\u0232\u0228\x03\x02\x02\x02\u0232\u022c\x03\x02\x02\x02\u0233\u0236\x03\x02\x02\x02\u0234\u0232\x03\x02\x02\x02\u0234\u0235\x03\x02\x02\x02\u0235c\x03\x02\x02\x02\u0236\u0234\x03\x02\x02\x02\u0237\u0238\x07C\x02\x02\u0238e\x03\x02\x02\x02\u0239\u0242\x05&\x14\x02\u023a\u023b\x07\x1a\x02\x02\u023b\u023d\x05h5\x02\u023c\u023e\x073\x02\x02\u023d\u023c\x03\x02\x02\x02\u023d\u023e\x03\x02\x02\x02\u023e\u023f\x03\x02\x02\x02\u023f\u0240\x07\x1b\x02\x02\u0240\u0242\x03\x02\x02\x02\u0241\u0239\x03\x02\x02\x02\u0241\u023a\x03\x02\x02\x02\u0242g\x03\x02\x02\x02\u0243\u0245\x05j6\x02\u0244\u0243\x03\x02\x02\x02\u0244\u0245\x03\x02\x02\x02\u0245\u0246\x03\x02\x02\x02\u0246\u024e\x05f4\x02\u0247\u0249\x073\x02\x02\u0248\u024a\x05j6\x02\u0249\u0248\x03\x02\x02\x02\u0249\u024a\x03\x02\x02\x02\u024a\u024b\x03\x02\x02\x02\u024b\u024d\x05f4\x02\u024c\u0247\x03\x02\x02\x02\u024d\u0250\x03\x02\x02\x02\u024e\u024c\x03\x02\x02\x02\u024e\u024f\x03\x02\x02\x02\u024fi\x03\x02\x02\x02\u0250\u024e\x03\x02\x02\x02\u0251\u0252\x05l7\x02\u0252\u0253\x074\x02\x02\u0253k\x03\x02\x02\x02\u0254\u0256\x05n8\x02\u0255\u0254\x03\x02\x02\x02\u0256\u0257\x03\x02\x02\x02\u0257\u0255\x03\x02\x02\x02\u0257\u0258\x03\x02\x02\x02\u0258m\x03\x02\x02\x02\u0259\u025a\x07\x18\x02\x02\u025a\u025b\x05,\x17\x02\u025b\u025c\x07\x19\x02\x02\u025c\u0260\x03\x02\x02\x02\u025d\u025e\x07B\x02\x02\u025e\u0260\x07C\x02\x02\u025f\u0259\x03\x02\x02\x02\u025f\u025d\x03\x02\x02\x02\u0260o\x03\x02\x02\x02\u0261\u0266\x05r:\x02\u0262\u0266\x05x=\x02\u0263\u0266\x05z>\x02\u0264\u0266\x05|?\x02\u0265\u0261\x03\x02\x02\x02\u0265\u0262\x03\x02\x02\x02\u0265\u0263\x03\x02\x02\x02\u0265\u0264\x03\x02\x02\x02\u0266q\x03\x02\x02\x02\u0267\u0269\x07\x1a\x02\x02\u0268\u026a\x05t;\x02\u0269\u0268\x03\x02\x02\x02\u0269\u026a\x03\x02\x02\x02\u026a\u026b\x03\x02\x02\x02\u026b\u026c\x07\x1b\x02\x02\u026cs\x03\x02\x02\x02\u026d\u026f\x05v<\x02\u026e\u026d\x03\x02\x02\x02\u026f\u0270\x03\x02\x02\x02\u0270\u026e\x03\x02\x02\x02\u0270\u0271\x03\x02\x02\x02\u0271u\x03\x02\x02\x02\u0272\u0275\x05p9\x02\u0273\u0275\x05.\x18\x02\u0274\u0272\x03\x02\x02\x02\u0274\u0273\x03\x02\x02\x02\u0275w\x03\x02\x02\x02\u0276\u0278\x05*\x16\x02\u0277\u0276\x03\x02\x02\x02\u0277\u0278\x03\x02\x02\x02\u0278\u0279\x03\x02\x02\x02\u0279\u027a\x072\x02\x02\u027ay\x03\x02\x02\x02\u027b\u027c\x07\r\x02\x02\u027c\u027d\x07\x16\x02\x02\u027d\u027e\x05*\x16\x02\u027e\u027f\x07\x17\x02\x02\u027f\u0282\x05p9\x02\u0280\u0281\x07\n\x02\x02\u0281\u0283\x05p9\x02\u0282\u0280\x03\x02\x02\x02\u0282\u0283\x03\x02\x02\x02\u0283{\x03\x02\x02\x02\u0284\u0285\x07\x15\x02\x02\u0285\u0286\x07\x16\x02\x02\u0286\u0287\x05*\x16\x02\u0287\u0288\x07\x17\x02\x02\u0288\u0289\x05p9\x02\u0289\u0299\x03\x02\x02\x02\u028a\u028b\x07\t\x02\x02\u028b\u028c\x05p9\x02\u028c\u028d\x07\x15\x02\x02\u028d\u028e\x07\x16\x02\x02\u028e\u028f\x05*\x16\x02\u028f\u0290\x07\x17\x02\x02\u0290\u0291\x072\x02\x02\u0291\u0299\x03\x02\x02\x02\u0292\u0293\x07\f\x02\x02\u0293\u0294\x07\x16\x02\x02\u0294\u0295\x05~@\x02\u0295\u0296\x07\x17\x02\x02\u0296\u0297\x05p9\x02\u0297\u0299\x03\x02\x02\x02\u0298\u0284\x03\x02\x02\x02\u0298\u028a\x03\x02\x02\x02\u0298\u0292\x03\x02\x02\x02\u0299}\x03\x02\x02\x02\u029a\u029f\x05\x80A\x02\u029b\u029d\x05*\x16\x02\u029c\u029b\x03\x02\x02\x02\u029c\u029d\x03\x02\x02\x02\u029d\u029f\x03\x02\x02\x02\u029e\u029a\x03\x02\x02\x02\u029e\u029c\x03\x02\x02\x02\u029f\u02a0\x03\x02\x02\x02\u02a0\u02a2\x072\x02\x02\u02a1\u02a3\x05\x82B\x02\u02a2\u02a1\x03\x02\x02\x02\u02a2\u02a3\x03\x02\x02\x02\u02a3\u02a4\x03\x02\x02\x02\u02a4\u02a6\x072\x02\x02\u02a5\u02a7\x05\x82B\x02\u02a6\u02a5\x03\x02\x02\x02\u02a6\u02a7\x03\x02\x02\x02\u02a7\x7f\x03\x02\x02\x02\u02a8\u02aa\x050\x19\x02\u02a9\u02ab\x056\x1c\x02\u02aa\u02a9\x03\x02\x02\x02\u02aa\u02ab\x03\x02\x02\x02\u02ab\x81\x03\x02\x02\x02\u02ac\u02b1\x05&\x14\x02\u02ad\u02ae\x073\x02\x02\u02ae\u02b0\x05&\x14\x02\u02af\u02ad\x03\x02\x02\x02\u02b0\u02b3\x03\x02\x02\x02\u02b1\u02af\x03\x02\x02\x02\u02b1\u02b2\x03\x02\x02\x02\u02b2\x83\x03\x02\x02\x02\u02b3\u02b1\x03\x02\x02\x02\u02b4\u02b6\x05\x86D\x02\u02b5\u02b4\x03\x02\x02\x02\u02b5\u02b6\x03\x02\x02\x02\u02b6\u02b7\x03\x02\x02\x02\u02b7\u02b8\x07\x02\x02\x03\u02b8\x85\x03\x02\x02\x02\u02b9\u02bb\x05\x88E\x02\u02ba\u02b9\x03\x02\x02\x02\u02bb\u02bc\x03\x02\x02\x02\u02bc\u02ba\x03\x02\x02\x02\u02bc\u02bd\x03\x02\x02\x02\u02bd\x87\x03\x02\x02\x02\u02be\u02c2\x05\x8aF\x02\u02bf\u02c2\x05.\x18\x02\u02c0\u02c2\x072\x02\x02\u02c1\u02be\x03\x02\x02\x02\u02c1\u02bf\x03\x02\x02\x02\u02c1\u02c0\x03\x02\x02\x02\u02c2\x89\x03\x02\x02\x02\u02c3\u02c5\x050\x19\x02\u02c4\u02c3\x03\x02\x02\x02\u02c4\u02c5\x03\x02\x02\x02\u02c5\u02c6\x03\x02\x02\x02\u02c6\u02c8\x05L'\x02\u02c7\u02c9\x05\x8cG\x02\u02c8\u02c7\x03\x02\x02\x02\u02c8\u02c9\x03\x02\x02\x02\u02c9\u02ca\x03\x02\x02\x02\u02ca\u02cb\x05r:\x02\u02cb\x8b\x03\x02\x02\x02\u02cc\u02ce\x05.\x18\x02\u02cd\u02cc\x03\x02\x02\x02\u02ce\u02cf\x03\x02\x02\x02\u02cf\u02cd\x03\x02\x02\x02\u02cf\u02d0\x03\x02\x02\x02\u02d0\x8d\x03\x02\x02\x02a\x95\x9b\xa4\xaa\xac\xb4\xba\xc1\xc6\xcf\xd6\xde\xe6\xee\xf6\xfe\u0106\u010e\u0116\u011e\u0127\u012f\u0138\u013f\u0146\u014b\u0150\u0157\u015d\u0162\u0166\u016e\u0173\u017c\u0180\u0183\u018a\u018f\u0193\u019a\u01a7\u01ac\u01af\u01b5\u01c1\u01c4\u01c6\u01ce\u01d0\u01d5\u01d9\u01de\u01e2\u01e9\u01f1\u01f3\u01fa\u01ff\u0203\u0206\u020f\u0212\u021a\u021d\u0222\u0225\u022f\u0232\u0234\u023d\u0241\u0244\u0249\u024e\u0257\u025f\u0265\u0269\u0270\u0274\u0277\u0282\u0298\u029c\u029e\u02a2\u02a6\u02aa\u02b1\u02b5\u02bc\u02c1\u02c4\u02c8\u02cf",g._serializedATN=p.join([g._serializedATNSegment0,g._serializedATNSegment1],"");class m extends c.ParserRuleContext{primaryExpression(){return this.getRuleContext(0,b)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_start}enterRule(e){e.enterStart&&e.enterStart(this)}exitRule(e){e.exitStart&&e.exitStart(this)}accept(e){return e.visitStart?e.visitStart(this):e.visitChildren(this)}}t.StartContext=m;class b extends c.ParserRuleContext{Identifier(){return this.tryGetToken(g.Identifier,0)}Constant(){return this.tryGetToken(g.Constant,0)}StringLiteral(e){return void 0===e?this.getTokens(g.StringLiteral):this.getToken(g.StringLiteral,e)}LeftParen(){return this.tryGetToken(g.LeftParen,0)}expression(){return this.tryGetRuleContext(0,N)}RightParen(){return this.tryGetToken(g.RightParen,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_primaryExpression}enterRule(e){e.enterPrimaryExpression&&e.enterPrimaryExpression(this)}exitRule(e){e.exitPrimaryExpression&&e.exitPrimaryExpression(this)}accept(e){return e.visitPrimaryExpression?e.visitPrimaryExpression(this):e.visitChildren(this)}}t.PrimaryExpressionContext=b;class f extends c.ParserRuleContext{primaryExpression(){return this.tryGetRuleContext(0,b)}LeftBracket(e){return void 0===e?this.getTokens(g.LeftBracket):this.getToken(g.LeftBracket,e)}expression(e){return void 0===e?this.getRuleContexts(N):this.getRuleContext(e,N)}RightBracket(e){return void 0===e?this.getTokens(g.RightBracket):this.getToken(g.RightBracket,e)}LeftParen(e){return void 0===e?this.getTokens(g.LeftParen):this.getToken(g.LeftParen,e)}RightParen(e){return void 0===e?this.getTokens(g.RightParen):this.getToken(g.RightParen,e)}Identifier(e){return void 0===e?this.getTokens(g.Identifier):this.getToken(g.Identifier,e)}Dot(e){return void 0===e?this.getTokens(g.Dot):this.getToken(g.Dot,e)}Arrow(e){return void 0===e?this.getTokens(g.Arrow):this.getToken(g.Arrow,e)}PlusPlus(e){return void 0===e?this.getTokens(g.PlusPlus):this.getToken(g.PlusPlus,e)}MinusMinus(e){return void 0===e?this.getTokens(g.MinusMinus):this.getToken(g.MinusMinus,e)}argumentExpressionList(e){return void 0===e?this.getRuleContexts(v):this.getRuleContext(e,v)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_postfixExpression}enterRule(e){e.enterPostfixExpression&&e.enterPostfixExpression(this)}exitRule(e){e.exitPostfixExpression&&e.exitPostfixExpression(this)}accept(e){return e.visitPostfixExpression?e.visitPostfixExpression(this):e.visitChildren(this)}}t.PostfixExpressionContext=f;class v extends c.ParserRuleContext{assignmentExpression(e){return void 0===e?this.getRuleContexts(L):this.getRuleContext(e,L)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_argumentExpressionList}enterRule(e){e.enterArgumentExpressionList&&e.enterArgumentExpressionList(this)}exitRule(e){e.exitArgumentExpressionList&&e.exitArgumentExpressionList(this)}accept(e){return e.visitArgumentExpressionList?e.visitArgumentExpressionList(this):e.visitChildren(this)}}t.ArgumentExpressionListContext=v;class y extends c.ParserRuleContext{postfixExpression(){return this.tryGetRuleContext(0,f)}unaryOperator(){return this.tryGetRuleContext(0,x)}castExpression(){return this.tryGetRuleContext(0,j)}PlusPlus(e){return void 0===e?this.getTokens(g.PlusPlus):this.getToken(g.PlusPlus,e)}MinusMinus(e){return void 0===e?this.getTokens(g.MinusMinus):this.getToken(g.MinusMinus,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_unaryExpression}enterRule(e){e.enterUnaryExpression&&e.enterUnaryExpression(this)}exitRule(e){e.exitUnaryExpression&&e.exitUnaryExpression(this)}accept(e){return e.visitUnaryExpression?e.visitUnaryExpression(this):e.visitChildren(this)}}t.UnaryExpressionContext=y;class x extends c.ParserRuleContext{And(){return this.tryGetToken(g.And,0)}Star(){return this.tryGetToken(g.Star,0)}Plus(){return this.tryGetToken(g.Plus,0)}Minus(){return this.tryGetToken(g.Minus,0)}Not(){return this.tryGetToken(g.Not,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_unaryOperator}enterRule(e){e.enterUnaryOperator&&e.enterUnaryOperator(this)}exitRule(e){e.exitUnaryOperator&&e.exitUnaryOperator(this)}accept(e){return e.visitUnaryOperator?e.visitUnaryOperator(this):e.visitChildren(this)}}t.UnaryOperatorContext=x;class j extends c.ParserRuleContext{LeftParen(){return this.tryGetToken(g.LeftParen,0)}typeName(){return this.tryGetRuleContext(0,oe)}RightParen(){return this.tryGetToken(g.RightParen,0)}castExpression(){return this.tryGetRuleContext(0,j)}unaryExpression(){return this.tryGetRuleContext(0,y)}DigitSequence(){return this.tryGetToken(g.DigitSequence,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_castExpression}enterRule(e){e.enterCastExpression&&e.enterCastExpression(this)}exitRule(e){e.exitCastExpression&&e.exitCastExpression(this)}accept(e){return e.visitCastExpression?e.visitCastExpression(this):e.visitChildren(this)}}t.CastExpressionContext=j;class O extends c.ParserRuleContext{castExpression(e){return void 0===e?this.getRuleContexts(j):this.getRuleContext(e,j)}Star(e){return void 0===e?this.getTokens(g.Star):this.getToken(g.Star,e)}Div(e){return void 0===e?this.getTokens(g.Div):this.getToken(g.Div,e)}Mod(e){return void 0===e?this.getTokens(g.Mod):this.getToken(g.Mod,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_multiplicativeExpression}enterRule(e){e.enterMultiplicativeExpression&&e.enterMultiplicativeExpression(this)}exitRule(e){e.exitMultiplicativeExpression&&e.exitMultiplicativeExpression(this)}accept(e){return e.visitMultiplicativeExpression?e.visitMultiplicativeExpression(this):e.visitChildren(this)}}t.MultiplicativeExpressionContext=O;class C extends c.ParserRuleContext{multiplicativeExpression(e){return void 0===e?this.getRuleContexts(O):this.getRuleContext(e,O)}Plus(e){return void 0===e?this.getTokens(g.Plus):this.getToken(g.Plus,e)}Minus(e){return void 0===e?this.getTokens(g.Minus):this.getToken(g.Minus,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_additiveExpression}enterRule(e){e.enterAdditiveExpression&&e.enterAdditiveExpression(this)}exitRule(e){e.exitAdditiveExpression&&e.exitAdditiveExpression(this)}accept(e){return e.visitAdditiveExpression?e.visitAdditiveExpression(this):e.visitChildren(this)}}t.AdditiveExpressionContext=C;class S extends c.ParserRuleContext{additiveExpression(e){return void 0===e?this.getRuleContexts(C):this.getRuleContext(e,C)}LeftShift(e){return void 0===e?this.getTokens(g.LeftShift):this.getToken(g.LeftShift,e)}RightShift(e){return void 0===e?this.getTokens(g.RightShift):this.getToken(g.RightShift,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_shiftExpression}enterRule(e){e.enterShiftExpression&&e.enterShiftExpression(this)}exitRule(e){e.exitShiftExpression&&e.exitShiftExpression(this)}accept(e){return e.visitShiftExpression?e.visitShiftExpression(this):e.visitChildren(this)}}t.ShiftExpressionContext=S;class E extends c.ParserRuleContext{shiftExpression(e){return void 0===e?this.getRuleContexts(S):this.getRuleContext(e,S)}Less(e){return void 0===e?this.getTokens(g.Less):this.getToken(g.Less,e)}Greater(e){return void 0===e?this.getTokens(g.Greater):this.getToken(g.Greater,e)}LessEqual(e){return void 0===e?this.getTokens(g.LessEqual):this.getToken(g.LessEqual,e)}GreaterEqual(e){return void 0===e?this.getTokens(g.GreaterEqual):this.getToken(g.GreaterEqual,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_relationalExpression}enterRule(e){e.enterRelationalExpression&&e.enterRelationalExpression(this)}exitRule(e){e.exitRelationalExpression&&e.exitRelationalExpression(this)}accept(e){return e.visitRelationalExpression?e.visitRelationalExpression(this):e.visitChildren(this)}}t.RelationalExpressionContext=E;class w extends c.ParserRuleContext{relationalExpression(e){return void 0===e?this.getRuleContexts(E):this.getRuleContext(e,E)}Equal(e){return void 0===e?this.getTokens(g.Equal):this.getToken(g.Equal,e)}NotEqual(e){return void 0===e?this.getTokens(g.NotEqual):this.getToken(g.NotEqual,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_equalityExpression}enterRule(e){e.enterEqualityExpression&&e.enterEqualityExpression(this)}exitRule(e){e.exitEqualityExpression&&e.exitEqualityExpression(this)}accept(e){return e.visitEqualityExpression?e.visitEqualityExpression(this):e.visitChildren(this)}}t.EqualityExpressionContext=w;class _ extends c.ParserRuleContext{equalityExpression(e){return void 0===e?this.getRuleContexts(w):this.getRuleContext(e,w)}And(e){return void 0===e?this.getTokens(g.And):this.getToken(g.And,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_andExpression}enterRule(e){e.enterAndExpression&&e.enterAndExpression(this)}exitRule(e){e.exitAndExpression&&e.exitAndExpression(this)}accept(e){return e.visitAndExpression?e.visitAndExpression(this):e.visitChildren(this)}}t.AndExpressionContext=_;class A extends c.ParserRuleContext{andExpression(e){return void 0===e?this.getRuleContexts(_):this.getRuleContext(e,_)}Caret(e){return void 0===e?this.getTokens(g.Caret):this.getToken(g.Caret,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_exclusiveOrExpression}enterRule(e){e.enterExclusiveOrExpression&&e.enterExclusiveOrExpression(this)}exitRule(e){e.exitExclusiveOrExpression&&e.exitExclusiveOrExpression(this)}accept(e){return e.visitExclusiveOrExpression?e.visitExclusiveOrExpression(this):e.visitChildren(this)}}t.ExclusiveOrExpressionContext=A;class k extends c.ParserRuleContext{exclusiveOrExpression(e){return void 0===e?this.getRuleContexts(A):this.getRuleContext(e,A)}Or(e){return void 0===e?this.getTokens(g.Or):this.getToken(g.Or,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_inclusiveOrExpression}enterRule(e){e.enterInclusiveOrExpression&&e.enterInclusiveOrExpression(this)}exitRule(e){e.exitInclusiveOrExpression&&e.exitInclusiveOrExpression(this)}accept(e){return e.visitInclusiveOrExpression?e.visitInclusiveOrExpression(this):e.visitChildren(this)}}t.InclusiveOrExpressionContext=k;class T extends c.ParserRuleContext{inclusiveOrExpression(e){return void 0===e?this.getRuleContexts(k):this.getRuleContext(e,k)}AndAnd(e){return void 0===e?this.getTokens(g.AndAnd):this.getToken(g.AndAnd,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_logicalAndExpression}enterRule(e){e.enterLogicalAndExpression&&e.enterLogicalAndExpression(this)}exitRule(e){e.exitLogicalAndExpression&&e.exitLogicalAndExpression(this)}accept(e){return e.visitLogicalAndExpression?e.visitLogicalAndExpression(this):e.visitChildren(this)}}t.LogicalAndExpressionContext=T;class R extends c.ParserRuleContext{logicalAndExpression(e){return void 0===e?this.getRuleContexts(T):this.getRuleContext(e,T)}OrOr(e){return void 0===e?this.getTokens(g.OrOr):this.getToken(g.OrOr,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_logicalOrExpression}enterRule(e){e.enterLogicalOrExpression&&e.enterLogicalOrExpression(this)}exitRule(e){e.exitLogicalOrExpression&&e.exitLogicalOrExpression(this)}accept(e){return e.visitLogicalOrExpression?e.visitLogicalOrExpression(this):e.visitChildren(this)}}t.LogicalOrExpressionContext=R;class I extends c.ParserRuleContext{logicalOrExpression(){return this.getRuleContext(0,R)}Question(){return this.tryGetToken(g.Question,0)}expression(){return this.tryGetRuleContext(0,N)}Colon(){return this.tryGetToken(g.Colon,0)}conditionalExpression(){return this.tryGetRuleContext(0,I)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_conditionalExpression}enterRule(e){e.enterConditionalExpression&&e.enterConditionalExpression(this)}exitRule(e){e.exitConditionalExpression&&e.exitConditionalExpression(this)}accept(e){return e.visitConditionalExpression?e.visitConditionalExpression(this):e.visitChildren(this)}}t.ConditionalExpressionContext=I;class L extends c.ParserRuleContext{conditionalExpression(){return this.tryGetRuleContext(0,I)}unaryExpression(){return this.tryGetRuleContext(0,y)}assignmentOperator(){return this.tryGetRuleContext(0,P)}assignmentExpression(){return this.tryGetRuleContext(0,L)}DigitSequence(){return this.tryGetToken(g.DigitSequence,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_assignmentExpression}enterRule(e){e.enterAssignmentExpression&&e.enterAssignmentExpression(this)}exitRule(e){e.exitAssignmentExpression&&e.exitAssignmentExpression(this)}accept(e){return e.visitAssignmentExpression?e.visitAssignmentExpression(this):e.visitChildren(this)}}t.AssignmentExpressionContext=L;class P extends c.ParserRuleContext{Assign(){return this.tryGetToken(g.Assign,0)}StarAssign(){return this.tryGetToken(g.StarAssign,0)}DivAssign(){return this.tryGetToken(g.DivAssign,0)}ModAssign(){return this.tryGetToken(g.ModAssign,0)}PlusAssign(){return this.tryGetToken(g.PlusAssign,0)}MinusAssign(){return this.tryGetToken(g.MinusAssign,0)}LeftShiftAssign(){return this.tryGetToken(g.LeftShiftAssign,0)}RightShiftAssign(){return this.tryGetToken(g.RightShiftAssign,0)}AndAssign(){return this.tryGetToken(g.AndAssign,0)}XorAssign(){return this.tryGetToken(g.XorAssign,0)}OrAssign(){return this.tryGetToken(g.OrAssign,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_assignmentOperator}enterRule(e){e.enterAssignmentOperator&&e.enterAssignmentOperator(this)}exitRule(e){e.exitAssignmentOperator&&e.exitAssignmentOperator(this)}accept(e){return e.visitAssignmentOperator?e.visitAssignmentOperator(this):e.visitChildren(this)}}t.AssignmentOperatorContext=P;class N extends c.ParserRuleContext{assignmentExpression(e){return void 0===e?this.getRuleContexts(L):this.getRuleContext(e,L)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expression}enterRule(e){e.enterExpression&&e.enterExpression(this)}exitRule(e){e.exitExpression&&e.exitExpression(this)}accept(e){return e.visitExpression?e.visitExpression(this):e.visitChildren(this)}}t.ExpressionContext=N;class D extends c.ParserRuleContext{conditionalExpression(){return this.getRuleContext(0,I)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_constantExpression}enterRule(e){e.enterConstantExpression&&e.enterConstantExpression(this)}exitRule(e){e.exitConstantExpression&&e.exitConstantExpression(this)}accept(e){return e.visitConstantExpression?e.visitConstantExpression(this):e.visitChildren(this)}}t.ConstantExpressionContext=D;class M extends c.ParserRuleContext{declarationSpecifiers(){return this.getRuleContext(0,U)}Semi(){return this.getToken(g.Semi,0)}initDeclaratorList(){return this.tryGetRuleContext(0,F)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declaration}enterRule(e){e.enterDeclaration&&e.enterDeclaration(this)}exitRule(e){e.exitDeclaration&&e.exitDeclaration(this)}accept(e){return e.visitDeclaration?e.visitDeclaration(this):e.visitChildren(this)}}t.DeclarationContext=M;class U extends c.ParserRuleContext{declarationSpecifier(e){return void 0===e?this.getRuleContexts(G):this.getRuleContext(e,G)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declarationSpecifiers}enterRule(e){e.enterDeclarationSpecifiers&&e.enterDeclarationSpecifiers(this)}exitRule(e){e.exitDeclarationSpecifiers&&e.exitDeclarationSpecifiers(this)}accept(e){return e.visitDeclarationSpecifiers?e.visitDeclarationSpecifiers(this):e.visitChildren(this)}}t.DeclarationSpecifiersContext=U;class B extends c.ParserRuleContext{declarationSpecifier(e){return void 0===e?this.getRuleContexts(G):this.getRuleContext(e,G)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declarationSpecifiers2}enterRule(e){e.enterDeclarationSpecifiers2&&e.enterDeclarationSpecifiers2(this)}exitRule(e){e.exitDeclarationSpecifiers2&&e.exitDeclarationSpecifiers2(this)}accept(e){return e.visitDeclarationSpecifiers2?e.visitDeclarationSpecifiers2(this):e.visitChildren(this)}}t.DeclarationSpecifiers2Context=B;class G extends c.ParserRuleContext{typeSpecifier(){return this.tryGetRuleContext(0,V)}typeQualifier(){return this.tryGetRuleContext(0,K)}functionSpecifier(){return this.tryGetRuleContext(0,Q)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declarationSpecifier}enterRule(e){e.enterDeclarationSpecifier&&e.enterDeclarationSpecifier(this)}exitRule(e){e.exitDeclarationSpecifier&&e.exitDeclarationSpecifier(this)}accept(e){return e.visitDeclarationSpecifier?e.visitDeclarationSpecifier(this):e.visitChildren(this)}}t.DeclarationSpecifierContext=G;class F extends c.ParserRuleContext{initDeclarator(e){return void 0===e?this.getRuleContexts(H):this.getRuleContext(e,H)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_initDeclaratorList}enterRule(e){e.enterInitDeclaratorList&&e.enterInitDeclaratorList(this)}exitRule(e){e.exitInitDeclaratorList&&e.exitInitDeclaratorList(this)}accept(e){return e.visitInitDeclaratorList?e.visitInitDeclaratorList(this):e.visitChildren(this)}}t.InitDeclaratorListContext=F;class H extends c.ParserRuleContext{declarator(){return this.getRuleContext(0,J)}Assign(){return this.tryGetToken(g.Assign,0)}initializer(){return this.tryGetRuleContext(0,ue)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_initDeclarator}enterRule(e){e.enterInitDeclarator&&e.enterInitDeclarator(this)}exitRule(e){e.exitInitDeclarator&&e.exitInitDeclarator(this)}accept(e){return e.visitInitDeclarator?e.visitInitDeclarator(this):e.visitChildren(this)}}t.InitDeclaratorContext=H;class V extends c.ParserRuleContext{Void(){return this.tryGetToken(g.Void,0)}Char(){return this.tryGetToken(g.Char,0)}Int(){return this.tryGetToken(g.Int,0)}Float(){return this.tryGetToken(g.Float,0)}Signed(){return this.tryGetToken(g.Signed,0)}Unsigned(){return this.tryGetToken(g.Unsigned,0)}structSpecifier(){return this.tryGetRuleContext(0,W)}typedefName(){return this.tryGetRuleContext(0,de)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_typeSpecifier}enterRule(e){e.enterTypeSpecifier&&e.enterTypeSpecifier(this)}exitRule(e){e.exitTypeSpecifier&&e.exitTypeSpecifier(this)}accept(e){return e.visitTypeSpecifier?e.visitTypeSpecifier(this):e.visitChildren(this)}}t.TypeSpecifierContext=V;class W extends c.ParserRuleContext{Struct(){return this.getToken(g.Struct,0)}LeftBrace(){return this.tryGetToken(g.LeftBrace,0)}structDeclarationList(){return this.tryGetRuleContext(0,q)}RightBrace(){return this.tryGetToken(g.RightBrace,0)}Identifier(){return this.tryGetToken(g.Identifier,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_structSpecifier}enterRule(e){e.enterStructSpecifier&&e.enterStructSpecifier(this)}exitRule(e){e.exitStructSpecifier&&e.exitStructSpecifier(this)}accept(e){return e.visitStructSpecifier?e.visitStructSpecifier(this):e.visitChildren(this)}}t.StructSpecifierContext=W;class q extends c.ParserRuleContext{structDeclaration(e){return void 0===e?this.getRuleContexts($):this.getRuleContext(e,$)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_structDeclarationList}enterRule(e){e.enterStructDeclarationList&&e.enterStructDeclarationList(this)}exitRule(e){e.exitStructDeclarationList&&e.exitStructDeclarationList(this)}accept(e){return e.visitStructDeclarationList?e.visitStructDeclarationList(this):e.visitChildren(this)}}t.StructDeclarationListContext=q;class $ extends c.ParserRuleContext{specifierQualifierList(){return this.getRuleContext(0,X)}structDeclaratorList(){return this.tryGetRuleContext(0,z)}Semi(){return this.getToken(g.Semi,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_structDeclaration}enterRule(e){e.enterStructDeclaration&&e.enterStructDeclaration(this)}exitRule(e){e.exitStructDeclaration&&e.exitStructDeclaration(this)}accept(e){return e.visitStructDeclaration?e.visitStructDeclaration(this):e.visitChildren(this)}}t.StructDeclarationContext=$;class X extends c.ParserRuleContext{typeSpecifier(){return this.tryGetRuleContext(0,V)}typeQualifier(){return this.tryGetRuleContext(0,K)}specifierQualifierList(){return this.tryGetRuleContext(0,X)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_specifierQualifierList}enterRule(e){e.enterSpecifierQualifierList&&e.enterSpecifierQualifierList(this)}exitRule(e){e.exitSpecifierQualifierList&&e.exitSpecifierQualifierList(this)}accept(e){return e.visitSpecifierQualifierList?e.visitSpecifierQualifierList(this):e.visitChildren(this)}}t.SpecifierQualifierListContext=X;class z extends c.ParserRuleContext{structDeclarator(e){return void 0===e?this.getRuleContexts(Y):this.getRuleContext(e,Y)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_structDeclaratorList}enterRule(e){e.enterStructDeclaratorList&&e.enterStructDeclaratorList(this)}exitRule(e){e.exitStructDeclaratorList&&e.exitStructDeclaratorList(this)}accept(e){return e.visitStructDeclaratorList?e.visitStructDeclaratorList(this):e.visitChildren(this)}}t.StructDeclaratorListContext=z;class Y extends c.ParserRuleContext{declarator(){return this.tryGetRuleContext(0,J)}Colon(){return this.tryGetToken(g.Colon,0)}constantExpression(){return this.tryGetRuleContext(0,D)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_structDeclarator}enterRule(e){e.enterStructDeclarator&&e.enterStructDeclarator(this)}exitRule(e){e.exitStructDeclarator&&e.exitStructDeclarator(this)}accept(e){return e.visitStructDeclarator?e.visitStructDeclarator(this):e.visitChildren(this)}}t.StructDeclaratorContext=Y;class K extends c.ParserRuleContext{Const(){return this.getToken(g.Const,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_typeQualifier}enterRule(e){e.enterTypeQualifier&&e.enterTypeQualifier(this)}exitRule(e){e.exitTypeQualifier&&e.exitTypeQualifier(this)}accept(e){return e.visitTypeQualifier?e.visitTypeQualifier(this):e.visitChildren(this)}}t.TypeQualifierContext=K;class Q extends c.ParserRuleContext{constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_functionSpecifier}enterRule(e){e.enterFunctionSpecifier&&e.enterFunctionSpecifier(this)}exitRule(e){e.exitFunctionSpecifier&&e.exitFunctionSpecifier(this)}accept(e){return e.visitFunctionSpecifier?e.visitFunctionSpecifier(this):e.visitChildren(this)}}t.FunctionSpecifierContext=Q;class J extends c.ParserRuleContext{directDeclarator(){return this.getRuleContext(0,Z)}pointer(){return this.tryGetRuleContext(0,te)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declarator}enterRule(e){e.enterDeclarator&&e.enterDeclarator(this)}exitRule(e){e.exitDeclarator&&e.exitDeclarator(this)}accept(e){return e.visitDeclarator?e.visitDeclarator(this):e.visitChildren(this)}}t.DeclaratorContext=J;class Z extends c.ParserRuleContext{Identifier(){return this.tryGetToken(g.Identifier,0)}LeftParen(){return this.tryGetToken(g.LeftParen,0)}declarator(){return this.tryGetRuleContext(0,J)}RightParen(){return this.tryGetToken(g.RightParen,0)}directDeclarator(){return this.tryGetRuleContext(0,Z)}LeftBracket(){return this.tryGetToken(g.LeftBracket,0)}RightBracket(){return this.tryGetToken(g.RightBracket,0)}typeQualifierList(){return this.tryGetRuleContext(0,se)}assignmentExpression(){return this.tryGetRuleContext(0,L)}Star(){return this.tryGetToken(g.Star,0)}parameterTypeList(){return this.tryGetRuleContext(0,ne)}identifierList(){return this.tryGetRuleContext(0,re)}Colon(){return this.tryGetToken(g.Colon,0)}DigitSequence(){return this.tryGetToken(g.DigitSequence,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_directDeclarator}enterRule(e){e.enterDirectDeclarator&&e.enterDirectDeclarator(this)}exitRule(e){e.exitDirectDeclarator&&e.exitDirectDeclarator(this)}accept(e){return e.visitDirectDeclarator?e.visitDirectDeclarator(this):e.visitChildren(this)}}t.DirectDeclaratorContext=Z;class ee extends c.ParserRuleContext{LeftParen(e){return void 0===e?this.getTokens(g.LeftParen):this.getToken(g.LeftParen,e)}nestedParenthesesBlock(e){return void 0===e?this.getRuleContexts(ee):this.getRuleContext(e,ee)}RightParen(e){return void 0===e?this.getTokens(g.RightParen):this.getToken(g.RightParen,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_nestedParenthesesBlock}enterRule(e){e.enterNestedParenthesesBlock&&e.enterNestedParenthesesBlock(this)}exitRule(e){e.exitNestedParenthesesBlock&&e.exitNestedParenthesesBlock(this)}accept(e){return e.visitNestedParenthesesBlock?e.visitNestedParenthesesBlock(this):e.visitChildren(this)}}t.NestedParenthesesBlockContext=ee;class te extends c.ParserRuleContext{Star(e){return void 0===e?this.getTokens(g.Star):this.getToken(g.Star,e)}Caret(e){return void 0===e?this.getTokens(g.Caret):this.getToken(g.Caret,e)}typeQualifierList(e){return void 0===e?this.getRuleContexts(se):this.getRuleContext(e,se)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_pointer}enterRule(e){e.enterPointer&&e.enterPointer(this)}exitRule(e){e.exitPointer&&e.exitPointer(this)}accept(e){return e.visitPointer?e.visitPointer(this):e.visitChildren(this)}}t.PointerContext=te;class se extends c.ParserRuleContext{typeQualifier(e){return void 0===e?this.getRuleContexts(K):this.getRuleContext(e,K)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_typeQualifierList}enterRule(e){e.enterTypeQualifierList&&e.enterTypeQualifierList(this)}exitRule(e){e.exitTypeQualifierList&&e.exitTypeQualifierList(this)}accept(e){return e.visitTypeQualifierList?e.visitTypeQualifierList(this):e.visitChildren(this)}}t.TypeQualifierListContext=se;class ne extends c.ParserRuleContext{parameterList(){return this.getRuleContext(0,ie)}Comma(){return this.tryGetToken(g.Comma,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_parameterTypeList}enterRule(e){e.enterParameterTypeList&&e.enterParameterTypeList(this)}exitRule(e){e.exitParameterTypeList&&e.exitParameterTypeList(this)}accept(e){return e.visitParameterTypeList?e.visitParameterTypeList(this):e.visitChildren(this)}}t.ParameterTypeListContext=ne;class ie extends c.ParserRuleContext{parameterDeclaration(e){return void 0===e?this.getRuleContexts(ae):this.getRuleContext(e,ae)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_parameterList}enterRule(e){e.enterParameterList&&e.enterParameterList(this)}exitRule(e){e.exitParameterList&&e.exitParameterList(this)}accept(e){return e.visitParameterList?e.visitParameterList(this):e.visitChildren(this)}}t.ParameterListContext=ie;class ae extends c.ParserRuleContext{declarationSpecifiers(){return this.tryGetRuleContext(0,U)}declarator(){return this.tryGetRuleContext(0,J)}declarationSpecifiers2(){return this.tryGetRuleContext(0,B)}abstractDeclarator(){return this.tryGetRuleContext(0,ce)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_parameterDeclaration}enterRule(e){e.enterParameterDeclaration&&e.enterParameterDeclaration(this)}exitRule(e){e.exitParameterDeclaration&&e.exitParameterDeclaration(this)}accept(e){return e.visitParameterDeclaration?e.visitParameterDeclaration(this):e.visitChildren(this)}}t.ParameterDeclarationContext=ae;class re extends c.ParserRuleContext{Identifier(e){return void 0===e?this.getTokens(g.Identifier):this.getToken(g.Identifier,e)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_identifierList}enterRule(e){e.enterIdentifierList&&e.enterIdentifierList(this)}exitRule(e){e.exitIdentifierList&&e.exitIdentifierList(this)}accept(e){return e.visitIdentifierList?e.visitIdentifierList(this):e.visitChildren(this)}}t.IdentifierListContext=re;class oe extends c.ParserRuleContext{specifierQualifierList(){return this.getRuleContext(0,X)}abstractDeclarator(){return this.tryGetRuleContext(0,ce)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_typeName}enterRule(e){e.enterTypeName&&e.enterTypeName(this)}exitRule(e){e.exitTypeName&&e.exitTypeName(this)}accept(e){return e.visitTypeName?e.visitTypeName(this):e.visitChildren(this)}}t.TypeNameContext=oe;class ce extends c.ParserRuleContext{pointer(){return this.tryGetRuleContext(0,te)}directAbstractDeclarator(){return this.tryGetRuleContext(0,le)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_abstractDeclarator}enterRule(e){e.enterAbstractDeclarator&&e.enterAbstractDeclarator(this)}exitRule(e){e.exitAbstractDeclarator&&e.exitAbstractDeclarator(this)}accept(e){return e.visitAbstractDeclarator?e.visitAbstractDeclarator(this):e.visitChildren(this)}}t.AbstractDeclaratorContext=ce;class le extends c.ParserRuleContext{LeftParen(){return this.tryGetToken(g.LeftParen,0)}abstractDeclarator(){return this.tryGetRuleContext(0,ce)}RightParen(){return this.tryGetToken(g.RightParen,0)}LeftBracket(){return this.tryGetToken(g.LeftBracket,0)}RightBracket(){return this.tryGetToken(g.RightBracket,0)}typeQualifierList(){return this.tryGetRuleContext(0,se)}assignmentExpression(){return this.tryGetRuleContext(0,L)}Star(){return this.tryGetToken(g.Star,0)}parameterTypeList(){return this.tryGetRuleContext(0,ne)}directAbstractDeclarator(){return this.tryGetRuleContext(0,le)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_directAbstractDeclarator}enterRule(e){e.enterDirectAbstractDeclarator&&e.enterDirectAbstractDeclarator(this)}exitRule(e){e.exitDirectAbstractDeclarator&&e.exitDirectAbstractDeclarator(this)}accept(e){return e.visitDirectAbstractDeclarator?e.visitDirectAbstractDeclarator(this):e.visitChildren(this)}}t.DirectAbstractDeclaratorContext=le;class de extends c.ParserRuleContext{Identifier(){return this.getToken(g.Identifier,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_typedefName}enterRule(e){e.enterTypedefName&&e.enterTypedefName(this)}exitRule(e){e.exitTypedefName&&e.exitTypedefName(this)}accept(e){return e.visitTypedefName?e.visitTypedefName(this):e.visitChildren(this)}}t.TypedefNameContext=de;class ue extends c.ParserRuleContext{assignmentExpression(){return this.tryGetRuleContext(0,L)}LeftBrace(){return this.tryGetToken(g.LeftBrace,0)}initializerList(){return this.tryGetRuleContext(0,he)}RightBrace(){return this.tryGetToken(g.RightBrace,0)}Comma(){return this.tryGetToken(g.Comma,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_initializer}enterRule(e){e.enterInitializer&&e.enterInitializer(this)}exitRule(e){e.exitInitializer&&e.exitInitializer(this)}accept(e){return e.visitInitializer?e.visitInitializer(this):e.visitChildren(this)}}t.InitializerContext=ue;class he extends c.ParserRuleContext{initializer(e){return void 0===e?this.getRuleContexts(ue):this.getRuleContext(e,ue)}designation(e){return void 0===e?this.getRuleContexts(pe):this.getRuleContext(e,pe)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_initializerList}enterRule(e){e.enterInitializerList&&e.enterInitializerList(this)}exitRule(e){e.exitInitializerList&&e.exitInitializerList(this)}accept(e){return e.visitInitializerList?e.visitInitializerList(this):e.visitChildren(this)}}t.InitializerListContext=he;class pe extends c.ParserRuleContext{designatorList(){return this.getRuleContext(0,ge)}Assign(){return this.getToken(g.Assign,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_designation}enterRule(e){e.enterDesignation&&e.enterDesignation(this)}exitRule(e){e.exitDesignation&&e.exitDesignation(this)}accept(e){return e.visitDesignation?e.visitDesignation(this):e.visitChildren(this)}}t.DesignationContext=pe;class ge extends c.ParserRuleContext{designator(e){return void 0===e?this.getRuleContexts(me):this.getRuleContext(e,me)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_designatorList}enterRule(e){e.enterDesignatorList&&e.enterDesignatorList(this)}exitRule(e){e.exitDesignatorList&&e.exitDesignatorList(this)}accept(e){return e.visitDesignatorList?e.visitDesignatorList(this):e.visitChildren(this)}}t.DesignatorListContext=ge;class me extends c.ParserRuleContext{LeftBracket(){return this.tryGetToken(g.LeftBracket,0)}constantExpression(){return this.tryGetRuleContext(0,D)}RightBracket(){return this.tryGetToken(g.RightBracket,0)}Dot(){return this.tryGetToken(g.Dot,0)}Identifier(){return this.tryGetToken(g.Identifier,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_designator}enterRule(e){e.enterDesignator&&e.enterDesignator(this)}exitRule(e){e.exitDesignator&&e.exitDesignator(this)}accept(e){return e.visitDesignator?e.visitDesignator(this):e.visitChildren(this)}}t.DesignatorContext=me;class be extends c.ParserRuleContext{compoundStatement(){return this.tryGetRuleContext(0,fe)}expressionStatement(){return this.tryGetRuleContext(0,xe)}selectionStatement(){return this.tryGetRuleContext(0,je)}iterationStatement(){return this.tryGetRuleContext(0,Oe)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_statement}enterRule(e){e.enterStatement&&e.enterStatement(this)}exitRule(e){e.exitStatement&&e.exitStatement(this)}accept(e){return e.visitStatement?e.visitStatement(this):e.visitChildren(this)}}t.StatementContext=be;class fe extends c.ParserRuleContext{LeftBrace(){return this.getToken(g.LeftBrace,0)}RightBrace(){return this.getToken(g.RightBrace,0)}blockItemList(){return this.tryGetRuleContext(0,ve)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_compoundStatement}enterRule(e){e.enterCompoundStatement&&e.enterCompoundStatement(this)}exitRule(e){e.exitCompoundStatement&&e.exitCompoundStatement(this)}accept(e){return e.visitCompoundStatement?e.visitCompoundStatement(this):e.visitChildren(this)}}t.CompoundStatementContext=fe;class ve extends c.ParserRuleContext{blockItem(e){return void 0===e?this.getRuleContexts(ye):this.getRuleContext(e,ye)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_blockItemList}enterRule(e){e.enterBlockItemList&&e.enterBlockItemList(this)}exitRule(e){e.exitBlockItemList&&e.exitBlockItemList(this)}accept(e){return e.visitBlockItemList?e.visitBlockItemList(this):e.visitChildren(this)}}t.BlockItemListContext=ve;class ye extends c.ParserRuleContext{statement(){return this.tryGetRuleContext(0,be)}declaration(){return this.tryGetRuleContext(0,M)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_blockItem}enterRule(e){e.enterBlockItem&&e.enterBlockItem(this)}exitRule(e){e.exitBlockItem&&e.exitBlockItem(this)}accept(e){return e.visitBlockItem?e.visitBlockItem(this):e.visitChildren(this)}}t.BlockItemContext=ye;class xe extends c.ParserRuleContext{Semi(){return this.getToken(g.Semi,0)}expression(){return this.tryGetRuleContext(0,N)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_expressionStatement}enterRule(e){e.enterExpressionStatement&&e.enterExpressionStatement(this)}exitRule(e){e.exitExpressionStatement&&e.exitExpressionStatement(this)}accept(e){return e.visitExpressionStatement?e.visitExpressionStatement(this):e.visitChildren(this)}}t.ExpressionStatementContext=xe;class je extends c.ParserRuleContext{If(){return this.getToken(g.If,0)}LeftParen(){return this.getToken(g.LeftParen,0)}expression(){return this.getRuleContext(0,N)}RightParen(){return this.getToken(g.RightParen,0)}statement(e){return void 0===e?this.getRuleContexts(be):this.getRuleContext(e,be)}Else(){return this.tryGetToken(g.Else,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_selectionStatement}enterRule(e){e.enterSelectionStatement&&e.enterSelectionStatement(this)}exitRule(e){e.exitSelectionStatement&&e.exitSelectionStatement(this)}accept(e){return e.visitSelectionStatement?e.visitSelectionStatement(this):e.visitChildren(this)}}t.SelectionStatementContext=je;class Oe extends c.ParserRuleContext{While(){return this.tryGetToken(g.While,0)}LeftParen(){return this.getToken(g.LeftParen,0)}expression(){return this.tryGetRuleContext(0,N)}RightParen(){return this.getToken(g.RightParen,0)}statement(){return this.getRuleContext(0,be)}Do(){return this.tryGetToken(g.Do,0)}Semi(){return this.tryGetToken(g.Semi,0)}For(){return this.tryGetToken(g.For,0)}forCondition(){return this.tryGetRuleContext(0,Ce)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_iterationStatement}enterRule(e){e.enterIterationStatement&&e.enterIterationStatement(this)}exitRule(e){e.exitIterationStatement&&e.exitIterationStatement(this)}accept(e){return e.visitIterationStatement?e.visitIterationStatement(this):e.visitChildren(this)}}t.IterationStatementContext=Oe;class Ce extends c.ParserRuleContext{Semi(e){return void 0===e?this.getTokens(g.Semi):this.getToken(g.Semi,e)}forDeclaration(){return this.tryGetRuleContext(0,Se)}forExpression(e){return void 0===e?this.getRuleContexts(Ee):this.getRuleContext(e,Ee)}expression(){return this.tryGetRuleContext(0,N)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_forCondition}enterRule(e){e.enterForCondition&&e.enterForCondition(this)}exitRule(e){e.exitForCondition&&e.exitForCondition(this)}accept(e){return e.visitForCondition?e.visitForCondition(this):e.visitChildren(this)}}t.ForConditionContext=Ce;class Se extends c.ParserRuleContext{declarationSpecifiers(){return this.getRuleContext(0,U)}initDeclaratorList(){return this.tryGetRuleContext(0,F)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_forDeclaration}enterRule(e){e.enterForDeclaration&&e.enterForDeclaration(this)}exitRule(e){e.exitForDeclaration&&e.exitForDeclaration(this)}accept(e){return e.visitForDeclaration?e.visitForDeclaration(this):e.visitChildren(this)}}t.ForDeclarationContext=Se;class Ee extends c.ParserRuleContext{assignmentExpression(e){return void 0===e?this.getRuleContexts(L):this.getRuleContext(e,L)}Comma(e){return void 0===e?this.getTokens(g.Comma):this.getToken(g.Comma,e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_forExpression}enterRule(e){e.enterForExpression&&e.enterForExpression(this)}exitRule(e){e.exitForExpression&&e.exitForExpression(this)}accept(e){return e.visitForExpression?e.visitForExpression(this):e.visitChildren(this)}}t.ForExpressionContext=Ee;class we extends c.ParserRuleContext{EOF(){return this.getToken(g.EOF,0)}translationUnit(){return this.tryGetRuleContext(0,_e)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_compilationUnit}enterRule(e){e.enterCompilationUnit&&e.enterCompilationUnit(this)}exitRule(e){e.exitCompilationUnit&&e.exitCompilationUnit(this)}accept(e){return e.visitCompilationUnit?e.visitCompilationUnit(this):e.visitChildren(this)}}t.CompilationUnitContext=we;class _e extends c.ParserRuleContext{externalDeclaration(e){return void 0===e?this.getRuleContexts(Ae):this.getRuleContext(e,Ae)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_translationUnit}enterRule(e){e.enterTranslationUnit&&e.enterTranslationUnit(this)}exitRule(e){e.exitTranslationUnit&&e.exitTranslationUnit(this)}accept(e){return e.visitTranslationUnit?e.visitTranslationUnit(this):e.visitChildren(this)}}t.TranslationUnitContext=_e;class Ae extends c.ParserRuleContext{functionDefinition(){return this.tryGetRuleContext(0,ke)}declaration(){return this.tryGetRuleContext(0,M)}Semi(){return this.tryGetToken(g.Semi,0)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_externalDeclaration}enterRule(e){e.enterExternalDeclaration&&e.enterExternalDeclaration(this)}exitRule(e){e.exitExternalDeclaration&&e.exitExternalDeclaration(this)}accept(e){return e.visitExternalDeclaration?e.visitExternalDeclaration(this):e.visitChildren(this)}}t.ExternalDeclarationContext=Ae;class ke extends c.ParserRuleContext{declarator(){return this.getRuleContext(0,J)}compoundStatement(){return this.getRuleContext(0,fe)}declarationSpecifiers(){return this.tryGetRuleContext(0,U)}declarationList(){return this.tryGetRuleContext(0,Te)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_functionDefinition}enterRule(e){e.enterFunctionDefinition&&e.enterFunctionDefinition(this)}exitRule(e){e.exitFunctionDefinition&&e.exitFunctionDefinition(this)}accept(e){return e.visitFunctionDefinition?e.visitFunctionDefinition(this):e.visitChildren(this)}}t.FunctionDefinitionContext=ke;class Te extends c.ParserRuleContext{declaration(e){return void 0===e?this.getRuleContexts(M):this.getRuleContext(e,M)}constructor(e,t){super(e,t)}get ruleIndex(){return g.RULE_declarationList}enterRule(e){e.enterDeclarationList&&e.enterDeclarationList(this)}exitRule(e){e.exitDeclarationList&&e.exitDeclarationList(this)}accept(e){return e.visitDeclarationList?e.visitDeclarationList(this):e.visitChildren(this)}}t.DeclarationListContext=Te},713:function(e,t,s){"use strict";function n(e,t){return"string"===typeof e?e:t.reduce(((t,s,n)=>t+s+e[n+1]),e[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=t.stripIndent=t.oneLine=void 0,t.oneLine=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return n(e,s).replace(/(?:\n(?:\s*))+/g," ").trim()},t.stripIndent=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];const a=n(e,s),r=a.match(/^[^\S\n]*(?=\S)/gm),o=r&&Math.min(...r.map((e=>e.length)));return o?a.replace(new RegExp(`^.{${o}}`,"gm"),"").trim():a.trim()},t.simplify=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if(e.length<t)return e;const n=Math.ceil(t-s.length/2);return e.slice(0,n)+" ... "+e.slice(n)}},714:function(e,t,s){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),i(s(715),t),i(s(446),t)},715:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(t){a(t)}}function o(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sourceFilesRunner=t.sourceRunner=void 0;const i=s(333),a=s(716),r=s(717),o=s(721),c=s(722),l=s(244),d=s(723),u=s(28),h=s(724),p=s(446),g={scheduler:"async",steps:1e3,stepLimit:1e3,executionMethod:"auto",variant:u.Variant.DEFAULT,originalMaxExecTime:1e3,useSubst:!1,isPrelude:!1,throwInfiniteLoops:!0};function m(e,t,s){const n=(0,a.evaluate)(e,t);return new d.PreemptiveScheduler(s.steps).run(n,t)}function b(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},g),s);t.variant=(0,p.determineVariant)(t,s),t.errors=[];const i=(0,l.parse)(e,t);if(!i)return p.resolvedErrorPromise;if((0,o.removeExports)(i),(0,c.removeNonSourceModuleImports)(i),(0,r.hoistAndMergeImports)(i),(0,h.validateAndAnnotate)(i,t),t.unTypecheckedCode.push(e),t.errors.length>0)return p.resolvedErrorPromise;if(null!==t.prelude){const n=t.prelude;return t.prelude=null,yield b(n,t,Object.assign(Object.assign({},s),{isPrelude:!0})),b(e,t,s)}return m(i,t,n)}))}t.sourceRunner=b,t.sourceFilesRunner=function(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,void 0,void 0,(function*(){const n=e[t];return void 0===n?(s.errors.push(new i.CannotFindModuleError(t)),p.resolvedErrorPromise):(s.variant=(0,p.determineVariant)(s,a),b(n,s,a))}))}},716:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluate=t.evaluators=t.pushEnvironment=t.actualValue=void 0;const n=s(383),i=s(384);function*a(e,s){if(e instanceof class{constructor(e,t){this.exp=e,this.env=t,this.isMemoized=!1,this.value=null}}){if(e.isMemoized)return e.value;(0,t.pushEnvironment)(s,e.env);const n=yield*r(e.exp,s);return c(s),e.value=n,e.isMemoized=!0,n}return e}function*r(e,t){const s=yield*l(e,t);return yield*a(s,t)}t.actualValue=r;const o=(e,t)=>{throw e.errors.push(t),e.runtime.environments=e.runtime.environments.slice(-e.numberOfOuterEnvironments),t};const c=e=>e.runtime.environments.shift();function*l(e,s){const n=yield*t.evaluators[e.type](e,s);return yield*function*(e){e.runtime.break=!1,e.runtime.nodes.shift(),yield e}(s),n}t.pushEnvironment=(e,t)=>{e.runtime.environments.unshift(t),e.runtime.environmentTree.insert(t)},t.evaluators={Literal:function*(e,t){return e.value},TemplateLiteral:function*(e){return e.quasis[0].value.cooked},ThisExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},ArrayExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},FunctionExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},ArrowFunctionExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},Identifier:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},CallExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},NewExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},UnaryExpression:function*(e,t){const s=yield*r(e.argument,t),a=i.checkUnaryExpression(e,e.operator,s);return a?o(t,a):(0,n.evaluateUnaryExpression)(e.operator,s)},BinaryExpression:function*(e,t){const s=yield*r(e.left,t),a=yield*r(e.right,t),c=i.checkBinaryExpression(e,e.operator,s,a);return c?o(t,c):(0,n.evaluateBinaryExpression)(e.operator,s,a)},ConditionalExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},LogicalExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},VariableDeclaration:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},ContinueStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},BreakStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},ForStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},AssignmentExpression:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},FunctionDeclaration:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},IfStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},ExpressionStatement:function*(e,t){return yield*l(e.expression,t)},ReturnStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},WhileStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},BlockStatement:function*(e,t){throw new Error(`not supported yet: ${e.type}`)},Program:function*(e,t){const s=yield*a(yield*function*(e,t){let s;for(const n of t.body)s=yield*l(n,e);return s}(t,e),t);return s}},t.evaluate=l},717:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoistAndMergeImports=void 0;const n=s(718),i=s(444),a=s(719),r=s(445);t.hoistAndMergeImports=e=>{var t;const s=e.body.filter(r.isImportDeclaration),o=e.body.filter((e=>!(0,r.isImportDeclaration)(e))),c=new Map;for(const i of s){const e=i.source.value;if("string"!==typeof e)throw new Error("Module names must be strings.");const s=null!==(t=c.get(e))&&void 0!==t?t:[];for(const t of i.specifiers){const e=(0,a.cloneAndStripImportSpecifier)(t),i=0!==s.filter((t=>n.isEqual(e,t))).length;i||s.push(e)}c.set(e,s)}const l=[];c.forEach(((e,t)=>{l.push((0,i.createImportDeclaration)(e,(0,i.createLiteral)(t)))})),e.body=[...l,...o]}},719:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneAndStripImportSpecifier=t.createInvokedFunctionResultVariableDeclaration=t.createImportedNameDeclaration=t.createListCallExpression=t.createPairCallExpression=void 0;const n=s(720),i=s(444);t.createPairCallExpression=(e,t)=>(0,i.createCallExpression)("pair",[e,t]);t.createListCallExpression=e=>(0,i.createCallExpression)("list",e);t.createImportedNameDeclaration=(e,t,s)=>{const a=(0,i.createCallExpression)(n.accessExportFunctionName,[(0,i.createIdentifier)(e),(0,i.createLiteral)(s)]),r=(0,i.createVariableDeclarator)(t,a);return(0,i.createVariableDeclaration)([r],"const")};t.createInvokedFunctionResultVariableDeclaration=(e,t,s)=>{const n=(0,i.createCallExpression)(e,s),a=(0,i.createVariableDeclarator)((0,i.createIdentifier)(t),n);return(0,i.createVariableDeclaration)([a],"const")};t.cloneAndStripImportSpecifier=e=>{switch(e.type){case"ImportSpecifier":return{type:"ImportSpecifier",local:(0,i.createIdentifier)(e.local.name),imported:(0,i.createIdentifier)(e.imported.name)};case"ImportDefaultSpecifier":return{type:"ImportDefaultSpecifier",local:(0,i.createIdentifier)(e.local.name)};case"ImportNamespaceSpecifier":return{type:"ImportNamespaceSpecifier",local:(0,i.createIdentifier)(e.local.name)}}}},72:function(e,t,s){"use strict";(function(e){s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return p})),s.d(t,"g",(function(){return g})),s.d(t,"j",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"i",(function(){return f}));var n=s(8),i=s(69),a=s(10),r=s(89),o=s(0);async function c(e,t){return await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:t})}function l(){const e=r.a.getState().session.githubOctokitObject;return void 0===e?void 0:e.octokit}async function d(e,t,s,n){if(void 0===e)return Object(a.e)("Please log in and try again",2e3),!1;if(""===n)return Object(a.e)("Please select a file!",2e3),!1;let i;try{i=(await e.repos.getContent({owner:t,repo:s,path:n})).data}catch(r){return Object(a.e)("Connection denied or file does not exist.",2e3),console.error(r),!1}return!Array.isArray(i)||(Object(a.e)("Can't open folder as a file!",2e3),!1)}async function u(e,t,s,n){let i,r="";if(""===n)return Object(a.e)("No file name given.",2e3),{canBeSaved:!1,saveType:r};if(void 0===e)return Object(a.e)("Please log in and try again",2e3),{canBeSaved:!1,saveType:r};try{i=(await e.repos.getContent({owner:t,repo:s,path:n})).data,r="Overwrite"}catch(o){if(404!==o.status)return Object(a.e)("Connection denied or file does not exist.",2e3),console.error(o),{canBeSaved:!1,saveType:r};r="Create"}return Array.isArray(i)?(Object(a.e)("Can't save over a folder!",2e3),{canBeSaved:!1,saveType:r}):{canBeSaved:!0,saveType:r}}async function h(){return await Object(i.b)({contents:Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Warning: opening this file will overwrite the text data in the editor."}),Object(o.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})}async function p(){return await Object(i.b)({contents:Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Warning: You are saving over an existing file in the repository."}),Object(o.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})}async function g(t,s,i,o){if(void 0===t)return;const c=(await t.repos.getContent({owner:s,repo:i,path:o})).data.content;if(c){const t=e.from(c,"base64").toString();r.a.dispatch(n.a.updateEditorValue(t,"playground")),r.a.dispatch(n.a.playgroundUpdateGitHubSaveInfo(i,o,new Date)),Object(a.d)("Successfully loaded file!",1e3)}}async function m(t,s,i,o,c,l,d,u){if(void 0===t)return;l=l||"No public email provided",c=c||"Source Academy User",d=d||"Changes made from Source Academy",u=u||"";const h=e.from(u,"utf8").toString("base64");try{const e=(await t.repos.getContent({owner:s,repo:i,path:o})).data;if(Array.isArray(e))return;const u=e.sha;await t.repos.createOrUpdateFileContents({owner:s,repo:i,path:o,message:d,content:h,sha:u,committer:{name:c,email:l},author:{name:c,email:l}}),r.a.dispatch(n.a.playgroundUpdateGitHubSaveInfo(i,o,new Date)),Object(a.d)("Successfully saved file!",1e3)}catch(p){console.error(p),Object(a.e)("Something went wrong when trying to save the file.",1e3)}}async function b(t,s,i,o,c,l,d,u){if(void 0===t)return;l=l||"No public email provided",c=c||"Source Academy User",d=d||"Changes made from Source Academy",u=u||"";const h=e.from(u,"utf8").toString("base64");try{await t.repos.createOrUpdateFileContents({owner:s,repo:i,path:o,message:d,content:h,committer:{name:c,email:l},author:{name:c,email:l}}),r.a.dispatch(n.a.playgroundUpdateGitHubSaveInfo(i,o,new Date)),Object(a.d)("Successfully created file!",1e3)}catch(p){console.error(p),Object(a.e)("Something went wrong when trying to save the file.",1e3)}}async function f(e,t,s,n,i,r,o){if(void 0!==e){r=r||"No public email provided",i=i||"Source Academy User",o=o||"Changes made from Source Academy";try{const i=(await e.repos.getContent({owner:t,repo:s,path:n})).data;if(!Array.isArray(i))return void Object(a.e)("Something went wrong when trying to delete the folder.",1e3);for(let n=0;n<i.length;n++){const a=i[n];await e.repos.deleteFile({owner:t,repo:s,path:a.path,message:o,sha:a.sha})}Object(a.d)("Successfully deleted folder!",1e3)}catch(c){console.error(c),Object(a.e)("Something went wrong when trying to delete the folder.",1e3)}}}}).call(this,s(74).Buffer)},720:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localImportPrelude=t.defaultExportLookupName=t.accessExportFunctionName=void 0,t.accessExportFunctionName="__access_export__",t.defaultExportLookupName="default",t.localImportPrelude=`\nfunction __access_named_export__(named_exports, lookup_name) {\n  if (is_null(named_exports)) {\n    return undefined;\n  } else {\n    const name = head(head(named_exports));\n    const identifier = tail(head(named_exports));\n    if (name === lookup_name) {\n      return identifier;\n    } else {\n      return __access_named_export__(tail(named_exports), lookup_name);\n    }\n  }\n}\n\nfunction ${t.accessExportFunctionName}(exports, lookup_name) {\n  if (lookup_name === "${t.defaultExportLookupName}") {\n    return head(exports);\n  } else {\n    const named_exports = tail(exports);\n    return __access_named_export__(named_exports, lookup_name);\n  }\n}\n`},721:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeExports=void 0;const n=s(256),i=s(445);t.removeExports=e=>{(0,n.ancestor)(e,{ExportNamedDeclaration(e,t,s){const n=s[s.length-2];if("Program"!==n.type)return;const i=n.body.findIndex((t=>t===e));e.declaration?n.body[i]=e.declaration:n.body.splice(i,1)},ExportDefaultDeclaration(e,t,s){const n=s[s.length-2];if("Program"!==n.type)return;const a=n.body.findIndex((t=>t===e));(0,i.isDeclaration)(e.declaration)?n.body[a]=e.declaration:n.body.splice(a,1)}})}},722:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeNonSourceModuleImports=t.isSourceModule=void 0;const n=s(256),i=s(334);t.isSourceModule=e=>!(0,i.isFilePath)(e);t.removeNonSourceModuleImports=e=>{(0,n.ancestor)(e,{ImportSpecifier(e,t,s){},ImportDefaultSpecifier(e,t,s){const n=s[s.length-2];if("ImportDeclaration"!==n.type)return;const i=n.specifiers.findIndex((t=>t===e));n.specifiers.splice(i,1)},ImportNamespaceSpecifier(e,t,s){const n=s[s.length-2];if("ImportDeclaration"!==n.type)return;const i=n.specifiers.findIndex((t=>t===e));n.specifiers.splice(i,1)}});const s=[...e.body],i=(e,t)=>{if("Program"!==t[t.length-2].type)return;const n=s.findIndex((t=>t===e));s.splice(n,1)};(0,n.ancestor)(e,{ImportDeclaration(e,s,n){if("string"!==typeof e.source.value)throw new Error("Module names must be strings.");0!==e.specifiers.length&&(0,t.isSourceModule)(e.source.value)||i(e,n)}}),e.body=s}},723:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreemptiveScheduler=void 0;const n=s(157);t.PreemptiveScheduler=class{constructor(e){this.steps=e}run(e,t){return new Promise(((s,i)=>{t.runtime.isRunning=!0;let a=!1,r=e.next();const o=setInterval((()=>{let i=0;try{for(;!r.done&&i<this.steps;)i++,r=e.next(),a=t.runtime.break&&t.runtime.debuggerOn,a&&(r.done=!0)}catch(c){!function(e,t){if(/Maximum call stack/.test(e.toString())){const e=t.runtime.environments,s=[];let i=0;for(let t=0;i<n.MaximumStackLimitExceeded.MAX_CALLS_TO_SHOW&&t<e.length;t++)e[t].callExpression&&(s.unshift(e[t].callExpression),i++);t.errors.push(new n.MaximumStackLimitExceeded(t.runtime.nodes[0],s))}}(c,t),t.runtime.isRunning=!1,clearInterval(o),s({status:"error"})}r.done&&(t.runtime.isRunning=!1,clearInterval(o),s(a?{status:"suspended",it:e,scheduler:this,context:t}:{status:"finished",context:t,value:r.value}))}))}))}}},724:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndAnnotate=void 0;const n=s(157),i=s(725),a=s(312),r=s(256);class o{constructor(e){this.isConstant=e,this.accessedBeforeDeclaration=!1}}t.validateAndAnnotate=function(e,t){const s=new Map,c=new Map;function l(e){const t=new Map;for(const s of e.body)if("VariableDeclaration"===s.type)t.set((0,a.getVariableDecarationName)(s),new o("const"===s.kind));else if("FunctionDeclaration"===s.type){if(null===s.id)throw new Error("Encountered a FunctionDeclaration node without an identifier. This should have been caught when parsing.");t.set(s.id.name,new o(!0))}c.set(e,!1),s.set(e,t)}function d(e){s.set(e,new Map(e.params.map((e=>[e.name,new o(!1)])))),c.set(e,!1)}function u(e,a){const r=e.name,o=a[a.length-2];for(let c=a.length-1;c>=0;c--){const l=a[c],d=s.get(l);if(null===d||void 0===d?void 0:d.has(r)){d.get(r).accessedBeforeDeclaration=!0,"AssignmentExpression"===o.type&&o.left===e&&(d.get(r).isConstant&&t.errors.push(new n.ConstAssignment(o,r)),"ForStatement"===l.type&&l.init!==o&&l.update!==o&&t.errors.push(new i.NoAssignmentToForVariable(o)));break}}}(0,r.ancestor)(e,{Program:l,BlockStatement:l,FunctionDeclaration:d,ArrowFunctionExpression:d,ForStatement(e,t){const n=e.init;"VariableDeclaration"===n.type&&(s.set(e,new Map([[(0,a.getVariableDecarationName)(n),new o("const"===n.kind)]])),c.set(e,!1))}});const h=Object.assign(Object.assign({},r.base),{VariableDeclarator(e,t,s){e.init&&s(e.init,t,"Expression")}});return(0,r.ancestor)(e,{VariableDeclaration(e,t){const n=t[t.length-2],i=(0,a.getVariableDecarationName)(e),r=s.get(n).get(i).accessedBeforeDeclaration;e.typability=r?"Untypable":"NotYetTyped"},Identifier:u,FunctionDeclaration(e,t){const s=t[t.length-2];e.typability=c.get(s)?"Untypable":"NotYetTyped"},Pattern(e,t){"Identifier"===e.type?u(e,t):"MemberExpression"===e.type&&"Identifier"===e.object.type&&u(e.object,t)},CallExpression(e,t){for(let s=t.length-1;s>=0;s--){const e=t[s];if(c.has(e)){c.set(e,!0);break}}}},h),e}},725:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoAssignmentToForVariable=void 0;const n=s(28);t.NoAssignmentToForVariable=class{constructor(e){this.node=e,this.type=n.ErrorType.SYNTAX,this.severity=n.ErrorSeverity.ERROR}get location(){return this.node.loc}explain(){return"Assignment to a for loop variable in the for loop is not allowed."}elaborate(){return this.explain()}}},75:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return d})),s.d(t,"f",(function(){return u})),s.d(t,"e",(function(){return h}));var n=s(65),i=s.n(n);const a=new Date,r=e=>void 0!==e&&e<=a,o=e=>void 0===e||e<=a,c=(e,t)=>{if(void 0===e&&void 0===t)return!0;const s=new Date,n=100*s.getHours()+s.getMinutes(),i=void 0===e?void 0:100*e.getHours()+e.getMinutes(),a=void 0===t?void 0:100*t.getHours()+t.getMinutes();return void 0===i?n<=a:void 0===a?n>=i:i>=a?n<=a||n>=i:n<=a&&n>=i},l=e=>void 0===e?0:e.getTime()-a.getTime(),d=e=>void 0===e?"":i()(e).format("D MMMM YYYY HH:mm"),u=e=>void 0===e?"":i()(e).format("HH:mm"),h=e=>{if(void 0===e)return"Unlimited";if(r(e))return"Expired";const t=i()(),s=Math.ceil(i()(e).diff(t,"weeks",!0)),n=Math.ceil(i()(e).diff(t,"days",!0)),a=Math.ceil(i()(e).diff(t,"hours",!0));let o="";return o=s>1?s+" Weeks":n>1?n+" Days":a>1?a+" Hours":"1 Hour",o}},775:function(e,t){},777:function(e,t){},8:function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var n={};s.r(n),s.d(n,"persistenceOpenPicker",(function(){return b})),s.d(n,"persistenceSaveFile",(function(){return f})),s.d(n,"persistenceSaveFileAs",(function(){return v})),s.d(n,"persistenceInitialise",(function(){return y}));var i={};s.r(i),s.d(i,"remoteExecFetchDevices",(function(){return O})),s.d(i,"remoteExecUpdateDevices",(function(){return C})),s.d(i,"remoteExecUpdateSession",(function(){return S})),s.d(i,"remoteExecConnect",(function(){return E})),s.d(i,"remoteExecDisconnect",(function(){return w})),s.d(i,"remoteExecRun",(function(){return _})),s.d(i,"remoteExecReplInput",(function(){return A}));var a=s(283),r=s(68),o=s(38),c=s(249),l=s(13),d=s(207),u=s(96),h=s(295),p=s(188),g=s(7),m=s(152);const b=()=>Object(g.action)(m.b),f=e=>Object(g.action)(m.c,e),v=()=>Object(g.action)(m.d),y=()=>Object(g.action)(m.a);var x=s(128),j=s(90);const O=()=>Object(g.action)(j.c),C=e=>Object(g.action)(j.f,e),S=e=>Object(g.action)(j.g,e),E=(e,t)=>Object(g.action)(j.a,{workspace:e,device:t}),w=()=>Object(g.action)(j.b),_=e=>Object(g.action)(j.e,e),A=e=>Object(g.action)(j.d,e);const k={...u,...a,...c,...h,...r,...x,...o,...s(214),...s(95),...s(120),...l,...p,...d,...n,...i}},802:function(e,t){},804:function(e,t){},824:function(e,t){},86:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"h",(function(){return d})),s.d(t,"i",(function(){return u}));const n="DELETE_SOURCECAST_ENTRY",i="RECORD_INIT",a="RECORD_INPUT",r="RESET_INPUTS",o="TIMER_PAUSE",c="TIMER_RESET",l="TIMER_RESUME",d="TIMER_START",u="TIMER_STOP"},88:function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(t){a(t)}}function o(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createContext=t.interrupt=t.resume=t.runFilesInContext=t.runInContext=t.hasDeclaration=t.findDeclaration=t.parseError=t.SourceDocumentation=void 0;const i=s(628),a=s(279);t.createContext=a.default;const r=s(157),o=s(637),c=s(244);var l=s(413);Object.defineProperty(t,"SourceDocumentation",{enumerable:!0,get:function(){return l.SourceDocumentation}});const d=s(333),u=s(334),h=s(714);function p(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n(this,void 0,void 0,(function*(){for(const t in e){const e=(0,u.validateFilePath)(t);if(null!==e)return s.errors.push(e),h.resolvedErrorPromise}return void 0===e[t]?(s.errors.push(new d.CannotFindModuleError(t)),h.resolvedErrorPromise):(0,h.sourceFilesRunner)(e,t,s,i)}))}"undefined"!==typeof window&&i.SourceMapConsumer.initialize({"lib/mappings.wasm":"https://unpkg.com/source-map@0.7.3/lib/mappings.wasm"}),t.parseError=function(e){return e.map((e=>{const t=e.location?e.location.start.line:"<unknown>",s=e.explain();return t<1?s:`Line ${t}: ${s}`})).join("\n")},t.findDeclaration=function(e,t,s){const n=(0,c.parse)(e,t);if(!n)return null;const i=(0,o.findIdentifierNode)(n,t,s);if(!i)return null;const a=(0,o.findDeclarationNode)(n,i);return a&&i!==a?a.loc:null},t.hasDeclaration=function(e,t,s){const n=(0,c.parse)(e,t);if(!n)return!1;const i=(0,o.findIdentifierNode)(n,t,s);if(!i)return!1;const a=(0,o.findDeclarationNode)(n,i);return null!=a&&null!=a.loc},t.runInContext=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n(this,void 0,void 0,(function*(){const n="/default.js",i={};return i["/default.js"]=e,p(i,n,t,s)}))},t.runFilesInContext=p,t.resume=function(e){return"finished"===e.status||"error"===e.status?e:e.scheduler.run(e.it,e.context)},t.interrupt=function(e){const t=e.runtime.environments[e.runtime.environments.length-1];e.runtime.environments=[t],e.runtime.isRunning=!1,e.errors.push(new r.InterruptedError(e.runtime.nodes[0]))}},89:function(e,t,s){"use strict";s.d(t,"a",(function(){return Nt}));var n=s(28),i=s(33),a=s.n(i),r=s(44),o=s(531),c=s(22),l=s(146),d=s(127);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a:return c.c;case d.c:return{...e,gameCanvas:t.payload};default:return e}};var h=s(26);const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.p:return{...e,achievements:t.payload};case h.q:return{...e,goals:t.payload};case h.r:return{...e,users:t.payload};case h.s:return{...e,assessmentOverviews:t.payload};default:return e}};var g=s(158);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.f,t=arguments.length>1?arguments[1]:void 0;return t.type===g.b?{...e,gradingSummary:t.payload}:e};var b=s(108);const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.a:return{...e,queryString:t.payload};case b.f:return{...e,shortURL:t.payload};case b.c:return{...e,githubSaveInfo:t.payload};case b.d:return{...e,persistenceFile:t.payload};default:return e}};var v=s(106),y=s(37),x=s(135);const j=(e,t)=>{switch(t.type){case y.d:return{...e,title:t.payload.title,description:t.payload.description,uid:t.payload.uid,audioUrl:t.payload.audioUrl,playbackData:t.payload.playbackData};case y.f:return{...e,currentPlayerTime:t.payload.playerTime};case y.e:return{...e,codeDeltasToApply:t.payload.deltas};case y.g:return{...e,inputToApply:t.payload.inputToApply};case y.h:return{...e,title:t.payload.title,description:t.payload.description,uid:t.payload.uid,audioUrl:t.payload.audioUrl,playbackData:t.payload.playbackData};case y.i:return{...e,playbackDuration:t.payload.duration};case y.j:return{...e,playbackStatus:t.payload.playbackStatus};case x.c:return{...e,sourcecastIndex:t.payload.index};default:return e}};var O=s(86);const C=(e,t)=>{switch(t.type){case O.b:return{...e,playbackData:{init:t.payload.initData,inputs:[]}};case O.c:return{...e,playbackData:{...e.playbackData,inputs:[...e.playbackData.inputs,t.payload.input]}};case O.d:return{...e,playbackData:{...e.playbackData,inputs:t.payload.inputs}};case O.e:return{...e,recordingStatus:y.c.paused,timeElapsedBeforePause:e.timeElapsedBeforePause+t.payload.timeNow-e.timeResumed};case O.f:return{...e,recordingStatus:y.c.notStarted,timeElapsedBeforePause:0,timeResumed:0};case O.g:return{...e,recordingStatus:y.c.recording,timeElapsedBeforePause:t.payload.timeBefore>=0?t.payload.timeBefore:e.timeElapsedBeforePause,timeResumed:t.payload.timeNow};case O.h:return{...e,recordingStatus:y.c.recording,timeElapsedBeforePause:0,timeResumed:t.payload.timeNow};case O.i:return{...e,recordingStatus:y.c.finished,timeElapsedBeforePause:0,timeResumed:0};default:return e}};var S=s(59),E=s(226),w=s(24),_=s(16),A=s(100),k=s(31);const T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.l,t=arguments.length>1?arguments[1]:void 0;const s=t.payload?t.payload.workspaceLocation:"assessment";let n,i;switch(s){case"sourcecast":const s=j(e.sourcecast,t);if(s===e.sourcecast)break;return{...e,sourcecast:s};case"sourcereel":const n=C(e.sourcereel,t);if(n===e.sourcereel)break;return{...e,sourcereel:n}}switch(t.type){case k.c:if(null===e[s].replHistory.browseIndex)return e;if(0!==e[s].replHistory.browseIndex){const t=e[s].replHistory.browseIndex-1,n=e[s].replHistory.records[t];return{...e,[s]:{...e[s],replValue:n,replHistory:{...e[s].replHistory,browseIndex:t}}}}{const t=null,n=e[s].replHistory.originalValue,i=e[s].replHistory.records.slice();return{...e,[s]:{...e[s],replValue:n,replHistory:{browseIndex:t,records:i,originalValue:""}}}}case k.d:const a=e[s].replHistory.records,r=e[s].replHistory.browseIndex;if(0===a.length||null!==r&&void 0===a[r+1])return e;if(null===r){const t=0,n=a.slice(),i=e[s].replValue,r=n[t];return{...e,[s]:{...e[s],replValue:r,replHistory:{...e[s].replHistory,browseIndex:t,records:n,originalValue:i}}}}{const t=r+1,n=a[t];return{...e,[s]:{...e[s],replValue:n,replHistory:{...e[s].replHistory,browseIndex:t}}}}case k.e:return{...e,[s]:{...e[s],execTime:t.payload.execTime}};case k.g:return{...e,[s]:{...e[s],sideContentHeight:t.payload.height}};case k.h:return{...e,[s]:{...e[s],stepLimit:t.payload.stepLimit}};case k.k:return{...e,[s]:{...e[s],replValue:""}};case k.m:return{...e,[s]:{...e[s],output:e[s].output.slice(0,-1)}};case k.l:return{...e,[s]:{...e[s],output:[]}};case k.n:return{...e,[s]:{...e[s],context:Object(A.a)(t.payload.library.external.symbols,s,t.payload.library.variant),globals:t.payload.library.globals,externalLibrary:t.payload.library.external.name}};case k.z:let o;return n=e[s].output.concat(t.payload),o=""!==t.payload.value?[t.payload.value].concat(e[s].replHistory.records):e[s].replHistory.records,o.length>_.b.maxBrowseIndex&&o.pop(),{...e,[s]:{...e[s],output:n,replHistory:{...e[s].replHistory,records:o}}};case k.f:return{...e,[s]:{...e[s],externalLibrary:t.payload.newExternal}};case S.k:if(i=e[s].output[e[s].output.length-1],void 0===i||"running"!==i.type)n=e[s].output.concat({type:"running",consoleLogs:[...t.payload.logString]});else{const a={type:i.type,consoleLogs:i.consoleLogs.concat(t.payload.logString)};n=e[s].output.slice(0,-1),n.push(a)}return{...e,[s]:{...e[s],output:n}};case l.a:const d=e.playground;return{...c.l,playground:d};case k.o:return{...e,[s]:{...e[s],isRunning:!0,isDebugging:!1}};case k.q:return{...e,[s]:{...e[s],isRunning:!0}};case S.h:const u=e[s].context.executionMethod,h={type:t.payload.type,value:"interpreter"===u?t.payload.value:Object(v.stringify)(t.payload.value)};return i=e[s].output.slice(-1)[0],n=void 0!==i&&"running"===i.type?e[s].output.slice(0,-1).concat({consoleLogs:i.consoleLogs,...h}):e[s].output.concat({consoleLogs:[],...h}),{...e,[s]:{...e[s],output:n,isRunning:!1}};case S.j:return{...e,[s]:{...e[s],editorTestcases:e[s].editorTestcases.map(((e,s)=>s===t.payload.index?{...e,result:t.payload.value,errors:void 0}:e)),isRunning:!1}};case S.i:return{...e,[s]:{...e[s],editorTestcases:e[s].editorTestcases.map(((e,s)=>s===t.payload.index?{...e,result:void 0,errors:t.payload.value}:e))}};case S.g:return i=e[s].output.slice(-1)[0],n=void 0!==i&&"running"===i.type?e[s].output.slice(0,-1).concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:i.consoleLogs}):e[s].output.concat({type:t.payload.type,errors:t.payload.errors,consoleLogs:[]}),{...e,[s]:{...e[s],output:n,isRunning:!1,isDebugging:!1}};case S.f:return{...e,[s]:{...e[s],isRunning:!1,isDebugging:!1}};case S.e:return{...e,[s]:{...e[s],isRunning:!1,isDebugging:!0}};case S.d:return{...e,[s]:{...e[s],isRunning:!0,isDebugging:!1}};case S.c:return{...e,[s]:{...e[s],isRunning:!1,isDebugging:!1}};case k.x:return{...e,[s]:{...e[s],editorTestcases:e[s].editorTestcases.map(((e,s)=>s===t.payload.index?{...e,result:void 0,errors:void 0}:e))}};case k.y:return{...e,[s]:{...e[s],...Object(c.b)(s),...t.payload.workspaceOptions}};case k.K:return{...e,[s]:{...e[s],...t.payload.workspaceOptions}};case E.a:return{...e,[s]:{...e[s],editorSessionId:t.payload.editorSessionId}};case x.b:return{...e,[s]:{...e[s],isEditorReadonly:t.payload.isEditorReadonly}};case E.b:return{...e,[s]:{...e[s],sharedbConnected:t.payload.connected}};case k.A:return{...e,[s]:{...e[s],isEditorAutorun:!e[s].isEditorAutorun}};case k.B:return"playground"===s||"sicp"===s?{...e,[s]:{...e[s],usingSubst:t.payload.usingSubst}}:e;case k.D:return{...e,assessment:{...e.assessment,currentAssessment:t.payload.assessmentId,currentQuestion:t.payload.questionId}};case k.E:return{...e,grading:{...e.grading,currentSubmission:t.payload.submissionId,currentQuestion:t.payload.questionId}};case k.C:const p=e[s].activeEditorTabIndex;if(null===p)return e;const g=[...e[s].editorTabs];return g[p]={...g[p],...t.payload.activeEditorTabOptions},{...e,[s]:{...e[s],editorTabs:g}};case k.F:return{...e,[s]:{...e[s],editorTabs:[{...e[s].editorTabs[0],breakpoints:t.payload.breakpoints}]}};case k.G:return{...e,[s]:{...e[s],editorTabs:[{...e[s].editorTabs[0],value:t.payload.newEditorValue}]}};case S.l:return{...e,[s]:{...e[s],editorTabs:[{...e[s].editorTabs[0],highlightedLines:t.payload.highlightedLines}]}};case k.t:return{...e,[s]:{...e[s],editorTabs:[{...e[s].editorTabs[0],newCursorPosition:t.payload.cursorPosition}]}};case k.I:return{...e,[s]:{...e[s],replValue:t.payload.newReplValue}};case k.H:return{...e,[s]:{...e[s],hasUnsavedChanges:t.payload.hasUnsavedChanges}};case k.J:return{...e,playground:{...e.playground,context:{...e.playground.context,chapter:t.payload.sublang.chapter,variant:t.payload.sublang.variant}}};case w.a:return{...e,[s]:{...e[s],debuggerContext:{...e[s].debuggerContext,result:t.payload.result,lastDebuggerResult:t.payload.lastDebuggerResult,code:t.payload.code,context:t.payload.context,workspaceLocation:t.payload.workspaceLocation}}};default:return e}},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.e;return e};var I=s(90),L=s(15);const P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a:return c.j;case L.D:return{...e,githubAssessment:t.payload};case L.E:return{...e,githubOctokitObject:{octokit:t.payload}};case L.C:return{...e,githubAccessToken:t.payload};case L.F:return{...e,googleUser:t.payload};case L.G:case L.H:case L.A:case L.B:return{...e,...t.payload};case L.z:return{...e,assessmentConfigurations:t.payload};case L.y:return{...e,userCourseRegistrations:t.payload};case L.O:const s=new Map(e.assessments);return s.set(t.payload.id,t.payload),{...e,assessments:s};case L.Q:return{...e,assessmentOverviews:t.payload};case L.X:return{...e,xp:t.payload};case L.N:return{...e,allUserXp:t.payload};case L.T:const n=new Map(e.gradings);return n.set(t.payload.submissionId,t.payload.grading),{...e,gradings:n};case L.U:return{...e,gradingOverviews:t.payload};case L.W:return{...e,notifications:t.payload};case I.f:return{...e,remoteExecutionDevices:t.payload};case I.g:return{...e,remoteExecutionSession:t.payload};case L.x:return{...e,githubOctokitObject:{octokit:void 0},githubAccessToken:void 0};default:return e}};var N=()=>Object(r.c)({academy:u,achievement:p,application:R,dashboard:m,playground:f,session:P,workspaces:T}),D=s(2),M=s(18),U=s(8),B=s(52),G=s(10),F=s(71);const H=[[{assessmentConfigId:1,type:"Missions",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:2,type:"Quests",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:3,type:"Paths",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:4,type:"Contests",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:5,type:"Others",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200}],[{assessmentConfigId:1,type:"Mission Impossible",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:2,type:"Data Structures",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200},{assessmentConfigId:3,type:"Algorithm Frenzy",isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:48,earlySubmissionXp:200}]],V=[...[{type:"Missions",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/300/",id:1,maxXp:1e3,openAt:"2038-06-18T05:24:26.026Z",title:"An Odessey to Runes (Duplicate)",shortSummary:"This is a test for the UI of the unopened assessment overview. It links to the mock Mission 0",status:M.a.not_attempted,story:"mission-1",xp:0,gradingStatus:M.c.none}],...[{type:"Missions",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/300/",id:1,maxXp:1e3,openAt:"2018-06-18T05:24:26.026Z",title:"An Odessey to Runes",shortSummary:"\n  *Lorem ipsum* dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor\n  incididunt ut labore et dolore magna aliqua.\n  \n  ```\n  const a = 5;\n  ```\n  \n  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium\n  _doloremque laudantium_, totam rem aperiam, eaque ipsa quae ab illo inventore\n  [veritatis et quasi architecto](google.com) beatae vitae dicta sunt\n  `explicabo`.\n  \n  ",status:M.a.attempted,story:"mission-1",xp:1,gradingStatus:M.c.none},{type:"Missions",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=World&font=lobster",id:2,maxXp:1e3,openAt:"2018-07-18T05:24:26.026Z",title:"The Secret to Streams",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:M.a.attempting,story:"mission-2",xp:2,gradingStatus:M.c.none},{type:"Quests",isManuallyGraded:!0,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=Hello",id:3,maxXp:1e3,openAt:"2018-07-18T05:24:26.026Z",title:"A sample Sidequest",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:M.a.not_attempted,story:"sidequest-2.1",xp:3,gradingStatus:M.c.none},{type:"Paths",isManuallyGraded:!0,closeAt:"2069-04-20T01:23:45.111Z",coverImage:"https://fakeimg.pl/700x400/417678,64/?text=%E3%83%91%E3%82%B9&font=noto",id:6,maxXp:200,openAt:"2018-01-01T00:00:00.000Z",title:"Basic logic gates",shortSummary:"This mock path serves as a demonstration of the support provided for mock programming path functionality.",status:M.a.not_attempted,story:null,xp:0,gradingStatus:M.c.excluded},{type:"Others",isManuallyGraded:!1,closeAt:"2048-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/?text=Hello",id:5,maxXp:1e3,openAt:"2018-07-18T05:24:26.026Z",title:"A sample Practical",shortSummary:"Once upon a time, Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin nec vulputate sapien. Fusce vel lacus fermentum, efficitur ipsum.",status:M.a.not_attempted,story:"sidequest-2.1",xp:3,gradingStatus:M.c.none,private:!0}],...[{type:"Missions",isManuallyGraded:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000/000",id:4,maxXp:1e3,openAt:"2007-07-18T05:24:26.026Z",title:"A closed Mission",shortSummary:"This is a test for the grading status tooltip when the assessment is partially graded (undergoing manual grading). It should render as an orange clock.",status:M.a.submitted,story:"mission-3",xp:800,gradingStatus:M.c.grading},{type:"Quests",isManuallyGraded:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000,128/000,255",id:5,maxXp:1e3,openAt:"2007-07-18T05:24:26.026Z",title:"Closed (not graded) Sidequest",shortSummary:"This is a test for the grading status tooltip when the assessment is not graded. It should render as a red cross.",status:M.a.submitted,story:null,xp:500,gradingStatus:M.c.none},{type:"Quests",isManuallyGraded:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000,128/000,255",id:5,maxXp:500,openAt:"2007-07-18T05:24:26.026Z",title:"Closed (fully graded) Sidequest",shortSummary:"This is a test for the grading status tooltip when the assessment is fully graded. It should render as a green tick. This sidequest links to the mock Sidequest 4.",status:M.a.submitted,story:null,xp:150,gradingStatus:M.c.graded},{type:"Quests",isManuallyGraded:!0,closeAt:"2008-06-18T05:24:26.026Z",coverImage:"https://fakeimg.pl/350x200/ff0000/000",id:5,maxXp:0,openAt:"2007-07-18T05:24:26.026Z",title:"Ungraded assessment",shortSummary:"This is a test for the grading status tooltip when the assessment does not require manual grading (e.g. paths and contests). It should render as a blue disable sign. This sidequest links to the mock Sidequest 4.",status:M.a.submitted,story:null,xp:100,gradingStatus:M.c.excluded}]],W={external:{name:F.a.NONE,symbols:[]},globals:[]},q=[{autogradingResults:[],answer:null,content:"\n  This question has an id of `0`.\n  \n  ```\n  What's your favourite dinner food?\n  ```\n  ",id:0,library:W,prepend:'const pizza = "pizza";\n  const sushi = "sushi";\n  const chickenrice = "chicken rice";',postpend:"// This is a mock Postpend! You shouldn't be able to see me!",testcases:[{type:M.f.public,program:"answer();",score:1,answer:'"pizza"'},{type:M.f.public,program:"answer();",score:1,answer:'"sushi"'},{type:M.f.public,program:"answer();",score:1,answer:'"chicken rice"'}],solutionTemplate:"function answer() {\n      // Write something here!\n  }\n  ",type:"programming",xp:0,maxXp:2,blocking:!1},{autogradingResults:[],answer:"function areaOfCircle(x) {\n      return square(x) * pi;\n  }\n  \n  function volumeOfSphere(x) {\n      return 4 / 3 * cube(x) * pi;\n  }",content:"Hello and welcome to this assessment! This is the 1st question.",id:1,library:W,prepend:"const square = x => x * x;\n  const cube = x => x * x * x;\n  const pi = 3.1415928;",postpend:"",testcases:[{type:M.f.public,program:"areaOfCircle(5);",score:1,answer:"78.53982"},{type:M.f.public,program:"volumeOfSphere(5);",score:1,answer:"523.5988"}],solutionTemplate:"function areaOfCircle(x) {\n      // return area of circle\n  }\n  \n  function volumeOfSphere(x) {\n      // return volume of sphere\n  }",type:"programming",xp:0,maxXp:2,blocking:!1},{answer:3,content:"This is the 3rd question. Oddly enough, it is an ungraded MCQ question that uses the binary tree library! Option C has a null hint!",choices:[{content:"**Option** `A`",hint:"_hint_ A is `here`"},{content:"### B",hint:"hint B"},{content:"C",hint:null},{content:"D",hint:"hint D"}],id:2,library:W,type:"mcq",solution:0,xp:0,maxXp:2,blocking:!1},{answer:3,content:"This is the 4th question. Oddly enough, it is a graded MCQ question that uses the binary tree library!",choices:[{content:"A",hint:null},{content:"B",hint:null},{content:"C",hint:null},{content:"D",hint:null}],id:3,library:W,type:"mcq",solution:void 0,xp:0,maxXp:2,blocking:!1},{autogradingResults:[],answer:null,content:"You have reached the last question! Have some fun with the tone matrix...",id:4,library:W,prepend:"",postpend:"",testcases:[],solutionTemplate:"5th question mock solution template",type:"programming",xp:0,maxXp:2,blocking:!1}],$=[{answer:"function fibonacci(n) {\n      if (n <= 2) {\n          return 1;\n      } else {\n          return fibonacci(n-1) + fibonacci(n-2);\n      }\n  }",content:"You can see autograding results!!!",id:0,library:W,prepend:"",postpend:"// This is a mock Postpend! You shouldn't be able to see me!",testcases:[{type:M.f.public,program:"fibonacci(3);",score:1,answer:"2"},{type:M.f.public,program:"fibonacci(4);",score:1,answer:"3"},{type:M.f.public,program:"fibonacci(5);",score:1,answer:"5"}],solutionTemplate:"function fibonacci(n) {\n      // Your answer here\n  }",type:"programming",grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:0,maxXp:2,blocking:!1,comments:"Good job. You are awarded the full marks!\n  \n  ----\n  ## markdown test\n  \n  # header\n  \n  **bold**\n  \n  _italics_\n  \n  * list\n  \n  1. numbered list\n  \n  - [] checkboxes\n  \n  > quote\n  \n      code\n  \n  [link to Source Academy](https://sourceacademy.nus.edu.sg)  \n  \n  ![](image-url-goes-here)",autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}]},{answer:"function recurse(rune, n) {\n      return n <= 1 ? rune : make_cross(recurse(rune, n - 1));\n  }",content:"This is a runes question - there are no testcases nor autograding results.",id:1,library:W,prepend:"",postpend:"",testcases:[],solutionTemplate:"function recurse(rune, n) {\n      // Your answer here\n  }",type:"programming",grader:{name:"some avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:0,maxXp:2,blocking:!1,comments:"You open the Report Card, not knowing what to expect...\n  \n      ## WOW!\n      Amazing grasp of runes. We can now move on to the next assignment.\n      \n      <br/>\n      \n      Robot Dog: `woof`\n      \n      You look at the display of the robot dog.\n      \n          FEED ME\n      1. Bread\n      2. Water\n      \n      <br/>\n      \n      * I am hungry.\n      * I am thirsty.\n      \n      <br/>\n      <br/>\n          \n      New message from **Avenger**!\n      \n      > _Cadet, please meet me at Level X-05, outside the pod bay doors. There is an important mission awaiting us._\n      \n      > _May the [Source](https://sourceacademy.nus.edu.sg) be with you._\n      \n      > Best regards, Avocado A. Avenger\n      \n      #### Upcoming Tasks\n      - [] Meet Avenger Avenger at Level X-05\n      - [] Open the Pod Bay Doors",autogradingResults:[]}],X=[{type:"Missions",id:1,longSummary:"This is the mission briefing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:q,title:"An Odessey to Runes"},{type:"Missions",id:2,longSummary:"This is the mission briefing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:q,title:"The Secret to Streams"},{type:"Quests",id:3,longSummary:"###This is the sidequest briefing.\n  \n  *Lorem ipsum* dolor sit amet, consectetur adipiscing elit.\n  \n  > Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin\n  enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis\n  vestibulum.\n  \n  - Etiam in egestas dolor.\n  - Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum,\n    vel ornare metus turpis sed justo.\n  - Vivamus at tellus sed ex convallis commodo at in lectus.\n  \n  ```\n  Pellentesque\n  pharetra\n  pulvinar\n  sapien\n  ```",missionPDF:"www.google.com",questions:q,title:"A sample Sidequest"},{type:"Missions",id:4,longSummary:"This is the closed mission briefing. The save button should not be there. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas viverra, sem scelerisque ultricies ullamcorper, sem nibh sollicitudin enim, at ultricies sem orci eget odio. Pellentesque varius et mauris quis vestibulum. Etiam in egestas dolor. Nunc consectetur, sapien sodales accumsan convallis, lectus mi tempus ipsum, vel ornare metus turpis sed justo. Vivamus at tellus sed ex convallis commodo at in lectus. Pellentesque pharetra pulvinar sapien pellentesque facilisis. Curabitur efficitur malesuada urna sed aliquam. Quisque massa metus, aliquam in sagittis non, cursus in sem. Morbi vel nunc at nunc pharetra lobortis. Aliquam feugiat ultricies ipsum vel sollicitudin. Vivamus nulla massa, hendrerit sit amet nibh quis, porttitor convallis nisi. ",missionPDF:"www.google.com",questions:$,title:"A Closed Mission"},{type:"Quests",id:5,longSummary:"This is the closed sidequest briefing. The save button should not exist. This is a placeholder sidequest for testing rendering of grading statuses.",missionPDF:"www.google.com",questions:$,title:"A Closed Sidequest"},{type:"Paths",id:6,longSummary:"### Basic logic gates\n  \n  This path is intended to demonstrate concepts from the lecture **Logic Circuits**. You are strongly encouraged to attempt this path to check your understanding, prior to the next Studio session. For this, you will be granted a small amount of XP!\n  \n  The path comprises 4 questions and is fully autograded and guided, and there are **no private test cases** - there will be no manual review by default. Please consult your Avenger if you require assistance!</TEXT>",missionPDF:"www.google.com",questions:[{answer:null,content:"As a recap: which of the following is not a valid logic gate?",choices:[{content:"XOR gate",hint:"This is the exclusive-OR gate!"},{content:"IF gate",hint:"Correct!"},{content:"AND gate",hint:"This logic gate exists!"},{content:"OR gate",hint:"This logic gate exists!"}],id:0,library:W,type:"mcq",solution:1,xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,content:"An AND gate is a digital logic gate that implements logical conjunction on its inputs. It returns a single output that is HIGH (active) iff all the inputs to the AND gate are HIGH (active).\n  \n  In this question, let us model an AND gate as a function, and treat HIGH (active) inputs as the boolean value `true` and LOW (inactive) inputs as the boolean value `false`.\n  \n  As an AND gate is not restricted to exactly two inputs, our function shall be the same. Implement the function `AND(inputs)` which takes in the list `inputs` (a list of boolean values), and returns the output of the AND gate as a boolean. You may assume the list `inputs` is of minimum length 2.\n  \n  This question makes use of the sentinel function method to throw custom errors for each testcase.",id:1,library:W,prepend:"const OR = (x, y) => x || y;",postpend:"\n  const __AND = (xs) => {\n    if (AND(list(true, true)) === undefined) {\n      error('Your function is empty!');\n    } else {}\n    \n    const result = AND(xs);\n  \n    if (!is_boolean(result)) {\n      error('Your function does not return a boolean!');\n    } else {}\n    \n    if (equal(xs, list(true, false)) && result) {\n      error('Check the truth table for an AND gate again!');\n    } else if (equal(xs, list(true, true, false)) && result) {\n      error('Are you using all inputs in the list?');\n    } else if (equal(xs, list(true, true, true)) && !result) {\n      error('Are you sure your base case is correct?');\n    } else if (AND(list(true, true)) === AND(list(false, false))) {\n      error('Oi! Do not hardcode values!');\n    } else {\n      return result;\n    }\n  };",testcases:[{type:M.f.public,program:"__AND(list(true, false));",score:0,answer:"false"},{type:M.f.public,program:"__AND(list(true, true, false));",score:0,answer:"false"},{type:M.f.public,program:"__AND(list(true, OR(true, false), OR(true, true)));",score:0,answer:"true"},{type:M.f.opaque,program:"__AND(list(true, OR(false, true), AND(list(true, false)), false));",score:0,answer:"false"},{type:M.f.opaque,program:"__AND(list(true, OR(true, false), OR(true, AND(list(false, true))), true));",score:0,answer:"true"}],solutionTemplate:"function AND(inputs) {\n      // Your answer here!\n  }",type:"programming",xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,content:"The XOR (exclusive-OR) gate is a digital logic gate that accepts two inputs and returns a single output that is HIGH (active) iff one of the inputs are HIGH (active), but not both.\n  \n  In this question, let us model the XOR gate as a function. Implement the function `XOR(x, y)` which takes two boolean inputs `x` and `y` and which returns the output of the XOR gate as a boolean.\n  \n  This question makes use of the wrapping container method to throw custom errors for each testcase.",id:2,library:W,prepend:"",postpend:"\n  const __XOR = (x, y) => {\n    if (XOR(false, false) === undefined) {\n      error('Your function is empty!');\n    } else {}\n    \n    const result = XOR(x, y);\n  \n    if (!is_boolean(result)) {\n      error('Your function does not return a boolean!');\n    } else {}\n    \n    if (((x && !y) || (y && !x)) && !result) {\n      error('Check your truth tables!');\n    } else if (XOR(false, false) === XOR(false, true)) {\n      error('Oi! Do not hardcode values!');\n    } else {\n      return result;\n    }\n  };",testcases:[{type:M.f.public,program:"__XOR(true, false);",score:0,answer:"true"},{type:M.f.public,program:"__XOR(false, true);",score:0,answer:"true"},{type:M.f.opaque,program:"__XOR(true, XOR(true, false));",score:0,answer:"false"}],solutionTemplate:"function XOR(x, y) {\n      // Your answer here!\n  }",type:"programming",xp:0,maxXp:0,blocking:!1},{autogradingResults:[],answer:null,content:"The NOR logic gate is special in that it is an _universal logic gate_, that is to say, they can be composed to form any other logic gate.\n  \n  Implement the AND logic gate **using ONLY the NOR logic gate**, as the `NOR_AND(x, y)` function that takes in two booleans as input.\n  \n  The `NOR` function modeled after a NOR gate is provided for you - it accepts two boolean values and returns `true` iff both inputs are `false`.",id:3,library:W,prepend:"\n  let counter = 0;\n  const NOR = (x, y) => {\n    counter = counter + 1;\n    return !(x || y);\n  };",postpend:"\n  const __NOR_AND = (x, y) => {\n    if (NOR_AND(false, false) === undefined) {\n      error('Your function is empty!');\n    } else {}\n    \n    counter = 0;\n    const result = NOR_AND(x, y);\n  \n    if (!is_boolean(result)) {\n      error('Your function does not return a boolean!');\n    } else {}\n    \n    if (!x && y && result) {\n      error('Check your truth tables!');\n    } else if (x && y && !result && counter > 0) {\n      error('Nope! Try again :)');\n    } else if (x && y && !result) {\n      error('...You did not use NOR and still got it wrong!');\n    } else if (x && y && result && counter !== 3) {\n      error('Did you use NOR in your solution? >:(');\n    } else if (x && !y && counter !== 6) {\n      error('Incorrect number of calls.');\n    } else {\n      return result;\n    }\n  };",testcases:[{type:M.f.public,program:"__NOR_AND(false, true);",score:0,answer:"false"},{type:M.f.public,program:"__NOR_AND(true, true);",score:0,answer:"true"},{type:M.f.opaque,program:"__NOR_AND(true, NOR_AND(false, true));",score:0,answer:"false"}],solutionTemplate:"function NOR_AND(x, y) {\n      // Your answer here!\n  }",type:"programming",xp:0,maxXp:0,blocking:!1}],title:"A sample guided path"},{type:"Others",id:7,title:"A sample contest voting assessment",longSummary:"Vote for your favourite contest entries here!",missionPDF:"www.google.com",questions:[{id:0,type:"voting",content:"Sample Contest Voting Question",xp:0,maxXp:0,answer:[],prepend:"",postpend:"",contestEntries:[{submission_id:1,answer:{code:"display('voting test')"}},{submission_id:2,answer:{code:"function voting_test() { return true; }"}}],contestLeaderboard:[{submission_id:1,student_name:"student_1",answer:{code:"display('leaderboard test')"}},{submission_id:2,student_name:"student_2",answer:{code:"function leaderboard_test() { return true; }"}}],library:W,blocking:!1}]}];var z=s(103);const Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a.Staff;return t},K={userId:123,name:"DevAdmin",courses:[{courseId:1,courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",role:c.a.Admin,viewable:!0},{courseId:2,courseName:"CS2040S Data Structures and Algorithms (AY20/21 Sem 2)",courseShortName:"CS2040S",role:c.a.Admin,viewable:!1},{courseId:3,courseName:"CS2030S Programming Methodology II (AY21/22 Sem 1)",courseShortName:"CS2030S",role:c.a.Staff,viewable:!1}]},Q=[{courseRegId:1,role:c.a.Admin,group:"1F",gameState:{},courseId:1,xp:0,story:{story:"mission-1",playStory:!0},agreedToResearch:!0},{courseRegId:2,role:c.a.Student,group:"1F",gameState:{},courseId:2,xp:0,story:{story:"mission-1",playStory:!0},agreedToResearch:!0}],J=[{courseRegId:1,courseId:1,name:"DevAdmin",username:"test/admin",role:c.a.Admin},{courseRegId:3,courseId:1,name:"Dummy student",username:"test/student",role:c.a.Student},{courseRegId:4,courseId:1,name:"Dummy staff",username:"test/staff",role:c.a.Staff}],Z=[{courseName:"CS1101S Programming Methodology (AY20/21 Sem 1)",courseShortName:"CS1101S",viewable:!0,enableGame:!1,enableAchievements:!0,enableSourcecast:!0,sourceChapter:n.Chapter.CLANG,sourceVariant:n.Variant.DEFAULT,moduleHelpText:"",assetsPrefix:""},{courseName:"CS2040S Data Structures and Algorithms (AY20/21 Sem 2)",courseShortName:"CS2040S",viewable:!0,enableGame:!1,enableAchievements:!1,enableSourcecast:!1,sourceChapter:n.Chapter.CLANG,sourceVariant:n.Variant.DEFAULT,moduleHelpText:"Help Text!",assetsPrefix:""}],ee=[{id:1,type:z.a.deadline,assessment_id:3,assessment_type:"Quests",assessment_title:"The Secret to Streams"},{id:2,type:z.a.autograded,assessment_id:4,assessment_type:"Missions",assessment_title:"A Closed Mission"},{id:3,type:z.a.graded,assessment_id:4,assessment_type:"Missions",assessment_title:"A Closed Mission"},{id:4,type:z.a.new,assessment_id:6,assessment_type:"Paths",assessment_title:"Basic Logic"},{id:5,type:z.a.new,assessment_id:7,assessment_type:"Missions",assessment_title:"Symphony of the Winds"},{id:6,type:z.a.submitted,submission_id:1,assessment_type:"Missions",assessment_title:"Mission 0"},{id:7,type:z.a.submitted,submission_id:2,assessment_type:"Missions",assessment_title:"Mission 1"},{id:8,type:z.a.submitted,submission_id:3,assessment_type:"Missions",assessment_title:"Mission 0"}],te=[{xpAdjustment:0,assessmentType:"Missions",assessmentId:0,assessmentName:"Mission 0 ",currentXp:69,xpBonus:10,initialXp:69,maxXp:100,studentId:0,studentName:"Al Gorithm",submissionId:1,submissionStatus:"submitted",groupName:"1D",gradingStatus:"graded",questionCount:6,gradedCount:6},{xpAdjustment:-2,assessmentType:"Missions",assessmentId:1,assessmentName:"Mission 1",currentXp:-2,xpBonus:12,initialXp:0,maxXp:400,studentId:0,studentName:"Dee Sign",submissionId:2,submissionStatus:"submitted",groupName:"1F",gradingStatus:"grading",questionCount:6,gradedCount:2},{xpAdjustment:4,assessmentType:"Missions",assessmentId:0,assessmentName:"Mission 0",currentXp:1e3,xpBonus:12,initialXp:996,maxXp:1e3,studentId:1,studentName:"May Trix",submissionId:3,submissionStatus:"submitted",groupName:"1F",gradingStatus:"none",questionCount:6,gradedCount:0}],se=[{question:{answer:"function remainder(n, d) {\n  return (n - d) < 0 ? n : remainder(n - d, d);\n}",content:"\nHello and welcome to this assessment! This is the *0th question*.\n\n```\n>>> import this\n```\n",prepend:"// THIS IS A PREPEND",postpend:"// THIS IS A POSTPEND",testcases:[{type:M.f.public,program:"remainder(12, 7);",score:1,answer:"5"},{type:M.f.public,program:"remainder(6, 1);",score:2,answer:"0"},{type:M.f.opaque,program:"remainder(-15, 6);",score:2,answer:"-3"},{type:M.f.opaque,program:"remainder(17, 23) === 17;",score:2,answer:"true"}],id:0,library:W,solutionTemplate:"0th question mock solution template",solution:"This is how the 0th question is solved. [7 points]\n\nfunction remainder(n, d) {\n  return n % d;\n}",type:"programming",maxXp:1e3,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"dummyErrorType"}]},{resultType:"error",errors:[{errorType:"systemError",errorMessage:"Cannot read property 'getUniformLocation' of null"}]},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:2,location:"student",errorLine:"return (n - d) < 0 ? n : remainder(n - d, d)",errorExplanation:"Missing semicolon at the end of statement"}]}],blocking:!1},grade:{xpAdjustment:0,xp:0,comments:"Good job. You are awarded the full marks!\n\n----\n## markdown test\n\n# header\n\n**bold**\n\n_italics_\n\n* list\n\n1. numbered list\n\n- [] checkboxes\n\n> quote\n\n    code\n\n[link to Source Academy](https://sourceacademy.nus.edu.sg)\n\n![](image-url-goes-here)\n      ",grader:{name:"HARTIN MENZ",id:100},gradedAt:"2019-08-16T13:26:32+00:00"},student:{name:"Al Gorithm",id:0}},{question:{prepend:"",postpend:"",testcases:[],answer:"This student's answer to the 1st question",content:"Hello and welcome to this assessment! This is the 1st question.",id:1,library:W,solutionTemplate:"1st question mock solution template",solution:null,type:"programming",maxXp:200,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}],blocking:!1},grade:{xpAdjustment:0,xp:100,comments:"You open the Report Card, not knowing what to expect...\n\n## WOW!\nAmazing grasp of runes. We can now move on to the next assignment.\n\n<br/>\n\nRobot Dog: `woof`\n\nYou look at the display of the robot dog.\n\n    FEED ME\n1. Bread\n2. Water\n\n<br/>\n\n* I am hungry.\n* I am thirsty.\n\n<br/>\n<br/>\n\nNew message from **Avenger**!\n\n> _Cadet, please meet me at Level X-05, outside the pod bay doors. There is an important mission awaiting us._\n\n> _May the [Source](https://sourceacademy.nus.edu.sg) be with you._\n\n> Best regards, Avocado A. Avenger\n\n#### Upcoming Tasks\n- [] Meet Avenger Avenger at Level X-05\n- [] Open the Pod Bay Doors\n      "},student:{name:"Al Gorithm",id:0}},{question:{prepend:"",postpend:"",testcases:[],answer:3,solution:2,content:"Hello and welcome to this assessment! This is the 2nd question. Oddly enough, it is an MCQ question!",choices:[{content:"A",hint:"hint A"},{content:"B",hint:"hint B"},{content:"C",hint:"hint C"},{content:"D",hint:"hint D"}],id:2,library:W,type:"mcq",maxXp:100,grader:{name:"avenger",id:1},gradedAt:"2038-06-18T05:24:26.026Z",xp:1,autogradingResults:[{resultType:"pass"},{resultType:"fail",expected:"8",actual:"5"},{resultType:"error",errors:[{errorType:"timeout"},{errorType:"syntax",line:1,location:"student",errorLine:"function fibonacci(n) {",errorExplanation:"Just kidding!"}]}],blocking:!1},grade:{xpAdjustment:0,xp:50},student:{name:"Al Gorithm",id:0}}],ne={cols:["group","avenger","ungradedMissions","submittedMissions","ungradedQuests","submittedQuests"],rows:[{group:"Mock Group 1",avenger:"John",ungradedMissions:123,submittedMissions:200,ungradedQuests:100,submittedQuests:117},{group:"Mock Group 2",avenger:"Molly",ungradedMissions:1232,submittedMissions:205430,ungradedQuests:345,submittedQuests:11547},{group:"Mock Group 3",avenger:"Lenny",ungradedMissions:1532,submittedMissions:22200,ungradedQuests:134500,submittedQuests:6777}]};function*ie(){yield Object(D.h)(L.j,(function*(t){yield Object(D.d)(U.a.setTokens({accessToken:"accessToken",refreshToken:"refreshToken"})),yield e();const s=yield Object(D.f)((e=>e.session.courseId));yield B.a.push(`/courses/${s}`)}));const e=function*(){const e={...K},t={...Q[0]},s={...Z[0]},n=[...H[0]],i={chapter:s.sourceChapter,variant:s.sourceVariant,displayName:Object(c.o)(s.sourceChapter,s.sourceVariant)};yield Object(D.d)(U.a.setUser(e)),yield Object(D.d)(U.a.setCourseRegistration(t)),yield Object(D.d)(U.a.setCourseConfiguration(s)),yield Object(D.d)(U.a.setAssessmentConfigurations(n)),yield Object(D.d)(U.a.updateSublanguage(i))};yield Object(D.h)(L.q,e),yield Object(D.h)(L.k,(function*(){const e={...Z[0]};yield Object(D.d)(U.a.setCourseConfiguration(e))})),yield Object(D.h)(M.b,(function*(){yield Object(D.d)(U.a.updateAssessmentOverviews([...V]))})),yield Object(D.h)(L.f,(function*(e){const t=e.payload,s=X[t-1];yield Object(D.d)(U.a.updateAssessment({...s}))})),yield Object(D.h)(L.I,(function*(e){const t=e.payload.id,s=e.payload.answer,n=yield Object(D.f)((e=>e.workspaces.assessment.currentAssessment)),i=yield Object(D.f)((e=>e.session.assessments.get(n))),a=i.questions.slice().map((e=>(e.id===t&&(e.answer=s),e))),r={...i,questions:a};return yield Object(D.d)(U.a.updateAssessment(r)),yield Object(D.a)(G.d,"Saved!",1e3),yield Object(D.d)(U.a.updateHasUnsavedChanges("assessment",!1))})),yield Object(D.h)(M.e,(function*(e){const t=e.payload,s=(yield Object(D.f)((e=>e.session.assessmentOverviews))).map((e=>e.id===t?{...e,status:M.a.submitted}:e));return yield Object(D.a)(G.d,"Submitted!",2e3),yield Object(D.d)(U.a.updateAssessmentOverviews(s))})),yield Object(D.h)(L.m,(function*(e){const t=yield Object(D.f)((e=>e.session.accessToken)),s=e.payload,n=yield Object(D.a)((()=>((e,t)=>{const s=[c.a.Admin,c.a.Staff],n=Y(e);return null!==n&&s.includes(n)?t?[te[0]]:te.sort(((e,t)=>e.assessmentId!==t.assessmentId?t.assessmentId-e.assessmentId:t.submissionId-e.submissionId)):null})(t,s)));null!==n&&(yield Object(D.d)(U.a.updateGradingOverviews([...n])))})),yield Object(D.h)(L.l,(function*(e){const t=e.payload,s=yield Object(D.f)((e=>e.session.accessToken)),n=yield Object(D.a)((()=>((e,t)=>{const s=[c.a.Admin,c.a.Staff],n=Y(e);return null!==n&&s.includes(n)?se:null})(s)));null!==n&&(yield Object(D.d)(U.a.updateGrading(t,[...n])))})),yield Object(D.h)(L.M,(function*(e){const{submissionId:t}=e.payload,s=yield Object(D.f)((e=>e.session.gradingOverviews||[]));if(-1===s.findIndex((e=>e.submissionId===t&&"submitted"===e.submissionStatus)))return void(yield Object(D.a)(G.e,"400: Bad Request"));const n=s.map((e=>e.submissionId===t?{...e,submissionStatus:"attempted"}:e));yield Object(D.a)(G.d,"Unsubmit successful!",1e3),yield Object(D.d)(U.a.updateGradingOverviews(n))}));const t=function*(e){if((yield Object(D.f)((e=>e.session.role)))===c.a.Student)return yield Object(D.a)(G.e,"Only staff can submit answers.");const{submissionId:t,questionId:s,xpAdjustment:n,comments:i}=e.payload,a=(yield Object(D.f)((e=>e.session.gradings.get(t)))).slice().map((e=>(e.question.id===s&&(e.grade={xpAdjustment:n,xp:e.grade.xp,comments:i}),e)));yield Object(D.d)(U.a.updateGrading(t,a)),yield Object(D.a)(G.d,"Submitted!",1e3)};yield Object(D.h)(L.K,t),yield Object(D.h)(L.L,(function*(e){const{submissionId:s}=e.payload;yield*t(e);const[n,i]=yield Object(D.f)((e=>[e.workspaces.grading.currentQuestion,e.session.courseId]));yield B.a.push(`/courses/${i}/grading/${s}/${(n||0)+1}`)})),yield Object(D.h)(L.n,(function*(e){yield Object(D.d)(U.a.updateNotifications([...ee]))})),yield Object(D.h)(L.a,(function*(e){const t=e.payload.withFilter,s=yield Object(D.f)((e=>e.session.notifications));let n=s;if(t&&(n=t(s)),0===n.length)return;const i=n.map((e=>e.id)),a=s.filter((e=>!i.includes(e.id)));yield Object(D.d)(U.a.updateNotifications(a))})),yield Object(D.h)(L.V,(function*(e){const{courseId:t}=e.payload,s=t-1,n={...Z[s]};yield Object(D.d)(U.a.setCourseConfiguration(n)),yield Object(D.d)(U.a.setAssessmentConfigurations([...H[s]])),yield Object(D.d)(U.a.setCourseRegistration({...Q[s]})),yield Object(D.d)(U.a.updateSublanguage({chapter:n.sourceChapter,variant:n.sourceVariant,displayName:Object(c.o)(n.sourceChapter,n.sourceVariant)})),yield Object(D.a)(G.d,`Switched to ${n.courseName}!`,5e3)})),yield Object(D.h)(L.R,(function*(e){const t=e.payload;yield Object(D.d)(U.a.setCourseConfiguration(t)),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield Object(D.h)(L.P,(function*(e){const t=e.payload;yield Object(D.d)(U.a.setAssessmentConfigurations(t)),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield Object(D.h)(L.d,(function*(e){const t=[...J];yield Object(D.d)(U.a.setAdminPanelCourseRegistrations(t))})),yield Object(D.h)(g.a,(function*(){yield Object(D.d)(U.a.updateGroupGradingSummary({...ne}))}))}var ae=s(294),re=s(171),oe=s(75);function ce(e,t){if(e.meta.type===h.l.EVENT&&(s=e.meta,!Object(oe.a)(s.deadline)&&Object(oe.b)(s.release)&&Object(oe.c)(s.observeFrom,s.observeTo)))for(let n=0;n<e.meta.eventNames.length;n++)for(let s=0;s<t.length;s++)if(e.meta.eventNames[n]===t[s])return!0;var s;return!1}var le=s(30),de=s(1313);function ue(e){de.a(e),console.error(e)}function he(e){return e&&"function"===typeof e.next&&"function"===typeof e.throw}function pe(e,t){function*s(){try{const e=t(...arguments);he(e)&&(yield*e)}catch(e){ue(e)}}for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return Object(D.h)(e,s,...i)}function ge(e,t){function*s(){try{const e=t(...arguments);he(e)&&(yield*e)}catch(e){ue(e)}}for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return Object(D.i)(e,s,...i)}function me(){return Object(D.f)((e=>({accessToken:e.session.accessToken,refreshToken:e.session.refreshToken})))}function*be(){yield pe(h.c,(function*(e){const t=yield me(),s=e.payload;yield Object(D.a)(le.a,s,t)})),yield pe(h.d,(function*(e){const t=yield me(),s=e.payload;yield Object(D.a)(le.b,s,t)})),yield pe(h.g,(function*(){const e=yield me(),t=yield Object(D.a)(le.f,e);t&&(yield Object(D.d)(U.a.saveAchievements(t)))})),yield pe(h.h,(function*(e){const t=yield me(),s=e.payload,n=yield Object(D.a)(le.n,t,s);n&&(yield Object(D.d)(U.a.saveGoals(n)))})),yield pe(h.i,(function*(e){const t=yield me(),s=yield Object(D.a)(le.t,t);s&&(yield Object(D.d)(U.a.saveGoals(s)))})),yield pe(h.j,(function*(e){const t=yield me(),s=yield Object(D.a)(le.h,t);s&&(yield Object(D.d)(U.a.saveUsers(s)))})),yield pe(h.n,(function*(e){const t=yield me(),s=e.payload;yield Object(D.a)(le.Q,s,t)})),yield pe(h.o,(function*(e){const t=yield me(),s=e.payload;yield Object(D.a)(le.S,s,t)})),yield pe(h.u,(function*(e){const t=yield me(),s=e.payload;yield Object(D.a)(le.X,s,t)})),yield pe(h.t,(function*(e){const t=yield me(),{studentCourseRegId:s,progress:n}=e.payload,i=yield Object(D.a)(le.W,s,n,t);i&&i.ok&&(yield Object(D.d)(U.a.getGoals(s)),Object(ae.b)())}));let e=[],t=!1;yield pe(h.a,(function*(s){const n=yield Object(D.f)((e=>e.session.role)),i=yield Object(D.f)((e=>e.session.enableAchievements));n&&i&&!_.b.playgroundOnly&&(e.push(s.payload),!t&&n&&(t=!0,yield Object(D.b)(3e3),t=!1,yield Object(D.d)(U.a.handleEvent(e)),e=[]))})),yield pe(h.m,(function*(e){const t=yield me(),s=yield Object(D.a)(le.f,t);s&&(yield Object(D.d)(U.a.saveAchievements(s)));const n=yield Object(D.a)(le.t,t);if(!n)return;yield Object(D.d)(U.a.saveGoals(n));const i=yield Object(D.f)((e=>e.achievement.achievements)),a=yield Object(D.f)((e=>e.achievement.goals)),r=new re.a(i,a),o=e.payload,c=new Set;o.forEach((e=>{a.filter((t=>ce(t,e))).map((e=>e.uuid)).forEach((e=>{!function(e,t){const s={...t.getGoalProgress(e)};s.count=s.count+1;const n=s.completed;s.completed=s.count>=s.targetCount;const i=[];if(!n&&s.completed){const s=t.getAchievementsByGoal(e);for(const e of s)t.isCompleted(t.getAchievement(e))||i.push(e)}t.modifyGoalProgress(s);for(const a of i){const e=t.getAchievement(a);t.isCompleted(e)&&Object(G.d)("Completed acheivement: "+e.title)}}(e,r),c.add(e)}))}));for(const l of c){if(!(yield Object(D.a)(le.X,r.getGoalProgress(l),t)))return}})),yield pe(h.k,(function*(e){const t=yield me(),s=yield Object(D.a)(le.x,e.payload,t);s&&(yield Object(D.d)(U.a.saveUserAssessmentOverviews(s)))}))}var fe=s(151);function ve(e){const t=_.b.authProviders.get(e);if(!t)return;const s=""===window.location.port?"":`:${window.location.port}`;return`${window.location.protocol}//${window.location.hostname}${s}/login${t.isDefault?"":"?provider="+encodeURIComponent(e)}`}function ye(){return Object(D.f)((e=>({accessToken:e.session.accessToken,refreshToken:e.session.refreshToken})))}function*xe(e){return e&&e.ok?yield Object(D.a)(G.d,"Autograde job queued successfully."):e&&400===e.status?yield Object(D.a)(G.e,"Cannot reautograde non-submitted submission."):yield Object(D.a)(G.e,"Failed to queue autograde job.")}var je=function*(){yield pe(L.j,(function*(e){const{code:t,providerId:s}=e.payload,n=s||([..._.b.authProviders.entries()].find((e=>{let[t,{isDefault:s}]=e;return s}))||[null])[0];if(!n)return yield Object(D.a)(G.e,"Could not log in; invalid provider or no providers configured."),yield B.a.push("/");const i=function(e){const t=_.b.authProviders.get(e);if(t)try{return new URL(t.endpoint).searchParams.get("client_id")||void 0}catch(s){return t.endpoint||void 0}}(n),a=ve(n),r=yield Object(D.a)(le.D,t,n,i,a);if(!r)return yield B.a.push("/");yield Object(D.d)(U.a.setTokens(r));const{user:o,courseRegistration:c,courseConfiguration:l,assessmentConfigurations:d}=yield Object(D.a)(le.w,r);return o?(yield Object(D.d)(U.a.setUser(o)),null===l&&o.courses.length>0&&(yield Object(D.d)(U.a.updateLatestViewedCourse(o.courses[0].courseId))),c&&l&&d?(yield Object(D.d)(U.a.setCourseRegistration(c)),yield Object(D.d)(U.a.setCourseConfiguration(l)),yield Object(D.d)(U.a.setAssessmentConfigurations(d)),yield B.a.push(`/courses/${c.courseId}`)):yield B.a.push("/welcome")):void 0})),yield pe(L.q,(function*(e){const t=yield ye(),{user:s,courseRegistration:n,courseConfiguration:i,assessmentConfigurations:a}=yield Object(D.a)(le.w,t);s&&(yield Object(D.d)(U.a.setUser(s)),null===i&&s.courses.length>0&&(yield Object(D.d)(U.a.updateLatestViewedCourse(s.courses[0].courseId))),n&&i&&a&&(yield Object(D.d)(U.a.setCourseRegistration(n)),yield Object(D.d)(U.a.setCourseConfiguration(i)),yield Object(D.d)(U.a.setAssessmentConfigurations(a))))})),yield pe(L.k,(function*(){const e=yield ye(),{config:t}=yield Object(D.a)(le.l,e);t&&(yield Object(D.d)(U.a.setCourseConfiguration(t)))})),yield pe(M.b,(function*(){const e=yield ye(),t=yield Object(D.a)(le.k,e);t&&(yield Object(D.d)(U.a.updateAssessmentOverviews(t)))})),yield pe(L.e,(function*(){const e=yield ye(),t=yield Object(D.a)(le.g,e);t&&(yield Object(D.d)(U.a.updateAllUserXp(t.all_users_xp)))})),yield pe(L.o,(function*(){const e=yield ye(),t=yield Object(D.a)(le.v,e);t&&(yield Object(D.d)(U.a.updateTotalXp(t.totalXp)))})),yield pe(L.p,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.v,t,s);n&&(yield Object(D.d)(U.a.updateTotalXp(n.totalXp)))})),yield pe(L.f,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.i,s,t);n&&(yield Object(D.d)(U.a.updateAssessment(n)))})),yield pe(L.g,(function*(e){const t=yield ye(),{assessmentId:s,courseRegId:n}=e.payload,i=yield Object(D.a)(le.i,s,t,n);i&&(yield Object(D.d)(U.a.updateAssessment(i)))})),yield pe(L.I,(function*(e){const t=yield ye(),s=e.payload.id,n=e.payload.answer,i=yield Object(D.a)(le.B,s,n,t);if(!i||!i.ok)return yield Object(le.z)(i);yield Object(D.a)(G.d,"Saved!",1e3);const a=yield Object(D.f)((e=>e.workspaces.assessment.currentAssessment)),r=yield Object(D.f)((e=>e.session.assessments.get(a))),o=r.questions.slice().map((e=>e.id===s?{...e,answer:n}:e)),c={...r,questions:o};return yield Object(D.d)(U.a.updateAssessment(c)),yield Object(D.d)(U.a.updateHasUnsavedChanges("assessment",!1))})),yield pe(M.e,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.C,s,t);if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.a)(G.d,"Submitted!",2e3);const i=(yield Object(D.f)((e=>e.session.assessmentOverviews))).map((e=>e.id===s?{...e,status:M.a.submitted}:e));return yield Object(D.d)(U.a.updateAssessmentOverviews(i))})),yield pe(L.m,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.p,t,s);n&&(yield Object(D.d)(U.a.updateGradingOverviews(n)))})),yield pe(L.l,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.o,s,t);n&&(yield Object(D.d)(U.a.updateGrading(s,n)))})),yield pe(L.M,(function*(e){const t=yield ye(),{submissionId:s}=e.payload,n=yield Object(le.J)(s,t);if(!n||!n.ok)return yield Object(le.z)(n);const i=(yield Object(D.f)((e=>e.session.gradingOverviews||[]))).map((e=>e.submissionId===s?{...e,submissionStatus:"attempted"}:e));yield Object(D.a)(G.d,"Unsubmit successful",1e3),yield Object(D.d)(U.a.updateGradingOverviews(i))}));const e=function*(e){if((yield Object(D.f)((e=>e.session.role)))===c.a.Student)return yield Object(D.a)(G.e,"Only staff can submit answers.");const{submissionId:t,questionId:s,xpAdjustment:n,comments:i}=e.payload,a=yield ye(),r=yield Object(le.F)(t,s,n,a,i);if(!r||!r.ok)return yield Object(le.z)(r);yield Object(D.a)(G.d,"Submitted!",1e3);const o=(yield Object(D.f)((e=>e.session.gradings.get(t)))).slice().map((e=>(e.question.id===s&&(e.grade={xpAdjustment:n,xp:e.grade.xp,comments:i}),e)));yield Object(D.d)(U.a.updateGrading(t,o))};yield pe(L.K,e),yield pe(L.L,(function*(t){yield*e(t);const{submissionId:s}=t.payload,[n,i]=yield Object(D.f)((e=>[e.workspaces.grading.currentQuestion,e.session.courseId]));yield B.a.push(`/courses/${i}/grading/${s}/${(n||0)+1}`)})),yield pe(L.w,(function*(e){const t=e.payload,s=yield ye(),n=yield Object(D.a)(le.H,t,s);yield Object(D.a)(xe,n)})),yield pe(L.v,(function*(e){const{submissionId:t,questionId:s}=e.payload,n=yield ye(),i=yield Object(D.a)(le.G,t,s,n);yield Object(D.a)(xe,i)})),yield pe(L.n,(function*(e){const t=yield ye(),s=yield Object(D.a)(le.s,t);yield Object(D.d)(U.a.updateNotifications(s))})),yield pe(L.a,(function*(e){const t=yield ye(),s=e.payload.withFilter,n=yield Object(D.f)((e=>e.session.notifications));let i=n;if(s&&(i=s(n)),0===i.length)return;const a=i.map((e=>e.id)),r=n.filter((e=>!a.includes(e.id)));yield Object(D.d)(U.a.updateNotifications(r));const o=yield Object(D.a)(le.A,t,a);return o&&o.ok?void 0:yield Object(le.z)(o)})),yield pe(O.a,(function*(e){if((yield Object(D.f)((e=>e.session.role)))===c.a.Student)return yield Object(D.a)(G.e,"Only staff can delete sourcecasts.");const t=yield ye(),{id:s}=e.payload,n=yield Object(le.d)(s,t);if(!n||!n.ok)return yield Object(le.z)(n);const i=yield Object(D.a)(le.u,t);i&&(yield Object(D.d)(U.a.updateSourcecastIndex(i,e.payload.workspaceLocation))),yield Object(D.a)(G.d,"Deleted successfully!",1e3)})),yield pe(x.a,(function*(e){const t=yield ye(),s=yield Object(D.a)(le.u,t);s&&(yield Object(D.d)(U.a.updateSourcecastIndex(s,e.payload.workspaceLocation)))})),yield pe(y.d,(function*(e){const[t,s]=yield Object(D.f)((e=>[e.session.role,e.session.courseId]));if(t===c.a.Student)return yield Object(D.a)(G.e,"Only staff can save sourcecasts.");const{title:n,description:i,uid:a,audio:r,playbackData:o}=e.payload,l=yield ye(),d=yield Object(le.I)(n,i,a,r,o,l);if(!d||!d.ok)return yield Object(le.z)(d);yield Object(D.a)(G.d,"Saved successfully!",1e3),yield B.a.push(`/courses/${s}/sourcecast`)})),yield pe(k.i,(function*(e){const t=yield ye(),{sublang:s}=e.payload,n=yield Object(D.a)(le.L,t,{sourceChapter:s.chapter,sourceVariant:s.variant});if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.d)(U.a.setCourseConfiguration({sourceChapter:s.chapter,sourceVariant:s.variant})),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield pe(L.V,(function*(e){const t=yield ye(),{courseId:s}=e.payload,n=yield Object(D.a)(le.N,t,s);if(!n||!n.ok)return yield Object(le.z)(n);const{courseRegistration:i,courseConfiguration:a,assessmentConfigurations:r}=yield Object(D.a)(le.r,t);if(!i||!a||!r)return yield Object(D.a)(G.e,"Failed to load course!"),yield B.a.push("/welcome");yield Object(D.d)(U.a.setCourseConfiguration(a)),yield Object(D.d)(U.a.setAssessmentConfigurations(r)),yield Object(D.d)(U.a.setCourseRegistration(i)),yield Object(D.a)(G.d,`Switched to ${a.courseName}!`,5e3)})),yield pe(L.R,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.L,t,s);if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.d)(U.a.setCourseConfiguration(s)),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield pe(L.h,(function*(){const e=yield ye(),t=yield Object(D.a)(le.j,e);t&&(yield Object(D.d)(U.a.setAssessmentConfigurations(t)))})),yield pe(L.P,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.K,t,s);if(!n||!n.ok)return yield Object(le.z)(n);const i=yield Object(D.a)(le.j,t);i&&(yield Object(D.d)(U.a.setAssessmentConfigurations(i))),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield pe(L.b,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.R,t,s);if(!n||!n.ok)return yield Object(le.z)(n)})),yield pe(L.d,(function*(e){const t=yield ye(),s=yield Object(D.a)(le.y,t);s&&(yield Object(D.d)(U.a.setAdminPanelCourseRegistrations(s)))})),yield pe(d.b,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(D.a)(le.E,t,s);if(!n||!n.ok)return yield Object(le.z)(n);const{user:i,courseRegistration:a,courseConfiguration:r}=yield Object(D.a)(le.w,t);if(!i||!a||!r)return yield Object(G.e)("An error occurred. Please try again.");yield Object(D.d)(U.a.setUser(i)),yield Object(D.d)(U.a.setCourseRegistration({role:c.a.Student}));const o=yield Object(D.a)(le.K,t,[{type:"Missions",assessmentConfigId:-1,isManuallyGraded:!0,displayInDashboard:!0,hoursBeforeEarlyXpDecay:0,earlySubmissionXp:0}],a.courseId);if(!o||!o.ok)return yield Object(le.z)(n);yield Object(D.a)(G.d,"Successfully created your new course!"),yield Object(D.a)([B.a,"push"],`/courses/${a.courseId}`)})),yield pe(d.a,(function*(e){const t=yield ye(),{users:s,provider:n}=e.payload,i=yield Object(D.a)(le.O,t,s,n);if(!i||!i.ok)return yield Object(le.z)(i);yield Object(D.d)(U.a.fetchAdminPanelCourseRegistrations()),yield Object(D.a)(G.d,"Users added!")})),yield pe(L.Y,(function*(e){const t=yield ye(),{courseRegId:s,role:n}=e.payload,i=yield Object(D.a)(le.P,t,s,n);if(!i||!i.ok)return yield Object(le.z)(i);yield Object(D.d)(U.a.fetchAdminPanelCourseRegistrations()),yield Object(D.a)(G.d,"Role updated!")})),yield pe(L.S,(function*(e){const t=yield ye(),{agreedToResearch:s}=e.payload,n=yield Object(D.a)(le.M,t,s);if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.d)(U.a.setCourseRegistration({agreedToResearch:s})),yield Object(D.a)(G.d,"Research preference saved!")})),yield pe(L.c,(function*(e){const t=yield ye(),{courseRegId:s}=e.payload,n=yield Object(D.a)(le.T,t,s);if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.d)(U.a.fetchAdminPanelCourseRegistrations()),yield Object(D.a)(G.d,"User deleted!")})),yield pe(g.a,(function*(e){const t=yield ye(),s=yield Object(D.a)(le.q,t);s&&(yield Object(D.d)(U.a.updateGroupGradingSummary(s)))})),yield pe(fe.a,(function*(e){const t=yield ye(),s=e.payload.id,n=e.payload.closeAt,i=e.payload.openAt,a=yield Object(le.V)(s,{openAt:i,closeAt:n},t);if(!a||!a.ok)return yield Object(le.z)(a);yield Object(D.d)(U.a.fetchAssessmentOverviews()),yield Object(D.a)(G.d,"Updated successfully!",1e3)})),yield pe(fe.b,(function*(e){const t=yield ye(),s=e.payload,n=yield Object(le.c)(s,t);if(!n||!n.ok)return yield Object(le.z)(n);yield Object(D.d)(U.a.fetchAssessmentOverviews()),yield Object(D.a)(G.d,"Deleted successfully!",1e3)})),yield pe(fe.c,(function*(e){const t=yield ye(),s=e.payload.id,n=e.payload.togglePublishTo,i=yield Object(le.V)(s,{isPublished:n},t);if(!i||!i.ok)return yield Object(le.z)(i);yield Object(D.d)(U.a.fetchAssessmentOverviews()),n?yield Object(D.a)(G.d,"Published successfully!",1e3):yield Object(D.a)(G.d,"Unpublished successfully!",1e3)})),yield pe(fe.d,(function*(e){const t=yield ye(),{file:s,forceUpdate:n,assessmentConfigId:i}=e.payload,a=yield Object(le.Y)(s,t,n,i);if(!a||!a.ok)return yield Object(le.z)(a);const r=yield a.text();"OK"===r?yield Object(D.a)(G.d,"Uploaded successfully!",2e3):"Force Update OK"===r&&(yield Object(D.a)(G.d,"Assessment force updated successfully!",2e3)),yield Object(D.d)(U.a.fetchAssessmentOverviews())}))};var Oe=s(72),Ce=s(42),Se=s(3),Ee=s(102),we=s(20),_e=s.n(we),Ae=s(1);class ke{constructor(e,t){this.childrenRetrieved=!1,this.filePath="dummy_path",this.fileType="unset",this.filePath=e,this.fileType=t}}class Te{static async getFirstLayerRepoFileNodes(e){return""===e?[]:(Te.fileIndex=0,Te.currentRepoName=e,await Te.getChildNodes(e,""))}static async getChildNodes(e,t){const s=[];if(e!==Te.currentRepoName)return s;const n=Oe.f();if(void 0===n)return s;try{const i=(await n.users.getAuthenticated()).data.login,a=(await n.repos.getContent({owner:i,repo:e,path:t})).data;Array.isArray(a)&&a.forEach((e=>{s.push(this.createNode(e))}))}catch(i){console.error(i)}return s}static createNode(e){const t=Te.fileIndex;let s={id:t,label:"dummy file"};return"file"===e.type&&(s={id:t,nodeData:new ke(e.path,"file"),icon:"document",label:e.name}),"dir"===e.type&&(s={id:t,nodeData:new ke(e.path,"dir"),icon:"folder-close",label:e.name,childNodes:[]}),Te.fileIndex++,s}}Te.fileIndex=0,Te.currentRepoName="";var Re=s(0);var Ie=e=>{const[t,s]=Object(Ae.useState)([]),[n,i]=Object(Ae.useState)(""),[a,r]=Object(Ae.useState)("");return Object(Ae.useEffect)((()=>{!async function(e,t){try{t(await Te.getFirstLayerRepoFileNodes(e))}catch(s){console.error(s)}}(e.repoName,s)}),[e.repoName]),Object(Re.jsxs)(Ce.h,{className:"githubDialog",isOpen:!0,onClose:o,children:[Object(Re.jsx)("div",{className:_e()("githubDialogHeader",Se.a.DIALOG_HEADER),children:Object(Re.jsx)("h3",{children:"Select a File"})}),Object(Re.jsxs)("div",{className:Se.a.DIALOG_BODY,children:[Object(Re.jsx)(Ce.bb,{contents:t,onNodeClick:async function(e,n,a){const r=e.isSelected,o=await c(t,e,(e=>e.isSelected=!1),(e=>{e.isSelected=null===r||!r;const t=void 0!==e.nodeData&&e.isSelected?e.nodeData.filePath:"";i(t)}));null!==o&&s(o)},onNodeCollapse:async function(e){const n=await c(t,e,(e=>{}),(e=>e.isExpanded=!1));null!==n&&s(n)},onNodeExpand:async function(n){const i=await c(t,n,(e=>{}),(async t=>{t.isExpanded=!0,void 0===t.nodeData||t.nodeData.childrenRetrieved||(t.childNodes=await Te.getChildNodes(e.repoName,t.nodeData.filePath),t.nodeData.childrenRetrieved=!0)}));null!==i&&s(i)},className:_e()("FileTree",Se.a.ELEVATION_0)}),"Save"===e.pickerType&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(Ce.y,{id:"FileNameTextBox",onChange:function(e){i(e.target.value)},onClick:function(e){""===n&&i(".js")},placeholder:"Enter File Name",value:n}),Object(Re.jsx)(Ce.y,{onChange:function(e){r(e.target.value)},placeholder:"Enter Commit Message",value:a})]})]}),Object(Re.jsx)("div",{className:Se.a.DIALOG_FOOTER,children:Object(Re.jsxs)("div",{className:Se.a.DIALOG_FOOTER_ACTIONS,children:[Object(Re.jsx)(Ce.b,{onClick:o,children:"Close"}),Object(Re.jsx)(Ce.a,{onClick:async function(){const t=await e.octokit.users.getAuthenticated(),s=t.data.login,i=t.data.name,r=t.data.email;"Open"===e.pickerType&&await Object(Oe.a)(e.octokit,s,e.repoName,n)&&await Object(Oe.c)()&&Object(Oe.g)(e.octokit,s,e.repoName,n);if("Save"===e.pickerType){const{canBeSaved:t,saveType:o}=await Object(Oe.b)(e.octokit,s,e.repoName,n);t&&("Overwrite"===o&&await Object(Oe.d)()&&Object(Oe.j)(e.octokit,s,e.repoName,n,i,r,a,e.editorContent),"Create"===o&&Object(Oe.h)(e.octokit,s,e.repoName,n,i,r,a,e.editorContent))}e.onSubmit("")},intent:Ee.a.PRIMARY,text:e.pickerType})]})})]});function o(){e.onSubmit("")}async function c(e,t,s,n){if(null===e)return null;const i=[];for(let a=0;a<e.length;a++){const r=e[a],o=Object.assign({},r);if(await s(o),t===r&&await n(o),void 0!==o.childNodes){const e=await c(o.childNodes,t,s,n);null!==e&&(o.childNodes=e)}i.push(o)}return i}};var Le=e=>{const[t,s]=Object(Ae.useState)("");return Object(Re.jsxs)(Ce.h,{className:"githubDialog",isOpen:!0,onClose:n,children:[Object(Re.jsx)("div",{className:_e()("githubDialogHeader",Se.a.DIALOG_HEADER),children:Object(Re.jsx)("h3",{children:"Select a Repository"})}),Object(Re.jsx)("div",{className:Se.a.DIALOG_BODY,children:Object(Re.jsx)(Ce.P,{className:"RepositoryRadioGroup",onChange:function(e){s(e.target.value)},selectedValue:t,children:e.userRepos.map((e=>Object(Re.jsx)(Ce.O,{label:e.name,value:e.name},e.id)))})}),Object(Re.jsx)("div",{className:_e()(Se.a.DIALOG_FOOTER),children:Object(Re.jsxs)("div",{className:_e()(Se.a.DIALOG_FOOTER_ACTIONS),children:[Object(Re.jsx)(Ce.b,{onClick:n,children:"Close"}),Object(Re.jsx)(Ce.a,{onClick:function(){""===t?Object(G.e)("No repository selected!",1e3):e.onSubmit(t)},intent:Ee.a.PRIMARY,children:"Select"})]})})]});function n(){e.onSubmit("")}},Pe=s(69);function*Ne(){const e=`https://github.com/login/oauth/authorize?client_id=${_.b.githubClientId}&scope=repo`,t="Connect With OAuth",s="height=600,width=400";new BroadcastChannel("GitHubOAuthAccessToken").onmessage=e=>{Nt.dispatch(U.a.setGitHubOctokitObject(e.data)),Nt.dispatch(U.a.setGitHubAccessToken(e.data)),Object(G.d)("Logged in to GitHub",1e3)},_.b.githubClientId?yield Object(D.a)(window.open,e,t,s):yield Object(D.a)(window.open,"/callback/github",t,s)}function*De(){Nt.getState()&&Nt.getState().workspaces.githubAssessment.hasUnsavedChanges?yield Object(D.a)(G.e,"You have unsaved changes!",2e3):(yield Object(D.d)(U.a.removeGitHubOctokitObjectAndAccessToken()),yield Object(D.a)(G.d,"Logged out from GitHub",1e3))}function*Me(){const e=Oe.f();if(void 0===e)return;const t=yield Object(D.a)((async()=>await e.paginate(e.repos.listForAuthenticatedUser,{per_page:100}))),s=yield Object(D.a)((async()=>await Object(Pe.a)(Le,(e=>({userRepos:t,onSubmit:e})))));if(""!==s){const t="Open",n=async()=>await Object(Pe.a)(Ie,(n=>({repoName:s,pickerType:t,octokit:e,editorContent:"",onSubmit:n})));yield Object(D.a)(n)}}function*Ue(){const e=Object(Oe.f)();if(void 0===e)return;const t=yield Object(D.a)(e.users.getAuthenticated),s=t.data.login,n=Nt.getState().playground.githubSaveInfo.repoName,i=Nt.getState().playground.githubSaveInfo.filePath,a=t.data.email,r=t.data.name,o=Nt.getState().workspaces.playground.editorTabs[0].value;Oe.j(e,s,n,i,a,r,"Changes made from Source Academy",o)}function*Be(){const e=Oe.f();if(void 0===e)return;const t=yield Object(D.a)((async()=>await e.paginate(e.repos.listForAuthenticatedUser,{per_page:100}))),s=yield Object(D.a)((async()=>await Object(Pe.a)(Le,(e=>({userRepos:t,onSubmit:e}))))),n=Nt.getState().workspaces.playground.editorTabs[0].value;if(""!==s){const t="Save",i=async()=>await Object(Pe.a)(Ie,(i=>({repoName:s,pickerType:t,octokit:e,editorContent:n,onSubmit:i})));yield Object(D.a)(i)}}var Ge=function*(){yield Object(D.i)(L.s,Ne),yield Object(D.i)(L.t,De),yield Object(D.i)("GITHUB_OPEN_FILE",Me),yield Object(D.i)("GITHUB_SAVE_FILE",Ue),yield Object(D.i)("GITHUB_SAVE_FILE_AS",Be)};function*Fe(){yield pe(L.r,He),yield pe(L.H,(e=>{de.b({id:e.payload.userId.toString()})})),yield pe(l.a,(()=>{de.b(null)}))}function He(e){let{payload:t}=e;return function*(){const e=function(e){const t=_.b.authProviders.get(e);if(t)try{const s=new URL(t.endpoint);return s.searchParams.set("redirect_uri",ve(e)),s.toString()}catch(s){return t.endpoint||""}}(t);e?window.location.href=e:yield Object(D.a)(G.e,"Could not log in; invalid provider name provided.")}()}var Ve=s(152);const We=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],qe="https://www.googleapis.com/upload/drive/v3/files",$e="text/plain";let Xe;const ze=new Promise((e=>{Xe=e})).then((async function(){await new Promise(((e,t)=>gapi.load("client:auth2",{callback:e,onerror:t}))),await gapi.client.init({apiKey:_.b.googleApiKey,clientId:_.b.googleClientId,discoveryDocs:We,scope:"profile https://www.googleapis.com/auth/drive.file"}),gapi.auth2.getAuthInstance().currentUser.listen(Ye),Ye(gapi.auth2.getAuthInstance().currentUser.get())}));function Ye(e){Nt.dispatch(U.a.setGoogleUser(e.isSignedIn()?e.getBasicProfile().getEmail():void 0))}function*Ke(){Xe(),yield ze}function*Qe(){yield Object(D.a)(Ke),gapi.auth2.getAuthInstance().isSignedIn.get()||(yield gapi.auth2.getAuthInstance().signIn())}function Je(e,t){const s="undefined"!==typeof(null===t||void 0===t?void 0:t.pickFolders)&&(null===t||void 0===t?void 0:t.pickFolders),n="undefined"===typeof(null===t||void 0===t?void 0:t.showFolders)||(null===t||void 0===t?void 0:t.showFolders),i="undefined"===typeof(null===t||void 0===t?void 0:t.showFiles)||(null===t||void 0===t?void 0:t.showFiles);return new Promise((a=>{gapi.load("picker",(()=>{const r=new google.picker.DocsView(i?google.picker.ViewId.DOCS:google.picker.ViewId.FOLDERS);null!==t&&void 0!==t&&t.rootFolder&&r.setParent(t.rootFolder),r.setOwnedByMe(!0),r.setIncludeFolders(n),r.setSelectFolderEnabled(s),r.setMode(google.picker.DocsViewMode.LIST);(new google.picker.PickerBuilder).setTitle(e).enableFeature(google.picker.Feature.NAV_HIDDEN).addView(r).setOAuthToken(gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token).setAppId(_.b.googleAppId).setDeveloperKey(_.b.googleApiKey).setCallback((e=>{switch(e[google.picker.Response.ACTION]){case google.picker.Action.PICKED:{const{id:t,name:s,mimeType:n,parentId:i}=e.docs[0];a({id:t,name:s,mimeType:n,parentId:i,picked:!0});break}case google.picker.Action.CANCEL:a({picked:!1})}})).build().setVisible(!0)}))}))}function Ze(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;const a=e,r={name:a,mimeType:s,parents:[t],appProperties:{source:!0,...i}},{body:o,headers:c}=tt(r,n,s);return gapi.client.request({path:qe,method:"POST",params:{uploadType:"multipart"},headers:c,body:o}).then((e=>{let{result:t}=e;return{id:t.id,name:t.name}}))}function et(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4?arguments[4]:void 0;const a={name:t,mimeType:s,appProperties:{source:!0,...i}},{body:r,headers:o}=tt(a,n,s);return gapi.client.request({path:qe+"/"+e,method:"PATCH",params:{uploadType:"multipart"},headers:o,body:r})}function tt(e,t,s){const n=JSON.stringify(e);let i;do{i=st()}while(n.includes(i)||t.includes(i));return{body:`--${i}\nContent-Type: application/json; charset=utf-8\n\n${JSON.stringify(e)}\n--${i}\nContent-Type: ${s}\n\n${t}\n--${i}--\n`,boundary:i,headers:{"Content-Type":`multipart/related; boundary=${i}`}}}function st(){let e="--------------------------";for(let t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);return e}var nt=function*(){yield ge(L.u,(function*(){yield Object(D.d)(U.a.playgroundUpdatePersistenceFile(void 0)),yield Object(D.a)(Ke),yield Object(D.a)([gapi.auth2.getAuthInstance(),"signOut"])})),yield ge(Ve.b,(function*(){let e;try{yield Object(D.a)(Qe);const{id:t,name:s,picked:i}=yield Object(D.a)(Je,"Pick a file to open");if(!i)return;if(!(yield Object(D.a)(Pe.b,{title:"Opening from Google Drive",contents:Object(Re.jsxs)("p",{children:["Opening ",Object(Re.jsx)("strong",{children:s})," will overwrite the current contents of your workspace. Are you sure?"]}),positiveLabel:"Open",negativeLabel:"Cancel"})))return;e=yield Object(D.a)(G.c,{message:"Opening file...",timeout:0,intent:Ee.a.PRIMARY});const{result:a}=yield Object(D.a)([gapi.client.drive.files,"get"],{fileId:t,fields:"appProperties"}),r=yield Object(D.a)([gapi.client.drive.files,"get"],{fileId:t,alt:"media"});yield Object(D.d)(U.a.updateEditorValue(r.body,"playground")),yield Object(D.d)(U.a.playgroundUpdatePersistenceFile({id:t,name:s,lastSaved:new Date})),a&&a.appProperties&&(yield Object(D.d)(U.a.chapterSelect(parseInt(a.appProperties.chapter||"4",10),a.appProperties.variant||n.Variant.DEFAULT,"playground")),yield Object(D.d)(U.a.externalLibrarySelect(Object.values(F.a).find((e=>e===a.appProperties.external))||F.a.NONE,"playground"))),yield Object(D.a)(G.d,`Loaded ${s}.`,1e3)}catch(t){console.error(t),yield Object(D.a)(G.e,"Error while opening file.",1e3)}finally{e&&Object(G.a)(e)}})),yield ge(Ve.d,(function*(){let e;try{yield Object(D.a)(Qe);const[t,s,n]=yield Object(D.f)((e=>[e.workspaces.playground.editorTabs[0].value,e.workspaces.playground.context.variant,e.workspaces.playground.externalLibrary])),i=yield Object(D.a)(Je,"Pick a folder, or cancel to pick the root folder",{pickFolders:!0,showFolders:!0,showFiles:!1}),a=i.picked?i:{id:"root",name:"My Drive"},r=yield Object(D.a)(Je,`Saving to ${a.name}; pick a file to overwrite, or cancel to save as a new file`,{pickFolders:!1,showFolders:!1,showFiles:!0,rootFolder:a.id});if(r.picked){if(!(yield Object(D.a)(Pe.b,{title:"Saving to Google Drive",contents:Object(Re.jsxs)("span",{children:["Really overwrite ",Object(Re.jsx)("strong",{children:r.name}),"?"]})})))return;yield Object(D.d)(U.a.playgroundUpdatePersistenceFile(r)),yield Object(D.d)(U.a.persistenceSaveFile(r))}else{const i=yield Object(D.a)(Pe.c,{title:"Saving to Google Drive",contents:Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsxs)("p",{children:["Saving to folder ",Object(Re.jsx)("strong",{children:a.name}),"."]}),Object(Re.jsx)("p",{children:"Save as name?"})]}),positiveLabel:"Save as new file",negativeLabel:"Cancel",props:{validationFunction:e=>!!e}});if(!i.buttonResponse)return;const r={variant:s,external:n};e=yield Object(D.a)(G.c,{message:`Saving as ${i.value}...`,timeout:0,intent:Ee.a.PRIMARY});const o=yield Object(D.a)(Ze,i.value,a.id,$e,t,r);yield Object(D.d)(U.a.playgroundUpdatePersistenceFile({...o,lastSaved:new Date})),yield Object(D.a)(G.d,`${i.value} successfully saved to Google Drive.`,1e3)}}catch(t){console.error(t),yield Object(D.a)(G.e,"Error while saving file.",1e3)}finally{e&&Object(G.a)(e)}})),yield pe(Ve.c,(function(e){let{payload:{id:t,name:s}}=e;return function*(){let e;try{e=yield Object(D.a)(G.c,{message:`Saving as ${s}...`,timeout:0,intent:Ee.a.PRIMARY}),yield Object(D.a)(Qe);const[n,i,a]=yield Object(D.f)((e=>[e.workspaces.playground.editorTabs[0].value,e.workspaces.playground.context.variant,e.workspaces.playground.externalLibrary])),r={variant:i,external:a};yield Object(D.a)(et,t,s,$e,n,r),yield Object(D.d)(U.a.playgroundUpdatePersistenceFile({id:t,name:s,lastSaved:new Date})),yield Object(D.a)(G.d,`${s} successfully saved to Google Drive.`,1e3)}catch(n){console.error(n),yield Object(D.a)(G.e,"Error while saving file.",1e3)}finally{e&&Object(G.a)(e)}}()})),yield pe(Ve.a,Ke)},it=s(184),at=s(215),rt=s(128);function*ot(){yield pe(b.b,ct),yield pe(b.e,(function*(e){const t=yield Object(D.f)((e=>e.playground.queryString)),s=e.payload,n="ERROR";let i,a;try{const{result:e,hasTimedOut:n}=yield Object(D.e)({result:Object(D.a)(lt,t,s),hasTimedOut:Object(D.b)(1e4)});i=e,a=n}catch(r){}return!i||a?(yield Object(D.d)(Object(rt.updateShortURL)(n)),yield Object(D.a)(G.e,"Something went wrong trying to create the link.")):"success"===i.status||i.shorturl?("success"!==i.status&&(yield Object(D.a)(G.d,i.message)),void(yield Object(D.d)(Object(rt.updateShortURL)(_.b.urlShortenerBase+i.url.keyword)))):(yield Object(D.d)(Object(rt.updateShortURL)(n)),yield Object(D.a)(G.e,i.message))}))}function*ct(){const e=yield Object(D.f)((e=>e.workspaces.playground.editorTabs[0].value));if(!e||e===c.g)return void(yield Object(D.d)(Object(rt.changeQueryString)("")));const t=yield Object(D.f)((e=>e.workspaces.playground.context.variant)),s=yield Object(D.f)((e=>e.workspaces.playground.externalLibrary)),n=yield Object(D.f)((e=>e.workspaces.playground.execTime)),i=at.stringify({prgrm:Object(it.compressToEncodedURIComponent)(e),variant:t,ext:s,exec:n});yield Object(D.d)(Object(rt.changeQueryString)(i))}async function lt(e,t){const s=`${window.location.protocol}//${window.location.host}/playground#${e}`,n={signature:_.b.urlShortenerSignature,action:"shorturl",format:"json",keyword:t,url:s},i={method:"POST",body:Object.entries(n).reduce(((e,t)=>{let[s,n]=t;return e.append(s,n),e}),new FormData)},a=await fetch(`${_.b.urlShortenerBase}yourls-api.php`,i);if(!a||!a.ok)return null;return await a.json()}var dt=s(520),ut=s(157);const ht={start:{line:0,column:0},end:{line:0,column:0}};const pt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",gt=()=>new Array(16).fill(void 0).map((e=>pt[Math.floor(Math.random()*pt.length)])).join("");var mt=function*(){yield ge(I.c,(function*(){const[e,t]=yield Object(D.f)((e=>[{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken},e.session.remoteExecutionSession])),s=yield Object(D.a)(le.e,e);if(yield Object(D.d)(U.a.remoteExecUpdateDevices(s)),!t)return;const n=s.find((e=>{let{id:s}=e;return s===t.device.id}));n&&(yield Object(D.d)(U.a.remoteExecUpdateSession({...t,device:n})))})),yield pe(I.a,(function*(e){const[t,s]=yield Object(D.f)((e=>[{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken},e.session.remoteExecutionSession])),{device:i,workspace:r}=e.payload;yield Object(D.d)(U.a.remoteExecUpdateSession({device:i,workspace:r,connection:{status:"CONNECTING"}}));const o=yield Object(D.a)(le.m,i,t);if(!o)return void(yield Object(D.d)(U.a.remoteExecUpdateSession({...e.payload,connection:{status:"FAILED",error:"Could not retrieve MQTT endpoint"}})));const c=null===s||void 0===s?void 0:s.connection.client;if(c)try{c.disconnect()}catch{}const l=new dt.SlingClient({clientId:`${o.clientNamePrefix}${gt()}`,deviceId:o.thingName,websocketEndpoint:o.endpoint});l.on("statusChange",(e=>{Nt.dispatch(U.a.updateWorkspace(r,{isRunning:e}))})),l.on("monitor",(e=>{const t=e[0].split(":")[1],s=`port${t.substring(t.length-1)}`,n=Nt.getState().session.remoteExecutionSession,i=e=>Nt.dispatch(U.a.remoteExecUpdateSession({...n,device:{...n.device,peripherals:{...a.a.pickBy(n.device.peripherals,(e=>Date.now()-e.lastUpdated<3e3)),[s]:{...e,lastUpdated:Date.now()}}}}));if(e[1].endsWith("motor")){i({type:e[1],position:parseInt(e[2]),speed:parseInt(e[3])})}else{i({type:e[1],mode:e[2],value:parseInt(e[3])})}})),l.on("display",((e,t)=>{switch(t){case"output":Nt.dispatch(U.a.handleConsoleLog(r,`${e}`));break;case"error":{const t=new ut.ExceptionError(new Error(`${e}`),ht);Nt.dispatch(U.a.evalInterpreterError([t],r));break}case"result":Nt.dispatch(U.a.evalInterpreterSuccess(e,r))}}));const d=I.i.get(i.type);yield Object(D.d)(U.a.remoteExecUpdateSession({device:i,workspace:r,connection:{status:"CONNECTING",client:l,endpoint:o}})),yield Object(D.d)(U.a.updateWorkspace(r,{isRunning:!1,isEditorAutorun:!1,isDebugging:!1,externalLibrary:null===d||void 0===d?void 0:d.deviceLibraryName,output:[]})),yield Object(D.d)(U.a.beginClearContext(r,{variant:n.Variant.DEFAULT,external:{name:(null===d||void 0===d?void 0:d.deviceLibraryName)||F.a.NONE,symbols:(null===d||void 0===d?void 0:d.internalFunctions)||[]},globals:[]},!1));try{const t=new Promise(((e,t)=>{try{l.once("connect",(()=>e(!0))),l.once("error",t),l.connect()}catch{t()}}));(yield Object(D.e)({connect:t,reconnect:Object(D.g)(I.a),disconnect:Object(D.g)(I.b)})).connect?yield Object(D.d)(U.a.remoteExecUpdateSession({...e.payload,connection:{status:"CONNECTED",client:l,endpoint:o}})):l.disconnect()}catch(u){l.disconnect(),yield Object(D.d)(U.a.remoteExecUpdateSession({...e.payload,connection:{status:"FAILED",client:l,error:u.toString()}}))}})),yield ge(I.b,(function*(e){const t=yield Object(D.f)((e=>e.session.remoteExecutionSession));if(!t)return;const s=t.connection.client;s&&s.disconnect(),yield Object(D.d)(U.a.remoteExecUpdateSession(void 0)),yield Object(D.d)(U.a.externalLibrarySelect(F.a.NONE,t.workspace,!0))})),yield pe(S.b,(function*(){const e=yield Object(D.f)((e=>e.session.remoteExecutionSession));e&&"CONNECTED"===e.connection.status&&e.connection.client.sendStop()}))},bt=s(88),ft=s(244),vt=s(159),yt=s.n(vt),xt=s(174),jt=s(216),Ot=s(300),Ct=s(13);function*St(){let e;yield pe(k.a,(function*(e){yield Object(D.d)(U.a.handleConsoleLog(e.payload.workspaceLocation,e.payload.errorMsg))})),yield pe(k.o,(function*(e){const t=e.payload.workspaceLocation;yield*kt(t)})),yield pe(k.A,(function*(e){const t=e.payload.workspaceLocation,s=yield Object(D.f)((e=>e.workspaces[t].isEditorAutorun));yield Object(D.a)(G.e,"Autorun "+(s?"Started":"Stopped"),750)})),yield pe(k.q,(function*(t){const s=t.payload.workspaceLocation,n=yield Object(D.f)((e=>e.workspaces[s].replValue)),i=yield Object(D.f)((e=>e.workspaces[s].execTime));yield Object(D.d)(U.a.beginInterruptExecution(s)),yield Object(D.d)(U.a.clearReplInput(s)),yield Object(D.d)(U.a.sendReplInputToOutput(n,s)),e=yield Object(D.f)((e=>e.workspaces[s].context)),yield Object(D.a)(It,n,e,i,s,k.q)})),yield pe(S.d,(function*(t){const s=t.payload.workspaceLocation,n=yield Object(D.f)((e=>e.workspaces[s].editorTabs[0].value)),i=yield Object(D.f)((e=>e.workspaces[s].execTime));yield Object(D.d)(U.a.beginInterruptExecution(s)),yield Object(D.d)(U.a.clearReplOutput(s)),e=yield Object(D.f)((e=>e.workspaces[s].context)),yield Object(D.d)(U.a.highlightEditorLine([],s)),yield Object(D.a)(It,n,e,i,s,S.d)})),yield pe(S.c,(function*(t){const s=t.payload.workspaceLocation;e=yield Object(D.f)((e=>e.workspaces[s].context)),yield Object(D.d)(U.a.clearReplOutput(s)),yield Object(D.d)(U.a.highlightEditorLine([],s)),e.runtime.break=!1,Et=void 0})),yield pe(S.l,(function*(e){const t=e.payload.highlightedLines;0===t.length?Object(A.f)():Object(A.g)(t[0]),yield})),yield pe(k.s,(function*(e){yield Object(D.d)(U.a.addEvent([h.e.RUN_TESTCASE]));const t=e.payload.workspaceLocation,s=e.payload.testcaseId;yield*Tt(t,s)})),yield pe(k.j,(function*(e){const{workspaceLocation:t,chapter:s,variant:n}=e.payload,[i,a,r,o,l]=yield Object(D.f)((e=>[e.workspaces[t].context.variant,e.workspaces[t].context.externalSymbols,e.workspaces[t].globals,e.workspaces[t].externalLibrary]));if(s!==a||n!==i){const e={variant:n,external:{name:l,symbols:r},globals:o};yield Object(D.d)(U.a.beginClearContext(t,e,!1)),yield Object(D.d)(U.a.clearReplOutput(t)),yield Object(D.d)(U.a.debuggerReset(t)),yield Object(D.a)(G.d,`Switched to ${Object(c.o)(s,n)}`,1e3)}})),yield pe(k.v,(function*(e){const{workspaceLocation:t,externalLibraryName:s}=e.payload,[n,i]=yield Object(D.f)((e=>[e.workspaces[t].globals,e.workspaces[t].externalLibrary])),a={external:{name:s,symbols:F.b.get(s)},globals:n};(s!==i||e.payload.initialise)&&(yield Object(D.d)(U.a.changeExternalLibrary(s,t)),yield Object(D.d)(U.a.beginClearContext(t,a,!0)),yield Object(D.d)(U.a.clearReplOutput(t)),e.payload.initialise||(yield Object(D.a)(G.d,`Switched to ${s} library`,1e3)))})),yield pe(k.b,(function*(e){jt.a.clear(),xt.a.clear();const t=e.payload.library.globals;for(const[s,n]of t)window[s]=n;yield Object(D.d)(U.a.endClearContext({...e.payload.library,moduleParams:{runes:{},phaser:yt.a}},e.payload.workspaceLocation)),yield})),yield pe(k.u,(function*(t){const s=t.payload.workspaceLocation,n=yield Object(D.f)((e=>e.workspaces[s].editorTabs[0].value));e=yield Object(D.f)((e=>e.workspaces[s].context));const i=Object(bt.findDeclaration)(n,e,{line:t.payload.cursorPosition.row+1,column:t.payload.cursorPosition.column});i&&(yield Object(D.d)(U.a.moveCursor(t.payload.workspaceLocation,{row:i.start.line-1,column:i.start.column})))})),yield function(e,t){function*s(){try{const e=t(...arguments);he(e)&&(yield*e)}catch(e){ue(e)}}for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return Object(D.j)(e,s,...i)}(k.p,(function*(e){const{workspaceLocation:t}=e.payload;yield Object(D.a)(kt,t);const s=yield Object(D.f)((e=>e.workspaces[t].editorTestcases));if(s.length>0){yield Object(D.a)(G.d,"Running all testcases!",2e3);for(const e of s.keys()){yield new Promise((e=>setTimeout(e,0)));if(!(yield Object(D.a)(Tt,t,e)))return}}}))}let Et;function*wt(e){try{const t=Et.context.runtime.nodes[0].loc.start.line-1,s=Et.context.runtime.nodes[0].loc.end.line-1;yield Object(D.d)(U.a.highlightEditorLine([t,s],e)),Object(A.i)(Et)}catch(t){yield Object(D.d)(U.a.highlightEditorLine([],e))}}function*_t(e,t){const[s,n,i,a]=yield Object(D.f)((t=>[t.workspaces[e].context.externalSymbols,t.workspaces[e].externalLibrary,t.workspaces[e].globals,t.workspaces[e].context.variant])),r={variant:a,external:{name:n,symbols:s},globals:i};yield Object(D.d)(U.a.beginClearContext(e,r,!1)),yield Object(D.g)(k.n)}function*At(e){yield Object(D.d)(U.a.handleConsoleLog(e,...Ot.a.dump()))}function*kt(e){const[t,s,n,i]=yield Object(D.f)((t=>[t.workspaces[e].editorTabs[0].prependValue,t.workspaces[e].editorTabs[0].value,t.workspaces[e].execTime,t.session.remoteExecutionSession]));if(yield Object(D.d)(U.a.addEvent([h.e.RUN_CODE])),i&&i.workspace===e)yield Object(D.d)(U.a.remoteExecRun(s));else{yield Object(D.d)(U.a.beginInterruptExecution(e)),yield*_t(e),yield Object(D.d)(U.a.clearReplOutput(e));const i=yield Object(D.f)((t=>t.workspaces[e].context));let a=s;if(Object(c.m)(i.chapter)&&Object(ft.parse)(a,i),!i.errors.length){const t=s.split("\n"),n=yield Object(D.f)((t=>t.workspaces[e].editorTabs[0].breakpoints));for(const s in n){if("string"!==typeof s)continue;const n=+s;if(i.errors=[],t[n]="debugger;"+t[n],a=t.join("\n"),Object(c.m)(i.chapter)&&Object(ft.parse)(a,i),i.errors.length){const t="Hint: Misplaced breakpoint at line "+(n+1)+".";yield Object(D.d)(U.a.sendReplInputToOutput(t,e))}}}if(i.errors=[],t.length){const s=Object(A.h)(i);yield Object(D.a)(It,t,s,n,e,k.r),yield*Rt(s,i,n,e)}yield Object(D.a)(It,a,i,n,e,k.o)}}function*Tt(e,t){const[s,n,a,r]=yield Object(D.f)((s=>[s.workspaces[e].editorTabs[0].prependValue,s.workspaces[e].editorTabs[0].value,s.workspaces[e].editorTabs[0].postpendValue,s.workspaces[e].editorTestcases[t].program])),o=yield Object(D.f)((s=>s.workspaces[e].editorTestcases[t].type)),c=yield Object(D.f)((t=>t.workspaces[e].execTime));yield*_t(e);const l=yield Object(D.f)((t=>t.workspaces[e].context)),d=Object(A.h)(l);yield Object(D.a)(It,s,d,c,e,k.r);const u=String(Object(i.random)(1048576,68719476736));return yield*Rt(d,l,c,e,u),yield Object(D.a)(It,n,l,c,e,k.r),l.errors.length?(yield Object(D.d)(U.a.evalTestcaseFailure(l.errors,e,t)),!1):(a&&(yield*function*(e,t,s,n,i){const a=Object(A.c)(e,t),r=Object(A.d)(a,i);yield Object(D.a)(It,r,e,s,n,k.r)}(d,l,c,e,u),yield Object(D.a)(It,a,d,c,e,k.r),yield*Rt(d,l,c,e,u)),yield*function*(e,t,s,n,i,a){yield Object(D.d)(U.a.resetTestcase(n,i));const{result:r,interrupted:o}=yield Object(D.e)({result:Object(D.a)(bt.runInContext,e,t,{scheduler:"preemptive",originalMaxExecTime:s,throwInfiniteLoops:!0}),interrupted:Object(D.g)(S.b)});if(o)return Object(bt.interrupt)(t),yield*At(n),t.errors.push(new ut.InterruptedError(t.runtime.nodes[0])),yield Object(D.d)(U.a.endInterruptExecution(n)),void(yield Object(D.a)(G.e,`Execution of testcase ${i} aborted`,750));yield*At(n),"error"===r.status?(yield Object(D.d)(U.a.evalInterpreterError(t.errors,n)),yield Object(D.d)(U.a.evalTestcaseFailure(t.errors,n,i))):"finished"===r.status&&(yield Object(D.d)(U.a.evalInterpreterSuccess(r.value,n)),yield Object(D.d)(U.a.evalTestcaseSuccess(r.value,n,i)));a===M.f.opaque&&(yield Object(D.d)(U.a.clearReplOutputLast(n)))}(r,d,c,e,t,o),!0)}function*Rt(e,t,s,n,i){const a=Object(A.c)(e,t);if(i){const t=Object(A.e)(a,i);yield Object(D.a)(It,t,e,s,n,k.r)}const r=Object(A.b)(a);yield Object(D.a)(It,r,e,s,n,k.r)}function*It(e,t,s,i,a){const r=yield Object(D.f)((e=>e.workspaces[i].stepLimit)),{result:o,interrupted:c,paused:l}=yield Object(D.e)({result:Object(D.a)(bt.runInContext,e,t,{scheduler:"preemptive",executionMethod:"interpreter",originalMaxExecTime:s,stepLimit:r,variant:n.Variant.DEFAULT,useSubst:!1}),interrupted:Object(D.g)(S.b),paused:Object(D.g)(S.a)});if(c)return Object(bt.interrupt)(t),t.errors.push(new ut.InterruptedError(t.runtime.nodes[0])),yield Object(D.d)(U.a.debuggerReset(i)),yield Object(D.d)(U.a.endInterruptExecution(i)),void(yield Object(D.a)(G.e,"Execution aborted",750));if(l)return yield Object(D.d)(U.a.endDebuggerPause(i)),yield Object(D.a)(wt,i),void(yield Object(D.a)(G.e,"Execution paused",750));if(a===k.o&&(Et=o),yield Object(D.a)(wt,i),"suspended"===o.status||"finished"===o.status||"suspended-non-det"===o.status){if("suspended"===o.status)return yield Object(D.d)(U.a.endDebuggerPause(i)),void(yield Object(D.d)(U.a.evalInterpreterSuccess("Breakpoint hit!",i)));yield*At(i),a!==k.r&&(yield Object(D.d)(U.a.evalInterpreterSuccess(o.value,i))),a!==k.o&&a!==k.q||(t.errors.length>0&&(yield Object(D.d)(U.a.addEvent([h.e.ERROR]))),yield Object(D.d)(Object(Ct.notifyProgramEvaluated)(o,Et,e,t,i)))}else{yield*At(i),yield Object(D.d)(U.a.evalInterpreterError(t.errors,i));const e=t.errors;t.errors=[],t.errors=e;const s=t.errors.length>0?[h.e.ERROR]:[];yield Object(D.d)(U.a.addEvent(s))}}function*Lt(){yield Object(D.c)(_.b.useBackend?je:ie),yield Object(D.c)(St),yield Object(D.c)(Fe),yield Object(D.c)(ot),yield Object(D.c)(be),yield Object(D.c)(nt),yield Object(D.c)(Ge),yield Object(D.c)(mt)}var Pt=s(284);const Nt=function(){const e=Object(o.a)(),t=[e],s=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({serialize:!0,maxAge:300})||r.d,a=function(e){if(!e)return;return{...c.k,session:{...c.k.session,...e.session?e.session:{},githubOctokitObject:{octokit:e.session.githubAccessToken?Object(Pt.a)(e.session.githubAccessToken):void 0}},workspaces:{...c.k.workspaces,playground:{...c.k.workspaces.playground,editorTabs:e.playgroundEditorValue?[{value:e.playgroundEditorValue,prependValue:"",postpendValue:"",highlightedLines:[],breakpoints:[]}]:c.k.workspaces.playground.editorTabs,isEditorAutorun:e.playgroundIsEditorAutorun?e.playgroundIsEditorAutorun:c.k.workspaces.playground.isEditorAutorun,externalLibrary:e.playgroundExternalLibrary?e.playgroundExternalLibrary:c.k.workspaces.playground.externalLibrary,context:{...c.k.workspaces.playground.context,chapter:e.playgroundSourceChapter?e.playgroundSourceChapter:n.Chapter.CLANG,variant:e.playgroundSourceVariant?e.playgroundSourceVariant:c.k.workspaces.playground.context.variant}}}}}((()=>{try{const e=localStorage.getItem("storedState");if(!e)return;const t=Object(it.decompressFromUTF16)(e);if(!t)return;return JSON.parse(t)}catch(e){return void Object(G.e)("Error loading from local storage")}})())||c.k,l=s(Object(r.a)(...t)),d=Object(r.e)(N(),a,l);return e.run(Lt),d.subscribe(Object(i.throttle)((()=>{(e=>{try{const t={session:{accessToken:e.session.accessToken,refreshToken:e.session.refreshToken,courseRegId:e.session.courseRegId,role:e.session.role,name:e.session.name,userId:e.session.userId,courses:e.session.courses,courseId:e.session.courseId,courseName:e.session.courseName,courseShortName:e.session.courseShortName,viewable:e.session.viewable,enableGame:e.session.enableGame,enableAchievements:e.session.enableAchievements,enableSourcecast:e.session.enableSourcecast,moduleHelpText:e.session.moduleHelpText,assetsPrefix:e.session.assetsPrefix,assessmentConfigurations:e.session.assessmentConfigurations,githubAccessToken:e.session.githubAccessToken},achievements:e.achievement.achievements,playgroundEditorValue:e.workspaces.playground.editorTabs[0].value,playgroundIsEditorAutorun:e.workspaces.playground.isEditorAutorun,playgroundSourceChapter:n.Chapter.CLANG,playgroundSourceVariant:e.workspaces.playground.context.variant,playgroundExternalLibrary:e.workspaces.playground.externalLibrary},s=Object(it.compressToUTF16)(JSON.stringify(t));localStorage.setItem("storedState",s)}catch(t){Object(G.e)("Error saving to local storage")}})(d.getState())}),1e3)),d}()},90:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"f",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"h",(function(){return h})),s.d(t,"i",(function(){return p}));var n=s(28),i=s(71);const a="REMOTE_EXEC_FETCH_DEVICES",r="REMOTE_EXEC_UPDATE_DEVICES",o="REMOTE_EXEC_UPDATE_SESSION",c="REMOTE_EXEC_CONNECT",l="REMOTE_EXEC_DISCONNECT",d="REMOTE_EXEC_RUN",u="REMOTE_EXEC_REPL_INPUT",h=[{id:"EV3",name:"Lego Mindstorms EV3",internalFunctions:["ev3_pause","ev3_connected","ev3_motorA","ev3_motorB","ev3_motorC","ev3_motorD","ev3_motorGetSpeed","ev3_motorSetSpeed","ev3_motorStart","ev3_motorStop","ev3_motorSetStopAction","ev3_motorGetPosition","ev3_runForTime","ev3_runToAbsolutePosition","ev3_runToRelativePosition","ev3_colorSensor","ev3_colorSensorRed","ev3_colorSensorGreen","ev3_colorSensorBlue","ev3_reflectedLightIntensity","ev3_ambientLightIntensity","ev3_colorSensorGetColor","ev3_ultrasonicSensor","ev3_ultrasonicSensorDistance","ev3_gyroSensor","ev3_gyroSensorAngle","ev3_gyroSensorRate","ev3_touchSensor1","ev3_touchSensor2","ev3_touchSensor3","ev3_touchSensor4","ev3_touchSensorPressed","ev3_hello","ev3_waitForButtonPress","ev3_speak","ev3_playSequence","ev3_ledLeftGreen","ev3_ledLeftRed","ev3_ledRightGreen","ev3_ledRightRed","ev3_ledGetBrightness","ev3_ledSetBrightness"],languageChapter:n.Chapter.CLANG,deviceLibraryName:i.a.EV3}],p=new Map(h.map((e=>[e.id,e])))},93:function(e,t,s){"use strict";var n=s(42),i=s(139),a=s(1),r=s(0);t.a=e=>(Object(a.useEffect)((()=>e.loadContentDispatch()),[]),Object(r.jsx)("div",{className:"ContentDisplay row center-xs",children:Object(r.jsx)("div",{className:(e.fullWidth?"col-md-12":"col-md-10 col-xs-11")+" contentdisplay-content-parent",children:Object(r.jsx)(n.e,{className:"contentdisplay-content",elevation:i.a.THREE,children:e.display})})}))},95:function(e,t,s){"use strict";s.r(t),s.d(t,"saveSourcecastData",(function(){return a})),s.d(t,"setCurrentPlayerTime",(function(){return r})),s.d(t,"setCodeDeltasToApply",(function(){return o})),s.d(t,"setInputToApply",(function(){return c})),s.d(t,"setSourcecastData",(function(){return l})),s.d(t,"setSourcecastDuration",(function(){return d})),s.d(t,"setSourcecastStatus",(function(){return u}));var n=s(7),i=s(37);const a=(e,t,s,a,r,o)=>Object(n.action)(i.d,{title:e,description:t,uid:s,audio:a,audioUrl:window.URL.createObjectURL(a),playbackData:r,workspaceLocation:o}),r=(e,t)=>Object(n.action)(i.f,{playerTime:e,workspaceLocation:t}),o=(e,t)=>Object(n.action)(i.e,{deltas:e,workspaceLocation:t}),c=(e,t)=>Object(n.action)(i.g,{inputToApply:e,workspaceLocation:t}),l=(e,t,s,a,r,o)=>Object(n.action)(i.h,{title:e,description:t,uid:s,audioUrl:a,playbackData:r,workspaceLocation:o}),d=(e,t)=>Object(n.action)(i.i,{duration:e,workspaceLocation:t}),u=(e,t)=>Object(n.action)(i.j,{playbackStatus:e,workspaceLocation:t})},96:function(e,t,s){"use strict";s.r(t),s.d(t,"bulkUpdateAchievements",(function(){return a})),s.d(t,"bulkUpdateGoals",(function(){return r})),s.d(t,"getAchievements",(function(){return o})),s.d(t,"getGoals",(function(){return c})),s.d(t,"getOwnGoals",(function(){return l})),s.d(t,"getUserAssessmentOverviews",(function(){return d})),s.d(t,"getUsers",(function(){return u})),s.d(t,"removeAchievement",(function(){return h})),s.d(t,"removeGoal",(function(){return p})),s.d(t,"updateOwnGoalProgress",(function(){return g})),s.d(t,"addEvent",(function(){return m})),s.d(t,"handleEvent",(function(){return b})),s.d(t,"updateGoalProgress",(function(){return f})),s.d(t,"saveAchievements",(function(){return v})),s.d(t,"saveGoals",(function(){return y})),s.d(t,"saveUsers",(function(){return x})),s.d(t,"saveUserAssessmentOverviews",(function(){return j}));var n=s(7),i=s(26);const a=e=>Object(n.action)(i.c,e),r=e=>Object(n.action)(i.d,e),o=()=>Object(n.action)(i.g),c=e=>Object(n.action)(i.h,e),l=()=>Object(n.action)(i.i),d=e=>Object(n.action)(i.k,e),u=()=>Object(n.action)(i.j),h=e=>Object(n.action)(i.n,e),p=e=>Object(n.action)(i.o,e),g=e=>Object(n.action)(i.u,e),m=e=>Object(n.action)(i.a,e),b=e=>Object(n.action)(i.m,e),f=(e,t)=>Object(n.action)(i.t,{studentCourseRegId:e,progress:t}),v=e=>Object(n.action)(i.p,e),y=e=>Object(n.action)(i.q,e),x=e=>Object(n.action)(i.r,e),j=e=>Object(n.action)(i.s,e)},97:function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var n=s(134),i=s(33),a=s.n(i),r=s(1),o=(s(400),s(598),s(401),s(148)),c=s.n(o),l=s(136),d=s(37),u=s(0);class h extends r.PureComponent{constructor(e){super(e),this.ShareAce=void 0,this.AceEditor=void 0,this.onChangeMethod=void 0,this.onCursorChange=void 0,this.onSelectionChange=void 0,this.getMarkers=()=>{const e=[];for(const t of this.props.highlightedLines)e.push({startRow:t[0],startCol:0,endRow:t[1],endCol:1,className:"myMarker",type:"fullLine"});return e},this.handleGutterClick=e=>{const t=e.domEvent.target;if(-1===t.className.indexOf("ace_gutter-cell")||!e.editor.isFocused()||e.clientX>35+t.getBoundingClientRect().left)return;const s=e.getDocumentPosition().row,n=e.editor.session.getLine(s);void 0!==e.editor.session.getBreakpoints(s,0)[s]||0===n.length||n.includes("//")||n.includes("debugger;")?e.editor.session.clearBreakpoint(s):e.editor.session.setBreakpoint(s),e.stop(),this.props.handleEditorUpdateBreakpoints(e.editor.session.$breakpoints)},this.handleAnnotationChange=e=>()=>{const t=e.getAnnotations();let s=0;for(const e of t)"info"===e.type&&(e.type="error",e.className="ace_error",s++);0!==s&&e.setAnnotations(t)},this.handleEvaluate=()=>{this.props.handleEditorEval(),this.props.isRecording&&this.props.handleRecordInput({type:"keyboardCommand",time:this.props.getTimerDuration(),data:d.a.run})},this.moveCursor=e=>{this.AceEditor.current.editor.selection.clearSelection(),this.AceEditor.current.editor.moveCursorToPosition(e),this.AceEditor.current.editor.renderer.showCursor(),this.AceEditor.current.editor.renderer.scrollCursorIntoView(e,.5)},this.handleDeclarationNavigate=()=>{this.props.handleDeclarationNavigate(this.AceEditor.current.editor.getCursorPosition())},this.AceEditor=r.createRef(),this.ShareAce=null,this.onChangeMethod=(e,t)=>{this.props.handleUpdateHasUnsavedChanges&&this.props.handleUpdateHasUnsavedChanges(!0),this.props.handleEditorValueChange(e),this.props.isRecording&&this.props.handleRecordInput({type:"codeDelta",time:this.props.getTimerDuration(),data:t});const s=this.AceEditor.current.editor.getSession().getAnnotations();this.props.isEditorAutorun&&0===s.length&&this.props.handleEditorEval()},this.onCursorChange=e=>{if(!this.props.isRecording)return;const t=e.getCursor();this.props.handleRecordInput({type:"cursorPositionChange",time:this.props.getTimerDuration(),data:t})},this.onSelectionChange=e=>{if(!this.props.isRecording)return;const t=e.getRange(),s=e.isBackwards();Object(i.isEqual)(t.start,t.end)||this.props.handleRecordInput({type:"selectionRangeData",time:this.props.getTimerDuration(),data:{range:t,isBackwards:s}})}}componentDidUpdate(e){const{codeDeltasToApply:t,inputToApply:s,newCursorPosition:n}=this.props;if(t&&t!==e.codeDeltasToApply&&(this.AceEditor.current.editor.session.getDocument().applyDeltas(t),this.AceEditor.current.editor.selection.clearSelection()),n&&n!==e.newCursorPosition&&this.moveCursor(n),s&&s!==e.inputToApply)switch(s.type){case"codeDelta":this.AceEditor.current.editor.session.getDocument().applyDelta(s.data),this.AceEditor.current.editor.selection.clearSelection();break;case"cursorPositionChange":this.moveCursor(s.data);break;case"selectionRangeData":const{range:e,isBackwards:t}=s.data;this.AceEditor.current.editor.selection.setRange(e,t);break;case"keyboardCommand":if("run"===s.data)this.props.handleEditorEval(),this.props.setDraggableReplPosition&&this.props.setDraggableReplPosition()}}getBreakpoints(){return this.AceEditor.current.editor.session.getBreakpoints().filter((e=>null!=e))}componentDidMount(){if(!this.AceEditor||!this.AceEditor.current||!this.AceEditor.current.editor)return;const e=this.AceEditor.current.editor,t=e.getSession();e.on("gutterclick",this.handleGutterClick),t.on("changeAnnotation",this.handleAnnotationChange(t));const{onFocus:s,onBlur:n}=this.props;s&&e.on("focus",(t=>s(t,e))),n&&e.on("blur",(t=>n(t,e)))}componentWillUnmount(){null!==this.ShareAce&&this.ShareAce.WS.close(),this.ShareAce=null}render(){return Object(u.jsx)(l.HotKeys,{className:"Editor bp4-card bp4-elevation-0",handlers:p,children:Object(u.jsx)("div",{className:"row editor-react-ace",children:Object(u.jsx)(c.a,{className:"react-ace",commands:[{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:this.handleEvaluate},{name:"navigate",bindKey:{win:"Ctrl-B",mac:"Command-B"},exec:this.handleDeclarationNavigate}],editorProps:{$blockScrolling:1/0},ref:this.AceEditor,markers:this.getMarkers(),fontSize:17,height:"100%",highlightActiveLine:!1,mode:"javascript",onChange:this.onChangeMethod,onCursorChange:this.onCursorChange,onSelectionChange:this.onSelectionChange,readOnly:this.props.isEditorReadonly,theme:"source",value:this.props.editorValue,width:"100%",setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"}})})})}}const p={goGreen:()=>{}};var g=h,m=(s(605),s(28));const b={evaluate:{win:"Shift-Enter",mac:"Shift-Enter"},navigate:{win:"Ctrl-B",mac:"Command-B"},refactor:{win:"Ctrl-M",mac:"Command-M"},highlightScope:{win:"Ctrl-Shift-H",mac:"Command-Shift-H"},typeInferenceDisplay:{win:"Ctrl-Shift-M",mac:"Command-Shift-M"}};var f=s(1313),v=s(511),y=s.n(v),x=s(221);var j=(e,t,s,n)=>{const i=r.useRef(e);i.current=e;const{editorSessionId:a}=e;r.useEffect((()=>{if(!a)return;const e=n.current.editor,t=new y.a(a,{WsUrl:Object(x.c)(a,!0),pluginWsUrl:null,namespace:"sa"});t.on("ready",(()=>{t.add(e,[],[]),i.current.handleSetSharedbConnected(!0)})),t.on("error",((e,t)=>{console.error("ShareAce error",t),f.a(t)}));const s=t.WS;let r;return r=setInterval((async()=>{if(null!==t)try{await Object(x.a)(a)||(clearInterval(r),s.close())}catch{s.reconnect()}}),5e3),s.addEventListener("open",(()=>{i.current.handleSetSharedbConnected(!0)})),s.addEventListener("close",(()=>{i.current.handleSetSharedbConnected(!1)})),()=>{clearInterval(r);for(const e of Object.values(t.connections))e.unlisten();t.WS.close()}}),[a,n])},O=s(227),C=s(150);const S=["onSelectionChange","onCursorChange","onInput","onLoad","onValidate","onBeforeLoad","onChange","onSelection","onCopy","onPaste","onFocus","onBlur","onScroll"],E={goGreen:()=>{}},w=r.memo((e=>{const t=r.useRef(null),s=r.useRef(e.handleEditorUpdateBreakpoints),i=r.useRef(e.handlePromptAutocomplete);r.useEffect((()=>{s.current=e.handleEditorUpdateBreakpoints,i.current=e.handlePromptAutocomplete}),[e.handleEditorUpdateBreakpoints,e.handlePromptAutocomplete]),r.useEffect((()=>(/iPhone|iPad|iPod/.test(navigator.userAgent)&&(document.body.style.position="fixed",document.body.style.width="100%"),()=>{document.body.style.position="",document.body.style.width=""})),[]);const[a,o,d]=[e.sourceChapter||m.Chapter.CLANG,e.sourceVariant||m.Variant.DEFAULT,e.externalLibraryName||"NONE"];Object(O.b)(a,o,d),r.useLayoutEffect((()=>{if(!t.current)return;const e=t.current.editor,a=e.getSession();var r,o;e.on("gutterclick",(r=function(){return s.current(...arguments)},e=>{const t=e.domEvent.target;if(-1===t.className.indexOf("ace_gutter-cell")||!e.editor.isFocused()||e.clientX>35+t.getBoundingClientRect().left)return;const s=e.getDocumentPosition().row,n=e.editor.session.getLine(s);void 0!==e.editor.session.getBreakpoints()[s]||0===n.length||n.includes("//")||n.includes("debugger;")?e.editor.session.clearBreakpoint(s):e.editor.session.setBreakpoint(s,void 0),e.stop(),r(e.editor.session.getBreakpoints())})),a.on("changeAnnotation",(e=>()=>{const t=e.getAnnotations();let s=0;for(const e of t)"info"===e.type&&(e.type="error",e.className="ace_error",s++);0!==s&&e.setAnnotations(t)})(a)),Object(n.require)("ace/ext/language_tools").setCompleters([(o=function(){return i.current(...arguments)},{getCompletions:(e,t,s,n,i)=>{n&&/\d/.test(n.charAt(0))?i():o(s.row+1,s.column,i)}})])}),[]),r.useLayoutEffect((()=>{if(!t.current)return;const s=e.newCursorPosition;var n,i;s&&(n=t.current.editor,i=s,n.selection.clearSelection(),n.moveCursorToPosition(i),n.renderer.showCursor(),n.renderer.scrollCursorIntoView(i,.5))}),[e.newCursorPosition]);const{handleUpdateHasUnsavedChanges:h,handleEditorValueChange:p,isEditorAutorun:g,handleEditorEval:f}=e,v={evaluate:f},y={className:"react-ace",editorProps:{$blockScrolling:1/0},markers:r.useMemo((()=>e.highlightedLines.map((e=>({startRow:e[0],startCol:0,endRow:e[1],endCol:1,className:"myMarker",type:"fullLine"})))),[e.highlightedLines]),fontSize:17,height:"100%",highlightActiveLine:!1,mode:Object(O.a)(a,o,d),theme:"source",value:e.editorValue,width:"100%",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,fontFamily:"'Inconsolata', 'Consolas', monospace"},keyboardHandler:e.editorBinding},[x]=r.useState(e.hooks);if(x)for(const n of x)n(e,y,v,t);const j=y.onChange;return y.onChange=r.useCallback(((e,s)=>{if(!t.current)return;p(e),h&&h(!0);const n=t.current.editor.getSession().getAnnotations();g&&0===n.length&&f(),j&&j(e,s)}),[p,h,g,j,f]),y.commands=Object.entries(v).filter((e=>{let[t,s]=e;return s})).map((e=>{let[t,s]=e;return{name:t,bindKey:b[t],exec:s}})),S.forEach((t=>{const s=e[t];if(s){const e=y[t];y[t]=e?function(){e(...arguments),s(...arguments)}:s}})),Object(u.jsx)(l.HotKeys,{className:"Editor bp4-card bp4-elevation-0",handlers:E,children:Object(u.jsx)("div",{className:"row editor-react-ace",children:Object(u.jsx)(c.a,{...y,ref:t})})})})),_=[j];var A=e=>{const[t]=r.useContext(C.b);return Object(u.jsx)(w,{...e,editorBinding:t.editorBinding,hooks:_})};const k=e=>({editorValue:e.value,...a.a.pick(e,"highlightedLines","breakpoints","newCursorPosition")});t.b=e=>{let t;if("sourcecast"===e.editorVariant){const{editorVariant:s,editorTabs:n,...i}=e;t=(e=>t=>Object(u.jsx)(g,{...e,...t}))(i)}else{const{editorVariant:s,editorTabs:n,...i}=e;t=(e=>t=>Object(u.jsx)(A,{...e,...t}))(i)}return t(e.editorTabs[0])}}},[[1301,1,2]]]);
//# sourceMappingURL=main.7dc9a5e3.chunk.js.map